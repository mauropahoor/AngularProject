"use strict";var NU=Object.defineProperty,PU=Object.defineProperties,kU=Object.getOwnPropertyDescriptors,SP=Object.getOwnPropertySymbols,OU=Object.prototype.hasOwnProperty,LU=Object.prototype.propertyIsEnumerable,AP=(nt,Te,k)=>Te in nt?NU(nt,Te,{enumerable:!0,configurable:!0,writable:!0,value:k}):nt[Te]=k,xP=(nt,Te)=>{for(var k in Te||(Te={}))OU.call(Te,k)&&AP(nt,k,Te[k]);if(SP)for(var k of SP(Te))LU.call(Te,k)&&AP(nt,k,Te[k]);return nt},RP=(nt,Te)=>PU(nt,kU(Te));(self.webpackChunkAngularProject=self.webpackChunkAngularProject||[]).push([[179],{2011:(nt,Te,k)=>{k.d(Te,{Dh:()=>le,GT:()=>ye,cc:()=>Ne,hO:()=>Ge,on:()=>W,pX:()=>ue,xv:()=>ve});var g=k(5e3),U=k(127),N=k(5813);nt=k.hmd(nt);const ae=["ngOnDestroy"],ue=(De,ze,We,Pe={})=>new Proxy(De,{get:(ke,Ce)=>We.runOutsideAngular(()=>{var qe;if(De[Ce])return(null===(qe=null==Pe?void 0:Pe.spy)||void 0===qe?void 0:qe.get)&&Pe.spy.get(Ce,De[Ce]),De[Ce];if(ae.indexOf(Ce)>-1)return()=>{};const ne=ze.toPromise().then(he=>{const be=he&&he[Ce];return"function"==typeof be?be.bind(he):be&&be.then?be.then(Z=>We.run(()=>Z)):We.run(()=>be)});return new Proxy(()=>{},{get:(he,be)=>ne[be],apply:(he,be,Z)=>ne.then(re=>{var oe;const Ee=re&&re(...Z);return(null===(oe=null==Pe?void 0:Pe.spy)||void 0===oe?void 0:oe.apply)&&Pe.spy.apply(Ce,Z,Ee),Ee})})})}),ye=(De,ze)=>{ze.forEach(We=>{Object.getOwnPropertyNames(We.prototype||We).forEach(Pe=>{Object.defineProperty(De.prototype,Pe,Object.getOwnPropertyDescriptor(We.prototype||We,Pe))})})};class fe{constructor(ze){return ze}}const le=new g.OlP("angularfire2.app.options"),ve=new g.OlP("angularfire2.app.name");function W(De,ze,We){const ke="object"==typeof We&&We||{};ke.name=ke.name||"string"==typeof We&&We||"[DEFAULT]";const qe=U.Z.apps.filter(ne=>ne&&ne.name===ke.name)[0]||ze.runOutsideAngular(()=>U.Z.initializeApp(De,ke));try{JSON.stringify(De)!==JSON.stringify(qe.options)&&j("error",`${qe.name} Firebase App already initialized with different options${nt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(ne){}return new fe(qe)}const j=(De,...ze)=>{(0,g.X6Q)()&&"undefined"!=typeof console&&console[De](...ze)},se={provide:fe,useFactory:W,deps:[le,g.R0b,[new g.FiY,ve]]};let Ge=(()=>{class De{constructor(We){U.Z.registerVersion("angularfire",N.q4.full,"core"),U.Z.registerVersion("angularfire",N.q4.full,"app-compat"),U.Z.registerVersion("angular",g.q4F.full,We.toString())}static initializeApp(We,Pe){return{ngModule:De,providers:[{provide:le,useValue:We},{provide:ve,useValue:Pe}]}}}return De.\u0275fac=function(We){return new(We||De)(g.LFG(g.Lbi))},De.\u0275mod=g.oAB({type:De}),De.\u0275inj=g.cJS({providers:[se]}),De})();function Ne(De,ze,We,Pe,ke){const[,Ce,qe]=globalThis.\u0275AngularfireInstanceCache.find(ne=>ne[0]===De)||[];if(Ce)return function Ue(De,ze){try{return De.toString()===ze.toString()}catch(We){return De===ze}}(ke,qe)||(_e("error",`${ze} was already initialized on the ${We} Firebase App with different settings.${He?" You may need to reload as Firebase is not HMR aware.":""}`),_e("warn",{is:ke,was:qe})),Ce;{const ne=Pe();return globalThis.\u0275AngularfireInstanceCache.push([De,ne,ke]),ne}}const He=!!nt.hot,_e=(De,...ze)=>{(0,g.X6Q)()&&"undefined"!=typeof console&&console[De](...ze)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(nt,Te,k)=>{k.d(Te,{q4:()=>_o,iC:()=>Eo,HU:()=>Tu,vb:()=>Ah,JM:()=>Cu,u3:()=>Sl});var g=k(5e3),U=k(5867),N=k(5861),ae=k(9681),ue=k(2090),ye=k(4859),fe=k(1877),le=k(8766);const ve="@firebase/installations",W="0.5.9",se=`w:${W}`,Ge="FIS_v2",ze=new ue.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function We(b){return b instanceof ue.ZR&&b.code.includes("request-failed")}function Pe({projectId:b}){return`https://firebaseinstallations.googleapis.com/v1/projects/${b}/installations`}function ke(b){return{token:b.token,requestStatus:2,expiresIn:re(b.expiresIn),creationTime:Date.now()}}function Ce(b,T){return qe.apply(this,arguments)}function qe(){return(qe=(0,N.Z)(function*(b,T){const F=(yield T.json()).error;return ze.create("request-failed",{requestName:b,serverCode:F.code,serverMessage:F.message,serverStatus:F.status})})).apply(this,arguments)}function ne({apiKey:b}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":b})}function he(b,{refreshToken:T}){const M=ne(b);return M.append("Authorization",function oe(b){return`${Ge} ${b}`}(T)),M}function be(b){return Z.apply(this,arguments)}function Z(){return(Z=(0,N.Z)(function*(b){const T=yield b();return T.status>=500&&T.status<600?b():T})).apply(this,arguments)}function re(b){return Number(b.replace("s","000"))}function Ee(b,T){return de.apply(this,arguments)}function de(){return(de=(0,N.Z)(function*({appConfig:b,heartbeatServiceProvider:T},{fid:M}){const F=Pe(b),J=ne(b),X=T.getImmediate({optional:!0});if(X){const Et=yield X.getHeartbeatsHeader();Et&&J.append("x-firebase-client",Et)}const rt={method:"POST",headers:J,body:JSON.stringify({fid:M,authVersion:Ge,appId:b.appId,sdkVersion:se})},_t=yield be(()=>fetch(F,rt));if(_t.ok){const Et=yield _t.json();return{fid:Et.fid||M,registrationStatus:2,refreshToken:Et.refreshToken,authToken:ke(Et.authToken)}}throw yield Ce("Create Installation",_t)})).apply(this,arguments)}function Ve(b){return new Promise(T=>{setTimeout(T,b)})}const Zt=/^[cdef][\w-]{21}$/;function Ye(){try{const b=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(b),b[0]=112+b[0]%16;const M=function dn(b){return function ht(b){return btoa(String.fromCharCode(...b)).replace(/\+/g,"-").replace(/\//g,"_")}(b).substr(0,22)}(b);return Zt.test(M)?M:""}catch(b){return""}}function On(b){return`${b.appName}!${b.appId}`}const hn=new Map;function Xt(b,T){const M=On(b);Cn(M,T),function Ti(b,T){const M=function Sn(){return!Nr&&"BroadcastChannel"in self&&(Nr=new BroadcastChannel("[Firebase] FID Change"),Nr.onmessage=b=>{Cn(b.data.key,b.data.fid)}),Nr}();M&&M.postMessage({key:b,fid:T}),function Ui(){0===hn.size&&Nr&&(Nr.close(),Nr=null)}()}(M,T)}function Cn(b,T){const M=hn.get(b);if(M)for(const F of M)F(T)}let Nr=null;const Gn="firebase-installations-store";let Vi=null;function pt(){return Vi||(Vi=(0,le.X3)("firebase-installations-database",1,{upgrade:(b,T)=>{0===T&&b.createObjectStore(Gn)}})),Vi}function Hr(b,T){return wn.apply(this,arguments)}function wn(){return(wn=(0,N.Z)(function*(b,T){const M=On(b),J=(yield pt()).transaction(Gn,"readwrite"),X=J.objectStore(Gn),Ae=yield X.get(M);return yield X.put(T,M),yield J.done,(!Ae||Ae.fid!==T.fid)&&Xt(b,T.fid),T})).apply(this,arguments)}function en(b){return Pr.apply(this,arguments)}function Pr(){return(Pr=(0,N.Z)(function*(b){const T=On(b),F=(yield pt()).transaction(Gn,"readwrite");yield F.objectStore(Gn).delete(T),yield F.done})).apply(this,arguments)}function or(b,T){return Wr.apply(this,arguments)}function Wr(){return(Wr=(0,N.Z)(function*(b,T){const M=On(b),J=(yield pt()).transaction(Gn,"readwrite"),X=J.objectStore(Gn),Ae=yield X.get(M),rt=T(Ae);return void 0===rt?yield X.delete(M):yield X.put(rt,M),yield J.done,rt&&(!Ae||Ae.fid!==rt.fid)&&Xt(b,rt.fid),rt})).apply(this,arguments)}function bn(b){return pr.apply(this,arguments)}function pr(){return(pr=(0,N.Z)(function*(b){let T;const M=yield or(b.appConfig,F=>{const J=rs(F),X=Bt(b,J);return T=X.registrationPromise,X.installationEntry});return""===M.fid?{installationEntry:yield T}:{installationEntry:M,registrationPromise:T}})).apply(this,arguments)}function rs(b){return Bi(b||{fid:Ye(),registrationStatus:0})}function Bt(b,T){if(0===T.registrationStatus){if(!navigator.onLine)return{installationEntry:T,registrationPromise:Promise.reject(ze.create("app-offline"))};const M={fid:T.fid,registrationStatus:1,registrationTime:Date.now()},F=function dt(b,T){return st.apply(this,arguments)}(b,M);return{installationEntry:M,registrationPromise:F}}return 1===T.registrationStatus?{installationEntry:T,registrationPromise:hi(b)}:{installationEntry:T}}function st(){return(st=(0,N.Z)(function*(b,T){try{const M=yield Ee(b,T);return Hr(b.appConfig,M)}catch(M){throw We(M)&&409===M.customData.serverCode?yield en(b.appConfig):yield Hr(b.appConfig,{fid:T.fid,registrationStatus:0}),M}})).apply(this,arguments)}function hi(b){return fi.apply(this,arguments)}function fi(){return(fi=(0,N.Z)(function*(b){let T=yield jt(b.appConfig);for(;1===T.registrationStatus;)yield Ve(100),T=yield jt(b.appConfig);if(0===T.registrationStatus){const{installationEntry:M,registrationPromise:F}=yield bn(b);return F||M}return T})).apply(this,arguments)}function jt(b){return or(b,T=>{if(!T)throw ze.create("installation-not-found");return Bi(T)})}function Bi(b){return function Ln(b){return 1===b.registrationStatus&&b.registrationTime+1e4<Date.now()}(b)?{fid:b.fid,registrationStatus:0}:b}function fn(b,T){return V.apply(this,arguments)}function V(){return(V=(0,N.Z)(function*({appConfig:b,heartbeatServiceProvider:T},M){const F=z(b,M),J=he(b,M),X=T.getImmediate({optional:!0});if(X){const Et=yield X.getHeartbeatsHeader();Et&&J.append("x-firebase-client",Et)}const rt={method:"POST",headers:J,body:JSON.stringify({installation:{sdkVersion:se,appId:b.appId}})},_t=yield be(()=>fetch(F,rt));if(_t.ok)return ke(yield _t.json());throw yield Ce("Generate Auth Token",_t)})).apply(this,arguments)}function z(b,{fid:T}){return`${Pe(b)}/${T}/authTokens:generate`}function q(b){return we.apply(this,arguments)}function we(){return(we=(0,N.Z)(function*(b,T=!1){let M;const F=yield or(b.appConfig,X=>{if(!Dt(X))throw ze.create("not-registered");const Ae=X.authToken;if(!T&&an(Ae))return X;if(1===Ae.requestStatus)return M=$(b,T),X;{if(!navigator.onLine)throw ze.create("app-offline");const rt=er(X);return M=Xe(b,rt),rt}});return M?yield M:F.authToken})).apply(this,arguments)}function $(b,T){return te.apply(this,arguments)}function te(){return(te=(0,N.Z)(function*(b,T){let M=yield Fe(b.appConfig);for(;1===M.authToken.requestStatus;)yield Ve(100),M=yield Fe(b.appConfig);const F=M.authToken;return 0===F.requestStatus?q(b,T):F})).apply(this,arguments)}function Fe(b){return or(b,T=>{if(!Dt(T))throw ze.create("not-registered");return function ce(b){return 1===b.requestStatus&&b.requestTime+1e4<Date.now()}(T.authToken)?Object.assign(Object.assign({},T),{authToken:{requestStatus:0}}):T})}function Xe(b,T){return ft.apply(this,arguments)}function ft(){return(ft=(0,N.Z)(function*(b,T){try{const M=yield fn(b,T),F=Object.assign(Object.assign({},T),{authToken:M});return yield Hr(b.appConfig,F),M}catch(M){if(!We(M)||401!==M.customData.serverCode&&404!==M.customData.serverCode){const F=Object.assign(Object.assign({},T),{authToken:{requestStatus:0}});yield Hr(b.appConfig,F)}else yield en(b.appConfig);throw M}})).apply(this,arguments)}function Dt(b){return void 0!==b&&2===b.registrationStatus}function an(b){return 2===b.requestStatus&&!function vt(b){const T=Date.now();return T<b.creationTime||b.creationTime+b.expiresIn<T+36e5}(b)}function er(b){const T={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},b),{authToken:T})}function G(){return(G=(0,N.Z)(function*(b){const T=b,{installationEntry:M,registrationPromise:F}=yield bn(T);return F?F.catch(console.error):q(T).catch(console.error),M.fid})).apply(this,arguments)}function Ze(){return(Ze=(0,N.Z)(function*(b,T=!1){const M=b;return yield ct(M),(yield q(M,T)).token})).apply(this,arguments)}function ct(b){return Tt.apply(this,arguments)}function Tt(){return(Tt=(0,N.Z)(function*(b){const{registrationPromise:T}=yield bn(b);T&&(yield T)})).apply(this,arguments)}function wa(b){return ze.create("missing-app-config-values",{valueName:b})}const ni="installations",Mt=b=>{const T=b.getProvider("app").getImmediate(),M=function gr(b){if(!b||!b.options)throw wa("App Configuration");if(!b.name)throw wa("App Name");const T=["projectId","apiKey","appId"];for(const M of T)if(!b.options[M])throw wa(M);return{appName:b.name,projectId:b.options.projectId,apiKey:b.options.apiKey,appId:b.options.appId}}(T);return{app:T,appConfig:M,heartbeatServiceProvider:(0,ae._getProvider)(T,"heartbeat"),_delete:()=>Promise.resolve()}},_n=b=>{const T=b.getProvider("app").getImmediate(),M=(0,ae._getProvider)(T,ni).getImmediate();return{getId:()=>function K(b){return G.apply(this,arguments)}(M),getToken:J=>function Se(b){return Ze.apply(this,arguments)}(M,J)}};(function zr(){(0,ae._registerComponent)(new ye.wA(ni,Mt,"PUBLIC")),(0,ae._registerComponent)(new ye.wA("installations-internal",_n,"PRIVATE"))})(),(0,ae.registerVersion)(ve,W),(0,ae.registerVersion)(ve,W,"esm2017");const is="@firebase/remote-config",Fn=new ue.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class bc{constructor(T,M,F,J){this.client=T,this.storage=M,this.storageCache=F,this.logger=J}isCachedDataFresh(T,M){if(!M)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const F=Date.now()-M,J=F<=T;return this.logger.debug(`Config fetch cache check. Cache age millis: ${F}. Cache max age millis (minimumFetchIntervalMillis setting): ${T}. Is cache hit: ${J}.`),J}fetch(T){var M=this;return(0,N.Z)(function*(){const[F,J]=yield Promise.all([M.storage.getLastSuccessfulFetchTimestampMillis(),M.storage.getLastSuccessfulFetchResponse()]);if(J&&M.isCachedDataFresh(T.cacheMaxAgeMillis,F))return J;T.eTag=J&&J.eTag;const X=yield M.client.fetch(T),Ae=[M.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===X.status&&Ae.push(M.storage.setLastSuccessfulFetchResponse(X)),yield Promise.all(Ae),X})()}}function cu(b=navigator){return b.languages&&b.languages[0]||b.language}class nr{constructor(T,M,F,J,X,Ae){this.firebaseInstallations=T,this.sdkVersion=M,this.namespace=F,this.projectId=J,this.apiKey=X,this.appId=Ae}fetch(T){var M=this;return(0,N.Z)(function*(){const[F,J]=yield Promise.all([M.firebaseInstallations.getId(),M.firebaseInstallations.getToken()]),Ae=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${M.projectId}/namespaces/${M.namespace}:fetch?key=${M.apiKey}`,rt={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":T.eTag||"*"},_t={sdk_version:M.sdkVersion,app_instance_id:F,app_instance_id_token:J,app_id:M.appId,language_code:cu()},Et={method:"POST",headers:rt,body:JSON.stringify(_t)},Pt=fetch(Ae,Et),Ct=new Promise((Ni,vs)=>{T.signal.addEventListener(()=>{const Io=new Error("The operation was aborted.");Io.name="AbortError",vs(Io)})});let Kr;try{yield Promise.race([Pt,Ct]),Kr=yield Pt}catch(Ni){let vs="fetch-client-network";throw"AbortError"===Ni.name&&(vs="fetch-timeout"),Fn.create(vs,{originalErrorMessage:Ni.message})}let Nn=Kr.status;const oi=Kr.headers.get("ETag")||void 0;let ys,Mi;if(200===Kr.status){let Ni;try{Ni=yield Kr.json()}catch(vs){throw Fn.create("fetch-client-parse",{originalErrorMessage:vs.message})}ys=Ni.entries,Mi=Ni.state}if("INSTANCE_STATE_UNSPECIFIED"===Mi?Nn=500:"NO_CHANGE"===Mi?Nn=304:("NO_TEMPLATE"===Mi||"EMPTY_CONFIG"===Mi)&&(ys={}),304!==Nn&&200!==Nn)throw Fn.create("fetch-status",{httpStatus:Nn});return{status:Nn,eTag:oi,config:ys}})()}}class os{constructor(T,M){this.client=T,this.storage=M}fetch(T){var M=this;return(0,N.Z)(function*(){const F=(yield M.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return M.attemptFetch(T,F)})()}attemptFetch(T,{throttleEndTimeMillis:M,backoffCount:F}){var J=this;return(0,N.Z)(function*(){yield function Tc(b,T){return new Promise((M,F)=>{const J=Math.max(T-Date.now(),0),X=setTimeout(M,J);b.addEventListener(()=>{clearTimeout(X),F(Fn.create("fetch-throttle",{throttleEndTimeMillis:T}))})})}(T.signal,M);try{const X=yield J.client.fetch(T);return yield J.storage.deleteThrottleMetadata(),X}catch(X){if(!function Ap(b){if(!(b instanceof ue.ZR&&b.customData))return!1;const T=Number(b.customData.httpStatus);return 429===T||500===T||503===T||504===T}(X))throw X;const Ae={throttleEndTimeMillis:Date.now()+(0,ue.$s)(F),backoffCount:F+1};return yield J.storage.setThrottleMetadata(Ae),J.attemptFetch(T,Ae)}})()}}class Rp{constructor(T,M,F,J,X){this.app=T,this._client=M,this._storageCache=F,this._storage=J,this._logger=X,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Ia(b,T){const M=b.target.error||void 0;return Fn.create(T,{originalErrorMessage:M&&M.message})}const Fo="app_namespace_store";class Ac{constructor(T,M,F,J=function Np(){return new Promise((b,T)=>{try{const M=indexedDB.open("firebase_remote_config",1);M.onerror=F=>{T(Ia(F,"storage-open"))},M.onsuccess=F=>{b(F.target.result)},M.onupgradeneeded=F=>{0===F.oldVersion&&F.target.result.createObjectStore(Fo,{keyPath:"compositeKey"})}}catch(M){T(Fn.create("storage-open",{originalErrorMessage:M}))}})}()){this.appId=T,this.appName=M,this.namespace=F,this.openDbPromise=J}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(T){return this.set("last_fetch_status",T)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(T){return this.set("last_successful_fetch_timestamp_millis",T)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(T){return this.set("last_successful_fetch_response",T)}getActiveConfig(){return this.get("active_config")}setActiveConfig(T){return this.set("active_config",T)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(T){return this.set("active_config_etag",T)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(T){return this.set("throttle_metadata",T)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(T){var M=this;return(0,N.Z)(function*(){const F=yield M.openDbPromise;return new Promise((J,X)=>{const rt=F.transaction([Fo],"readonly").objectStore(Fo),_t=M.createCompositeKey(T);try{const Et=rt.get(_t);Et.onerror=Pt=>{X(Ia(Pt,"storage-get"))},Et.onsuccess=Pt=>{const Ct=Pt.target.result;J(Ct?Ct.value:void 0)}}catch(Et){X(Fn.create("storage-get",{originalErrorMessage:Et&&Et.message}))}})})()}set(T,M){var F=this;return(0,N.Z)(function*(){const J=yield F.openDbPromise;return new Promise((X,Ae)=>{const _t=J.transaction([Fo],"readwrite").objectStore(Fo),Et=F.createCompositeKey(T);try{const Pt=_t.put({compositeKey:Et,value:M});Pt.onerror=Ct=>{Ae(Ia(Ct,"storage-set"))},Pt.onsuccess=()=>{X()}}catch(Pt){Ae(Fn.create("storage-set",{originalErrorMessage:Pt&&Pt.message}))}})})()}delete(T){var M=this;return(0,N.Z)(function*(){const F=yield M.openDbPromise;return new Promise((J,X)=>{const rt=F.transaction([Fo],"readwrite").objectStore(Fo),_t=M.createCompositeKey(T);try{const Et=rt.delete(_t);Et.onerror=Pt=>{X(Ia(Pt,"storage-delete"))},Et.onsuccess=()=>{J()}}catch(Et){X(Fn.create("storage-delete",{originalErrorMessage:Et&&Et.message}))}})})()}createCompositeKey(T){return[this.appId,this.appName,this.namespace,T].join()}}class Uo{constructor(T){this.storage=T}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var T=this;return(0,N.Z)(function*(){const M=T.storage.getLastFetchStatus(),F=T.storage.getLastSuccessfulFetchTimestampMillis(),J=T.storage.getActiveConfig(),X=yield M;X&&(T.lastFetchStatus=X);const Ae=yield F;Ae&&(T.lastSuccessfulFetchTimestampMillis=Ae);const rt=yield J;rt&&(T.activeConfig=rt)})()}setLastFetchStatus(T){return this.lastFetchStatus=T,this.storage.setLastFetchStatus(T)}setLastSuccessfulFetchTimestampMillis(T){return this.lastSuccessfulFetchTimestampMillis=T,this.storage.setLastSuccessfulFetchTimestampMillis(T)}setActiveConfig(T){return this.activeConfig=T,this.storage.setActiveConfig(T)}}function e_(){return Ca.apply(this,arguments)}function Ca(){return(Ca=(0,N.Z)(function*(){if(!(0,ue.hl)())return!1;try{return yield(0,ue.eu)()}catch(b){return!1}})).apply(this,arguments)}!function Pp(){(0,ae._registerComponent)(new ye.wA("remote-config",function b(T,{instanceIdentifier:M}){const F=T.getProvider("app").getImmediate(),J=T.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw Fn.create("registration-window");if(!(0,ue.hl)())throw Fn.create("indexed-db-unavailable");const{projectId:X,apiKey:Ae,appId:rt}=F.options;if(!X)throw Fn.create("registration-project-id");if(!Ae)throw Fn.create("registration-api-key");if(!rt)throw Fn.create("registration-app-id");const _t=new Ac(rt,F.name,M=M||"firebase"),Et=new Uo(_t),Pt=new fe.Yd(is);Pt.logLevel=fe.in.ERROR;const Ct=new nr(J,ae.SDK_VERSION,M,X,Ae,rt),Kr=new os(Ct,_t),Nn=new bc(Kr,_t,Et,Pt),oi=new Rp(F,Nn,Et,_t,Pt);return function pn(b){const T=(0,ue.m9)(b);T._initializePromise||(T._initializePromise=T._storageCache.loadFromStorage().then(()=>{T._isInitializationComplete=!0}))}(oi),oi},"PUBLIC").setMultipleInstances(!0)),(0,ae.registerVersion)(is,"0.3.8"),(0,ae.registerVersion)(is,"0.3.8","esm2017")}();const Ms="/firebase-messaging-sw.js",mi="/firebase-cloud-messaging-push-scope",Vo="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Ta="google.c.a.c_id",_h="google.c.a.c_l",kp="google.c.a.ts",to="google.c.a.e";var us=(()=>{return(b=us||(us={})).PUSH_RECEIVED="push-received",b.NOTIFICATION_CLICKED="notification-clicked",us;var b})();function Ai(b){const T=new Uint8Array(b);return btoa(String.fromCharCode(...T)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Rc(b){const M=(b+"=".repeat((4-b.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),F=atob(M),J=new Uint8Array(F.length);for(let X=0;X<F.length;++X)J[X]=F.charCodeAt(X);return J}const Or="fcm_token_details_db",Mc="fcm_token_object_Store";function Nc(b){return du.apply(this,arguments)}function du(){return du=(0,N.Z)(function*(b){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(X=>X.name).includes(Or))return null;let T=null;return(yield(0,le.X3)(Or,5,{upgrade:(F=(0,N.Z)(function*(J,X,Ae,rt){var _t;if(X<2||!J.objectStoreNames.contains(Mc))return;const Et=rt.objectStore(Mc),Pt=yield Et.index("fcmSenderId").get(b);if(yield Et.clear(),Pt)if(2===X){const Ct=Pt;if(!Ct.auth||!Ct.p256dh||!Ct.endpoint)return;T={token:Ct.fcmToken,createTime:null!==(_t=Ct.createTime)&&void 0!==_t?_t:Date.now(),subscriptionOptions:{auth:Ct.auth,p256dh:Ct.p256dh,endpoint:Ct.endpoint,swScope:Ct.swScope,vapidKey:"string"==typeof Ct.vapidKey?Ct.vapidKey:Ai(Ct.vapidKey)}}}else if(3===X){const Ct=Pt;T={token:Ct.fcmToken,createTime:Ct.createTime,subscriptionOptions:{auth:Ai(Ct.auth),p256dh:Ai(Ct.p256dh),endpoint:Ct.endpoint,swScope:Ct.swScope,vapidKey:Ai(Ct.vapidKey)}}}else if(4===X){const Ct=Pt;T={token:Ct.fcmToken,createTime:Ct.createTime,subscriptionOptions:{auth:Ai(Ct.auth),p256dh:Ai(Ct.p256dh),endpoint:Ct.endpoint,swScope:Ct.swScope,vapidKey:Ai(Ct.vapidKey)}}}}),function(X,Ae,rt,_t){return F.apply(this,arguments)})})).close(),yield(0,le.Lj)(Or),yield(0,le.Lj)("fcm_vapid_details_db"),yield(0,le.Lj)("undefined"),hu(T)?T:null;var F}),du.apply(this,arguments)}function hu(b){if(!b||!b.subscriptionOptions)return!1;const{subscriptionOptions:T}=b;return"number"==typeof b.createTime&&b.createTime>0&&"string"==typeof b.token&&b.token.length>0&&"string"==typeof T.auth&&T.auth.length>0&&"string"==typeof T.p256dh&&T.p256dh.length>0&&"string"==typeof T.endpoint&&T.endpoint.length>0&&"string"==typeof T.swScope&&T.swScope.length>0&&"string"==typeof T.vapidKey&&T.vapidKey.length>0}const ls="firebase-messaging-store";let fl=null;function yn(){return fl||(fl=(0,le.X3)("firebase-messaging-database",1,{upgrade:(b,T)=>{0===T&&b.createObjectStore(ls)}})),fl}function Da(b){return Ns.apply(this,arguments)}function Ns(){return(Ns=(0,N.Z)(function*(b){const T=mr(b),F=yield(yield yn()).transaction(ls).objectStore(ls).get(T);if(F)return F;{const J=yield Nc(b.appConfig.senderId);if(J)return yield gn(b,J),J}})).apply(this,arguments)}function gn(b,T){return pu.apply(this,arguments)}function pu(){return(pu=(0,N.Z)(function*(b,T){const M=mr(b),J=(yield yn()).transaction(ls,"readwrite");return yield J.objectStore(ls).put(T,M),yield J.done,T})).apply(this,arguments)}function Sa(b){return no.apply(this,arguments)}function no(){return(no=(0,N.Z)(function*(b){const T=mr(b),F=(yield yn()).transaction(ls,"readwrite");yield F.objectStore(ls).delete(T),yield F.done})).apply(this,arguments)}function mr({appConfig:b}){return b.appId}const Un=new ue.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function cs(b,T){return _r.apply(this,arguments)}function _r(){return(_r=(0,N.Z)(function*(b,T){const M=yield ks(b),F=Aa(T),J={method:"POST",headers:M,body:JSON.stringify(F)};let X;try{X=yield(yield fetch(Ps(b.appConfig),J)).json()}catch(Ae){throw Un.create("token-subscribe-failed",{errorInfo:Ae})}if(X.error)throw Un.create("token-subscribe-failed",{errorInfo:X.error.message});if(!X.token)throw Un.create("token-subscribe-no-token");return X.token})).apply(this,arguments)}function Bo(b,T){return $i.apply(this,arguments)}function $i(){return($i=(0,N.Z)(function*(b,T){const M=yield ks(b),F=Aa(T.subscriptionOptions),J={method:"PATCH",headers:M,body:JSON.stringify(F)};let X;try{X=yield(yield fetch(`${Ps(b.appConfig)}/${T.token}`,J)).json()}catch(Ae){throw Un.create("token-update-failed",{errorInfo:Ae})}if(X.error)throw Un.create("token-update-failed",{errorInfo:X.error.message});if(!X.token)throw Un.create("token-update-no-token");return X.token})).apply(this,arguments)}function pl(b,T){return ri.apply(this,arguments)}function ri(){return(ri=(0,N.Z)(function*(b,T){const F={method:"DELETE",headers:yield ks(b)};try{const X=yield(yield fetch(`${Ps(b.appConfig)}/${T}`,F)).json();if(X.error)throw Un.create("token-unsubscribe-failed",{errorInfo:X.error.message})}catch(J){throw Un.create("token-unsubscribe-failed",{errorInfo:J})}})).apply(this,arguments)}function Ps({projectId:b}){return`https://fcmregistrations.googleapis.com/v1/projects/${b}/registrations`}function ks(b){return gt.apply(this,arguments)}function gt(){return(gt=(0,N.Z)(function*({appConfig:b,installations:T}){const M=yield T.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":b.apiKey,"x-goog-firebase-installations-auth":`FIS ${M}`})})).apply(this,arguments)}function Aa({p256dh:b,auth:T,endpoint:M,vapidKey:F}){const J={web:{endpoint:M,auth:T,p256dh:b}};return F!==Vo&&(J.web.applicationPubKey=F),J}const xa=6048e5;function Pc(b){return Ra.apply(this,arguments)}function Ra(){return(Ra=(0,N.Z)(function*(b){const T=yield Vn(b.swRegistration,b.vapidKey),M={vapidKey:b.vapidKey,swScope:b.swRegistration.scope,endpoint:T.endpoint,auth:Ai(T.getKey("auth")),p256dh:Ai(T.getKey("p256dh"))},F=yield Da(b.firebaseDependencies);if(F){if(Pa(F.subscriptionOptions,M))return Date.now()>=F.createTime+xa?yh(b,{token:F.token,createTime:Date.now(),subscriptionOptions:M}):F.token;try{yield pl(b.firebaseDependencies,F.token)}catch(J){console.warn(J)}return $t(b.firebaseDependencies,M)}return $t(b.firebaseDependencies,M)})).apply(this,arguments)}function gl(b){return Ma.apply(this,arguments)}function Ma(){return(Ma=(0,N.Z)(function*(b){const T=yield Da(b.firebaseDependencies);T&&(yield pl(b.firebaseDependencies,T.token),yield Sa(b.firebaseDependencies));const M=yield b.swRegistration.pushManager.getSubscription();return!M||M.unsubscribe()})).apply(this,arguments)}function yh(b,T){return Re.apply(this,arguments)}function Re(){return(Re=(0,N.Z)(function*(b,T){try{const M=yield Bo(b.firebaseDependencies,T),F=Object.assign(Object.assign({},T),{token:M,createTime:Date.now()});return yield gn(b.firebaseDependencies,F),M}catch(M){throw yield gl(b),M}})).apply(this,arguments)}function $t(b,T){return Na.apply(this,arguments)}function Na(){return(Na=(0,N.Z)(function*(b,T){const F={token:yield cs(b,T),createTime:Date.now(),subscriptionOptions:T};return yield gn(b,F),F.token})).apply(this,arguments)}function Vn(b,T){return Os.apply(this,arguments)}function Os(){return(Os=(0,N.Z)(function*(b,T){return(yield b.pushManager.getSubscription())||b.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Rc(T)})})).apply(this,arguments)}function Pa(b,T){return T.vapidKey===b.vapidKey&&T.endpoint===b.endpoint&&T.auth===b.auth&&T.p256dh===b.p256dh}function Gr(b){const T={from:b.from,collapseKey:b.collapse_key,messageId:b.fcmMessageId};return function ml(b,T){if(!T.notification)return;b.notification={};const M=T.notification.title;M&&(b.notification.title=M);const F=T.notification.body;F&&(b.notification.body=F);const J=T.notification.image;J&&(b.notification.image=J)}(T,b),function _l(b,T){!T.data||(b.data=T.data)}(T,b),function kc(b,T){if(!T.fcmOptions)return;b.fcmOptions={};const M=T.fcmOptions.link;M&&(b.fcmOptions.link=M);const F=T.fcmOptions.analytics_label;F&&(b.fcmOptions.analyticsLabel=F)}(T,b),T}function Oc(b){return"object"==typeof b&&!!b&&Ta in b}function ka(b,T){const M=[];for(let F=0;F<b.length;F++)M.push(b.charAt(F)),F<T.length&&M.push(T.charAt(F));return M.join("")}function ar(b){return Un.create("missing-app-config-values",{valueName:b})}ka("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),ka("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class xi{constructor(T,M,F){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const J=function jo(b){if(!b||!b.options)throw ar("App Configuration Object");if(!b.name)throw ar("App Name");const T=["projectId","apiKey","appId","messagingSenderId"],{options:M}=b;for(const F of T)if(!M[F])throw ar(F);return{appName:b.name,projectId:M.projectId,apiKey:M.apiKey,appId:M.appId,senderId:M.messagingSenderId}}(T);this.firebaseDependencies={app:T,appConfig:J,installations:M,analyticsProvider:F}}_delete(){return Promise.resolve()}}function yl(b){return Hi.apply(this,arguments)}function Hi(){return(Hi=(0,N.Z)(function*(b){try{b.swRegistration=yield navigator.serviceWorker.register(Ms,{scope:mi}),b.swRegistration.update().catch(()=>{})}catch(T){throw Un.create("failed-service-worker-registration",{browserErrorMessage:T.message})}})).apply(this,arguments)}function ds(b,T){return Oa.apply(this,arguments)}function Oa(){return(Oa=(0,N.Z)(function*(b,T){if(!T&&!b.swRegistration&&(yield yl(b)),T||!b.swRegistration){if(!(T instanceof ServiceWorkerRegistration))throw Un.create("invalid-sw-registration");b.swRegistration=T}})).apply(this,arguments)}function Lc(b,T){return La.apply(this,arguments)}function La(){return(La=(0,N.Z)(function*(b,T){T?b.vapidKey=T:b.vapidKey||(b.vapidKey=Vo)})).apply(this,arguments)}function ro(){return(ro=(0,N.Z)(function*(b,T){if(!navigator)throw Un.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Un.create("permission-blocked");return yield Lc(b,null==T?void 0:T.vapidKey),yield ds(b,null==T?void 0:T.serviceWorkerRegistration),Pc(b)})).apply(this,arguments)}function vl(b,T,M){return Fa.apply(this,arguments)}function Fa(){return(Fa=(0,N.Z)(function*(b,T,M){const F=El(T);(yield b.firebaseDependencies.analyticsProvider.get()).logEvent(F,{message_id:M[Ta],message_name:M[_h],message_time:M[kp],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function El(b){switch(b){case us.NOTIFICATION_CLICKED:return"notification_open";case us.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function mu(){return(mu=(0,N.Z)(function*(b,T){const M=T.data;if(!M.isFirebaseMessaging)return;b.onMessageHandler&&M.messageType===us.PUSH_RECEIVED&&("function"==typeof b.onMessageHandler?b.onMessageHandler(Gr(M)):b.onMessageHandler.next(Gr(M)));const F=M.data;Oc(F)&&"1"===F[to]&&(yield vl(b,M.messageType,F))})).apply(this,arguments)}const io="@firebase/messaging",so=b=>{const T=new xi(b.getProvider("app").getImmediate(),b.getProvider("installations-internal").getImmediate(),b.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",M=>function Op(b,T){return mu.apply(this,arguments)}(T,M)),T},Uc=b=>{const T=b.getProvider("messaging").getImmediate();return{getToken:F=>function Fc(b,T){return ro.apply(this,arguments)}(T,F)}};function $o(){return Wi.apply(this,arguments)}function Wi(){return(Wi=(0,N.Z)(function*(){try{yield(0,ue.eu)()}catch(b){return!1}return"undefined"!=typeof window&&(0,ue.hl)()&&(0,ue.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function vh(){(0,ae._registerComponent)(new ye.wA("messaging",so,"PUBLIC")),(0,ae._registerComponent)(new ye.wA("messaging-internal",Uc,"PRIVATE")),(0,ae.registerVersion)(io,"0.9.13"),(0,ae.registerVersion)(io,"0.9.13","esm2017")}();const Vc="analytics",Lp="firebase_id",Va="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",_u="https://www.googletagmanager.com/gtag/js",vr=new fe.Yd("@firebase/analytics");function Ih(b){return Promise.all(b.map(T=>T.catch(M=>M)))}function oo(b,T){const M=document.createElement("script");M.src=`${_u}?l=${b}&id=${T}`,M.async=!0,document.head.appendChild(M)}function Bc(b,T,M,F,J,X){return jc.apply(this,arguments)}function jc(){return(jc=(0,N.Z)(function*(b,T,M,F,J,X){const Ae=F[J];try{if(Ae)yield T[Ae];else{const _t=(yield Ih(M)).find(Et=>Et.measurementId===J);_t&&(yield T[_t.appId])}}catch(rt){vr.error(rt)}b("config",J,X)})).apply(this,arguments)}function ao(b,T,M,F,J){return Ba.apply(this,arguments)}function Ba(){return(Ba=(0,N.Z)(function*(b,T,M,F,J){try{let X=[];if(J&&J.send_to){let Ae=J.send_to;Array.isArray(Ae)||(Ae=[Ae]);const rt=yield Ih(M);for(const _t of Ae){const Et=rt.find(Ct=>Ct.measurementId===_t),Pt=Et&&T[Et.appId];if(!Pt){X=[];break}X.push(Pt)}}0===X.length&&(X=Object.values(T)),yield Promise.all(X),b("event",F,J||{})}catch(X){vr.error(X)}})).apply(this,arguments)}function Zn(){const b=window.document.getElementsByTagName("script");for(const T of Object.values(b))if(T.src&&T.src.includes(_u))return T;return null}const at=new ue.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Cl=new class Ri{constructor(T={},M=1e3){this.throttleMetadata=T,this.intervalMillis=M}getThrottleMetadata(T){return this.throttleMetadata[T]}setThrottleMetadata(T,M){this.throttleMetadata[T]=M}deleteThrottleMetadata(T){delete this.throttleMetadata[T]}};function Wo(b){return new Headers({Accept:"application/json","x-goog-api-key":b})}function zo(b){return jn.apply(this,arguments)}function jn(){return(jn=(0,N.Z)(function*(b){var T;const{appId:M,apiKey:F}=b,J={method:"GET",headers:Wo(F)},X=Va.replace("{app-id}",M),Ae=yield fetch(X,J);if(200!==Ae.status&&304!==Ae.status){let rt="";try{const _t=yield Ae.json();(null===(T=_t.error)||void 0===T?void 0:T.message)&&(rt=_t.error.message)}catch(_t){}throw at.create("config-fetch-failed",{httpStatus:Ae.status,responseMessage:rt})}return Ae.json()})).apply(this,arguments)}function Go(b){return uo.apply(this,arguments)}function uo(){return(uo=(0,N.Z)(function*(b,T=Cl,M){const{appId:F,apiKey:J,measurementId:X}=b.options;if(!F)throw at.create("no-app-id");if(!J){if(X)return{measurementId:X,appId:F};throw at.create("no-api-key")}const Ae=T.getThrottleMetadata(F)||{backoffCount:0,throttleEndTimeMillis:Date.now()},rt=new Wc;return setTimeout((0,N.Z)(function*(){rt.abort()}),void 0!==M?M:6e4),ps({appId:F,apiKey:J,measurementId:X},Ae,rt,T)})).apply(this,arguments)}function ps(b,T,M){return Rt.apply(this,arguments)}function Rt(){return(Rt=(0,N.Z)(function*(b,{throttleEndTimeMillis:T,backoffCount:M},F,J=Cl){const{appId:X,measurementId:Ae}=b;try{yield $c(F,T)}catch(rt){if(Ae)return vr.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Ae} provided in the "measurementId" field in the local Firebase config. [${rt.message}]`),{appId:X,measurementId:Ae};throw rt}try{const rt=yield zo(b);return J.deleteThrottleMetadata(X),rt}catch(rt){if(!Hc(rt)){if(J.deleteThrottleMetadata(X),Ae)return vr.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Ae} provided in the "measurementId" field in the local Firebase config. [${rt.message}]`),{appId:X,measurementId:Ae};throw rt}const _t=503===Number(rt.customData.httpStatus)?(0,ue.$s)(M,J.intervalMillis,30):(0,ue.$s)(M,J.intervalMillis),Et={throttleEndTimeMillis:Date.now()+_t,backoffCount:M+1};return J.setThrottleMetadata(X,Et),vr.debug(`Calling attemptFetch again in ${_t} millis`),ps(b,Et,F,J)}})).apply(this,arguments)}function $c(b,T){return new Promise((M,F)=>{const J=Math.max(T-Date.now(),0),X=setTimeout(M,J);b.addEventListener(()=>{clearTimeout(X),F(at.create("fetch-throttle",{throttleEndTimeMillis:T}))})})}function Hc(b){if(!(b instanceof ue.ZR&&b.customData))return!1;const T=Number(b.customData.httpStatus);return 429===T||500===T||503===T||504===T}class Wc{constructor(){this.listeners=[]}addEventListener(T){this.listeners.push(T)}abort(){this.listeners.forEach(T=>T())}}function bh(){return xn.apply(this,arguments)}function xn(){return(xn=(0,N.Z)(function*(){if(!(0,ue.hl)())return vr.warn(at.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,ue.eu)()}catch(b){return vr.warn(at.create("indexeddb-unavailable",{errorInfo:b}).message),!1}return!0})).apply(this,arguments)}function gs(){return(gs=(0,N.Z)(function*(b,T,M,F,J,X,Ae){var rt;const _t=Go(b);_t.then(Nn=>{M[Nn.measurementId]=Nn.appId,b.options.measurementId&&Nn.measurementId!==b.options.measurementId&&vr.warn(`The measurement ID in the local Firebase config (${b.options.measurementId}) does not match the measurement ID fetched from the server (${Nn.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Nn=>vr.error(Nn)),T.push(_t);const Et=bh().then(Nn=>{if(Nn)return F.getId()}),[Pt,Ct]=yield Promise.all([_t,Et]);Zn()||oo(X,Pt.measurementId),J("js",new Date);const Kr=null!==(rt=null==Ae?void 0:Ae.config)&&void 0!==rt?rt:{};return Kr.origin="firebase",Kr.update=!0,null!=Ct&&(Kr[Lp]=Ct),J("config",Pt.measurementId,Kr),Pt.measurementId})).apply(this,arguments)}class lo{constructor(T){this.app=T}_delete(){return delete ii[this.app.options.appId],Promise.resolve()}}let ii={},qo=[];const co={};let Fs,Zo,ho="dataLayer",ja=!1;function fo(b,T,M){!function Ha(){const b=[];if((0,ue.ru)()&&b.push("This is a browser extension environment."),(0,ue.zI)()||b.push("Cookies are not available."),b.length>0){const T=b.map((F,J)=>`(${J+1}) ${F}`).join(" "),M=at.create("invalid-analytics-context",{errorInfo:T});vr.warn(M.message)}}();const F=b.options.appId;if(!F)throw at.create("no-app-id");if(!b.options.apiKey){if(!b.options.measurementId)throw at.create("no-api-key");vr.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${b.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=ii[F])throw at.create("already-exists",{id:F});if(!ja){!function Ho(b){let T=[];Array.isArray(window[b])?T=window[b]:window[b]=T}(ho);const{wrappedGtag:X,gtagCore:Ae}=function Fp(b,T,M,F,J){let X=function(...Ae){window[F].push(arguments)};return window[J]&&"function"==typeof window[J]&&(X=window[J]),window[J]=function Ch(b,T,M,F){function X(){return(X=(0,N.Z)(function*(Ae,rt,_t){try{"event"===Ae?yield ao(b,T,M,rt,_t):"config"===Ae?yield Bc(b,T,M,F,rt,_t):b("set",rt)}catch(Et){vr.error(Et)}})).apply(this,arguments)}return function J(Ae,rt,_t){return X.apply(this,arguments)}}(X,b,T,M),{gtagCore:X,wrappedGtag:window[J]}}(ii,qo,co,ho,"gtag");Zo=X,Fs=Ae,ja=!0}return ii[F]=function yu(b,T,M,F,J,X,Ae){return gs.apply(this,arguments)}(b,qo,co,T,Fs,ho,M),new lo(b)}function Dr(){return(Dr=(0,N.Z)(function*(b,T,M,F,J){if(J&&J.global)b("event",M,F);else{const X=yield T;b("event",M,Object.assign(Object.assign({},F),{send_to:X}))}})).apply(this,arguments)}function vu(){return go.apply(this,arguments)}function go(){return(go=(0,N.Z)(function*(){if((0,ue.ru)()||!(0,ue.zI)()||!(0,ue.hl)())return!1;try{return yield(0,ue.eu)()}catch(b){return!1}})).apply(this,arguments)}const qr="@firebase/analytics";!function Bs(){(0,ae._registerComponent)(new ye.wA(Vc,(T,{options:M})=>fo(T.getProvider("app").getImmediate(),T.getProvider("installations-internal").getImmediate(),M),"PUBLIC")),(0,ae._registerComponent)(new ye.wA("analytics-internal",function b(T){try{const M=T.getProvider(Vc).getImmediate();return{logEvent:(F,J,X)=>function Yo(b,T,M,F){b=(0,ue.m9)(b),function bl(b,T,M,F,J){return Dr.apply(this,arguments)}(Zo,ii[b.app.options.appId],T,M,F).catch(J=>vr.error(J))}(M,F,J,X)}}catch(M){throw at.create("interop-component-reg-failed",{reason:M})}},"PRIVATE")),(0,ae.registerVersion)(qr,"0.7.9"),(0,ae.registerVersion)(qr,"0.7.9","esm2017")}();var mo=k(4408),Yn=k(7565);const Ga=new class za extends Yn.v{}(class Qo extends mo.o{constructor(T,M){super(T,M),this.scheduler=T,this.work=M}schedule(T,M=0){return M>0?super.schedule(T,M):(this.delay=M,this.state=T,this.scheduler.flush(this),this)}execute(T,M){return M>0||this.closed?super.execute(T,M):this._execute(T,M)}requestAsyncId(T,M,F=0){return null!=F&&F>0||null==F&&this.delay>0?super.requestAsyncId(T,M,F):T.flush(this)}});var Sh=k(4986),Vr=k(8306),si=k(8505),Jo=k(9468),Xo=k(5363);const _o=new g.GfV("7.3.0"),Eu="__angularfire_symbol__analyticsIsSupportedValue",_s="__angularfire_symbol__analyticsIsSupported",qa="__angularfire_symbol__remoteConfigIsSupportedValue",Tl="__angularfire_symbol__remoteConfigIsSupported",Nt="__angularfire_symbol__messagingIsSupportedValue",wu="__angularfire_symbol__messagingIsSupported";function Cu(b,T,M){if(T){if(1===T.length)return T[0];const X=T.filter(Ae=>Ae.app===M);if(1===X.length)return X[0]}return M.container.getProvider(b).getImmediate({optional:!0})}globalThis[_s]||(globalThis[_s]=vu().then(b=>globalThis[Eu]=b).catch(()=>globalThis[Eu]=!1)),globalThis[wu]||(globalThis[wu]=$o().then(b=>globalThis[Nt]=b).catch(()=>globalThis[Nt]=!1)),globalThis[Tl]||(globalThis[Tl]=e_().then(b=>globalThis[qa]=b).catch(()=>globalThis[qa]=!1));const Ah=(b,T)=>{const M=T?[T]:(0,U.C6)(),F=[];return M.forEach(J=>{J.container.getProvider(b).instances.forEach(Ae=>{F.includes(Ae)||F.push(Ae)})}),F};function wr(){}class Dl{constructor(T,M=Ga){this.zone=T,this.delegate=M}now(){return this.delegate.now()}schedule(T,M,F){const J=this.zone;return this.delegate.schedule(function(Ae){J.runGuarded(()=>{T.apply(this,[Ae])})},M,F)}}class bu{constructor(T){this.zone=T,this.task=null}call(T,M){const F=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",wr,{},wr,wr)),M.pipe((0,si.b)({next:F,complete:F,error:F})).subscribe(T).add(F)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Tu=(()=>{class b{constructor(M){this.ngZone=M,this.outsideAngular=M.runOutsideAngular(()=>new Dl(Zone.current)),this.insideAngular=M.run(()=>new Dl(Zone.current,Sh.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return b.\u0275fac=function(M){return new(M||b)(g.LFG(g.R0b))},b.\u0275prov=g.Yz7({token:b,factory:b.\u0275fac,providedIn:"root"}),b})();function vo(){const b=globalThis.\u0275AngularFireScheduler;if(!b)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return b}function An(b){return vo().ngZone.runOutsideAngular(()=>b())}function rr(b){return vo().ngZone.run(()=>b())}function Eo(b){return vo(),function wo(b){return function(M){return(M=M.lift(new bu(b.ngZone))).pipe((0,Jo.R)(b.outsideAngular),(0,Xo.Q)(b.insideAngular))}}(vo())(b)}const xh=(b,T)=>function(){const F=arguments;return T&&setTimeout(()=>{"scheduled"===T.state&&T.invoke()},10),rr(()=>b.apply(void 0,F))},Sl=(b,T)=>function(){let M;const F=arguments;for(let X=0;X<arguments.length;X++)"function"==typeof F[X]&&(T&&(M||(M=rr(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",wr,{},wr,wr)))),F[X]=xh(F[X],M));const J=An(()=>b.apply(this,F));if(!T){if(J instanceof Vr.y){const X=vo();return J.pipe((0,Jo.R)(X.outsideAngular),(0,Xo.Q)(X.insideAngular))}return rr(()=>J)}return J instanceof Vr.y?J.pipe(Eo):J instanceof Promise?rr(()=>new Promise((X,Ae)=>J.then(rt=>rr(()=>X(rt)),rt=>rr(()=>Ae(rt))))):"function"==typeof J&&M?function(){return setTimeout(()=>{M&&"scheduled"===M.state&&M.invoke()},10),J.apply(this,arguments)}:rr(()=>J)}},198:(nt,Te,k)=>{k.d(Te,{$:()=>Ps,A:()=>j,B:()=>Ne,G:()=>_n,H:()=>un,J:()=>os,L:()=>an,M:()=>Ca,N:()=>ba,P:()=>Eu,Q:()=>Ta,R:()=>Bs,T:()=>_h,U:()=>Vo,V:()=>us,W:()=>Ai,X:()=>Nc,Y:()=>gu,Z:()=>cs,_:()=>Bo,a:()=>Fr,a0:()=>Pc,a1:()=>gl,a2:()=>yh,a3:()=>$t,a4:()=>Vn,a5:()=>Pa,a6:()=>ml,a7:()=>_l,a8:()=>Oc,a9:()=>ka,aA:()=>vs,aB:()=>Nn,aC:()=>Sl,aD:()=>xh,aE:()=>je,aI:()=>Wo,aL:()=>to,aa:()=>yl,ab:()=>ds,ac:()=>Lc,af:()=>vl,ag:()=>El,ah:()=>Op,ak:()=>ls,al:()=>yr,an:()=>_u,ao:()=>jc,ap:()=>qn,aq:()=>be,ar:()=>Ft,as:()=>ct,at:()=>We,au:()=>js,av:()=>Rh,aw:()=>Pe,ax:()=>ne,ay:()=>re,az:()=>vt,b:()=>at,c:()=>r_,d:()=>Dl,e:()=>Ah,f:()=>M,g:()=>_t,h:()=>X,i:()=>fo,j:()=>Ct,k:()=>Hp,l:()=>Ga,m:()=>zp,n:()=>e0,o:()=>le,r:()=>Sh,s:()=>Yn,u:()=>Xo});var g=k(5861),U=k(2090),N=k(9681),ae=k(655),ue=k(1877),ye=k(4859);const le={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},j={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const Ne=function se(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Ue=function Ge(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},He=new U.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),De=new ue.Yd("@firebase/auth");function ze(v,...p){De.logLevel<=ue.in.ERROR&&De.error(`Auth (${N.SDK_VERSION}): ${v}`,...p)}function We(v,...p){throw qe(v,...p)}function Pe(v,...p){return qe(v,...p)}function ke(v,p,m){const I=Object.assign(Object.assign({},Ue()),{[p]:m});return new U.LL("auth","Firebase",I).create(p,{appName:v.name})}function Ce(v,p,m){if(!(p instanceof m))throw m.name!==p.constructor.name&&We(v,"argument-error"),ke(v,"argument-error",`Type of ${p.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function qe(v,...p){if("string"!=typeof v){const m=p[0],I=[...p.slice(1)];return I[0]&&(I[0].appName=v.name),v._errorFactory.create(m,...I)}return He.create(v,...p)}function ne(v,p,...m){if(!v)throw qe(p,...m)}function he(v){const p="INTERNAL ASSERTION FAILED: "+v;throw ze(p),new Error(p)}function be(v,p){v||he(p)}const Z=new Map;function re(v){be(v instanceof Function,"Expected a class definition");let p=Z.get(v);return p?(be(p instanceof v,"Instance stored in cache mismatched with class"),p):(p=new v,Z.set(v,p),p)}function de(){var v;return"undefined"!=typeof self&&(null===(v=self.location)||void 0===v?void 0:v.href)||""}function Ve(){return"http:"===ht()||"https:"===ht()}function ht(){var v;return"undefined"!=typeof self&&(null===(v=self.location)||void 0===v?void 0:v.protocol)||null}class Ye{constructor(p,m){this.shortDelay=p,this.longDelay=m,be(m>p,"Short delay should be less than long delay!"),this.isMobile=(0,U.uI)()||(0,U.b$)()}get(){return function Zt(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Ve()||(0,U.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function dn(v,p){be(v.emulator,"Emulator should always be set here");const{url:m}=v.emulator;return p?`${m}${p.startsWith("/")?p.slice(1):p}`:m}class On{static initialize(p,m,I){this.fetchImpl=p,m&&(this.headersImpl=m),I&&(this.responseImpl=I)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void he("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void he("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void he("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const hn={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Xt=new Ye(3e4,6e4);function Vt(v,p){return v.tenantId&&!p.tenantId?Object.assign(Object.assign({},p),{tenantId:v.tenantId}):p}function Yt(v,p,m,I){return Cn.apply(this,arguments)}function Cn(){return(Cn=(0,g.Z)(function*(v,p,m,I,x={}){return Ti(v,x,(0,g.Z)(function*(){let O={},ie={};I&&("GET"===p?ie=I:O={body:JSON.stringify(I)});const Oe=(0,U.xO)(Object.assign({key:v.config.apiKey},ie)).slice(1),et=yield v._getAdditionalHeaders();return et["Content-Type"]="application/json",v.languageCode&&(et["X-Firebase-Locale"]=v.languageCode),On.fetch()(di(v,v.config.apiHost,m,Oe),Object.assign({method:p,headers:et,referrerPolicy:"no-referrer"},O))}))})).apply(this,arguments)}function Ti(v,p,m){return Nr.apply(this,arguments)}function Nr(){return(Nr=(0,g.Z)(function*(v,p,m){v._canInitEmulator=!1;const I=Object.assign(Object.assign({},hn),p);try{const x=new Di(v),O=yield Promise.race([m(),x.promise]);x.clearNetworkTimeout();const ie=yield O.json();if("needConfirmation"in ie)throw Gn(v,"account-exists-with-different-credential",ie);if(O.ok&&!("errorMessage"in ie))return ie;{const Oe=O.ok?ie.errorMessage:ie.error.message,[et,mt]=Oe.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===et)throw Gn(v,"credential-already-in-use",ie);if("EMAIL_EXISTS"===et)throw Gn(v,"email-already-in-use",ie);const bt=I[et]||et.toLowerCase().replace(/[_\s]+/g,"-");if(mt)throw ke(v,bt,mt);We(v,bt)}}catch(x){if(x instanceof U.ZR)throw x;We(v,"network-request-failed")}})).apply(this,arguments)}function Sn(v,p,m,I){return Ui.apply(this,arguments)}function Ui(){return(Ui=(0,g.Z)(function*(v,p,m,I,x={}){const O=yield Yt(v,p,m,I,x);return"mfaPendingCredential"in O&&We(v,"multi-factor-auth-required",{_serverResponse:O}),O})).apply(this,arguments)}function di(v,p,m,I){const x=`${p}${m}?${I}`;return v.config.emulator?dn(v.config,x):`${v.config.apiScheme}://${x}`}class Di{constructor(p){this.auth=p,this.timer=null,this.promise=new Promise((m,I)=>{this.timer=setTimeout(()=>I(Pe(this.auth,"network-request-failed")),Xt.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Gn(v,p,m){const I={appName:v.name};m.email&&(I.email=m.email),m.phoneNumber&&(I.phoneNumber=m.phoneNumber);const x=Pe(v,p,I);return x.customData._tokenResponse=m,x}function pt(){return(pt=(0,g.Z)(function*(v,p){return Yt(v,"POST","/v1/accounts:delete",p)})).apply(this,arguments)}function Hr(v,p){return wn.apply(this,arguments)}function wn(){return(wn=(0,g.Z)(function*(v,p){return Yt(v,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function en(v,p){return Pr.apply(this,arguments)}function Pr(){return(Pr=(0,g.Z)(function*(v,p){return Yt(v,"POST","/v1/accounts:lookup",p)})).apply(this,arguments)}function or(v){if(v)try{const p=new Date(Number(v));if(!isNaN(p.getTime()))return p.toUTCString()}catch(p){}}function pr(){return(pr=(0,g.Z)(function*(v,p=!1){const m=(0,U.m9)(v),I=yield m.getIdToken(p),x=Bt(I);ne(x&&x.exp&&x.auth_time&&x.iat,m.auth,"internal-error");const O="object"==typeof x.firebase?x.firebase:void 0,ie=null==O?void 0:O.sign_in_provider;return{claims:x,token:I,authTime:or(rs(x.auth_time)),issuedAtTime:or(rs(x.iat)),expirationTime:or(rs(x.exp)),signInProvider:ie||null,signInSecondFactor:(null==O?void 0:O.sign_in_second_factor)||null}})).apply(this,arguments)}function rs(v){return 1e3*Number(v)}function Bt(v){const[p,m,I]=v.split(".");if(void 0===p||void 0===m||void 0===I)return ze("JWT malformed, contained fewer than 3 sections"),null;try{const x=(0,U.tV)(m);return x?JSON.parse(x):(ze("Failed to decode base64 JWT payload"),null)}catch(x){return ze("Caught error parsing JWT payload as JSON",x),null}}function st(v,p){return hi.apply(this,arguments)}function hi(){return(hi=(0,g.Z)(function*(v,p,m=!1){if(m)return p;try{return yield p}catch(I){throw I instanceof U.ZR&&fi(I)&&v.auth.currentUser===v&&(yield v.auth.signOut()),I}})).apply(this,arguments)}function fi({code:v}){return"auth/user-disabled"===v||"auth/user-token-expired"===v}class jt{constructor(p){this.user=p,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(p){var m;if(p){const I=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),I}{this.errorBackoff=3e4;const x=(null!==(m=this.user.stsTokenManager.expirationTime)&&void 0!==m?m:0)-Date.now()-3e5;return Math.max(0,x)}}schedule(p=!1){var m=this;if(!this.isRunning)return;const I=this.getInterval(p);this.timerId=setTimeout((0,g.Z)(function*(){yield m.iteration()}),I)}iteration(){var p=this;return(0,g.Z)(function*(){try{yield p.user.getIdToken(!0)}catch(m){return void("auth/network-request-failed"===m.code&&p.schedule(!0))}p.schedule()})()}}class Bi{constructor(p,m){this.createdAt=p,this.lastLoginAt=m,this._initializeTime()}_initializeTime(){this.lastSignInTime=or(this.lastLoginAt),this.creationTime=or(this.createdAt)}_copy(p){this.createdAt=p.createdAt,this.lastLoginAt=p.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Ln(v){return fn.apply(this,arguments)}function fn(){return(fn=(0,g.Z)(function*(v){var p;const m=v.auth,I=yield v.getIdToken(),x=yield st(v,en(m,{idToken:I}));ne(null==x?void 0:x.users.length,m,"internal-error");const O=x.users[0];v._notifyReloadListener(O);const ie=(null===(p=O.providerUserInfo)||void 0===p?void 0:p.length)?we(O.providerUserInfo):[],Oe=q(v.providerData,ie),bt=!!v.isAnonymous&&!(v.email&&O.passwordHash||(null==Oe?void 0:Oe.length)),Tn={uid:O.localId,displayName:O.displayName||null,photoURL:O.photoUrl||null,email:O.email||null,emailVerified:O.emailVerified||!1,phoneNumber:O.phoneNumber||null,tenantId:O.tenantId||null,providerData:Oe,metadata:new Bi(O.createdAt,O.lastLoginAt),isAnonymous:bt};Object.assign(v,Tn)})).apply(this,arguments)}function z(){return(z=(0,g.Z)(function*(v){const p=(0,U.m9)(v);yield Ln(p),yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)})).apply(this,arguments)}function q(v,p){return[...v.filter(I=>!p.some(x=>x.providerId===I.providerId)),...p]}function we(v){return v.map(p=>{var{providerId:m}=p,I=(0,ae._T)(p,["providerId"]);return{providerId:m,uid:I.rawId||"",displayName:I.displayName||null,email:I.email||null,phoneNumber:I.phoneNumber||null,photoURL:I.photoUrl||null}})}function te(){return(te=(0,g.Z)(function*(v,p){const m=yield Ti(v,{},(0,g.Z)(function*(){const I=(0,U.xO)({grant_type:"refresh_token",refresh_token:p}).slice(1),{tokenApiHost:x,apiKey:O}=v.config,ie=di(v,x,"/v1/token",`key=${O}`),Oe=yield v._getAdditionalHeaders();return Oe["Content-Type"]="application/x-www-form-urlencoded",On.fetch()(ie,{method:"POST",headers:Oe,body:I})}));return{accessToken:m.access_token,expiresIn:m.expires_in,refreshToken:m.refresh_token}})).apply(this,arguments)}class Fe{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(p){ne(p.idToken,"internal-error"),ne(void 0!==p.idToken,"internal-error"),ne(void 0!==p.refreshToken,"internal-error");const m="expiresIn"in p&&void 0!==p.expiresIn?Number(p.expiresIn):function dt(v){const p=Bt(v);return ne(p,"internal-error"),ne(void 0!==p.exp,"internal-error"),ne(void 0!==p.iat,"internal-error"),Number(p.exp)-Number(p.iat)}(p.idToken);this.updateTokensAndExpiration(p.idToken,p.refreshToken,m)}getToken(p,m=!1){var I=this;return(0,g.Z)(function*(){return ne(!I.accessToken||I.refreshToken,p,"user-token-expired"),m||!I.accessToken||I.isExpired?I.refreshToken?(yield I.refresh(p,I.refreshToken),I.accessToken):null:I.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(p,m){var I=this;return(0,g.Z)(function*(){const{accessToken:x,refreshToken:O,expiresIn:ie}=yield function $(v,p){return te.apply(this,arguments)}(p,m);I.updateTokensAndExpiration(x,O,Number(ie))})()}updateTokensAndExpiration(p,m,I){this.refreshToken=m||null,this.accessToken=p||null,this.expirationTime=Date.now()+1e3*I}static fromJSON(p,m){const{refreshToken:I,accessToken:x,expirationTime:O}=m,ie=new Fe;return I&&(ne("string"==typeof I,"internal-error",{appName:p}),ie.refreshToken=I),x&&(ne("string"==typeof x,"internal-error",{appName:p}),ie.accessToken=x),O&&(ne("number"==typeof O,"internal-error",{appName:p}),ie.expirationTime=O),ie}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(p){this.accessToken=p.accessToken,this.refreshToken=p.refreshToken,this.expirationTime=p.expirationTime}_clone(){return Object.assign(new Fe,this.toJSON())}_performRefresh(){return he("not implemented")}}function Xe(v,p){ne("string"==typeof v||void 0===v,"internal-error",{appName:p})}class ft{constructor(p){var{uid:m,auth:I,stsTokenManager:x}=p,O=(0,ae._T)(p,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new jt(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=m,this.auth=I,this.stsTokenManager=x,this.accessToken=x.accessToken,this.displayName=O.displayName||null,this.email=O.email||null,this.emailVerified=O.emailVerified||!1,this.phoneNumber=O.phoneNumber||null,this.photoURL=O.photoURL||null,this.isAnonymous=O.isAnonymous||!1,this.tenantId=O.tenantId||null,this.providerData=O.providerData?[...O.providerData]:[],this.metadata=new Bi(O.createdAt||void 0,O.lastLoginAt||void 0)}getIdToken(p){var m=this;return(0,g.Z)(function*(){const I=yield st(m,m.stsTokenManager.getToken(m.auth,p));return ne(I,m.auth,"internal-error"),m.accessToken!==I&&(m.accessToken=I,yield m.auth._persistUserIfCurrent(m),m.auth._notifyListenersIfCurrent(m)),I})()}getIdTokenResult(p){return function bn(v){return pr.apply(this,arguments)}(this,p)}reload(){return function V(v){return z.apply(this,arguments)}(this)}_assign(p){this!==p&&(ne(this.uid===p.uid,this.auth,"internal-error"),this.displayName=p.displayName,this.photoURL=p.photoURL,this.email=p.email,this.emailVerified=p.emailVerified,this.phoneNumber=p.phoneNumber,this.isAnonymous=p.isAnonymous,this.tenantId=p.tenantId,this.providerData=p.providerData.map(m=>Object.assign({},m)),this.metadata._copy(p.metadata),this.stsTokenManager._assign(p.stsTokenManager))}_clone(p){return new ft(Object.assign(Object.assign({},this),{auth:p,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(p){ne(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=p,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(p){this.reloadListener?this.reloadListener(p):this.reloadUserInfo=p}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(p,m=!1){var I=this;return(0,g.Z)(function*(){let x=!1;p.idToken&&p.idToken!==I.stsTokenManager.accessToken&&(I.stsTokenManager.updateFromServerResponse(p),x=!0),m&&(yield Ln(I)),yield I.auth._persistUserIfCurrent(I),x&&I.auth._notifyListenersIfCurrent(I)})()}delete(){var p=this;return(0,g.Z)(function*(){const m=yield p.getIdToken();return yield st(p,function Vi(v,p){return pt.apply(this,arguments)}(p.auth,{idToken:m})),p.stsTokenManager.clearRefreshToken(),p.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(p=>Object.assign({},p)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(p,m){var I,x,O,ie,Oe,et,mt,bt;const Tn=null!==(I=m.displayName)&&void 0!==I?I:void 0,qi=null!==(x=m.email)&&void 0!==x?x:void 0,$s=null!==(O=m.phoneNumber)&&void 0!==O?O:void 0,Fh=null!==(ie=m.photoURL)&&void 0!==ie?ie:void 0,Nl=null!==(Oe=m.tenantId)&&void 0!==Oe?Oe:void 0,na=null!==(et=m._redirectEventId)&&void 0!==et?et:void 0,Kp=null!==(mt=m.createdAt)&&void 0!==mt?mt:void 0,Ru=null!==(bt=m.lastLoginAt)&&void 0!==bt?bt:void 0,{uid:Pl,emailVerified:Zp,isAnonymous:Yc,providerData:Ya,stsTokenManager:Yp}=m;ne(Pl&&Yp,p,"internal-error");const Uh=Fe.fromJSON(this.name,Yp);ne("string"==typeof Pl,p,"internal-error"),Xe(Tn,p.name),Xe(qi,p.name),ne("boolean"==typeof Zp,p,"internal-error"),ne("boolean"==typeof Yc,p,"internal-error"),Xe($s,p.name),Xe(Fh,p.name),Xe(Nl,p.name),Xe(na,p.name),Xe(Kp,p.name),Xe(Ru,p.name);const kl=new ft({uid:Pl,auth:p,email:qi,emailVerified:Zp,displayName:Tn,isAnonymous:Yc,photoURL:Fh,phoneNumber:$s,tenantId:Nl,stsTokenManager:Uh,createdAt:Kp,lastLoginAt:Ru});return Ya&&Array.isArray(Ya)&&(kl.providerData=Ya.map(ln=>Object.assign({},ln))),na&&(kl._redirectEventId=na),kl}static _fromIdTokenResponse(p,m,I=!1){return(0,g.Z)(function*(){const x=new Fe;x.updateFromServerResponse(m);const O=new ft({uid:m.localId,auth:p,stsTokenManager:x,isAnonymous:I});return yield Ln(O),O})()}}const an=(()=>{class v{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,g.Z)(function*(){return!0})()}_set(m,I){var x=this;return(0,g.Z)(function*(){x.storage[m]=I})()}_get(m){var I=this;return(0,g.Z)(function*(){const x=I.storage[m];return void 0===x?null:x})()}_remove(m){var I=this;return(0,g.Z)(function*(){delete I.storage[m]})()}_addListener(m,I){}_removeListener(m,I){}}return v.type="NONE",v})();function vt(v,p,m){return`firebase:${v}:${p}:${m}`}class er{constructor(p,m,I){this.persistence=p,this.auth=m,this.userKey=I;const{config:x,name:O}=this.auth;this.fullUserKey=vt(this.userKey,x.apiKey,O),this.fullPersistenceKey=vt("persistence",x.apiKey,O),this.boundEventHandler=m._onStorageEvent.bind(m),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(p){return this.persistence._set(this.fullUserKey,p.toJSON())}getCurrentUser(){var p=this;return(0,g.Z)(function*(){const m=yield p.persistence._get(p.fullUserKey);return m?ft._fromJSON(p.auth,m):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(p){var m=this;return(0,g.Z)(function*(){if(m.persistence===p)return;const I=yield m.getCurrentUser();return yield m.removeCurrentUser(),m.persistence=p,I?m.setCurrentUser(I):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(p,m,I="authUser"){return(0,g.Z)(function*(){if(!m.length)return new er(re(an),p,I);const x=(yield Promise.all(m.map(function(){var mt=(0,g.Z)(function*(bt){if(yield bt._isAvailable())return bt});return function(bt){return mt.apply(this,arguments)}}()))).filter(mt=>mt);let O=x[0]||re(an);const ie=vt(I,p.config.apiKey,p.name);let Oe=null;for(const mt of m)try{const bt=yield mt._get(ie);if(bt){const Tn=ft._fromJSON(p,bt);mt!==O&&(Oe=Tn),O=mt;break}}catch(bt){}const et=x.filter(mt=>mt._shouldAllowMigration);return O._shouldAllowMigration&&et.length?(O=et[0],Oe&&(yield O._set(ie,Oe.toJSON())),yield Promise.all(m.map(function(){var mt=(0,g.Z)(function*(bt){if(bt!==O)try{yield bt._remove(ie)}catch(Tn){}});return function(bt){return mt.apply(this,arguments)}}())),new er(O,p,I)):new er(O,p,I)})()}}function ce(v){const p=v.toLowerCase();if(p.includes("opera/")||p.includes("opr/")||p.includes("opios/"))return"Opera";if(Ze(p))return"IEMobile";if(p.includes("msie")||p.includes("trident/"))return"IE";if(p.includes("edge/"))return"Edge";if(K(p))return"Firefox";if(p.includes("silk/"))return"Silk";if(Tt(p))return"Blackberry";if(zt(p))return"Webos";if(G(p))return"Safari";if((p.includes("chrome/")||Se(p))&&!p.includes("edge/"))return"Chrome";if(ct(p))return"Android";{const I=v.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==I?void 0:I.length))return I[1]}return"Other"}function K(v=(0,U.z$)()){return/firefox\//i.test(v)}function G(v=(0,U.z$)()){const p=v.toLowerCase();return p.includes("safari/")&&!p.includes("chrome/")&&!p.includes("crios/")&&!p.includes("android")}function Se(v=(0,U.z$)()){return/crios\//i.test(v)}function Ze(v=(0,U.z$)()){return/iemobile/i.test(v)}function ct(v=(0,U.z$)()){return/android/i.test(v)}function Tt(v=(0,U.z$)()){return/blackberry/i.test(v)}function zt(v=(0,U.z$)()){return/webos/i.test(v)}function Ft(v=(0,U.z$)()){return/iphone|ipad|ipod/i.test(v)}function qn(v=(0,U.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(v)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(v)}function kr(v=(0,U.z$)()){return Ft(v)||ct(v)||zt(v)||Tt(v)||/windows phone/i.test(v)||Ze(v)}function gr(v,p=[]){let m;switch(v){case"Browser":m=ce((0,U.z$)());break;case"Worker":m=`${ce((0,U.z$)())}-${v}`;break;default:m=v}const I=p.length?p.join(","):"FirebaseCore-web";return`${m}/JsCore/${N.SDK_VERSION}/${I}`}class wa{constructor(p){this.auth=p,this.queue=[]}pushCallback(p,m){const I=O=>new Promise((ie,Oe)=>{try{ie(p(O))}catch(et){Oe(et)}});I.onAbort=m,this.queue.push(I);const x=this.queue.length-1;return()=>{this.queue[x]=()=>Promise.resolve()}}runMiddleware(p){var m=this;return(0,g.Z)(function*(){if(m.auth.currentUser===p)return;const I=[];try{for(const x of m.queue)yield x(p),x.onAbort&&I.push(x.onAbort)}catch(x){I.reverse();for(const O of I)try{O()}catch(ie){}throw m.auth._errorFactory.create("login-blocked",{originalMessage:x.message})}})()}}class ni{constructor(p,m,I){this.app=p,this.heartbeatServiceProvider=m,this.config=I,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Mt(this),this.idTokenSubscription=new Mt(this),this.beforeStateQueue=new wa(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=He,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=p.name,this.clientVersion=I.sdkClientVersion}_initializeWithPersistence(p,m){var I=this;return m&&(this._popupRedirectResolver=re(m)),this._initializationPromise=this.queue((0,g.Z)(function*(){var x,O;if(!I._deleted&&(I.persistenceManager=yield er.create(I,p),!I._deleted)){if(null===(x=I._popupRedirectResolver)||void 0===x?void 0:x._shouldInitProactively)try{yield I._popupRedirectResolver._initialize(I)}catch(ie){}yield I.initializeCurrentUser(m),I.lastNotifiedUid=(null===(O=I.currentUser)||void 0===O?void 0:O.uid)||null,!I._deleted&&(I._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var p=this;return(0,g.Z)(function*(){if(p._deleted)return;const m=yield p.assertedPersistence.getCurrentUser();if(p.currentUser||m){if(p.currentUser&&m&&p.currentUser.uid===m.uid)return p._currentUser._assign(m),void(yield p.currentUser.getIdToken());yield p._updateCurrentUser(m,!0)}})()}initializeCurrentUser(p){var m=this;return(0,g.Z)(function*(){var I;const x=yield m.assertedPersistence.getCurrentUser();let O=x,ie=!1;if(p&&m.config.authDomain){yield m.getOrInitRedirectPersistenceManager();const Oe=null===(I=m.redirectUser)||void 0===I?void 0:I._redirectEventId,et=null==O?void 0:O._redirectEventId,mt=yield m.tryRedirectSignIn(p);(!Oe||Oe===et)&&(null==mt?void 0:mt.user)&&(O=mt.user,ie=!0)}if(!O)return m.directlySetCurrentUser(null);if(!O._redirectEventId){if(ie)try{yield m.beforeStateQueue.runMiddleware(O)}catch(Oe){O=x,m._popupRedirectResolver._overrideRedirectResult(m,()=>Promise.reject(Oe))}return O?m.reloadAndSetCurrentUserOrClear(O):m.directlySetCurrentUser(null)}return ne(m._popupRedirectResolver,m,"argument-error"),yield m.getOrInitRedirectPersistenceManager(),m.redirectUser&&m.redirectUser._redirectEventId===O._redirectEventId?m.directlySetCurrentUser(O):m.reloadAndSetCurrentUserOrClear(O)})()}tryRedirectSignIn(p){var m=this;return(0,g.Z)(function*(){let I=null;try{I=yield m._popupRedirectResolver._completeRedirectFn(m,p,!0)}catch(x){yield m._setRedirectUser(null)}return I})()}reloadAndSetCurrentUserOrClear(p){var m=this;return(0,g.Z)(function*(){try{yield Ln(p)}catch(I){if("auth/network-request-failed"!==I.code)return m.directlySetCurrentUser(null)}return m.directlySetCurrentUser(p)})()}useDeviceLanguage(){this.languageCode=function Lt(){if("undefined"==typeof navigator)return null;const v=navigator;return v.languages&&v.languages[0]||v.language||null}()}_delete(){var p=this;return(0,g.Z)(function*(){p._deleted=!0})()}updateCurrentUser(p){var m=this;return(0,g.Z)(function*(){const I=p?(0,U.m9)(p):null;return I&&ne(I.auth.config.apiKey===m.config.apiKey,m,"invalid-user-token"),m._updateCurrentUser(I&&I._clone(m))})()}_updateCurrentUser(p,m=!1){var I=this;return(0,g.Z)(function*(){if(!I._deleted)return p&&ne(I.tenantId===p.tenantId,I,"tenant-id-mismatch"),m||(yield I.beforeStateQueue.runMiddleware(p)),I.queue((0,g.Z)(function*(){yield I.directlySetCurrentUser(p),I.notifyAuthListeners()}))})()}signOut(){var p=this;return(0,g.Z)(function*(){return yield p.beforeStateQueue.runMiddleware(null),(p.redirectPersistenceManager||p._popupRedirectResolver)&&(yield p._setRedirectUser(null)),p._updateCurrentUser(null,!0)})()}setPersistence(p){var m=this;return this.queue((0,g.Z)(function*(){yield m.assertedPersistence.setPersistence(re(p))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(p){this._errorFactory=new U.LL("auth","Firebase",p())}onAuthStateChanged(p,m,I){return this.registerStateListener(this.authStateSubscription,p,m,I)}beforeAuthStateChanged(p,m){return this.beforeStateQueue.pushCallback(p,m)}onIdTokenChanged(p,m,I){return this.registerStateListener(this.idTokenSubscription,p,m,I)}toJSON(){var p;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(p=this._currentUser)||void 0===p?void 0:p.toJSON()}}_setRedirectUser(p,m){var I=this;return(0,g.Z)(function*(){const x=yield I.getOrInitRedirectPersistenceManager(m);return null===p?x.removeCurrentUser():x.setCurrentUser(p)})()}getOrInitRedirectPersistenceManager(p){var m=this;return(0,g.Z)(function*(){if(!m.redirectPersistenceManager){const I=p&&re(p)||m._popupRedirectResolver;ne(I,m,"argument-error"),m.redirectPersistenceManager=yield er.create(m,[re(I._redirectPersistence)],"redirectUser"),m.redirectUser=yield m.redirectPersistenceManager.getCurrentUser()}return m.redirectPersistenceManager})()}_redirectUserForId(p){var m=this;return(0,g.Z)(function*(){var I,x;return m._isInitialized&&(yield m.queue((0,g.Z)(function*(){}))),(null===(I=m._currentUser)||void 0===I?void 0:I._redirectEventId)===p?m._currentUser:(null===(x=m.redirectUser)||void 0===x?void 0:x._redirectEventId)===p?m.redirectUser:null})()}_persistUserIfCurrent(p){var m=this;return(0,g.Z)(function*(){if(p===m.currentUser)return m.queue((0,g.Z)(function*(){return m.directlySetCurrentUser(p)}))})()}_notifyListenersIfCurrent(p){p===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var p,m;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const I=null!==(m=null===(p=this.currentUser)||void 0===p?void 0:p.uid)&&void 0!==m?m:null;this.lastNotifiedUid!==I&&(this.lastNotifiedUid=I,this.authStateSubscription.next(this.currentUser))}registerStateListener(p,m,I,x){if(this._deleted)return()=>{};const O="function"==typeof m?m:m.next.bind(m),ie=this._isInitialized?Promise.resolve():this._initializationPromise;return ne(ie,this,"internal-error"),ie.then(()=>O(this.currentUser)),"function"==typeof m?p.addObserver(m,I,x):p.addObserver(m)}directlySetCurrentUser(p){var m=this;return(0,g.Z)(function*(){m.currentUser&&m.currentUser!==p&&(m._currentUser._stopProactiveRefresh(),p&&m.isProactiveRefreshEnabled&&p._startProactiveRefresh()),m.currentUser=p,p?yield m.assertedPersistence.setCurrentUser(p):yield m.assertedPersistence.removeCurrentUser()})()}queue(p){return this.operations=this.operations.then(p,p),this.operations}get assertedPersistence(){return ne(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(p){!p||this.frameworks.includes(p)||(this.frameworks.push(p),this.frameworks.sort(),this.clientVersion=gr(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var p=this;return(0,g.Z)(function*(){var m;const I={"X-Client-Version":p.clientVersion};p.app.options.appId&&(I["X-Firebase-gmpid"]=p.app.options.appId);const x=yield null===(m=p.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===m?void 0:m.getHeartbeatsHeader();return x&&(I["X-Firebase-Client"]=x),I})()}}function je(v){return(0,U.m9)(v)}class Mt{constructor(p){this.auth=p,this.observer=null,this.addObserver=(0,U.ne)(m=>this.observer=m)}get next(){return ne(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function _n(v,p,m){const I=je(v);ne(I._canInitEmulator,I,"emulator-config-failed"),ne(/^https?:\/\//.test(p),I,"invalid-emulator-scheme");const x=!!(null==m?void 0:m.disableWarnings),O=zr(p),{host:ie,port:Oe}=function is(v){const p=zr(v),m=/(\/\/)?([^?#/]+)/.exec(v.substr(p.length));if(!m)return{host:"",port:null};const I=m[2].split("@").pop()||"",x=/^(\[[^\]]+\])(:|$)/.exec(I);if(x){const O=x[1];return{host:O,port:Kn(I.substr(O.length+1))}}{const[O,ie]=I.split(":");return{host:O,port:Kn(ie)}}}(p);I.config.emulator={url:`${O}//${ie}${null===Oe?"":`:${Oe}`}/`},I.settings.appVerificationDisabledForTesting=!0,I.emulatorConfig=Object.freeze({host:ie,port:Oe,protocol:O.replace(":",""),options:Object.freeze({disableWarnings:x})}),x||function ss(){function v(){const p=document.createElement("p"),m=p.style;p.innerText="Running in emulator mode. Do not use with production credentials.",m.position="fixed",m.width="100%",m.backgroundColor="#ffffff",m.border=".1em solid #000000",m.color="#b50000",m.bottom="0px",m.left="0px",m.margin="0px",m.zIndex="10000",m.textAlign="center",p.classList.add("firebase-emulator-warning"),document.body.appendChild(p)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",v):v())}()}function zr(v){const p=v.indexOf(":");return p<0?"":v.substr(0,p+1)}function Kn(v){if(!v)return null;const p=Number(v);return isNaN(p)?null:p}class un{constructor(p,m){this.providerId=p,this.signInMethod=m}toJSON(){return he("not implemented")}_getIdTokenResponse(p){return he("not implemented")}_linkToIdToken(p,m){return he("not implemented")}_getReauthenticationResolver(p){return he("not implemented")}}function Js(v,p){return Fn.apply(this,arguments)}function Fn(){return(Fn=(0,g.Z)(function*(v,p){return Yt(v,"POST","/v1/accounts:resetPassword",Vt(v,p))})).apply(this,arguments)}function St(v,p){return Po.apply(this,arguments)}function Po(){return(Po=(0,g.Z)(function*(v,p){return Yt(v,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function ko(v,p){return Oo.apply(this,arguments)}function Oo(){return(Oo=(0,g.Z)(function*(v,p){return Yt(v,"POST","/v1/accounts:update",Vt(v,p))})).apply(this,arguments)}function tr(){return(tr=(0,g.Z)(function*(v,p){return Sn(v,"POST","/v1/accounts:signInWithPassword",Vt(v,p))})).apply(this,arguments)}function xs(v,p){return Xs.apply(this,arguments)}function Xs(){return(Xs=(0,g.Z)(function*(v,p){return Yt(v,"POST","/v1/accounts:sendOobCode",Vt(v,p))})).apply(this,arguments)}function Tr(v,p){return pn.apply(this,arguments)}function pn(){return(pn=(0,g.Z)(function*(v,p){return xs(v,p)})).apply(this,arguments)}function Ic(v,p){return eo.apply(this,arguments)}function eo(){return(eo=(0,g.Z)(function*(v,p){return xs(v,p)})).apply(this,arguments)}function Si(v,p){return pi.apply(this,arguments)}function pi(){return(pi=(0,g.Z)(function*(v,p){return xs(v,p)})).apply(this,arguments)}function Cc(v,p){return lu.apply(this,arguments)}function lu(){return(lu=(0,g.Z)(function*(v,p){return xs(v,p)})).apply(this,arguments)}function gi(){return(gi=(0,g.Z)(function*(v,p){return Sn(v,"POST","/v1/accounts:signInWithEmailLink",Vt(v,p))})).apply(this,arguments)}function bc(){return(bc=(0,g.Z)(function*(v,p){return Sn(v,"POST","/v1/accounts:signInWithEmailLink",Vt(v,p))})).apply(this,arguments)}class cu extends un{constructor(p,m,I,x=null){super("password",I),this._email=p,this._password=m,this._tenantId=x}static _fromEmailAndPassword(p,m){return new cu(p,m,"password")}static _fromEmailAndCode(p,m,I=null){return new cu(p,m,"emailLink",I)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(p){const m="string"==typeof p?JSON.parse(p):p;if((null==m?void 0:m.email)&&(null==m?void 0:m.password)){if("password"===m.signInMethod)return this._fromEmailAndPassword(m.email,m.password);if("emailLink"===m.signInMethod)return this._fromEmailAndCode(m.email,m.password,m.tenantId)}return null}_getIdTokenResponse(p){var m=this;return(0,g.Z)(function*(){switch(m.signInMethod){case"password":return function Lo(v,p){return tr.apply(this,arguments)}(p,{returnSecureToken:!0,email:m._email,password:m._password});case"emailLink":return function Rs(v,p){return gi.apply(this,arguments)}(p,{email:m._email,oobCode:m._password});default:We(p,"internal-error")}})()}_linkToIdToken(p,m){var I=this;return(0,g.Z)(function*(){switch(I.signInMethod){case"password":return St(p,{idToken:m,returnSecureToken:!0,email:I._email,password:I._password});case"emailLink":return function gh(v,p){return bc.apply(this,arguments)}(p,{idToken:m,email:I._email,oobCode:I._password});default:We(p,"internal-error")}})()}_getReauthenticationResolver(p){return this._getIdTokenResponse(p)}}function nr(v,p){return Tc.apply(this,arguments)}function Tc(){return(Tc=(0,g.Z)(function*(v,p){return Sn(v,"POST","/v1/accounts:signInWithIdp",Vt(v,p))})).apply(this,arguments)}class os extends un{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(p){const m=new os(p.providerId,p.signInMethod);return p.idToken||p.accessToken?(p.idToken&&(m.idToken=p.idToken),p.accessToken&&(m.accessToken=p.accessToken),p.nonce&&!p.pendingToken&&(m.nonce=p.nonce),p.pendingToken&&(m.pendingToken=p.pendingToken)):p.oauthToken&&p.oauthTokenSecret?(m.accessToken=p.oauthToken,m.secret=p.oauthTokenSecret):We("argument-error"),m}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(p){const m="string"==typeof p?JSON.parse(p):p,{providerId:I,signInMethod:x}=m,O=(0,ae._T)(m,["providerId","signInMethod"]);if(!I||!x)return null;const ie=new os(I,x);return ie.idToken=O.idToken||void 0,ie.accessToken=O.accessToken||void 0,ie.secret=O.secret,ie.nonce=O.nonce,ie.pendingToken=O.pendingToken||null,ie}_getIdTokenResponse(p){return nr(p,this.buildRequest())}_linkToIdToken(p,m){const I=this.buildRequest();return I.idToken=m,nr(p,I)}_getReauthenticationResolver(p){const m=this.buildRequest();return m.autoCreate=!1,nr(p,m)}buildRequest(){const p={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)p.pendingToken=this.pendingToken;else{const m={};this.idToken&&(m.id_token=this.idToken),this.accessToken&&(m.access_token=this.accessToken),this.secret&&(m.oauth_token_secret=this.secret),m.providerId=this.providerId,this.nonce&&!this.pendingToken&&(m.nonce=this.nonce),p.postBody=(0,U.xO)(m)}return p}}function xp(v,p){return Dc.apply(this,arguments)}function Dc(){return(Dc=(0,g.Z)(function*(v,p){return Yt(v,"POST","/v1/accounts:sendVerificationCode",Vt(v,p))})).apply(this,arguments)}function Ia(){return(Ia=(0,g.Z)(function*(v,p){return Sn(v,"POST","/v1/accounts:signInWithPhoneNumber",Vt(v,p))})).apply(this,arguments)}function Sc(){return(Sc=(0,g.Z)(function*(v,p){const m=yield Sn(v,"POST","/v1/accounts:signInWithPhoneNumber",Vt(v,p));if(m.temporaryProof)throw Gn(v,"account-exists-with-different-credential",m);return m})).apply(this,arguments)}const Mp={USER_NOT_FOUND:"user-not-found"};function Ac(){return(Ac=(0,g.Z)(function*(v,p){return Sn(v,"POST","/v1/accounts:signInWithPhoneNumber",Vt(v,Object.assign(Object.assign({},p),{operation:"REAUTH"})),Mp)})).apply(this,arguments)}class Uo extends un{constructor(p){super("phone","phone"),this.params=p}static _fromVerification(p,m){return new Uo({verificationId:p,verificationCode:m})}static _fromTokenResponse(p,m){return new Uo({phoneNumber:p,temporaryProof:m})}_getIdTokenResponse(p){return function Rp(v,p){return Ia.apply(this,arguments)}(p,this._makeVerificationRequest())}_linkToIdToken(p,m){return function Fo(v,p){return Sc.apply(this,arguments)}(p,Object.assign({idToken:m},this._makeVerificationRequest()))}_getReauthenticationResolver(p){return function Np(v,p){return Ac.apply(this,arguments)}(p,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:p,phoneNumber:m,verificationId:I,verificationCode:x}=this.params;return p&&m?{temporaryProof:p,phoneNumber:m}:{sessionInfo:I,code:x}}toJSON(){const p={providerId:this.providerId};return this.params.phoneNumber&&(p.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(p.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(p.verificationCode=this.params.verificationCode),this.params.verificationId&&(p.verificationId=this.params.verificationId),p}static fromJSON(p){"string"==typeof p&&(p=JSON.parse(p));const{verificationId:m,verificationCode:I,phoneNumber:x,temporaryProof:O}=p;return I||m||x||O?new Uo({verificationId:m,verificationCode:I,phoneNumber:x,temporaryProof:O}):null}}class as{constructor(p){var m,I,x,O,ie,Oe;const et=(0,U.zd)((0,U.pd)(p)),mt=null!==(m=et.apiKey)&&void 0!==m?m:null,bt=null!==(I=et.oobCode)&&void 0!==I?I:null,Tn=function Pp(v){switch(v){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(x=et.mode)&&void 0!==x?x:null);ne(mt&&bt&&Tn,"argument-error"),this.apiKey=mt,this.operation=Tn,this.code=bt,this.continueUrl=null!==(O=et.continueUrl)&&void 0!==O?O:null,this.languageCode=null!==(ie=et.languageCode)&&void 0!==ie?ie:null,this.tenantId=null!==(Oe=et.tenantId)&&void 0!==Oe?Oe:null}static parseLink(p){const m=function mh(v){const p=(0,U.zd)((0,U.pd)(v)).link,m=p?(0,U.zd)((0,U.pd)(p)).deep_link_id:null,I=(0,U.zd)((0,U.pd)(v)).deep_link_id;return(I?(0,U.zd)((0,U.pd)(I)).link:null)||I||m||p||v}(p);try{return new as(m)}catch(I){return null}}}let Ca=(()=>{class v{constructor(){this.providerId=v.PROVIDER_ID}static credential(m,I){return cu._fromEmailAndPassword(m,I)}static credentialWithLink(m,I){const x=as.parseLink(I);return ne(x,"argument-error"),cu._fromEmailAndCode(m,x.code,x.tenantId)}}return v.PROVIDER_ID="password",v.EMAIL_PASSWORD_SIGN_IN_METHOD="password",v.EMAIL_LINK_SIGN_IN_METHOD="emailLink",v})();class Ms{constructor(p){this.providerId=p,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(p){this.defaultLanguageCode=p}setCustomParameters(p){return this.customParameters=p,this}getCustomParameters(){return this.customParameters}}class mi extends Ms{constructor(){super(...arguments),this.scopes=[]}addScope(p){return this.scopes.includes(p)||this.scopes.push(p),this}getScopes(){return[...this.scopes]}}class Vo extends mi{static credentialFromJSON(p){const m="string"==typeof p?JSON.parse(p):p;return ne("providerId"in m&&"signInMethod"in m,"argument-error"),os._fromParams(m)}credential(p){return this._credential(Object.assign(Object.assign({},p),{nonce:p.rawNonce}))}_credential(p){return ne(p.idToken||p.accessToken,"argument-error"),os._fromParams(Object.assign(Object.assign({},p),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(p){return Vo.oauthCredentialFromTaggedObject(p)}static credentialFromError(p){return Vo.oauthCredentialFromTaggedObject(p.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:m,oauthAccessToken:I,oauthTokenSecret:x,pendingToken:O,nonce:ie,providerId:Oe}=p;if(!I&&!x&&!m&&!O||!Oe)return null;try{return new Vo(Oe)._credential({idToken:m,accessToken:I,nonce:ie,pendingToken:O})}catch(et){return null}}}let ba=(()=>{class v extends mi{constructor(){super("facebook.com")}static credential(m){return os._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.FACEBOOK_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return v.credential(m.oauthAccessToken)}catch(I){return null}}}return v.FACEBOOK_SIGN_IN_METHOD="facebook.com",v.PROVIDER_ID="facebook.com",v})(),Ta=(()=>{class v extends mi{constructor(){super("google.com"),this.addScope("profile")}static credential(m,I){return os._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GOOGLE_SIGN_IN_METHOD,idToken:m,accessToken:I})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthIdToken:I,oauthAccessToken:x}=m;if(!I&&!x)return null;try{return v.credential(I,x)}catch(O){return null}}}return v.GOOGLE_SIGN_IN_METHOD="google.com",v.PROVIDER_ID="google.com",v})(),_h=(()=>{class v extends mi{constructor(){super("github.com")}static credential(m){return os._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GITHUB_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return v.credential(m.oauthAccessToken)}catch(I){return null}}}return v.GITHUB_SIGN_IN_METHOD="github.com",v.PROVIDER_ID="github.com",v})();class to extends un{constructor(p,m){super(p,p),this.pendingToken=m}_getIdTokenResponse(p){return nr(p,this.buildRequest())}_linkToIdToken(p,m){const I=this.buildRequest();return I.idToken=m,nr(p,I)}_getReauthenticationResolver(p){const m=this.buildRequest();return m.autoCreate=!1,nr(p,m)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(p){const m="string"==typeof p?JSON.parse(p):p,{providerId:I,signInMethod:x,pendingToken:O}=m;return I&&x&&O&&I===x?new to(I,O):null}static _create(p,m){return new to(p,m)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class us extends Ms{constructor(p){ne(p.startsWith("saml."),"argument-error"),super(p)}static credentialFromResult(p){return us.samlCredentialFromTaggedObject(p)}static credentialFromError(p){return us.samlCredentialFromTaggedObject(p.customData||{})}static credentialFromJSON(p){const m=to.fromJSON(p);return ne(m,"argument-error"),m}static samlCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{pendingToken:m,providerId:I}=p;if(!m||!I)return null;try{return to._create(I,m)}catch(x){return null}}}let Ai=(()=>{class v extends mi{constructor(){super("twitter.com")}static credential(m,I){return os._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.TWITTER_SIGN_IN_METHOD,oauthToken:m,oauthTokenSecret:I})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthAccessToken:I,oauthTokenSecret:x}=m;if(!I||!x)return null;try{return v.credential(I,x)}catch(O){return null}}}return v.TWITTER_SIGN_IN_METHOD="twitter.com",v.PROVIDER_ID="twitter.com",v})();function Rc(v,p){return Or.apply(this,arguments)}function Or(){return(Or=(0,g.Z)(function*(v,p){return Sn(v,"POST","/v1/accounts:signUp",Vt(v,p))})).apply(this,arguments)}class Lr{constructor(p){this.user=p.user,this.providerId=p.providerId,this._tokenResponse=p._tokenResponse,this.operationType=p.operationType}static _fromIdTokenResponse(p,m,I,x=!1){return(0,g.Z)(function*(){const O=yield ft._fromIdTokenResponse(p,I,x),ie=Mc(I);return new Lr({user:O,providerId:ie,_tokenResponse:I,operationType:m})})()}static _forOperation(p,m,I){return(0,g.Z)(function*(){yield p._updateTokensIfNecessary(I,!0);const x=Mc(I);return new Lr({user:p,providerId:x,_tokenResponse:I,operationType:m})})()}}function Mc(v){return v.providerId?v.providerId:"phoneNumber"in v?"phone":null}function Nc(v){return du.apply(this,arguments)}function du(){return(du=(0,g.Z)(function*(v){var p;const m=je(v);if(yield m._initializationPromise,null===(p=m.currentUser)||void 0===p?void 0:p.isAnonymous)return new Lr({user:m.currentUser,providerId:null,operationType:"signIn"});const I=yield Rc(m,{returnSecureToken:!0}),x=yield Lr._fromIdTokenResponse(m,"signIn",I,!0);return yield m._updateCurrentUser(x.user),x})).apply(this,arguments)}class hu extends U.ZR{constructor(p,m,I,x){var O;super(m.code,m.message),this.operationType=I,this.user=x,Object.setPrototypeOf(this,hu.prototype),this.customData={appName:p.name,tenantId:null!==(O=p.tenantId)&&void 0!==O?O:void 0,_serverResponse:m.customData._serverResponse,operationType:I}}static _fromErrorAndOperation(p,m,I,x){return new hu(p,m,I,x)}}function fu(v,p,m,I){return("reauthenticate"===p?m._getReauthenticationResolver(v):m._getIdTokenResponse(v)).catch(O=>{throw"auth/multi-factor-auth-required"===O.code?hu._fromErrorAndOperation(v,O,p,I):O})}function hl(v){return new Set(v.map(({providerId:p})=>p).filter(p=>!!p))}function ls(v,p){return fl.apply(this,arguments)}function fl(){return(fl=(0,g.Z)(function*(v,p){const m=(0,U.m9)(v);yield Ns(!0,m,p);const{providerUserInfo:I}=yield Hr(m.auth,{idToken:yield m.getIdToken(),deleteProvider:[p]}),x=hl(I||[]);return m.providerData=m.providerData.filter(O=>x.has(O.providerId)),x.has("phone")||(m.phoneNumber=null),yield m.auth._persistUserIfCurrent(m),m})).apply(this,arguments)}function yn(v,p){return Da.apply(this,arguments)}function Da(){return(Da=(0,g.Z)(function*(v,p,m=!1){const I=yield st(v,p._linkToIdToken(v.auth,yield v.getIdToken()),m);return Lr._forOperation(v,"link",I)})).apply(this,arguments)}function Ns(v,p,m){return gn.apply(this,arguments)}function gn(){return(gn=(0,g.Z)(function*(v,p,m){yield Ln(p);const x=!1===v?"provider-already-linked":"no-such-provider";ne(hl(p.providerData).has(m)===v,p.auth,x)})).apply(this,arguments)}function pu(v,p){return Sa.apply(this,arguments)}function Sa(){return(Sa=(0,g.Z)(function*(v,p,m=!1){const{auth:I}=v,x="reauthenticate";try{const O=yield st(v,fu(I,x,p,v),m);ne(O.idToken,I,"internal-error");const ie=Bt(O.idToken);ne(ie,I,"internal-error");const{sub:Oe}=ie;return ne(v.uid===Oe,I,"user-mismatch"),Lr._forOperation(v,x,O)}catch(O){throw"auth/user-not-found"===(null==O?void 0:O.code)&&We(I,"user-mismatch"),O}})).apply(this,arguments)}function no(v,p){return mr.apply(this,arguments)}function mr(){return(mr=(0,g.Z)(function*(v,p,m=!1){const I="signIn",x=yield fu(v,I,p),O=yield Lr._fromIdTokenResponse(v,I,x);return m||(yield v._updateCurrentUser(O.user)),O})).apply(this,arguments)}function gu(v,p){return Un.apply(this,arguments)}function Un(){return(Un=(0,g.Z)(function*(v,p){return no(je(v),p)})).apply(this,arguments)}function cs(v,p){return _r.apply(this,arguments)}function _r(){return(_r=(0,g.Z)(function*(v,p){const m=(0,U.m9)(v);return yield Ns(!1,m,p.providerId),yn(m,p)})).apply(this,arguments)}function Bo(v,p){return $i.apply(this,arguments)}function $i(){return($i=(0,g.Z)(function*(v,p){return pu((0,U.m9)(v),p)})).apply(this,arguments)}function pl(v,p){return ri.apply(this,arguments)}function ri(){return(ri=(0,g.Z)(function*(v,p){return Sn(v,"POST","/v1/accounts:signInWithCustomToken",Vt(v,p))})).apply(this,arguments)}function Ps(v,p){return ks.apply(this,arguments)}function ks(){return(ks=(0,g.Z)(function*(v,p){const m=je(v),I=yield pl(m,{token:p,returnSecureToken:!0}),x=yield Lr._fromIdTokenResponse(m,"signIn",I);return yield m._updateCurrentUser(x.user),x})).apply(this,arguments)}class gt{constructor(p,m){this.factorId=p,this.uid=m.mfaEnrollmentId,this.enrollmentTime=new Date(m.enrolledAt).toUTCString(),this.displayName=m.displayName}static _fromServerResponse(p,m){return"phoneInfo"in m?Aa._fromServerResponse(p,m):We(p,"internal-error")}}class Aa extends gt{constructor(p){super("phone",p),this.phoneNumber=p.phoneInfo}static _fromServerResponse(p,m){return new Aa(m)}}function xa(v,p,m){var I;ne((null===(I=m.url)||void 0===I?void 0:I.length)>0,v,"invalid-continue-uri"),ne(void 0===m.dynamicLinkDomain||m.dynamicLinkDomain.length>0,v,"invalid-dynamic-link-domain"),p.continueUrl=m.url,p.dynamicLinkDomain=m.dynamicLinkDomain,p.canHandleCodeInApp=m.handleCodeInApp,m.iOS&&(ne(m.iOS.bundleId.length>0,v,"missing-ios-bundle-id"),p.iOSBundleId=m.iOS.bundleId),m.android&&(ne(m.android.packageName.length>0,v,"missing-android-pkg-name"),p.androidInstallApp=m.android.installApp,p.androidMinimumVersionCode=m.android.minimumVersion,p.androidPackageName=m.android.packageName)}function Pc(v,p,m){return Ra.apply(this,arguments)}function Ra(){return(Ra=(0,g.Z)(function*(v,p,m){const I=(0,U.m9)(v),x={requestType:"PASSWORD_RESET",email:p};m&&xa(I,x,m),yield Ic(I,x)})).apply(this,arguments)}function gl(v,p,m){return Ma.apply(this,arguments)}function Ma(){return(Ma=(0,g.Z)(function*(v,p,m){yield Js((0,U.m9)(v),{oobCode:p,newPassword:m})})).apply(this,arguments)}function yh(v,p){return Re.apply(this,arguments)}function Re(){return(Re=(0,g.Z)(function*(v,p){yield ko((0,U.m9)(v),{oobCode:p})})).apply(this,arguments)}function $t(v,p){return Na.apply(this,arguments)}function Na(){return(Na=(0,g.Z)(function*(v,p){const m=(0,U.m9)(v),I=yield Js(m,{oobCode:p}),x=I.requestType;switch(ne(x,m,"internal-error"),x){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":ne(I.newEmail,m,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":ne(I.mfaInfo,m,"internal-error");default:ne(I.email,m,"internal-error")}let O=null;return I.mfaInfo&&(O=gt._fromServerResponse(je(m),I.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===I.requestType?I.newEmail:I.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===I.requestType?I.email:I.newEmail)||null,multiFactorInfo:O},operation:x}})).apply(this,arguments)}function Vn(v,p){return Os.apply(this,arguments)}function Os(){return(Os=(0,g.Z)(function*(v,p){const{data:m}=yield $t((0,U.m9)(v),p);return m.email})).apply(this,arguments)}function Pa(v,p,m){return Gr.apply(this,arguments)}function Gr(){return(Gr=(0,g.Z)(function*(v,p,m){const I=je(v),x=yield Rc(I,{returnSecureToken:!0,email:p,password:m}),O=yield Lr._fromIdTokenResponse(I,"signIn",x);return yield I._updateCurrentUser(O.user),O})).apply(this,arguments)}function ml(v,p,m){return gu((0,U.m9)(v),Ca.credential(p,m))}function _l(v,p,m){return kc.apply(this,arguments)}function kc(){return(kc=(0,g.Z)(function*(v,p,m){const I=(0,U.m9)(v),x={requestType:"EMAIL_SIGNIN",email:p};ne(m.handleCodeInApp,I,"argument-error"),m&&xa(I,x,m),yield Si(I,x)})).apply(this,arguments)}function Oc(v,p){const m=as.parseLink(p);return"EMAIL_SIGNIN"===(null==m?void 0:m.operation)}function ka(v,p,m){return jo.apply(this,arguments)}function jo(){return(jo=(0,g.Z)(function*(v,p,m){const I=(0,U.m9)(v),x=Ca.credentialWithLink(p,m||de());return ne(x._tenantId===(I.tenantId||null),I,"tenant-id-mismatch"),gu(I,x)})).apply(this,arguments)}function ar(v,p){return xi.apply(this,arguments)}function xi(){return(xi=(0,g.Z)(function*(v,p){return Yt(v,"POST","/v1/accounts:createAuthUri",Vt(v,p))})).apply(this,arguments)}function yl(v,p){return Hi.apply(this,arguments)}function Hi(){return(Hi=(0,g.Z)(function*(v,p){const I={identifier:p,continueUri:Ve()?de():"http://localhost"},{signinMethods:x}=yield ar((0,U.m9)(v),I);return x||[]})).apply(this,arguments)}function ds(v,p){return Oa.apply(this,arguments)}function Oa(){return(Oa=(0,g.Z)(function*(v,p){const m=(0,U.m9)(v),x={requestType:"VERIFY_EMAIL",idToken:yield v.getIdToken()};p&&xa(m.auth,x,p);const{email:O}=yield Tr(m.auth,x);O!==v.email&&(yield v.reload())})).apply(this,arguments)}function Lc(v,p,m){return La.apply(this,arguments)}function La(){return(La=(0,g.Z)(function*(v,p,m){const I=(0,U.m9)(v),O={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield v.getIdToken(),newEmail:p};m&&xa(I.auth,O,m);const{email:ie}=yield Cc(I.auth,O);ie!==v.email&&(yield v.reload())})).apply(this,arguments)}function Fc(v,p){return ro.apply(this,arguments)}function ro(){return(ro=(0,g.Z)(function*(v,p){return Yt(v,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function vl(v,p){return Fa.apply(this,arguments)}function Fa(){return(Fa=(0,g.Z)(function*(v,{displayName:p,photoURL:m}){if(void 0===p&&void 0===m)return;const I=(0,U.m9)(v),O={idToken:yield I.getIdToken(),displayName:p,photoUrl:m,returnSecureToken:!0},ie=yield st(I,Fc(I.auth,O));I.displayName=ie.displayName||null,I.photoURL=ie.photoUrl||null;const Oe=I.providerData.find(({providerId:et})=>"password"===et);Oe&&(Oe.displayName=I.displayName,Oe.photoURL=I.photoURL),yield I._updateTokensIfNecessary(ie)})).apply(this,arguments)}function El(v,p){return mu((0,U.m9)(v),p,null)}function Op(v,p){return mu((0,U.m9)(v),null,p)}function mu(v,p,m){return io.apply(this,arguments)}function io(){return(io=(0,g.Z)(function*(v,p,m){const{auth:I}=v,O={idToken:yield v.getIdToken(),returnSecureToken:!0};p&&(O.email=p),m&&(O.password=m);const ie=yield st(v,St(I,O));yield v._updateTokensIfNecessary(ie,!0)})).apply(this,arguments)}class so{constructor(p,m,I={}){this.isNewUser=p,this.providerId=m,this.profile=I}}class Uc extends so{constructor(p,m,I,x){super(p,m,I),this.username=x}}class vh extends so{constructor(p,m){super(p,"facebook.com",m)}}class $o extends Uc{constructor(p,m){super(p,"github.com",m,"string"==typeof(null==m?void 0:m.login)?null==m?void 0:m.login:null)}}class Wi extends so{constructor(p,m){super(p,"google.com",m)}}class Eh extends Uc{constructor(p,m,I){super(p,"twitter.com",m,I)}}function yr(v){const{user:p,_tokenResponse:m}=v;return p.isAnonymous&&!m?{providerId:null,isNewUser:!1,profile:null}:function wl(v){var p,m;if(!v)return null;const{providerId:I}=v,x=v.rawUserInfo?JSON.parse(v.rawUserInfo):{},O=v.isNewUser||"identitytoolkit#SignupNewUserResponse"===v.kind;if(!I&&(null==v?void 0:v.idToken)){const ie=null===(m=null===(p=Bt(v.idToken))||void 0===p?void 0:p.firebase)||void 0===m?void 0:m.sign_in_provider;if(ie)return new so(O,"anonymous"!==ie&&"custom"!==ie?ie:null)}if(!I)return null;switch(I){case"facebook.com":return new vh(O,x);case"github.com":return new $o(O,x);case"google.com":return new Wi(O,x);case"twitter.com":return new Eh(O,x,v.screenName||null);case"custom":case"anonymous":return new so(O,null);default:return new so(O,I,x)}}(m)}class fs{constructor(p,m){this.type=p,this.credential=m}static _fromIdtoken(p){return new fs("enroll",p)}static _fromMfaPendingCredential(p){return new fs("signin",p)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(p){var m,I;if(null==p?void 0:p.multiFactorSession){if(null===(m=p.multiFactorSession)||void 0===m?void 0:m.pendingCredential)return fs._fromMfaPendingCredential(p.multiFactorSession.pendingCredential);if(null===(I=p.multiFactorSession)||void 0===I?void 0:I.idToken)return fs._fromIdtoken(p.multiFactorSession.idToken)}return null}}class Va{constructor(p,m,I){this.session=p,this.hints=m,this.signInResolver=I}static _fromError(p,m){const I=je(p),x=m.customData._serverResponse,O=(x.mfaInfo||[]).map(Oe=>gt._fromServerResponse(I,Oe));ne(x.mfaPendingCredential,I,"internal-error");const ie=fs._fromMfaPendingCredential(x.mfaPendingCredential);return new Va(ie,O,function(){var Oe=(0,g.Z)(function*(et){const mt=yield et._process(I,ie);delete x.mfaInfo,delete x.mfaPendingCredential;const bt=Object.assign(Object.assign({},x),{idToken:mt.idToken,refreshToken:mt.refreshToken});switch(m.operationType){case"signIn":const Tn=yield Lr._fromIdTokenResponse(I,m.operationType,bt);return yield I._updateCurrentUser(Tn.user),Tn;case"reauthenticate":return ne(m.user,I,"internal-error"),Lr._forOperation(m.user,m.operationType,bt);default:We(I,"internal-error")}});return function(et){return Oe.apply(this,arguments)}}())}resolveSignIn(p){var m=this;return(0,g.Z)(function*(){return m.signInResolver(p)})()}}function _u(v,p){var m;const I=(0,U.m9)(v),x=p;return ne(p.customData.operationType,I,"argument-error"),ne(null===(m=x.customData._serverResponse)||void 0===m?void 0:m.mfaPendingCredential,I,"argument-error"),Va._fromError(I,x)}function vr(v,p){return Yt(v,"POST","/v2/accounts/mfaEnrollment:start",Vt(v,p))}class Ho{constructor(p){this.user=p,this.enrolledFactors=[],p._onReload(m=>{m.mfaInfo&&(this.enrolledFactors=m.mfaInfo.map(I=>gt._fromServerResponse(p.auth,I)))})}static _fromUser(p){return new Ho(p)}getSession(){var p=this;return(0,g.Z)(function*(){return fs._fromIdtoken(yield p.user.getIdToken())})()}enroll(p,m){var I=this;return(0,g.Z)(function*(){const x=p,O=yield I.getSession(),ie=yield st(I.user,x._process(I.user.auth,O,m));return yield I.user._updateTokensIfNecessary(ie),I.user.reload()})()}unenroll(p){var m=this;return(0,g.Z)(function*(){const I="string"==typeof p?p:p.uid,x=yield m.user.getIdToken(),O=yield st(m.user,function oo(v,p){return Yt(v,"POST","/v2/accounts/mfaEnrollment:withdraw",Vt(v,p))}(m.user.auth,{idToken:x,mfaEnrollmentId:I}));m.enrolledFactors=m.enrolledFactors.filter(({uid:ie})=>ie!==I),yield m.user._updateTokensIfNecessary(O);try{yield m.user.reload()}catch(ie){if("auth/user-token-expired"!==ie.code)throw ie}})()}}const Bc=new WeakMap;function jc(v){const p=(0,U.m9)(v);return Bc.has(p)||Bc.set(p,Ho._fromUser(p)),Bc.get(p)}const ao="__sak";class Ba{constructor(p,m){this.storageRetriever=p,this.type=m}_isAvailable(){try{return this.storage?(this.storage.setItem(ao,"1"),this.storage.removeItem(ao),Promise.resolve(!0)):Promise.resolve(!1)}catch(p){return Promise.resolve(!1)}}_set(p,m){return this.storage.setItem(p,JSON.stringify(m)),Promise.resolve()}_get(p){const m=this.storage.getItem(p);return Promise.resolve(m?JSON.parse(m):null)}_remove(p){return this.storage.removeItem(p),Promise.resolve()}get storage(){return this.storageRetriever()}}const at=(()=>{class v extends Ba{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(m,I)=>this.onStorageEvent(m,I),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Ch(){const v=(0,U.z$)();return G(v)||Ft(v)}()&&function ji(){try{return!(!window||window===window.top)}catch(v){return!1}}(),this.fallbackToPolling=kr(),this._shouldAllowMigration=!0}forAllChangedKeys(m){for(const I of Object.keys(this.listeners)){const x=this.storage.getItem(I),O=this.localCache[I];x!==O&&m(I,O,x)}}onStorageEvent(m,I=!1){if(!m.key)return void this.forAllChangedKeys((Oe,et,mt)=>{this.notifyListeners(Oe,mt)});const x=m.key;if(I?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Oe=this.storage.getItem(x);if(m.newValue!==Oe)null!==m.newValue?this.storage.setItem(x,m.newValue):this.storage.removeItem(x);else if(this.localCache[x]===m.newValue&&!I)return}const O=()=>{const Oe=this.storage.getItem(x);!I&&this.localCache[x]===Oe||this.notifyListeners(x,Oe)},ie=this.storage.getItem(x);!function Ut(){return(0,U.w1)()&&10===document.documentMode}()||ie===m.newValue||m.newValue===m.oldValue?O():setTimeout(O,10)}notifyListeners(m,I){this.localCache[m]=I;const x=this.listeners[m];if(x)for(const O of Array.from(x))O(I&&JSON.parse(I))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((m,I,x)=>{this.onStorageEvent(new StorageEvent("storage",{key:m,oldValue:I,newValue:x}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(m,I){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[m]||(this.listeners[m]=new Set,this.localCache[m]=this.storage.getItem(m)),this.listeners[m].add(I)}_removeListener(m,I){this.listeners[m]&&(this.listeners[m].delete(I),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(m,I){var x=()=>super._set,O=this;return(0,g.Z)(function*(){yield x().call(O,m,I),O.localCache[m]=JSON.stringify(I)})()}_get(m){var I=()=>super._get,x=this;return(0,g.Z)(function*(){const O=yield I().call(x,m);return x.localCache[m]=JSON.stringify(O),O})()}_remove(m){var I=()=>super._remove,x=this;return(0,g.Z)(function*(){yield I().call(x,m),delete x.localCache[m]})()}}return v.type="LOCAL",v})(),Fr=(()=>{class v extends Ba{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(m,I){}_removeListener(m,I){}}return v.type="SESSION",v})();let Cl=(()=>{class v{constructor(m){this.eventTarget=m,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(m){const I=this.receivers.find(O=>O.isListeningto(m));if(I)return I;const x=new v(m);return this.receivers.push(x),x}isListeningto(m){return this.eventTarget===m}handleEvent(m){var I=this;return(0,g.Z)(function*(){const x=m,{eventId:O,eventType:ie,data:Oe}=x.data,et=I.handlersMap[ie];if(!(null==et?void 0:et.size))return;x.ports[0].postMessage({status:"ack",eventId:O,eventType:ie});const mt=Array.from(et).map(function(){var Tn=(0,g.Z)(function*(qi){return qi(x.origin,Oe)});return function(qi){return Tn.apply(this,arguments)}}()),bt=yield function Ri(v){return Promise.all(v.map(function(){var p=(0,g.Z)(function*(m){try{return{fulfilled:!0,value:yield m}}catch(I){return{fulfilled:!1,reason:I}}});return function(m){return p.apply(this,arguments)}}()))}(mt);x.ports[0].postMessage({status:"done",eventId:O,eventType:ie,response:bt})})()}_subscribe(m,I){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[m]||(this.handlersMap[m]=new Set),this.handlersMap[m].add(I)}_unsubscribe(m,I){this.handlersMap[m]&&I&&this.handlersMap[m].delete(I),(!I||0===this.handlersMap[m].size)&&delete this.handlersMap[m],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return v.receivers=[],v})();function Wo(v="",p=10){let m="";for(let I=0;I<p;I++)m+=Math.floor(10*Math.random());return v+m}class zo{constructor(p){this.target=p,this.handlers=new Set}removeMessageHandler(p){p.messageChannel&&(p.messageChannel.port1.removeEventListener("message",p.onMessage),p.messageChannel.port1.close()),this.handlers.delete(p)}_send(p,m,I=50){var x=this;return(0,g.Z)(function*(){const O="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!O)throw new Error("connection_unavailable");let ie,Oe;return new Promise((et,mt)=>{const bt=Wo("",20);O.port1.start();const Tn=setTimeout(()=>{mt(new Error("unsupported_event"))},I);Oe={messageChannel:O,onMessage(qi){const $s=qi;if($s.data.eventId===bt)switch($s.data.status){case"ack":clearTimeout(Tn),ie=setTimeout(()=>{mt(new Error("timeout"))},3e3);break;case"done":clearTimeout(ie),et($s.data.response);break;default:clearTimeout(Tn),clearTimeout(ie),mt(new Error("invalid_response"))}}},x.handlers.add(Oe),O.port1.addEventListener("message",Oe.onMessage),x.target.postMessage({eventType:p,eventId:bt,data:m},[O.port2])}).finally(()=>{Oe&&x.removeMessageHandler(Oe)})})()}}function jn(){return window}function uo(){return void 0!==jn().WorkerGlobalScope&&"function"==typeof jn().importScripts}function Rt(){return(Rt=(0,g.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(v){return null}})).apply(this,arguments)}const Wc="firebaseLocalStorageDb",xn="firebaseLocalStorage",yu="fbase_key";class gs{constructor(p){this.request=p}toPromise(){return new Promise((p,m)=>{this.request.addEventListener("success",()=>{p(this.request.result)}),this.request.addEventListener("error",()=>{m(this.request.error)})})}}function lo(v,p){return v.transaction([xn],p?"readwrite":"readonly").objectStore(xn)}function qo(){const v=indexedDB.open(Wc,1);return new Promise((p,m)=>{v.addEventListener("error",()=>{m(v.error)}),v.addEventListener("upgradeneeded",()=>{const I=v.result;try{I.createObjectStore(xn,{keyPath:yu})}catch(x){m(x)}}),v.addEventListener("success",(0,g.Z)(function*(){const I=v.result;I.objectStoreNames.contains(xn)?p(I):(I.close(),yield function ii(){const v=indexedDB.deleteDatabase(Wc);return new gs(v).toPromise()}(),p(yield qo()))}))})}function co(v,p,m){return ho.apply(this,arguments)}function ho(){return(ho=(0,g.Z)(function*(v,p,m){const I=lo(v,!0).put({[yu]:p,value:m});return new gs(I).toPromise()})).apply(this,arguments)}function Fs(){return(Fs=(0,g.Z)(function*(v,p){const m=lo(v,!1).get(p),I=yield new gs(m).toPromise();return void 0===I?null:I.value})).apply(this,arguments)}function Zo(v,p){const m=lo(v,!0).delete(p);return new gs(m).toPromise()}const fo=(()=>{class v{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var m=this;return(0,g.Z)(function*(){return m.db||(m.db=yield qo()),m.db})()}_withRetries(m){var I=this;return(0,g.Z)(function*(){let x=0;for(;;)try{const O=yield I._openDb();return yield m(O)}catch(O){if(x++>3)throw O;I.db&&(I.db.close(),I.db=void 0)}})()}initializeServiceWorkerMessaging(){var m=this;return(0,g.Z)(function*(){return uo()?m.initializeReceiver():m.initializeSender()})()}initializeReceiver(){var m=this;return(0,g.Z)(function*(){m.receiver=Cl._getInstance(function Hc(){return uo()?self:null}()),m.receiver._subscribe("keyChanged",function(){var I=(0,g.Z)(function*(x,O){return{keyProcessed:(yield m._poll()).includes(O.key)}});return function(x,O){return I.apply(this,arguments)}}()),m.receiver._subscribe("ping",function(){var I=(0,g.Z)(function*(x,O){return["keyChanged"]});return function(x,O){return I.apply(this,arguments)}}())})()}initializeSender(){var m=this;return(0,g.Z)(function*(){var I,x;if(m.activeServiceWorker=yield function ps(){return Rt.apply(this,arguments)}(),!m.activeServiceWorker)return;m.sender=new zo(m.activeServiceWorker);const O=yield m.sender._send("ping",{},800);!O||(null===(I=O[0])||void 0===I?void 0:I.fulfilled)&&(null===(x=O[0])||void 0===x?void 0:x.value.includes("keyChanged"))&&(m.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(m){var I=this;return(0,g.Z)(function*(){if(I.sender&&I.activeServiceWorker&&function $c(){var v;return(null===(v=null==navigator?void 0:navigator.serviceWorker)||void 0===v?void 0:v.controller)||null}()===I.activeServiceWorker)try{yield I.sender._send("keyChanged",{key:m},I.serviceWorkerReceiverAvailable?800:50)}catch(x){}})()}_isAvailable(){return(0,g.Z)(function*(){try{if(!indexedDB)return!1;const m=yield qo();return yield co(m,ao,"1"),yield Zo(m,ao),!0}catch(m){}return!1})()}_withPendingWrite(m){var I=this;return(0,g.Z)(function*(){I.pendingWrites++;try{yield m()}finally{I.pendingWrites--}})()}_set(m,I){var x=this;return(0,g.Z)(function*(){return x._withPendingWrite((0,g.Z)(function*(){return yield x._withRetries(O=>co(O,m,I)),x.localCache[m]=I,x.notifyServiceWorker(m)}))})()}_get(m){var I=this;return(0,g.Z)(function*(){const x=yield I._withRetries(O=>function Ko(v,p){return Fs.apply(this,arguments)}(O,m));return I.localCache[m]=x,x})()}_remove(m){var I=this;return(0,g.Z)(function*(){return I._withPendingWrite((0,g.Z)(function*(){return yield I._withRetries(x=>Zo(x,m)),delete I.localCache[m],I.notifyServiceWorker(m)}))})()}_poll(){var m=this;return(0,g.Z)(function*(){const I=yield m._withRetries(ie=>{const Oe=lo(ie,!1).getAll();return new gs(Oe).toPromise()});if(!I)return[];if(0!==m.pendingWrites)return[];const x=[],O=new Set;for(const{fbase_key:ie,value:Oe}of I)O.add(ie),JSON.stringify(m.localCache[ie])!==JSON.stringify(Oe)&&(m.notifyListeners(ie,Oe),x.push(ie));for(const ie of Object.keys(m.localCache))m.localCache[ie]&&!O.has(ie)&&(m.notifyListeners(ie,null),x.push(ie));return x})()}notifyListeners(m,I){this.localCache[m]=I;const x=this.listeners[m];if(x)for(const O of Array.from(x))O(I)}startPolling(){var m=this;this.stopPolling(),this.pollTimer=setInterval((0,g.Z)(function*(){return m._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(m,I){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[m]||(this.listeners[m]=new Set,this._get(m)),this.listeners[m].add(I)}_removeListener(m,I){this.listeners[m]&&(this.listeners[m].delete(I),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return v.type="LOCAL",v})();function bl(v,p){return Yt(v,"POST","/v2/accounts/mfaSignIn:start",Vt(v,p))}function Wa(){return(Wa=(0,g.Z)(function*(v){return(yield Yt(v,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Us(v){return new Promise((p,m)=>{const I=document.createElement("script");I.setAttribute("src",v),I.onload=p,I.onerror=x=>{const O=Pe("internal-error");O.customData=x,m(O)},I.type="text/javascript",I.charset="UTF-8",function Er(){var v,p;return null!==(p=null===(v=document.getElementsByTagName("head"))||void 0===v?void 0:v[0])&&void 0!==p?p:document}().appendChild(I)})}function zi(v){return`__${v}${Math.floor(1e6*Math.random())}`}const Ur=1e12;class ms{constructor(p){this.auth=p,this.counter=Ur,this._widgets=new Map}render(p,m){const I=this.counter;return this._widgets.set(I,new $n(p,this.auth.name,m||{})),this.counter++,I}reset(p){var m;const I=p||Ur;null===(m=this._widgets.get(I))||void 0===m||m.delete(),this._widgets.delete(I)}getResponse(p){var m;return(null===(m=this._widgets.get(p||Ur))||void 0===m?void 0:m.getResponse())||""}execute(p){var m=this;return(0,g.Z)(function*(){var I;return null===(I=m._widgets.get(p||Ur))||void 0===I||I.execute(),""})()}}class $n{constructor(p,m,I){this.params=I,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const x="string"==typeof p?document.getElementById(p):p;ne(x,"argument-error",{appName:m}),this.container=x,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function vu(v){const p=[],m="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let I=0;I<v;I++)p.push(m.charAt(Math.floor(Math.random()*m.length)));return p.join("")}(50);const{callback:p,"expired-callback":m}=this.params;if(p)try{p(this.responseToken)}catch(I){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,m)try{m()}catch(I){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const go=zi("rcb"),Rn=new Ye(3e4,6e4);class Vp{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!jn().grecaptcha}load(p,m=""){return ne(function n_(v){return v.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(v)}(m),p,"argument-error"),this.shouldResolveImmediately(m)?Promise.resolve(jn().grecaptcha):new Promise((I,x)=>{const O=jn().setTimeout(()=>{x(Pe(p,"network-request-failed"))},Rn.get());jn()[go]=()=>{jn().clearTimeout(O),delete jn()[go];const Oe=jn().grecaptcha;if(!Oe)return void x(Pe(p,"internal-error"));const et=Oe.render;Oe.render=(mt,bt)=>{const Tn=et(mt,bt);return this.counter++,Tn},this.hostLanguage=m,I(Oe)},Us(`https://www.google.com/recaptcha/api.js??${(0,U.xO)({onload:go,render:"explicit",hl:m})}`).catch(()=>{clearTimeout(O),x(Pe(p,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(p){return!!jn().grecaptcha&&(p===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Yo{load(p){return(0,g.Z)(function*(){return new ms(p)})()}clearedOneInstance(){}}const qr="recaptcha",Th={theme:"light",type:"image"};class Bs{constructor(p,m=Object.assign({},Th),I){this.parameters=m,this.type=qr,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=je(I),this.isInvisible="invisible"===this.parameters.size,ne("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const x="string"==typeof p?document.getElementById(p):p;ne(x,this.auth,"argument-error"),this.container=x,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Yo:new Vp,this.validateStartingState()}verify(){var p=this;return(0,g.Z)(function*(){p.assertNotDestroyed();const m=yield p.render(),I=p.getAssertedRecaptcha();return I.getResponse(m)||new Promise(O=>{const ie=Oe=>{!Oe||(p.tokenChangeListeners.delete(ie),O(Oe))};p.tokenChangeListeners.add(ie),p.isInvisible&&I.execute(m)})})()}render(){try{this.assertNotDestroyed()}catch(p){return Promise.reject(p)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(p=>{throw this.renderPromise=null,p})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(p=>{this.container.removeChild(p)})}validateStartingState(){ne(!this.parameters.sitekey,this.auth,"argument-error"),ne(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ne("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(p){return m=>{if(this.tokenChangeListeners.forEach(I=>I(m)),"function"==typeof p)p(m);else if("string"==typeof p){const I=jn()[p];"function"==typeof I&&I(m)}}}assertNotDestroyed(){ne(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var p=this;return(0,g.Z)(function*(){if(yield p.init(),!p.widgetId){let m=p.container;if(!p.isInvisible){const I=document.createElement("div");m.appendChild(I),m=I}p.widgetId=p.getAssertedRecaptcha().render(m,p.parameters)}return p.widgetId})()}init(){var p=this;return(0,g.Z)(function*(){ne(Ve()&&!uo(),p.auth,"internal-error"),yield function mo(){let v=null;return new Promise(p=>{"complete"!==document.readyState?(v=()=>p(),window.addEventListener("load",v)):p()}).catch(p=>{throw v&&window.removeEventListener("load",v),p})}(),p.recaptcha=yield p._recaptchaLoader.load(p.auth,p.auth.languageCode||void 0);const m=yield function po(v){return Wa.apply(this,arguments)}(p.auth);ne(m,p.auth,"internal-error"),p.parameters.sitekey=m})()}getAssertedRecaptcha(){return ne(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Qo{constructor(p,m){this.verificationId=p,this.onConfirmation=m}confirm(p){const m=Uo._fromVerification(this.verificationId,p);return this.onConfirmation(m)}}function Yn(v,p,m){return za.apply(this,arguments)}function za(){return(za=(0,g.Z)(function*(v,p,m){const I=je(v),x=yield si(I,p,(0,U.m9)(m));return new Qo(x,O=>gu(I,O))})).apply(this,arguments)}function Ga(v,p,m){return Dh.apply(this,arguments)}function Dh(){return(Dh=(0,g.Z)(function*(v,p,m){const I=(0,U.m9)(v);yield Ns(!1,I,"phone");const x=yield si(I.auth,p,(0,U.m9)(m));return new Qo(x,O=>cs(I,O))})).apply(this,arguments)}function Sh(v,p,m){return Vr.apply(this,arguments)}function Vr(){return(Vr=(0,g.Z)(function*(v,p,m){const I=(0,U.m9)(v),x=yield si(I.auth,p,(0,U.m9)(m));return new Qo(x,O=>Bo(I,O))})).apply(this,arguments)}function si(v,p,m){return Jo.apply(this,arguments)}function Jo(){return(Jo=(0,g.Z)(function*(v,p,m){var I;const x=yield m.verify();try{let O;if(ne("string"==typeof x,v,"argument-error"),ne(m.type===qr,v,"argument-error"),O="string"==typeof p?{phoneNumber:p}:p,"session"in O){const ie=O.session;if("phoneNumber"in O)return ne("enroll"===ie.type,v,"internal-error"),(yield vr(v,{idToken:ie.credential,phoneEnrollmentInfo:{phoneNumber:O.phoneNumber,recaptchaToken:x}})).phoneSessionInfo.sessionInfo;{ne("signin"===ie.type,v,"internal-error");const Oe=(null===(I=O.multiFactorHint)||void 0===I?void 0:I.uid)||O.multiFactorUid;return ne(Oe,v,"missing-multi-factor-info"),(yield bl(v,{mfaPendingCredential:ie.credential,mfaEnrollmentId:Oe,phoneSignInInfo:{recaptchaToken:x}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:ie}=yield xp(v,{phoneNumber:O.phoneNumber,recaptchaToken:x});return ie}}finally{m._reset()}})).apply(this,arguments)}function Xo(v,p){return _o.apply(this,arguments)}function _o(){return(_o=(0,g.Z)(function*(v,p){yield yn((0,U.m9)(v),p)})).apply(this,arguments)}let Eu=(()=>{class v{constructor(m){this.providerId=v.PROVIDER_ID,this.auth=je(m)}verifyPhoneNumber(m,I){return si(this.auth,m,(0,U.m9)(I))}static credential(m,I){return Uo._fromVerification(m,I)}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{phoneNumber:I,temporaryProof:x}=m;return I&&x?Uo._fromTokenResponse(I,x):null}}return v.PROVIDER_ID="phone",v.PHONE_SIGN_IN_METHOD="phone",v})();function _s(v,p){return p?re(p):(ne(v._popupRedirectResolver,v,"argument-error"),v._popupRedirectResolver)}class qa extends un{constructor(p){super("custom","custom"),this.params=p}_getIdTokenResponse(p){return nr(p,this._buildIdpRequest())}_linkToIdToken(p,m){return nr(p,this._buildIdpRequest(m))}_getReauthenticationResolver(p){return nr(p,this._buildIdpRequest())}_buildIdpRequest(p){const m={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return p&&(m.idToken=p),m}}function Tl(v){return no(v.auth,new qa(v),v.bypassAuthState)}function Nt(v){const{auth:p,user:m}=v;return ne(m,p,"internal-error"),pu(m,new qa(v),v.bypassAuthState)}function wu(v){return Mn.apply(this,arguments)}function Mn(){return(Mn=(0,g.Z)(function*(v){const{auth:p,user:m}=v;return ne(m,p,"internal-error"),yn(m,new qa(v),v.bypassAuthState)})).apply(this,arguments)}class Iu{constructor(p,m,I,x,O=!1){this.auth=p,this.resolver=I,this.user=x,this.bypassAuthState=O,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(m)?m:[m]}execute(){var p=this;return new Promise(function(){var m=(0,g.Z)(function*(I,x){p.pendingPromise={resolve:I,reject:x};try{p.eventManager=yield p.resolver._initialize(p.auth),yield p.onExecution(),p.eventManager.registerConsumer(p)}catch(O){p.reject(O)}});return function(I,x){return m.apply(this,arguments)}}())}onAuthEvent(p){var m=this;return(0,g.Z)(function*(){const{urlResponse:I,sessionId:x,postBody:O,tenantId:ie,error:Oe,type:et}=p;if(Oe)return void m.reject(Oe);const mt={auth:m.auth,requestUri:I,sessionId:x,tenantId:ie||void 0,postBody:O||void 0,user:m.user,bypassAuthState:m.bypassAuthState};try{m.resolve(yield m.getIdpTask(et)(mt))}catch(bt){m.reject(bt)}})()}onError(p){this.reject(p)}getIdpTask(p){switch(p){case"signInViaPopup":case"signInViaRedirect":return Tl;case"linkViaPopup":case"linkViaRedirect":return wu;case"reauthViaPopup":case"reauthViaRedirect":return Nt;default:We(this.auth,"internal-error")}}resolve(p){be(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(p),this.unregisterAndCleanUp()}reject(p){be(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(p),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const yo=new Ye(2e3,1e4);function r_(v,p,m){return Cu.apply(this,arguments)}function Cu(){return(Cu=(0,g.Z)(function*(v,p,m){const I=je(v);Ce(v,p,Ms);const x=_s(I,m);return new Tu(I,"signInViaPopup",p,x).executeNotNull()})).apply(this,arguments)}function Ah(v,p,m){return wr.apply(this,arguments)}function wr(){return(wr=(0,g.Z)(function*(v,p,m){const I=(0,U.m9)(v);Ce(I.auth,p,Ms);const x=_s(I.auth,m);return new Tu(I.auth,"reauthViaPopup",p,x,I).executeNotNull()})).apply(this,arguments)}function Dl(v,p,m){return bu.apply(this,arguments)}function bu(){return(bu=(0,g.Z)(function*(v,p,m){const I=(0,U.m9)(v);Ce(I.auth,p,Ms);const x=_s(I.auth,m);return new Tu(I.auth,"linkViaPopup",p,x,I).executeNotNull()})).apply(this,arguments)}let Tu=(()=>{class v extends Iu{constructor(m,I,x,O,ie){super(m,I,O,ie),this.provider=x,this.authWindow=null,this.pollId=null,v.currentPopupAction&&v.currentPopupAction.cancel(),v.currentPopupAction=this}executeNotNull(){var m=this;return(0,g.Z)(function*(){const I=yield m.execute();return ne(I,m.auth,"internal-error"),I})()}onExecution(){var m=this;return(0,g.Z)(function*(){be(1===m.filter.length,"Popup operations only handle one event");const I=Wo();m.authWindow=yield m.resolver._openPopup(m.auth,m.provider,m.filter[0],I),m.authWindow.associatedEvent=I,m.resolver._originValidation(m.auth).catch(x=>{m.reject(x)}),m.resolver._isIframeWebStorageSupported(m.auth,x=>{x||m.reject(Pe(m.auth,"web-storage-unsupported"))}),m.pollUserCancellation()})()}get eventId(){var m;return(null===(m=this.authWindow)||void 0===m?void 0:m.associatedEvent)||null}cancel(){this.reject(Pe(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,v.currentPopupAction=null}pollUserCancellation(){const m=()=>{var I,x;this.pollId=(null===(x=null===(I=this.authWindow)||void 0===I?void 0:I.window)||void 0===x?void 0:x.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(Pe(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(m,yo.get())};m()}}return v.currentPopupAction=null,v})();const An=new Map;class rr extends Iu{constructor(p,m,I=!1){super(p,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],m,void 0,I),this.eventId=null}execute(){var p=()=>super.execute,m=this;return(0,g.Z)(function*(){let I=An.get(m.auth._key());if(!I){try{const O=(yield function i_(v,p){return ea.apply(this,arguments)}(m.resolver,m.auth))?yield p().call(m):null;I=()=>Promise.resolve(O)}catch(x){I=()=>Promise.reject(x)}An.set(m.auth._key(),I)}return m.bypassAuthState||An.set(m.auth._key(),()=>Promise.resolve(null)),I()})()}onAuthEvent(p){var m=()=>super.onAuthEvent,I=this;return(0,g.Z)(function*(){if("signInViaRedirect"===p.type)return m().call(I,p);if("unknown"!==p.type){if(p.eventId){const x=yield I.auth._redirectUserForId(p.eventId);if(x)return I.user=x,m().call(I,p);I.resolve(null)}}else I.resolve(null)})()}onExecution(){return(0,g.Z)(function*(){})()}cleanUp(){}}function ea(){return(ea=(0,g.Z)(function*(v,p){const m=T(p),I=b(v);if(!(yield I._isAvailable()))return!1;const x="true"===(yield I._get(m));return yield I._remove(m),x})).apply(this,arguments)}function Eo(v,p){return wo.apply(this,arguments)}function wo(){return(wo=(0,g.Z)(function*(v,p){return b(v)._set(T(p),"true")})).apply(this,arguments)}function xh(){An.clear()}function Sl(v,p){An.set(v._key(),p)}function b(v){return re(v._redirectPersistence)}function T(v){return vt("pendingRedirect",v.config.apiKey,v.name)}function M(v,p,m){return function F(v,p,m){return J.apply(this,arguments)}(v,p,m)}function J(){return(J=(0,g.Z)(function*(v,p,m){const I=je(v);Ce(v,p,Ms);const x=_s(I,m);return yield Eo(x,I),x._openRedirect(I,p,"signInViaRedirect")})).apply(this,arguments)}function X(v,p,m){return function Ae(v,p,m){return rt.apply(this,arguments)}(v,p,m)}function rt(){return(rt=(0,g.Z)(function*(v,p,m){const I=(0,U.m9)(v);Ce(I.auth,p,Ms);const x=_s(I.auth,m);yield Eo(x,I.auth);const O=yield ys(I);return x._openRedirect(I.auth,p,"reauthViaRedirect",O)})).apply(this,arguments)}function _t(v,p,m){return function Et(v,p,m){return Pt.apply(this,arguments)}(v,p,m)}function Pt(){return(Pt=(0,g.Z)(function*(v,p,m){const I=(0,U.m9)(v);Ce(I.auth,p,Ms);const x=_s(I.auth,m);yield Ns(!1,I,p.providerId),yield Eo(x,I.auth);const O=yield ys(I);return x._openRedirect(I.auth,p,"linkViaRedirect",O)})).apply(this,arguments)}function Ct(v,p){return Kr.apply(this,arguments)}function Kr(){return(Kr=(0,g.Z)(function*(v,p){return yield je(v)._initializationPromise,Nn(v,p,!1)})).apply(this,arguments)}function Nn(v,p){return oi.apply(this,arguments)}function oi(){return(oi=(0,g.Z)(function*(v,p,m=!1){const I=je(v),x=_s(I,p),ie=yield new rr(I,x,m).execute();return ie&&!m&&(delete ie.user._redirectEventId,yield I._persistUserIfCurrent(ie.user),yield I._setRedirectUser(null,p)),ie})).apply(this,arguments)}function ys(v){return Mi.apply(this,arguments)}function Mi(){return(Mi=(0,g.Z)(function*(v){const p=Wo(`${v.uid}:::`);return v._redirectEventId=p,yield v.auth._setRedirectUser(v),yield v.auth._persistUserIfCurrent(v),p})).apply(this,arguments)}class vs{constructor(p){this.auth=p,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(p){this.consumers.add(p),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,p)&&(this.sendToConsumer(this.queuedRedirectEvent,p),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(p){this.consumers.delete(p)}onEvent(p){if(this.hasEventBeenHandled(p))return!1;let m=!1;return this.consumers.forEach(I=>{this.isEventForConsumer(p,I)&&(m=!0,this.sendToConsumer(p,I),this.saveEventToCache(p))}),this.hasHandledPotentialRedirect||!function xl(v){switch(v.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Al(v);default:return!1}}(p)||(this.hasHandledPotentialRedirect=!0,m||(this.queuedRedirectEvent=p,m=!0)),m}sendToConsumer(p,m){var I;if(p.error&&!Al(p)){const x=(null===(I=p.error.code)||void 0===I?void 0:I.split("auth/")[1])||"internal-error";m.onError(Pe(this.auth,x))}else m.onAuthEvent(p)}isEventForConsumer(p,m){const I=null===m.eventId||!!p.eventId&&p.eventId===m.eventId;return m.filter.includes(p.type)&&I}hasEventBeenHandled(p){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Io(p))}saveEventToCache(p){this.cachedEventUids.add(Io(p)),this.lastProcessedEventTime=Date.now()}}function Io(v){return[v.type,v.eventId,v.sessionId,v.tenantId].filter(p=>p).join("-")}function Al({type:v,error:p}){return"unknown"===v&&"auth/no-auth-event"===(null==p?void 0:p.code)}function Rh(v){return Mh.apply(this,arguments)}function Mh(){return(Mh=(0,g.Z)(function*(v,p={}){return Yt(v,"GET","/v1/projects",p)})).apply(this,arguments)}const s_=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Co=/^https?/;function Nh(){return(Nh=(0,g.Z)(function*(v){if(v.config.emulator)return;const{authorizedDomains:p}=yield Rh(v);for(const m of p)try{if(XE(m))return}catch(I){}We(v,"unauthorized-domain")})).apply(this,arguments)}function XE(v){const p=de(),{protocol:m,hostname:I}=new URL(p);if(v.startsWith("chrome-extension://")){const ie=new URL(v);return""===ie.hostname&&""===I?"chrome-extension:"===m&&v.replace("chrome-extension://","")===p.replace("chrome-extension://",""):"chrome-extension:"===m&&ie.hostname===I}if(!Co.test(m))return!1;if(s_.test(v))return I===v;const x=v.replace(/\./g,"\\.");return new RegExp("^(.+\\."+x+"|"+x+")$","i").test(I)}const Bp=new Ye(3e4,6e4);function jp(){const v=jn().___jsl;if(null==v?void 0:v.H)for(const p of Object.keys(v.H))if(v.H[p].r=v.H[p].r||[],v.H[p].L=v.H[p].L||[],v.H[p].r=[...v.H[p].L],v.CP)for(let m=0;m<v.CP.length;m++)v.CP[m]=null}let Du=null;function Ph(v){return Du=Du||function o_(v){return new Promise((p,m)=>{var I,x,O;function ie(){jp(),gapi.load("gapi.iframes",{callback:()=>{p(gapi.iframes.getContext())},ontimeout:()=>{jp(),m(Pe(v,"network-request-failed"))},timeout:Bp.get()})}if(null===(x=null===(I=jn().gapi)||void 0===I?void 0:I.iframes)||void 0===x?void 0:x.Iframe)p(gapi.iframes.getContext());else{if(!(null===(O=jn().gapi)||void 0===O?void 0:O.load)){const Oe=zi("iframefcb");return jn()[Oe]=()=>{gapi.load?ie():m(Pe(v,"network-request-failed"))},Us(`https://apis.google.com/js/api.js?onload=${Oe}`).catch(et=>m(et))}ie()}}).catch(p=>{throw Du=null,p})}(v),Du}const bo=new Ye(5e3,15e3),Ka={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},a_=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Su(v){const p=v.config;ne(p.authDomain,v,"auth-domain-config-required");const m=p.emulator?dn(p,"emulator/auth/iframe"):`https://${v.config.authDomain}/__/auth/iframe`,I={apiKey:p.apiKey,appName:v.name,v:N.SDK_VERSION},x=a_.get(v.config.apiHost);x&&(I.eid=x);const O=v._getFrameworks();return O.length&&(I.fw=O.join(",")),`${m}?${(0,U.xO)(I).slice(1)}`}function Au(){return Au=(0,g.Z)(function*(v){const p=yield Ph(v),m=jn().gapi;return ne(m,v,"internal-error"),p.open({where:document.body,url:Su(v),messageHandlersFilter:m.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Ka,dontclear:!0},I=>new Promise(function(){var x=(0,g.Z)(function*(O,ie){yield I.restyle({setHideOnLeave:!1});const Oe=Pe(v,"network-request-failed"),et=jn().setTimeout(()=>{ie(Oe)},bo.get());function mt(){jn().clearTimeout(et),O(I)}I.ping(mt).then(mt,()=>{ie(Oe)})});return function(O,ie){return x.apply(this,arguments)}}()))}),Au.apply(this,arguments)}const xu={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Kc{constructor(p){this.window=p,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(p){}}}function js(v,p,m,I,x,O){ne(v.config.authDomain,v,"auth-domain-config-required"),ne(v.config.apiKey,v,"invalid-api-key");const ie={apiKey:v.config.apiKey,appName:v.name,authType:m,redirectUrl:I,v:N.SDK_VERSION,eventId:x};if(p instanceof Ms){p.setDefaultLanguage(v.languageCode),ie.providerId=p.providerId||"",(0,U.xb)(p.getCustomParameters())||(ie.customParameters=JSON.stringify(p.getCustomParameters()));for(const[et,mt]of Object.entries(O||{}))ie[et]=mt}if(p instanceof mi){const et=p.getScopes().filter(mt=>""!==mt);et.length>0&&(ie.scopes=et.join(","))}v.tenantId&&(ie.tid=v.tenantId);const Oe=ie;for(const et of Object.keys(Oe))void 0===Oe[et]&&delete Oe[et];return`${function ta({config:v}){return v.emulator?dn(v,"emulator/auth/handler"):`https://${v.authDomain}/__/auth/handler`}(v)}?${(0,U.xO)(Oe).slice(1)}`}const Za="webStorageSupport",Hp=class $p{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Fr,this._completeRedirectFn=Nn,this._overrideRedirectResult=Sl}_openPopup(p,m,I,x){var O=this;return(0,g.Z)(function*(){var ie;be(null===(ie=O.eventManagers[p._key()])||void 0===ie?void 0:ie.manager,"_initialize() not called before _openPopup()");const Oe=js(p,m,I,de(),x);return function l_(v,p,m,I=500,x=600){const O=Math.max((window.screen.availHeight-x)/2,0).toString(),ie=Math.max((window.screen.availWidth-I)/2,0).toString();let Oe="";const et=Object.assign(Object.assign({},xu),{width:I.toString(),height:x.toString(),top:O,left:ie}),mt=(0,U.z$)().toLowerCase();m&&(Oe=Se(mt)?"_blank":m),K(mt)&&(p=p||"http://localhost",et.scrollbars="yes");const bt=Object.entries(et).reduce((qi,[$s,Fh])=>`${qi}${$s}=${Fh},`,"");if(function ti(v=(0,U.z$)()){var p;return Ft(v)&&!!(null===(p=window.navigator)||void 0===p?void 0:p.standalone)}(mt)&&"_self"!==Oe)return function Ml(v,p){const m=document.createElement("a");m.href=v,m.target=p;const I=document.createEvent("MouseEvent");I.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),m.dispatchEvent(I)}(p||"",Oe),new Kc(null);const Tn=window.open(p||"",Oe,bt);ne(Tn,v,"popup-blocked");try{Tn.focus()}catch(qi){}return new Kc(Tn)}(p,Oe,Wo())})()}_openRedirect(p,m,I,x){var O=this;return(0,g.Z)(function*(){return yield O._originValidation(p),function Go(v){jn().location.href=v}(js(p,m,I,de(),x)),new Promise(()=>{})})()}_initialize(p){const m=p._key();if(this.eventManagers[m]){const{manager:x,promise:O}=this.eventManagers[m];return x?Promise.resolve(x):(be(O,"If manager is not set, promise should be"),O)}const I=this.initAndGetManager(p);return this.eventManagers[m]={promise:I},I.catch(()=>{delete this.eventManagers[m]}),I}initAndGetManager(p){var m=this;return(0,g.Z)(function*(){const I=yield function u_(v){return Au.apply(this,arguments)}(p),x=new vs(p);return I.register("authEvent",O=>(ne(null==O?void 0:O.authEvent,p,"invalid-auth-event"),{status:x.onEvent(O.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),m.eventManagers[p._key()]={manager:x},m.iframes[p._key()]=I,x})()}_isIframeWebStorageSupported(p,m){this.iframes[p._key()].send(Za,{type:Za},x=>{var O;const ie=null===(O=null==x?void 0:x[0])||void 0===O?void 0:O[Za];void 0!==ie&&m(!!ie),We(p,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(p){const m=p._key();return this.originValidationPromises[m]||(this.originValidationPromises[m]=function Rl(v){return Nh.apply(this,arguments)}(p)),this.originValidationPromises[m]}get _shouldInitProactively(){return kr()||G()||Ft()}};class Wp extends class h_{constructor(p){this.factorId=p}_process(p,m,I){switch(m.type){case"enroll":return this._finalizeEnroll(p,m.credential,I);case"signin":return this._finalizeSignIn(p,m.credential);default:return he("unexpected MultiFactorSessionType")}}}{constructor(p){super("phone"),this.credential=p}static _fromCredential(p){return new Wp(p)}_finalizeEnroll(p,m,I){return function Ih(v,p){return Yt(v,"POST","/v2/accounts/mfaEnrollment:finalize",Vt(v,p))}(p,{idToken:m,displayName:I,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(p,m){return function Dr(v,p){return Yt(v,"POST","/v2/accounts/mfaSignIn:finalize",Vt(v,p))}(p,{mfaPendingCredential:m,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let zp=(()=>{class v{constructor(){}static assertion(m){return Wp._fromCredential(m)}}return v.FACTOR_ID="phone",v})();var Lh="@firebase/auth";class f_{constructor(p){this.auth=p,this.internalListeners=new Map}getUid(){var p;return this.assertAuthConfigured(),(null===(p=this.auth.currentUser)||void 0===p?void 0:p.uid)||null}getToken(p){var m=this;return(0,g.Z)(function*(){return m.assertAuthConfigured(),yield m.auth._initializationPromise,m.auth.currentUser?{accessToken:yield m.auth.currentUser.getIdToken(p)}:null})()}addAuthTokenListener(p){if(this.assertAuthConfigured(),this.internalListeners.has(p))return;const m=this.auth.onIdTokenChanged(I=>{var x;p((null===(x=I)||void 0===x?void 0:x.stsTokenManager.accessToken)||null)});this.internalListeners.set(p,m),this.updateProactiveRefresh()}removeAuthTokenListener(p){this.assertAuthConfigured();const m=this.internalListeners.get(p);!m||(this.internalListeners.delete(p),m(),this.updateProactiveRefresh())}assertAuthConfigured(){ne(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function e0(v=(0,N.getApp)()){const p=(0,N._getProvider)(v,"auth");return p.isInitialized()?p.getImmediate():function oe(v,p){const m=(0,N._getProvider)(v,"auth");if(m.isInitialized()){const x=m.getImmediate(),O=m.getOptions();if((0,U.vZ)(O,null!=p?p:{}))return x;We(x,"already-initialized")}return m.initialize({options:p})}(v,{popupRedirectResolver:Hp,persistence:[fo,at,Fr]})}!function Zc(v){(0,N._registerComponent)(new ye.wA("auth",(p,{options:m})=>{const I=p.getProvider("app").getImmediate(),x=p.getProvider("heartbeat"),{apiKey:O,authDomain:ie}=I.options;return((Oe,et)=>{ne(O&&!O.includes(":"),"invalid-api-key",{appName:Oe.name}),ne(!(null==ie?void 0:ie.includes(":")),"argument-error",{appName:Oe.name});const mt={apiKey:O,authDomain:ie,clientPlatform:v,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:gr(v)},bt=new ni(Oe,et,mt);return function Ee(v,p){const m=(null==p?void 0:p.persistence)||[],I=(Array.isArray(m)?m:[m]).map(re);(null==p?void 0:p.errorMap)&&v._updateErrorMap(p.errorMap),v._initializeWithPersistence(I,null==p?void 0:p.popupRedirectResolver)}(bt,m),bt})(I,x)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((p,m,I)=>{p.getProvider("auth-internal").initialize()})),(0,N._registerComponent)(new ye.wA("auth-internal",p=>{const m=je(p.getProvider("auth").getImmediate());return new f_(m)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,N.registerVersion)(Lh,"0.20.1",function qp(v){switch(v){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(v)),(0,N.registerVersion)(Lh,"0.20.1","esm2017")}("Browser")},2090:(nt,Te,k)=>{k.d(Te,{$s:()=>jt,BH:()=>Ge,DV:()=>Yt,G6:()=>ne,GJ:()=>Xt,L:()=>le,LL:()=>de,Mn:()=>Ce,Pz:()=>Lt,Sg:()=>Ne,UG:()=>_e,UI:()=>Ti,US:()=>ye,Yr:()=>qe,ZB:()=>j,ZR:()=>Ee,b$:()=>We,cI:()=>Zt,d:()=>Pe,dS:()=>rs,eu:()=>be,g5:()=>N,gK:()=>or,gQ:()=>Gn,h$:()=>fe,hl:()=>he,hu:()=>U,jU:()=>De,m9:()=>fn,ne:()=>Vi,p$:()=>W,pd:()=>Di,r3:()=>Vt,ru:()=>ze,tV:()=>ve,uI:()=>He,ug:()=>Bt,vZ:()=>Nr,w1:()=>ke,w9:()=>hn,xO:()=>Ui,xb:()=>Cn,z$:()=>Ue,zI:()=>Z,zd:()=>di});const U=function(V,z){if(!V)throw N(z)},N=function(V){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+V)},ae=function(V){const z=[];let q=0;for(let we=0;we<V.length;we++){let $=V.charCodeAt(we);$<128?z[q++]=$:$<2048?(z[q++]=$>>6|192,z[q++]=63&$|128):55296==(64512&$)&&we+1<V.length&&56320==(64512&V.charCodeAt(we+1))?($=65536+((1023&$)<<10)+(1023&V.charCodeAt(++we)),z[q++]=$>>18|240,z[q++]=$>>12&63|128,z[q++]=$>>6&63|128,z[q++]=63&$|128):(z[q++]=$>>12|224,z[q++]=$>>6&63|128,z[q++]=63&$|128)}return z},ye={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(V,z){if(!Array.isArray(V))throw Error("encodeByteArray takes an array as a parameter");this.init_();const q=z?this.byteToCharMapWebSafe_:this.byteToCharMap_,we=[];for(let $=0;$<V.length;$+=3){const te=V[$],Fe=$+1<V.length,Xe=Fe?V[$+1]:0,ft=$+2<V.length,Dt=ft?V[$+2]:0;let er=(15&Xe)<<2|Dt>>6,ce=63&Dt;ft||(ce=64,Fe||(er=64)),we.push(q[te>>2],q[(3&te)<<4|Xe>>4],q[er],q[ce])}return we.join("")},encodeString(V,z){return this.HAS_NATIVE_SUPPORT&&!z?btoa(V):this.encodeByteArray(ae(V),z)},decodeString(V,z){return this.HAS_NATIVE_SUPPORT&&!z?atob(V):function(V){const z=[];let q=0,we=0;for(;q<V.length;){const $=V[q++];if($<128)z[we++]=String.fromCharCode($);else if($>191&&$<224){const te=V[q++];z[we++]=String.fromCharCode((31&$)<<6|63&te)}else if($>239&&$<365){const ft=((7&$)<<18|(63&V[q++])<<12|(63&V[q++])<<6|63&V[q++])-65536;z[we++]=String.fromCharCode(55296+(ft>>10)),z[we++]=String.fromCharCode(56320+(1023&ft))}else{const te=V[q++],Fe=V[q++];z[we++]=String.fromCharCode((15&$)<<12|(63&te)<<6|63&Fe)}}return z.join("")}(this.decodeStringToByteArray(V,z))},decodeStringToByteArray(V,z){this.init_();const q=z?this.charToByteMapWebSafe_:this.charToByteMap_,we=[];for(let $=0;$<V.length;){const te=q[V.charAt($++)],Xe=$<V.length?q[V.charAt($)]:0;++$;const Dt=$<V.length?q[V.charAt($)]:64;++$;const vt=$<V.length?q[V.charAt($)]:64;if(++$,null==te||null==Xe||null==Dt||null==vt)throw Error();we.push(te<<2|Xe>>4),64!==Dt&&(we.push(Xe<<4&240|Dt>>2),64!==vt&&we.push(Dt<<6&192|vt))}return we},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let V=0;V<this.ENCODED_VALS.length;V++)this.byteToCharMap_[V]=this.ENCODED_VALS.charAt(V),this.charToByteMap_[this.byteToCharMap_[V]]=V,this.byteToCharMapWebSafe_[V]=this.ENCODED_VALS_WEBSAFE.charAt(V),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[V]]=V,V>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(V)]=V,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(V)]=V)}}},fe=function(V){const z=ae(V);return ye.encodeByteArray(z,!0)},le=function(V){return fe(V).replace(/\./g,"")},ve=function(V){try{return ye.decodeString(V,!0)}catch(z){console.error("base64Decode failed: ",z)}return null};function W(V){return j(void 0,V)}function j(V,z){if(!(z instanceof Object))return z;switch(z.constructor){case Date:return new Date(z.getTime());case Object:void 0===V&&(V={});break;case Array:V=[];break;default:return z}for(const q in z)!z.hasOwnProperty(q)||!se(q)||(V[q]=j(V[q],z[q]));return V}function se(V){return"__proto__"!==V}class Ge{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((z,q)=>{this.resolve=z,this.reject=q})}wrapCallback(z){return(q,we)=>{q?this.reject(q):this.resolve(we),"function"==typeof z&&(this.promise.catch(()=>{}),1===z.length?z(q):z(q,we))}}}function Ne(V,z){if(V.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const we=z||"demo-project",$=V.iat||0,te=V.sub||V.user_id;if(!te)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Fe=Object.assign({iss:`https://securetoken.google.com/${we}`,aud:we,iat:$,exp:$+3600,auth_time:$,sub:te,user_id:te,firebase:{sign_in_provider:"custom",identities:{}}},V);return[le(JSON.stringify({alg:"none",type:"JWT"})),le(JSON.stringify(Fe)),""].join(".")}function Ue(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function He(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ue())}function _e(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(V){return!1}}function De(){return"object"==typeof self&&self.self===self}function ze(){const V="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof V&&void 0!==V.id}function We(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Pe(){return Ue().indexOf("Electron/")>=0}function ke(){const V=Ue();return V.indexOf("MSIE ")>=0||V.indexOf("Trident/")>=0}function Ce(){return Ue().indexOf("MSAppHost/")>=0}function qe(){return!1}function ne(){return!_e()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function he(){return"object"==typeof indexedDB}function be(){return new Promise((V,z)=>{try{let q=!0;const we="validate-browser-context-for-indexeddb-analytics-module",$=self.indexedDB.open(we);$.onsuccess=()=>{$.result.close(),q||self.indexedDB.deleteDatabase(we),V(!0)},$.onupgradeneeded=()=>{q=!1},$.onerror=()=>{var te;z((null===(te=$.error)||void 0===te?void 0:te.message)||"")}}catch(q){z(q)}})}function Z(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class Ee extends Error{constructor(z,q,we){super(q),this.code=z,this.customData=we,this.name="FirebaseError",Object.setPrototypeOf(this,Ee.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,de.prototype.create)}}class de{constructor(z,q,we){this.service=z,this.serviceName=q,this.errors=we}create(z,...q){const we=q[0]||{},$=`${this.service}/${z}`,te=this.errors[z],Fe=te?function Ve(V,z){return V.replace(ht,(q,we)=>{const $=z[we];return null!=$?String($):`<${we}?>`})}(te,we):"Error";return new Ee($,`${this.serviceName}: ${Fe} (${$}).`,we)}}const ht=/\{\$([^}]+)}/g;function Zt(V){return JSON.parse(V)}function Lt(V){return JSON.stringify(V)}const Ye=function(V){let z={},q={},we={},$="";try{const te=V.split(".");z=Zt(ve(te[0])||""),q=Zt(ve(te[1])||""),$=te[2],we=q.d||{},delete q.d}catch(te){}return{header:z,claims:q,data:we,signature:$}},hn=function(V){const q=Ye(V).claims;return!!q&&"object"==typeof q&&q.hasOwnProperty("iat")},Xt=function(V){const z=Ye(V).claims;return"object"==typeof z&&!0===z.admin};function Vt(V,z){return Object.prototype.hasOwnProperty.call(V,z)}function Yt(V,z){if(Object.prototype.hasOwnProperty.call(V,z))return V[z]}function Cn(V){for(const z in V)if(Object.prototype.hasOwnProperty.call(V,z))return!1;return!0}function Ti(V,z,q){const we={};for(const $ in V)Object.prototype.hasOwnProperty.call(V,$)&&(we[$]=z.call(q,V[$],$,V));return we}function Nr(V,z){if(V===z)return!0;const q=Object.keys(V),we=Object.keys(z);for(const $ of q){if(!we.includes($))return!1;const te=V[$],Fe=z[$];if(Sn(te)&&Sn(Fe)){if(!Nr(te,Fe))return!1}else if(te!==Fe)return!1}for(const $ of we)if(!q.includes($))return!1;return!0}function Sn(V){return null!==V&&"object"==typeof V}function Ui(V){const z=[];for(const[q,we]of Object.entries(V))Array.isArray(we)?we.forEach($=>{z.push(encodeURIComponent(q)+"="+encodeURIComponent($))}):z.push(encodeURIComponent(q)+"="+encodeURIComponent(we));return z.length?"&"+z.join("&"):""}function di(V){const z={};return V.replace(/^\?/,"").split("&").forEach(we=>{if(we){const[$,te]=we.split("=");z[decodeURIComponent($)]=decodeURIComponent(te)}}),z}function Di(V){const z=V.indexOf("?");if(!z)return"";const q=V.indexOf("#",z);return V.substring(z,q>0?q:void 0)}class Gn{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let z=1;z<this.blockSize;++z)this.pad_[z]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(z,q){q||(q=0);const we=this.W_;if("string"==typeof z)for(let vt=0;vt<16;vt++)we[vt]=z.charCodeAt(q)<<24|z.charCodeAt(q+1)<<16|z.charCodeAt(q+2)<<8|z.charCodeAt(q+3),q+=4;else for(let vt=0;vt<16;vt++)we[vt]=z[q]<<24|z[q+1]<<16|z[q+2]<<8|z[q+3],q+=4;for(let vt=16;vt<80;vt++){const er=we[vt-3]^we[vt-8]^we[vt-14]^we[vt-16];we[vt]=4294967295&(er<<1|er>>>31)}let Dt,an,$=this.chain_[0],te=this.chain_[1],Fe=this.chain_[2],Xe=this.chain_[3],ft=this.chain_[4];for(let vt=0;vt<80;vt++){vt<40?vt<20?(Dt=Xe^te&(Fe^Xe),an=1518500249):(Dt=te^Fe^Xe,an=1859775393):vt<60?(Dt=te&Fe|Xe&(te|Fe),an=2400959708):(Dt=te^Fe^Xe,an=3395469782);const er=($<<5|$>>>27)+Dt+ft+an+we[vt]&4294967295;ft=Xe,Xe=Fe,Fe=4294967295&(te<<30|te>>>2),te=$,$=er}this.chain_[0]=this.chain_[0]+$&4294967295,this.chain_[1]=this.chain_[1]+te&4294967295,this.chain_[2]=this.chain_[2]+Fe&4294967295,this.chain_[3]=this.chain_[3]+Xe&4294967295,this.chain_[4]=this.chain_[4]+ft&4294967295}update(z,q){if(null==z)return;void 0===q&&(q=z.length);const we=q-this.blockSize;let $=0;const te=this.buf_;let Fe=this.inbuf_;for(;$<q;){if(0===Fe)for(;$<=we;)this.compress_(z,$),$+=this.blockSize;if("string"==typeof z){for(;$<q;)if(te[Fe]=z.charCodeAt($),++Fe,++$,Fe===this.blockSize){this.compress_(te),Fe=0;break}}else for(;$<q;)if(te[Fe]=z[$],++Fe,++$,Fe===this.blockSize){this.compress_(te),Fe=0;break}}this.inbuf_=Fe,this.total_+=q}digest(){const z=[];let q=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let $=this.blockSize-1;$>=56;$--)this.buf_[$]=255&q,q/=256;this.compress_(this.buf_);let we=0;for(let $=0;$<5;$++)for(let te=24;te>=0;te-=8)z[we]=this.chain_[$]>>te&255,++we;return z}}function Vi(V,z){const q=new pt(V,z);return q.subscribe.bind(q)}class pt{constructor(z,q){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=q,this.task.then(()=>{z(this)}).catch(we=>{this.error(we)})}next(z){this.forEachObserver(q=>{q.next(z)})}error(z){this.forEachObserver(q=>{q.error(z)}),this.close(z)}complete(){this.forEachObserver(z=>{z.complete()}),this.close()}subscribe(z,q,we){let $;if(void 0===z&&void 0===q&&void 0===we)throw new Error("Missing Observer.");$=function wn(V,z){if("object"!=typeof V||null===V)return!1;for(const q of z)if(q in V&&"function"==typeof V[q])return!0;return!1}(z,["next","error","complete"])?z:{next:z,error:q,complete:we},void 0===$.next&&($.next=en),void 0===$.error&&($.error=en),void 0===$.complete&&($.complete=en);const te=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?$.error(this.finalError):$.complete()}catch(Fe){}}),this.observers.push($),te}unsubscribeOne(z){void 0===this.observers||void 0===this.observers[z]||(delete this.observers[z],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(z){if(!this.finalized)for(let q=0;q<this.observers.length;q++)this.sendOne(q,z)}sendOne(z,q){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[z])try{q(this.observers[z])}catch(we){"undefined"!=typeof console&&console.error&&console.error(we)}})}close(z){this.finalized||(this.finalized=!0,void 0!==z&&(this.finalError=z),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function en(){}function or(V,z){return`${V} failed: ${z} argument `}const rs=function(V){const z=[];let q=0;for(let we=0;we<V.length;we++){let $=V.charCodeAt(we);if($>=55296&&$<=56319){const te=$-55296;we++,U(we<V.length,"Surrogate pair missing trail surrogate."),$=65536+(te<<10)+(V.charCodeAt(we)-56320)}$<128?z[q++]=$:$<2048?(z[q++]=$>>6|192,z[q++]=63&$|128):$<65536?(z[q++]=$>>12|224,z[q++]=$>>6&63|128,z[q++]=63&$|128):(z[q++]=$>>18|240,z[q++]=$>>12&63|128,z[q++]=$>>6&63|128,z[q++]=63&$|128)}return z},Bt=function(V){let z=0;for(let q=0;q<V.length;q++){const we=V.charCodeAt(q);we<128?z++:we<2048?z+=2:we>=55296&&we<=56319?(z+=4,q++):z+=3}return z};function jt(V,z=1e3,q=2){const we=z*Math.pow(q,V),$=Math.round(.5*we*(Math.random()-.5)*2);return Math.min(144e5,we+$)}function fn(V){return V&&V._delegate?V._delegate:V}},8190:(nt,Te,k)=>{var g=k(5e3);let U=null;function N(){return U}const fe=new g.OlP("DocumentToken");let le=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:function(){return function ve(){return(0,g.LFG)(j)}()},providedIn:"platform"}),n})();const W=new g.OlP("Location Initialized");let j=(()=>{class n extends le{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return N().getBaseHref(this._doc)}onPopState(t){const r=N().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=N().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,i){se()?this._history.pushState(t,r,i):this.location.hash=i}replaceState(t,r,i){se()?this._history.replaceState(t,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(fe))},n.\u0275prov=g.Yz7({token:n,factory:function(){return function Ge(){return new j((0,g.LFG)(fe))}()},providedIn:"platform"}),n})();function se(){return!!window.history.pushState}function Ne(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Ue(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function He(n){return n&&"?"!==n[0]?"?"+n:n}let _e=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:function(){return function De(n){const e=(0,g.LFG)(fe).location;return new We((0,g.LFG)(le),e&&e.origin||"")}()},providedIn:"root"}),n})();const ze=new g.OlP("appBaseHref");let We=(()=>{class n extends _e{constructor(t,r){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Ne(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+He(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,u){const c=this.prepareExternalUrl(i+He(u));this._platformLocation.pushState(t,r,c)}replaceState(t,r,i,u){const c=this.prepareExternalUrl(i+He(u));this._platformLocation.replaceState(t,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(le),g.LFG(ze,8))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})(),Pe=(()=>{class n extends _e{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Ne(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,u){let c=this.prepareExternalUrl(i+He(u));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.pushState(t,r,c)}replaceState(t,r,i,u){let c=this.prepareExternalUrl(i+He(u));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(le),g.LFG(ze,8))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})(),ke=(()=>{class n{constructor(t,r){this._subject=new g.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const i=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=Ue(ne(i)),this._platformStrategy.onPopState(u=>{this._subject.emit({url:this.path(!0),pop:!0,state:u.state,type:u.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+He(r))}normalize(t){return n.stripTrailingSlash(function qe(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,ne(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._platformStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+He(r)),i)}replaceState(t,r="",i=null){this._platformStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+He(r)),i)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformStrategy).historyGo)||void 0===i||i.call(r,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=He,n.joinWithSlash=Ne,n.stripTrailingSlash=Ue,n.\u0275fac=function(t){return new(t||n)(g.LFG(_e),g.LFG(le))},n.\u0275prov=g.Yz7({token:n,factory:function(){return function Ce(){return new ke((0,g.LFG)(_e),(0,g.LFG)(le))}()},providedIn:"root"}),n})();function ne(n){return n.replace(/\/index.html$/,"")}class Lo{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let tr=(()=>{class n{constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,u,c)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new Lo(i.item,this._ngForOf,-1,-1),null===c?void 0:c);else if(null==c)r.remove(null===u?void 0:u);else if(null!==u){const h=r.get(u);r.move(h,c),xs(h,i)}});for(let i=0,u=r.length;i<u;i++){const h=r.get(i).context;h.index=i,h.count=u,h.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{xs(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(g.s_b),g.Y36(g.Rgc),g.Y36(g.ZZ4))},n.\u0275dir=g.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();function xs(n,e){n.context.$implicit=e.item}let Tr=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new pn,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){Ic("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){Ic("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(g.s_b),g.Y36(g.Rgc))},n.\u0275dir=g.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class pn{constructor(){this.$implicit=null,this.ngIf=null}}function Ic(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,g.AaK)(e)}'.`)}let to=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({}),n})();function Lr(n){return"server"===n}let hu=(()=>{class n{}return n.\u0275prov=(0,g.Yz7)({token:n,providedIn:"root",factory:()=>new fu((0,g.LFG)(fe),window)}),n})();class fu{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function ls(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const u=i.shadowRoot;if(u){const c=u.getElementById(e)||u.querySelector(`[name="${e}"]`);if(c)return c}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,u=this.offset();this.window.scrollTo(r-u[0],i-u[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=hl(this.window.history)||hl(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function hl(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class Ns extends class Da extends class ye{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function ue(n){U||(U=n)}(new Ns)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function pu(){return gn=gn||document.querySelector("base"),gn?gn.getAttribute("href"):null}();return null==t?null:function no(n){Sa=Sa||document.createElement("a"),Sa.setAttribute("href",n);const e=Sa.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){gn=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function Po(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,u]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(u)}return null}(document.cookie,e)}}let Sa,gn=null;const mr=new g.OlP("TRANSITION_ID"),Un=[{provide:g.ip1,useFactory:function gu(n,e,t){return()=>{t.get(g.CZH).donePromise.then(()=>{const r=N(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let u=0;u<i.length;u++)r.remove(i[u])})}},deps:[mr,fe,g.zs3],multi:!0}];class cs{static init(){(0,g.VLi)(new cs)}addToWindow(e){g.dqk.getAngularTestability=(r,i=!0)=>{const u=e.findTestabilityInTree(r,i);if(null==u)throw new Error("Could not find testability for element.");return u},g.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),g.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),g.dqk.frameworkStabilizers||(g.dqk.frameworkStabilizers=[]),g.dqk.frameworkStabilizers.push(r=>{const i=g.dqk.getAllAngularTestabilities();let u=i.length,c=!1;const h=function(_){c=c||_,u--,0==u&&r(c)};i.forEach(function(_){_.whenStable(h)})})}findTestabilityInTree(e,t,r){if(null==t)return null;const i=e.getTestability(t);return null!=i?i:r?N().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let _r=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();const Bo=new g.OlP("EventManagerPlugins");let $i=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let u=0;u<i.length;u++){const c=i[u];if(c.supports(t))return this._eventNameToPlugin.set(t,c),c}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(Bo),g.LFG(g.R0b))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();class pl{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=N().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let ri=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})(),Ps=(()=>{class n extends ri{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(u=>{const c=this._doc.createElement("style");c.textContent=u,i.push(r.appendChild(c))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(ks),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(ks))}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(fe))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();function ks(n){N().remove(n)}const gt={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Aa=/%COMP%/g;function Re(n,e,t){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?Re(n,i,t):(i=i.replace(Aa,n),t.push(i))}return t}function $t(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let Vn=(()=>{class n{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new Os(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case g.ifc.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new ml(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case 1:case g.ifc.ShadowDom:return new _l(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=Re(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(g.LFG($i),g.LFG(Ps),g.LFG(g.AFp))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();class Os{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(gt[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,r){e&&e.insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const u=gt[i];u?e.setAttributeNS(u,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=gt[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(g.JOm.DashCase|g.JOm.Important)?e.style.setProperty(t,r,i&g.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&g.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,$t(r)):this.eventManager.addEventListener(e,t,$t(r))}}class ml extends Os{constructor(e,t,r,i){super(e),this.component=r;const u=Re(i+"-"+r.id,r.styles,[]);t.addStyles(u),this.contentAttr=function Ma(n){return"_ngcontent-%COMP%".replace(Aa,n)}(i+"-"+r.id),this.hostAttr=function yh(n){return"_nghost-%COMP%".replace(Aa,n)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class _l extends Os{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const u=Re(i.id,i.styles,[]);for(let c=0;c<u.length;c++){const h=document.createElement("style");h.textContent=u[c],this.shadowRoot.appendChild(h)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let kc=(()=>{class n extends pl{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(fe))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();const Oc=["alt","control","meta","shift"],jo={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},ar={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},xi={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let yl=(()=>{class n extends pl{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const u=n.parseEventName(r),c=n.eventCallback(u.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>N().onAndCancel(t,u.domEventName,c))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const u=n._normalizeKey(r.pop());let c="";if(Oc.forEach(_=>{const w=r.indexOf(_);w>-1&&(r.splice(w,1),c+=_+".")}),c+=u,0!=r.length||0===u.length)return null;const h={};return h.domEventName=i,h.fullKey=c,h}static getEventFullKey(t){let r="",i=function Hi(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&ar.hasOwnProperty(e)&&(e=ar[e]))}return jo[e]||e}(t);return i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),Oc.forEach(u=>{u!=i&&xi[u](t)&&(r+=u+".")}),r+=i,r}static eventCallback(t,r,i){return u=>{n.getEventFullKey(u)===t&&i.runGuarded(()=>r(u))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(fe))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();const Fc=(0,g.eFA)(g._c5,"browser",[{provide:g.Lbi,useValue:"browser"},{provide:g.g9A,useValue:function ds(){Ns.makeCurrent(),cs.init()},multi:!0},{provide:fe,useFactory:function Lc(){return(0,g.RDi)(document),document},deps:[]}]),ro=[{provide:g.zSh,useValue:"root"},{provide:g.qLn,useFactory:function Oa(){return new g.qLn},deps:[]},{provide:Bo,useClass:kc,multi:!0,deps:[fe,g.R0b,g.Lbi]},{provide:Bo,useClass:yl,multi:!0,deps:[fe]},{provide:Vn,useClass:Vn,deps:[$i,Ps,g.AFp]},{provide:g.FYo,useExisting:Vn},{provide:ri,useExisting:Ps},{provide:Ps,useClass:Ps,deps:[fe]},{provide:g.dDg,useClass:g.dDg,deps:[g.R0b]},{provide:$i,useClass:$i,deps:[Bo,g.R0b]},{provide:class yn{},useClass:_r,deps:[]}];let vl=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:g.AFp,useValue:t.appId},{provide:mr,useExisting:g.AFp},Un]}}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(n,12))},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({providers:ro,imports:[to,g.hGG]}),n})();"undefined"!=typeof window&&window;var Zn=k(8996),Il=k(7669);function at(...n){const e=(0,Il.yG)(n);return(0,Zn.D)(n,e)}var Ls=k(7579);class Fr extends Ls.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}var Ri=k(8306);const{isArray:Cl}=Array,{getPrototypeOf:Wo,prototype:zo,keys:jn}=Object;var ps=k(4671),Rt=k(4004);const{isArray:$c}=Array;var xn=k(5403),yu=k(9672);function gs(...n){const e=(0,Il.yG)(n),t=(0,Il.jO)(n),{args:r,keys:i}=function Go(n){if(1===n.length){const e=n[0];if(Cl(e))return{args:e,keys:null};if(function uo(n){return n&&"object"==typeof n&&Wo(n)===zo}(e)){const t=jn(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}(n);if(0===r.length)return(0,Zn.D)([],e);const u=new Ri.y(function lo(n,e,t=ps.y){return r=>{ii(e,()=>{const{length:i}=n,u=new Array(i);let c=i,h=i;for(let _=0;_<i;_++)ii(e,()=>{const w=(0,Zn.D)(n[_],e);let D=!1;w.subscribe((0,xn.x)(r,S=>{u[_]=S,D||(D=!0,h--),h||r.next(t(u.slice()))},()=>{--c||r.complete()}))},r)},r)}}(r,e,i?c=>function bh(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}(i,c):ps.y));return t?u.pipe(function Wc(n){return(0,Rt.U)(e=>function Hc(n,e){return $c(e)?n(...e):n(e)}(n,e))}(t)):u}function ii(n,e,t){n?(0,yu.f)(t,n,e):e()}var qo=k(576);function co(n,e){const t=(0,qo.m)(n)?n:()=>n,r=i=>i.error(t());return new Ri.y(e?i=>e.schedule(r,0,i):r)}const Ko=(0,k(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var Fs=k(8189);function ja(...n){return function Zo(){return(0,Fs.J)(1)}()((0,Zn.D)(n,(0,Il.yG)(n)))}var $a=k(8421);function Ha(n){return new Ri.y(e=>{(0,$a.Xf)(n()).subscribe(e)})}var fo=k(515),bl=k(727),Dr=k(4482);function po(){return(0,Dr.e)((n,e)=>{let t=null;n._refCount++;const r=(0,xn.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,u=t;t=null,i&&(!u||i===u)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class Wa extends Ri.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,Dr.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,null==e||e.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new bl.w0;const t=this.getSubject();e.add(this.source.subscribe((0,xn.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=bl.w0.EMPTY)}return e}refCount(){return po()(this)}}function Er(n,e){return(0,Dr.e)((t,r)=>{let i=null,u=0,c=!1;const h=()=>c&&!i&&r.complete();t.subscribe((0,xn.x)(r,_=>{null==i||i.unsubscribe();let w=0;const D=u++;(0,$a.Xf)(n(_,D)).subscribe(i=(0,xn.x)(r,S=>r.next(e?e(_,S,D,w++):S),()=>{i=null,h()}))},()=>{c=!0,h()}))})}var Us=k(5698);function zi(...n){const e=(0,Il.yG)(n);return(0,Dr.e)((t,r)=>{(e?ja(n,t,e):ja(n,t)).subscribe(r)})}function Vs(n,e,t,r,i){return(u,c)=>{let h=t,_=e,w=0;u.subscribe((0,xn.x)(c,D=>{const S=w++;_=h?n(_,D,S):(h=!0,D),r&&c.next(_)},i&&(()=>{h&&c.next(_),c.complete()})))}}function Gi(n,e){return(0,Dr.e)(Vs(n,e,arguments.length>=2,!0))}function Ur(n,e){return(0,Dr.e)((t,r)=>{let i=0;t.subscribe((0,xn.x)(r,u=>n.call(e,u,i++)&&r.next(u)))})}function ms(n){return(0,Dr.e)((e,t)=>{let u,r=null,i=!1;r=e.subscribe((0,xn.x)(t,void 0,void 0,c=>{u=(0,$a.Xf)(n(c,ms(n)(e))),r?(r.unsubscribe(),r=null,u.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,u.subscribe(t))})}var $n=k(5577);function vu(n,e){return(0,qo.m)(e)?(0,$n.z)(n,e,1):(0,$n.z)(n,1)}function go(n){return n<=0?()=>fo.E:(0,Dr.e)((e,t)=>{let r=[];e.subscribe((0,xn.x)(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function Rn(n=Up){return(0,Dr.e)((e,t)=>{let r=!1;e.subscribe((0,xn.x)(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function Up(){return new Ko}function Vp(n){return(0,Dr.e)((e,t)=>{let r=!1;e.subscribe((0,xn.x)(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function Yo(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Ur((i,u)=>n(i,u,r)):ps.y,(0,Us.q)(1),t?Vp(e):Rn(()=>new Ko))}var qr=k(8505);class Bs{constructor(e,t){this.id=e,this.url=t}}class mo extends Bs{constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Qo extends Bs{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Yn extends Bs{constructor(e,t,r){super(e,t),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class za extends Bs{constructor(e,t,r){super(e,t),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Ga extends Bs{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Dh extends Bs{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Sh extends Bs{constructor(e,t,r,i,u){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=u}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Vr extends Bs{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class si extends Bs{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Jo{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Xo{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class _o{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Eu{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class _s{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class qa{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Tl{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Nt="primary";class wu{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Mn(n){return new wu(n)}const Iu="ngNavigationCancelingError";function yo(n){const e=Error("NavigationCancelingError: "+n);return e[Iu]=!0,e}function Cu(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let u=0;u<r.length;u++){const c=r[u],h=n[u];if(c.startsWith(":"))i[c.substring(1)]=h;else if(c!==h.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function wr(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let u=0;u<t.length;u++)if(i=t[u],!Dl(n[i],e[i]))return!1;return!0}function Dl(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,u)=>r[u]===i)}return n===e}function bu(n){return Array.prototype.concat.apply([],n)}function Tu(n){return n.length>0?n[n.length-1]:null}function An(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function rr(n){return(0,g.CqO)(n)?n:(0,g.QGY)(n)?(0,Zn.D)(Promise.resolve(n)):at(n)}const ea={exact:function Sl(n,e,t){if(!_t(n.segments,e.segments)||!F(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!Sl(n.children[r],e.children[r],t))return!1;return!0},subset:T},Eo={exact:function xh(n,e){return wr(n,e)},subset:function b(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>Dl(n[t],e[t]))},ignored:()=>!0};function wo(n,e,t){return ea[t.paths](n.root,e.root,t.matrixParams)&&Eo[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function T(n,e,t){return M(n,e,e.segments,t)}function M(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!_t(i,t)||e.hasChildren()||!F(i,t,r))}if(n.segments.length===t.length){if(!_t(n.segments,t)||!F(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!T(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),u=t.slice(n.segments.length);return!!(_t(n.segments,i)&&F(n.segments,i,r)&&n.children[Nt])&&M(n.children[Nt],e,u,r)}}function F(n,e,t){return e.every((r,i)=>Eo[t](n[i].parameters,r.parameters))}class J{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Mn(this.queryParams)),this._queryParamMap}toString(){return Kr.serialize(this)}}class X{constructor(e,t){this.segments=e,this.children=t,this.parent=null,An(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Nn(this)}}class Ae{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Mn(this.parameters)),this._parameterMap}toString(){return xl(this)}}function _t(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}class Pt{}class Ct{parse(e){const t=new jp(e);return new J(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${oi(e.root,!0)}`,r=function Mh(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${Mi(t)}=${Mi(i)}`).join("&"):`${Mi(t)}=${Mi(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function Ni(n){return encodeURI(n)}(e.fragment)}`:""}`}}const Kr=new Ct;function Nn(n){return n.segments.map(e=>xl(e)).join("/")}function oi(n,e){if(!n.hasChildren())return Nn(n);if(e){const t=n.children[Nt]?oi(n.children[Nt],!1):"",r=[];return An(n.children,(i,u)=>{u!==Nt&&r.push(`${u}:${oi(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function Et(n,e){let t=[];return An(n.children,(r,i)=>{i===Nt&&(t=t.concat(e(r,i)))}),An(n.children,(r,i)=>{i!==Nt&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===Nt?[oi(n.children[Nt],!1)]:[`${i}:${oi(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Nt]?`${Nn(n)}/${t[0]}`:`${Nn(n)}/(${t.join("//")})`}}function ys(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Mi(n){return ys(n).replace(/%3B/gi,";")}function vs(n){return ys(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Io(n){return decodeURIComponent(n)}function Al(n){return Io(n.replace(/\+/g,"%20"))}function xl(n){return`${vs(n.path)}${function Rh(n){return Object.keys(n).map(e=>`;${vs(e)}=${vs(n[e])}`).join("")}(n.parameters)}`}const s_=/^[^\/()?;=#]+/;function Co(n){const e=n.match(s_);return e?e[0]:""}const Rl=/^[^=?&#]+/,XE=/^[^&#]+/;class jp{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new X([],{}):new X([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Nt]=new X(e,t)),r}parseSegment(){const e=Co(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new Ae(Io(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=Co(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=Co(this.remaining);i&&(r=i,this.capture(r))}e[Io(t)]=Io(r)}parseQueryParam(e){const t=function Nh(n){const e=n.match(Rl);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const c=function Bp(n){const e=n.match(XE);return e?e[0]:""}(this.remaining);c&&(r=c,this.capture(r))}const i=Al(t),u=Al(r);if(e.hasOwnProperty(i)){let c=e[i];Array.isArray(c)||(c=[c],e[i]=c),c.push(u)}else e[i]=u}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Co(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new Error(`Cannot parse url '${this.url}'`);let u;r.indexOf(":")>-1?(u=r.substr(0,r.indexOf(":")),this.capture(u),this.capture(":")):e&&(u=Nt);const c=this.parseChildren();t[u]=1===Object.keys(c).length?c[Nt]:new X([],c),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class o_{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=Du(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=Du(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=Ph(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Ph(e,this._root).map(t=>t.value)}}function Du(n,e){if(n===e.value)return e;for(const t of e.children){const r=Du(n,t);if(r)return r}return null}function Ph(n,e){if(n===e.value)return[e];for(const t of e.children){const r=Ph(n,t);if(r.length)return r.unshift(e),r}return[]}class bo{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function To(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class zc extends o_{constructor(e,t){super(e),this.snapshot=t,Gc(this,e)}toString(){return this.snapshot.toString()}}function Ka(n,e){const t=function a_(n,e){const c=new xu([],{},{},"",{},Nt,e,null,n.root,-1,{});return new kh("",new bo(c,[]))}(n,e),r=new Fr([new Ae("",{})]),i=new Fr({}),u=new Fr({}),c=new Fr({}),h=new Fr(""),_=new Su(r,i,c,h,u,Nt,e,t.root);return _.snapshot=t.root,new zc(new bo(_,[]),t)}class Su{constructor(e,t,r,i,u,c,h,_){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=u,this.outlet=c,this.component=h,this._futureSnapshot=_}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Rt.U)(e=>Mn(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Rt.U)(e=>Mn(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function u_(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],u=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(u.component)break;r--}}return function Au(n){return n.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(r))}class xu{constructor(e,t,r,i,u,c,h,_,w,D,S){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=u,this.outlet=c,this.component=h,this.routeConfig=_,this._urlSegment=w,this._lastPathIndex=D,this._resolve=S}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Mn(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Mn(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class kh extends o_{constructor(e,t){super(t),this.url=e,Gc(this,t)}toString(){return Oh(this._root)}}function Gc(n,e){e.value._routerState=n,e.children.forEach(t=>Gc(n,t))}function Oh(n){const e=n.children.length>0?` { ${n.children.map(Oh).join(", ")} } `:"";return`${n.value}${e}`}function qc(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,wr(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),wr(e.params,t.params)||n.params.next(t.params),function Ah(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!wr(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),wr(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function Kc(n,e){const t=wr(n.params,e.params)&&function rt(n,e){return _t(n,e)&&n.every((t,r)=>wr(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||Kc(n.parent,e.parent))}function Ml(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function c_(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Ml(n,r,i);return Ml(n,r)})}(n,e,t);return new bo(r,i)}{if(n.shouldAttach(e.value)){const u=n.retrieve(e.value);if(null!==u){const c=u.route;return c.value._futureSnapshot=e.value,c.children=e.children.map(h=>Ml(n,h)),c}}const r=function d_(n){return new Su(new Fr(n.url),new Fr(n.params),new Fr(n.queryParams),new Fr(n.fragment),new Fr(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(u=>Ml(n,u));return new bo(r,i)}}function ta(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Za(n){return"object"==typeof n&&null!=n&&n.outlets}function $p(n,e,t,r,i){let u={};if(r&&An(r,(h,_)=>{u[_]=Array.isArray(h)?h.map(w=>`${w}`):`${h}`}),n===e)return new J(t,u,i);const c=Hp(n,e,t);return new J(c,u,i)}function Hp(n,e,t){const r={};return An(n.children,(i,u)=>{r[u]=i===e?t:Hp(i,e,t)}),new X(n.segments,r)}class h_{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&ta(r[0]))throw new Error("Root segment cannot have matrix parameters");const i=r.find(Za);if(i&&i!==Tu(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class zp{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function qp(n,e,t){if(n||(n=new X([],{})),0===n.segments.length&&n.hasChildren())return Zc(n,e,t);const r=function e0(n,e,t){let r=0,i=e;const u={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return u;const c=n.segments[i],h=t[r];if(Za(h))break;const _=`${h}`,w=r<t.length-1?t[r+1]:null;if(i>0&&void 0===_)break;if(_&&w&&"object"==typeof w&&void 0===w.outlets){if(!I(_,w,c))return u;r+=2}else{if(!I(_,{},c))return u;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const u=new X(n.segments.slice(0,r.pathIndex),{});return u.children[Nt]=new X(n.segments.slice(r.pathIndex),n.children),Zc(u,0,i)}return r.match&&0===i.length?new X(n.segments,{}):r.match&&!n.hasChildren()?v(n,e,t):r.match?Zc(n,0,i):v(n,e,t)}function Zc(n,e,t){if(0===t.length)return new X(n.segments,{});{const r=function f_(n){return Za(n[0])?n[0].outlets:{[Nt]:n}}(t),i={};return An(r,(u,c)=>{"string"==typeof u&&(u=[u]),null!==u&&(i[c]=qp(n.children[c],e,u))}),An(n.children,(u,c)=>{void 0===r[c]&&(i[c]=u)}),new X(n.segments,i)}}function v(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const u=t[i];if(Za(u)){const _=p(u.outlets);return new X(r,_)}if(0===i&&ta(t[0])){r.push(new Ae(n.segments[e].path,m(t[0]))),i++;continue}const c=Za(u)?u.outlets[Nt]:`${u}`,h=i<t.length-1?t[i+1]:null;c&&h&&ta(h)?(r.push(new Ae(c,m(h))),i+=2):(r.push(new Ae(c,{})),i++)}return new X(r,{})}function p(n){const e={};return An(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=v(new X([],{}),0,t))}),e}function m(n){const e={};return An(n,(t,r)=>e[r]=`${t}`),e}function I(n,e,t){return n==t.path&&wr(e,t.parameters)}class O{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),qc(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=To(t);e.children.forEach(u=>{const c=u.value.outlet;this.deactivateRoutes(u,i[c],r),delete i[c]}),An(i,(u,c)=>{this.deactivateRouteAndItsChildren(u,r)})}deactivateRoutes(e,t,r){const i=e.value,u=t?t.value:null;if(i===u)if(i.component){const c=r.getContext(i.outlet);c&&this.deactivateChildRoutes(e,t,c.children)}else this.deactivateChildRoutes(e,t,r);else u&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,u=To(e);for(const c of Object.keys(u))this.deactivateRouteAndItsChildren(u[c],i);if(r&&r.outlet){const c=r.outlet.detach(),h=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:c,route:e,contexts:h})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,u=To(e);for(const c of Object.keys(u))this.deactivateRouteAndItsChildren(u[c],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=To(t);e.children.forEach(u=>{this.activateRoutes(u,i[u.value.outlet],r),this.forwardEvent(new qa(u.value.snapshot))}),e.children.length&&this.forwardEvent(new Eu(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,u=t?t.value:null;if(qc(i),i===u)if(i.component){const c=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,c.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const c=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const h=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),c.children.onOutletReAttached(h.contexts),c.attachRef=h.componentRef,c.route=h.route.value,c.outlet&&c.outlet.attach(h.componentRef,h.route.value),qc(h.route.value),this.activateChildRoutes(e,null,c.children)}else{const h=function ie(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(i.snapshot),_=h?h.module.componentFactoryResolver:null;c.attachRef=null,c.route=i,c.resolver=_,c.outlet&&c.outlet.activateWith(i,_),this.activateChildRoutes(e,null,c.children)}}else this.activateChildRoutes(e,null,r)}}class Oe{constructor(e,t){this.routes=e,this.module=t}}function et(n){return"function"==typeof n}function bt(n){return n instanceof J}const Nl=Symbol("INITIAL_VALUE");function na(){return Er(n=>gs(n.map(e=>e.pipe((0,Us.q)(1),zi(Nl)))).pipe(Gi((e,t)=>{let r=!1;return t.reduce((i,u,c)=>i!==Nl?i:(u===Nl&&(r=!0),r||!1!==u&&c!==t.length-1&&!bt(u)?i:u),e)},Nl),Ur(e=>e!==Nl),(0,Rt.U)(e=>bt(e)?e:!0===e),(0,Us.q)(1)))}class Kp{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Ru,this.attachRef=null}}class Ru{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const r=this.getOrCreateContext(e);r.outlet=t,this.contexts.set(e,r)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new Kp,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}let Pl=(()=>{class n{constructor(t,r,i,u,c){this.parentContexts=t,this.location=r,this.resolver=i,this.changeDetector=c,this.activated=null,this._activatedRoute=null,this.activateEvents=new g.vpe,this.deactivateEvents=new g.vpe,this.attachEvents=new g.vpe,this.detachEvents=new g.vpe,this.name=u||Nt,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const c=(r=r||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),h=this.parentContexts.getOrCreateContext(this.name).children,_=new Zp(t,h,this.location.injector);this.activated=this.location.createComponent(c,this.location.length,_),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(Ru),g.Y36(g.s_b),g.Y36(g._Vd),g.$8M("name"),g.Y36(g.sBO))},n.\u0275dir=g.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class Zp{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Su?this.route:e===Ru?this.childContexts:this.parent.get(e,t)}}let Yc=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=g.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,r){1&t&&g._UZ(0,"router-outlet")},directives:[Pl],encapsulation:2}),n})();function Ya(n,e=""){for(let t=0;t<n.length;t++){const r=n[t];Yp(r,Uh(e,r))}}function Yp(n,e){n.children&&Ya(n.children,e)}function Uh(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function kl(n){const e=n.children&&n.children.map(kl),t=e?Object.assign(Object.assign({},n),{children:e}):Object.assign({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Nt&&(t.component=Yc),t}function ln(n){return n.outlet||Nt}function t0(n,e){const t=n.filter(r=>ln(r)===e);return t.push(...n.filter(r=>ln(r)!==e)),t}const n0={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Qc(n,e,t){var r;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?Object.assign({},n0):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const u=(e.matcher||Cu)(t,n,e);if(!u)return Object.assign({},n0);const c={};An(u.posParams,(_,w)=>{c[w]=_.path});const h=u.consumed.length>0?Object.assign(Object.assign({},c),u.consumed[u.consumed.length-1].parameters):c;return{matched:!0,consumedSegments:u.consumed,remainingSegments:t.slice(u.consumed.length),parameters:h,positionalParamSegments:null!==(r=u.posParams)&&void 0!==r?r:{}}}function Vh(n,e,t,r,i="corrected"){if(t.length>0&&function eb(n,e,t){return t.some(r=>Qp(n,e,r)&&ln(r)!==Nt)}(n,t,r)){const c=new X(e,function XC(n,e,t,r){const i={};i[Nt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const u of t)if(""===u.path&&ln(u)!==Nt){const c=new X([],{});c._sourceSegment=n,c._segmentIndexShift=e.length,i[ln(u)]=c}return i}(n,e,r,new X(t,n.children)));return c._sourceSegment=n,c._segmentIndexShift=e.length,{segmentGroup:c,slicedSegments:[]}}if(0===t.length&&function tb(n,e,t){return t.some(r=>Qp(n,e,r))}(n,t,r)){const c=new X(n.segments,function JC(n,e,t,r,i,u){const c={};for(const h of r)if(Qp(n,t,h)&&!i[ln(h)]){const _=new X([],{});_._sourceSegment=n,_._segmentIndexShift="legacy"===u?n.segments.length:e.length,c[ln(h)]=_}return Object.assign(Object.assign({},i),c)}(n,e,t,r,n.children,i));return c._sourceSegment=n,c._segmentIndexShift=e.length,{segmentGroup:c,slicedSegments:t}}const u=new X(n.segments,n.children);return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:t}}function Qp(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function nb(n,e,t,r){return!!(ln(n)===r||r!==Nt&&Qp(e,t,n))&&("**"===n.path||Qc(e,n,t).matched)}function rb(n,e,t){return 0===e.length&&!n.children[t]}class Mu{constructor(e){this.segmentGroup=e||null}}class _i{constructor(e){this.urlTree=e}}function Ol(n){return co(new Mu(n))}function p_(n){return co(new _i(n))}class g_{constructor(e,t,r,i,u){this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=u,this.allowRedirects=!0,this.ngModule=e.get(g.h0i)}apply(){const e=Vh(this.urlTree.root,[],[],this.config).segmentGroup,t=new X(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,Nt).pipe((0,Rt.U)(u=>this.createUrlTree(m_(u),this.urlTree.queryParams,this.urlTree.fragment))).pipe(ms(u=>{if(u instanceof _i)return this.allowRedirects=!1,this.match(u.urlTree);throw u instanceof Mu?this.noMatchError(u):u}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,Nt).pipe((0,Rt.U)(i=>this.createUrlTree(m_(i),e.queryParams,e.fragment))).pipe(ms(i=>{throw i instanceof Mu?this.noMatchError(i):i}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,r){const i=e.segments.length>0?new X([],{[Nt]:e}):e;return new J(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,Rt.U)(u=>new X([],u))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const u of Object.keys(r.children))"primary"===u?i.unshift(u):i.push(u);return(0,Zn.D)(i).pipe(vu(u=>{const c=r.children[u],h=t0(t,u);return this.expandSegmentGroup(e,h,c,u).pipe((0,Rt.U)(_=>({segment:_,outlet:u})))}),Gi((u,c)=>(u[c.outlet]=c.segment,u),{}),function n_(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Ur((i,u)=>n(i,u,r)):ps.y,go(1),t?Vp(e):Rn(()=>new Ko))}())}expandSegment(e,t,r,i,u,c){return(0,Zn.D)(r).pipe(vu(h=>this.expandSegmentAgainstRoute(e,t,r,h,i,u,c).pipe(ms(w=>{if(w instanceof Mu)return at(null);throw w}))),Yo(h=>!!h),ms((h,_)=>{if(h instanceof Ko||"EmptyError"===h.name)return rb(t,i,u)?at(new X([],{})):Ol(t);throw h}))}expandSegmentAgainstRoute(e,t,r,i,u,c,h){return nb(i,t,u,c)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,u,c):h&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,u,c):Ol(t):Ol(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,u,c){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,c):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,u,c)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const u=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?p_(u):this.lineralizeSegments(r,u).pipe((0,$n.z)(c=>{const h=new X(c,{});return this.expandSegment(e,h,t,c,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,u,c){const{matched:h,consumedSegments:_,remainingSegments:w,positionalParamSegments:D}=Qc(t,i,u);if(!h)return Ol(t);const S=this.applyRedirectCommands(_,i.redirectTo,D);return i.redirectTo.startsWith("/")?p_(S):this.lineralizeSegments(i,S).pipe((0,$n.z)(P=>this.expandSegment(e,t,r,P.concat(w),c,!1)))}matchSegmentAgainstRoute(e,t,r,i,u){if("**"===r.path)return r.loadChildren?(r._loadedConfig?at(r._loadedConfig):this.configLoader.load(e.injector,r)).pipe((0,Rt.U)(S=>(r._loadedConfig=S,new X(i,{})))):at(new X(i,{}));const{matched:c,consumedSegments:h,remainingSegments:_}=Qc(t,r,i);return c?this.getChildConfig(e,r,i).pipe((0,$n.z)(D=>{const S=D.module,P=D.routes,{segmentGroup:B,slicedSegments:Y}=Vh(t,h,_,P),xe=new X(B.segments,B.children);if(0===Y.length&&xe.hasChildren())return this.expandChildren(S,P,xe).pipe((0,Rt.U)(Kt=>new X(h,Kt)));if(0===P.length&&0===Y.length)return at(new X(h,{}));const Ke=ln(r)===u;return this.expandSegment(S,xe,P,Y,Ke?Nt:u,!0).pipe((0,Rt.U)(Wt=>new X(h.concat(Wt.segments),Wt.children)))})):Ol(t)}getChildConfig(e,t,r){return t.children?at(new Oe(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?at(t._loadedConfig):this.runCanLoadGuards(e.injector,t,r).pipe((0,$n.z)(i=>i?this.configLoader.load(e.injector,t).pipe((0,Rt.U)(u=>(t._loadedConfig=u,u))):function yi(n){return co(yo(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`))}(t))):at(new Oe([],e))}runCanLoadGuards(e,t,r){const i=t.canLoad;return i&&0!==i.length?at(i.map(c=>{const h=e.get(c);let _;if(function Tn(n){return n&&et(n.canLoad)}(h))_=h.canLoad(t,r);else{if(!et(h))throw new Error("Invalid CanLoad guard");_=h(t,r)}return rr(_)})).pipe(na(),(0,qr.b)(c=>{if(!bt(c))return;const h=yo(`Redirecting to "${this.urlSerializer.serialize(c)}"`);throw h.url=c,h}),(0,Rt.U)(c=>!0===c)):at(!0)}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return at(r);if(i.numberOfChildren>1||!i.children[Nt])return co(new Error(`Only absolute redirects can have named outlets. redirectTo: '${e.redirectTo}'`));i=i.children[Nt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreatreUrlTree(e,t,r,i){const u=this.createSegmentGroup(e,t.root,r,i);return new J(u,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return An(e,(i,u)=>{if("string"==typeof i&&i.startsWith(":")){const h=i.substring(1);r[u]=t[h]}else r[u]=i}),r}createSegmentGroup(e,t,r,i){const u=this.createSegments(e,t.segments,r,i);let c={};return An(t.children,(h,_)=>{c[_]=this.createSegmentGroup(e,h,r,i)}),new X(u,c)}createSegments(e,t,r,i){return t.map(u=>u.path.startsWith(":")?this.findPosParam(e,u,i):this.findOrReturn(u,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}function m_(n){const e={};for(const r of Object.keys(n.children)){const u=m_(n.children[r]);(u.segments.length>0||u.hasChildren())&&(e[r]=u)}return function ib(n){if(1===n.numberOfChildren&&n.children[Nt]){const e=n.children[Nt];return new X(n.segments.concat(e.segments),e.children)}return n}(new X(n.segments,e))}class o0{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class jh{constructor(e,t){this.component=e,this.route=t}}function sb(n,e,t){const r=n._root;return Ll(r,e?e._root:null,t,[r.value])}function Jp(n,e,t){const r=function ob(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:t).get(n)}function Ll(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const u=To(e);return n.children.forEach(c=>{(function ab(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const u=n.value,c=e?e.value:null,h=t?t.getContext(n.value.outlet):null;if(c&&u.routeConfig===c.routeConfig){const _=function ub(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!_t(n.url,e.url);case"pathParamsOrQueryParamsChange":return!_t(n.url,e.url)||!wr(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Kc(n,e)||!wr(n.queryParams,e.queryParams);default:return!Kc(n,e)}}(c,u,u.routeConfig.runGuardsAndResolvers);_?i.canActivateChecks.push(new o0(r)):(u.data=c.data,u._resolvedData=c._resolvedData),Ll(n,e,u.component?h?h.children:null:t,r,i),_&&h&&h.outlet&&h.outlet.isActivated&&i.canDeactivateChecks.push(new jh(h.outlet.component,c))}else c&&Fl(e,h,i),i.canActivateChecks.push(new o0(r)),Ll(n,null,u.component?h?h.children:null:t,r,i)})(c,u[c.value.outlet],t,r.concat([c.value]),i),delete u[c.value.outlet]}),An(u,(c,h)=>Fl(c,t.getContext(h),i)),i}function Fl(n,e,t){const r=To(n),i=n.value;An(r,(u,c)=>{Fl(u,i.component?e?e.children.getContext(c):null:e,t)}),t.canDeactivateChecks.push(new jh(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}class u0{}function l0(n){return new Ri.y(e=>e.error(n))}class _b{constructor(e,t,r,i,u,c){this.rootComponentType=e,this.config=t,this.urlTree=r,this.url=i,this.paramsInheritanceStrategy=u,this.relativeLinkResolution=c}recognize(){const e=Vh(this.urlTree.root,[],[],this.config.filter(c=>void 0===c.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,Nt);if(null===t)return null;const r=new xu([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Nt,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new bo(r,t),u=new kh(this.url,i);return this.inheritParamsAndData(u._root),u}inheritParamsAndData(e){const t=e.value,r=u_(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,r)}processChildren(e,t){const r=[];for(const u of Object.keys(t.children)){const c=t.children[u],h=t0(e,u),_=this.processSegmentGroup(h,c,u);if(null===_)return null;r.push(..._)}const i=c0(r);return function yb(n){n.sort((e,t)=>e.value.outlet===Nt?-1:t.value.outlet===Nt?1:e.value.outlet.localeCompare(t.value.outlet))}(i),i}processSegment(e,t,r,i){for(const u of e){const c=this.processSegmentAgainstRoute(u,t,r,i);if(null!==c)return c}return rb(t,r,i)?[]:null}processSegmentAgainstRoute(e,t,r,i){if(e.redirectTo||!nb(e,t,r,i))return null;let u,c=[],h=[];if("**"===e.path){const B=r.length>0?Tu(r).parameters:{};u=new xu(r,B,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,wb(e),ln(e),e.component,e,Ul(t),Do(t)+r.length,Ib(e))}else{const B=Qc(t,e,r);if(!B.matched)return null;c=B.consumedSegments,h=B.remainingSegments,u=new xu(c,B.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,wb(e),ln(e),e.component,e,Ul(t),Do(t)+c.length,Ib(e))}const _=function vb(n){return n.children?n.children:n.loadChildren?n._loadedConfig.routes:[]}(e),{segmentGroup:w,slicedSegments:D}=Vh(t,c,h,_.filter(B=>void 0===B.redirectTo),this.relativeLinkResolution);if(0===D.length&&w.hasChildren()){const B=this.processChildren(_,w);return null===B?null:[new bo(u,B)]}if(0===_.length&&0===D.length)return[new bo(u,[])];const S=ln(e)===i,P=this.processSegment(_,w,D,S?Nt:i);return null===P?null:[new bo(u,P)]}}function Eb(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function c0(n){const e=[],t=new Set;for(const r of n){if(!Eb(r)){e.push(r);continue}const i=e.find(u=>r.value.routeConfig===u.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=c0(r.children);e.push(new bo(r.value,i))}return e.filter(r=>!t.has(r))}function Ul(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function Do(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function wb(n){return n.data||{}}function Ib(n){return n.resolve||{}}function eg(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function tg(n){return Er(e=>{const t=n(e);return t?(0,Zn.D)(t).pipe((0,Rt.U)(()=>e)):at(e)})}class f0 extends class h0{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const Hh=new g.OlP("ROUTES");class ng{constructor(e,t,r,i){this.injector=e,this.compiler=t,this.onLoadStartListener=r,this.onLoadEndListener=i}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const i=this.loadModuleFactory(t.loadChildren).pipe((0,Rt.U)(u=>{this.onLoadEndListener&&this.onLoadEndListener(t);const c=u.create(e);return new Oe(bu(c.injector.get(Hh,void 0,g.XFs.Self|g.XFs.Optional)).map(kl),c)}),ms(u=>{throw t._loader$=void 0,u}));return t._loader$=new Wa(i,()=>new Ls.x).pipe(po()),t._loader$}loadModuleFactory(e){return rr(e()).pipe((0,$n.z)(t=>t instanceof g.YKP?at(t):(0,Zn.D)(this.compiler.compileModuleAsync(t))))}}class wx{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function Jc(n){throw n}function y_(n,e,t){return e.parse("/")}function v_(n,e){return at(null)}const bb={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},E_={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Pi=(()=>{class n{constructor(t,r,i,u,c,h,_){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=i,this.location=u,this.config=_,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Ls.x,this.errorHandler=Jc,this.malformedUriErrorHandler=y_,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:v_,afterPreactivation:v_},this.urlHandlingStrategy=new wx,this.routeReuseStrategy=new f0,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=c.get(g.h0i),this.console=c.get(g.c2e);const S=c.get(g.R0b);this.isNgZoneEnabled=S instanceof g.R0b&&g.R0b.isInAngularZone(),this.resetConfig(_),this.currentUrlTree=function i_(){return new J(new X([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new ng(c,h,P=>this.triggerEvent(new Jo(P)),P=>this.triggerEvent(new Xo(P))),this.routerState=Ka(this.currentUrlTree,this.rootComponentType),this.transitions=new Fr({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(Ur(i=>0!==i.id),(0,Rt.U)(i=>Object.assign(Object.assign({},i),{extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),Er(i=>{let u=!1,c=!1;return at(i).pipe((0,qr.b)(h=>{this.currentNavigation={id:h.id,initialUrl:h.currentRawUrl,extractedUrl:h.extractedUrl,trigger:h.source,extras:h.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Er(h=>{const _=this.browserUrlTree.toString(),w=!this.navigated||h.extractedUrl.toString()!==_||_!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||w)&&this.urlHandlingStrategy.shouldProcessUrl(h.rawUrl))return g0(h.source)&&(this.browserUrlTree=h.extractedUrl),at(h).pipe(Er(S=>{const P=this.transitions.getValue();return r.next(new mo(S.id,this.serializeUrl(S.extractedUrl),S.source,S.restoredState)),P!==this.transitions.getValue()?fo.E:Promise.resolve(S)}),function s0(n,e,t,r){return Er(i=>function Bh(n,e,t,r,i){return new g_(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe((0,Rt.U)(u=>Object.assign(Object.assign({},i),{urlAfterRedirects:u}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,qr.b)(S=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:S.urlAfterRedirects})}),function d0(n,e,t,r,i){return(0,$n.z)(u=>function mb(n,e,t,r,i="emptyOnly",u="legacy"){try{const c=new _b(n,e,t,r,i,u).recognize();return null===c?l0(new u0):at(c)}catch(c){return l0(c)}}(n,e,u.urlAfterRedirects,t(u.urlAfterRedirects),r,i).pipe((0,Rt.U)(c=>Object.assign(Object.assign({},u),{targetSnapshot:c}))))}(this.rootComponentType,this.config,S=>this.serializeUrl(S),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,qr.b)(S=>{if("eager"===this.urlUpdateStrategy){if(!S.extras.skipLocationChange){const B=this.urlHandlingStrategy.merge(S.urlAfterRedirects,S.rawUrl);this.setBrowserUrl(B,S)}this.browserUrlTree=S.urlAfterRedirects}const P=new Ga(S.id,this.serializeUrl(S.extractedUrl),this.serializeUrl(S.urlAfterRedirects),S.targetSnapshot);r.next(P)}));if(w&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:P,extractedUrl:B,source:Y,restoredState:xe,extras:Ke}=h,Gt=new mo(P,this.serializeUrl(B),Y,xe);r.next(Gt);const Wt=Ka(B,this.rootComponentType).snapshot;return at(Object.assign(Object.assign({},h),{targetSnapshot:Wt,urlAfterRedirects:B,extras:Object.assign(Object.assign({},Ke),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=h.rawUrl,h.resolve(null),fo.E}),tg(h=>{const{targetSnapshot:_,id:w,extractedUrl:D,rawUrl:S,extras:{skipLocationChange:P,replaceUrl:B}}=h;return this.hooks.beforePreactivation(_,{navigationId:w,appliedUrlTree:D,rawUrlTree:S,skipLocationChange:!!P,replaceUrl:!!B})}),(0,qr.b)(h=>{const _=new Dh(h.id,this.serializeUrl(h.extractedUrl),this.serializeUrl(h.urlAfterRedirects),h.targetSnapshot);this.triggerEvent(_)}),(0,Rt.U)(h=>Object.assign(Object.assign({},h),{guards:sb(h.targetSnapshot,h.currentSnapshot,this.rootContexts)})),function lb(n,e){return(0,$n.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:u,canDeactivateChecks:c}}=t;return 0===c.length&&0===u.length?at(Object.assign(Object.assign({},t),{guardsResult:!0})):function cb(n,e,t,r){return(0,Zn.D)(n).pipe((0,$n.z)(i=>function gb(n,e,t,r,i){const u=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return u&&0!==u.length?at(u.map(h=>{const _=Jp(h,e,i);let w;if(function Fh(n){return n&&et(n.canDeactivate)}(_))w=rr(_.canDeactivate(n,e,t,r));else{if(!et(_))throw new Error("Invalid CanDeactivate guard");w=rr(_(n,e,t,r))}return w.pipe(Yo())})).pipe(na()):at(!0)}(i.component,i.route,t,e,r)),Yo(i=>!0!==i,!0))}(c,r,i,n).pipe((0,$n.z)(h=>h&&function mt(n){return"boolean"==typeof n}(h)?function Xp(n,e,t,r){return(0,Zn.D)(e).pipe(vu(i=>ja(function hb(n,e){return null!==n&&e&&e(new _o(n)),at(!0)}(i.route.parent,r),function db(n,e){return null!==n&&e&&e(new _s(n)),at(!0)}(i.route,r),function pb(n,e,t){const r=e[e.length-1],u=e.slice(0,e.length-1).reverse().map(c=>function a0(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(c)).filter(c=>null!==c).map(c=>Ha(()=>at(c.guards.map(_=>{const w=Jp(_,c.node,t);let D;if(function $s(n){return n&&et(n.canActivateChild)}(w))D=rr(w.canActivateChild(r,n));else{if(!et(w))throw new Error("Invalid CanActivateChild guard");D=rr(w(r,n))}return D.pipe(Yo())})).pipe(na())));return at(u).pipe(na())}(n,i.path,t),function fb(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return at(!0);const i=r.map(u=>Ha(()=>{const c=Jp(u,e,t);let h;if(function qi(n){return n&&et(n.canActivate)}(c))h=rr(c.canActivate(e,n));else{if(!et(c))throw new Error("Invalid CanActivate guard");h=rr(c(e,n))}return h.pipe(Yo())}));return at(i).pipe(na())}(n,i.route,t))),Yo(i=>!0!==i,!0))}(r,u,n,e):at(h)),(0,Rt.U)(h=>Object.assign(Object.assign({},t),{guardsResult:h})))})}(this.ngModule.injector,h=>this.triggerEvent(h)),(0,qr.b)(h=>{if(bt(h.guardsResult)){const w=yo(`Redirecting to "${this.serializeUrl(h.guardsResult)}"`);throw w.url=h.guardsResult,w}const _=new Sh(h.id,this.serializeUrl(h.extractedUrl),this.serializeUrl(h.urlAfterRedirects),h.targetSnapshot,!!h.guardsResult);this.triggerEvent(_)}),Ur(h=>!!h.guardsResult||(this.restoreHistory(h),this.cancelNavigationTransition(h,""),!1)),tg(h=>{if(h.guards.canActivateChecks.length)return at(h).pipe((0,qr.b)(_=>{const w=new Vr(_.id,this.serializeUrl(_.extractedUrl),this.serializeUrl(_.urlAfterRedirects),_.targetSnapshot);this.triggerEvent(w)}),Er(_=>{let w=!1;return at(_).pipe(function Ex(n,e){return(0,$n.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return at(t);let u=0;return(0,Zn.D)(i).pipe(vu(c=>function ra(n,e,t,r){return function __(n,e,t,r){const i=eg(n);if(0===i.length)return at({});const u={};return(0,Zn.D)(i).pipe((0,$n.z)(c=>function Cb(n,e,t,r){const i=Jp(n,e,r);return rr(i.resolve?i.resolve(e,t):i(e,t))}(n[c],e,t,r).pipe((0,qr.b)(h=>{u[c]=h}))),go(1),(0,$n.z)(()=>eg(u).length===i.length?at(u):fo.E))}(n._resolve,n,e,r).pipe((0,Rt.U)(u=>(n._resolvedData=u,n.data=Object.assign(Object.assign({},n.data),u_(n,t).resolve),null)))}(c.route,r,n,e)),(0,qr.b)(()=>u++),go(1),(0,$n.z)(c=>u===i.length?at(t):fo.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,qr.b)({next:()=>w=!0,complete:()=>{w||(this.restoreHistory(_),this.cancelNavigationTransition(_,"At least one route resolver didn't emit any value."))}}))}),(0,qr.b)(_=>{const w=new si(_.id,this.serializeUrl(_.extractedUrl),this.serializeUrl(_.urlAfterRedirects),_.targetSnapshot);this.triggerEvent(w)}))}),tg(h=>{const{targetSnapshot:_,id:w,extractedUrl:D,rawUrl:S,extras:{skipLocationChange:P,replaceUrl:B}}=h;return this.hooks.afterPreactivation(_,{navigationId:w,appliedUrlTree:D,rawUrlTree:S,skipLocationChange:!!P,replaceUrl:!!B})}),(0,Rt.U)(h=>{const _=function l_(n,e,t){const r=Ml(n,e._root,t?t._root:void 0);return new zc(r,e)}(this.routeReuseStrategy,h.targetSnapshot,h.currentRouterState);return Object.assign(Object.assign({},h),{targetRouterState:_})}),(0,qr.b)(h=>{this.currentUrlTree=h.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(h.urlAfterRedirects,h.rawUrl),this.routerState=h.targetRouterState,"deferred"===this.urlUpdateStrategy&&(h.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,h),this.browserUrlTree=h.urlAfterRedirects)}),((n,e,t)=>(0,Rt.U)(r=>(new O(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,h=>this.triggerEvent(h)),(0,qr.b)({next(){u=!0},complete(){u=!0}}),function Th(n){return(0,Dr.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}(()=>{var h;u||c||this.cancelNavigationTransition(i,`Navigation ID ${i.id} is not equal to the current navigation id ${this.navigationId}`),(null===(h=this.currentNavigation)||void 0===h?void 0:h.id)===i.id&&(this.currentNavigation=null)}),ms(h=>{if(c=!0,function r_(n){return n&&n[Iu]}(h)){const _=bt(h.url);_||(this.navigated=!0,this.restoreHistory(i,!0));const w=new Yn(i.id,this.serializeUrl(i.extractedUrl),h.message);r.next(w),_?setTimeout(()=>{const D=this.urlHandlingStrategy.merge(h.url,this.rawUrlTree),S={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||g0(i.source)};this.scheduleNavigation(D,"imperative",null,S,{resolve:i.resolve,reject:i.reject,promise:i.promise})},0):i.resolve(!1)}else{this.restoreHistory(i,!0);const _=new za(i.id,this.serializeUrl(i.extractedUrl),h);r.next(_);try{i.resolve(this.errorHandler(h))}catch(w){i.reject(w)}}return fo.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{var i;const u={replaceUrl:!0},c=(null===(i=t.state)||void 0===i?void 0:i.navigationId)?t.state:null;if(c){const _=Object.assign({},c);delete _.navigationId,delete _.\u0275routerPageId,0!==Object.keys(_).length&&(u.state=_)}const h=this.parseUrl(t.url);this.scheduleNavigation(h,r,c,u)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){Ya(t),this.config=t.map(kl),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:u,fragment:c,queryParamsHandling:h,preserveFragment:_}=r,w=i||this.routerState.root,D=_?this.currentUrlTree.fragment:c;let S=null;switch(h){case"merge":S=Object.assign(Object.assign({},this.currentUrlTree.queryParams),u);break;case"preserve":S=this.currentUrlTree.queryParams;break;default:S=u||null}return null!==S&&(S=this.removeEmptyProps(S)),function js(n,e,t,r,i){if(0===t.length)return $p(e.root,e.root,e.root,r,i);const u=function Wp(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new h_(!0,0,n);let e=0,t=!1;const r=n.reduce((i,u,c)=>{if("object"==typeof u&&null!=u){if(u.outlets){const h={};return An(u.outlets,(_,w)=>{h[w]="string"==typeof _?_.split("/"):_}),[...i,{outlets:h}]}if(u.segmentPath)return[...i,u.segmentPath]}return"string"!=typeof u?[...i,u]:0===c?(u.split("/").forEach((h,_)=>{0==_&&"."===h||(0==_&&""===h?t=!0:".."===h?e++:""!=h&&i.push(h))}),i):[...i,u]},[]);return new h_(t,e,r)}(t);if(u.toRoot())return $p(e.root,e.root,new X([],{}),r,i);const c=function Lh(n,e,t){if(n.isAbsolute)return new zp(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const u=t.snapshot._urlSegment;return new zp(u,u===e.root,0)}const r=ta(n.commands[0])?0:1;return function Gp(n,e,t){let r=n,i=e,u=t;for(;u>i;){if(u-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new zp(r,!1,i-u)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+r,n.numberOfDoubleDots)}(u,e,n),h=c.processChildren?Zc(c.segmentGroup,c.index,u.commands):qp(c.segmentGroup,c.index,u.commands);return $p(e.root,c.segmentGroup,h,r,i)}(w,this.currentUrlTree,t,S,null!=D?D:null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=bt(t)?t:this.parseUrl(t),u=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(u,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function Tb(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?Object.assign({},bb):!1===r?Object.assign({},E_):r,bt(t))return wo(this.currentUrlTree,t,i);const u=this.parseUrl(t);return wo(this.currentUrlTree,u,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const u=t[i];return null!=u&&(r[i]=u),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new Qo(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,i,u,c){var h,_;if(this.disposed)return Promise.resolve(!1);let w,D,S;c?(w=c.resolve,D=c.reject,S=c.promise):S=new Promise((Y,xe)=>{w=Y,D=xe});const P=++this.navigationId;let B;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),B=i&&i.\u0275routerPageId?i.\u0275routerPageId:u.replaceUrl||u.skipLocationChange?null!==(h=this.browserPageId)&&void 0!==h?h:0:(null!==(_=this.browserPageId)&&void 0!==_?_:0)+1):B=0,this.setTransition({id:P,targetPageId:B,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:u,resolve:w,reject:D,promise:S,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),S.catch(Y=>Promise.reject(Y))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t),u=Object.assign(Object.assign({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",u):this.location.go(i,"",u)}restoreHistory(t,r=!1){var i,u;if("computed"===this.canceledNavigationResolution){const c=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(i=this.currentNavigation)||void 0===i?void 0:i.finalUrl)||0===c?this.currentUrlTree===(null===(u=this.currentNavigation)||void 0===u?void 0:u.finalUrl)&&0===c&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(c)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r){const i=new Yn(t.id,this.serializeUrl(t.extractedUrl),r);this.triggerEvent(i),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){g.$Z()},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();function g0(n){return"imperative"!==n}let Xc=(()=>{class n{constructor(t,r,i){this.router=t,this.route=r,this.locationStrategy=i,this.commands=null,this.href=null,this.onChanges=new Ls.x,this.subscription=t.events.subscribe(u=>{u instanceof Qo&&this.updateTargetUrlAndHref()})}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:null}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,r,i,u,c){if(0!==t||r||i||u||c||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)return!0;const h={skipLocationChange:ed(this.skipLocationChange),replaceUrl:ed(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,h),!1}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:ed(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(Pi),g.Y36(Su),g.Y36(_e))},n.\u0275dir=g.lG2({type:n,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,r){1&t&&g.NdJ("click",function(u){return r.onClick(u.button,u.ctrlKey,u.shiftKey,u.altKey,u.metaKey)}),2&t&&g.uIk("target",r.target)("href",r.href,g.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[g.TTD]}),n})();function ed(n){return""===n||!!n}class C_{}class _0{preload(e,t){return at(null)}}let y0=(()=>{class n{constructor(t,r,i,u){this.router=t,this.injector=i,this.preloadingStrategy=u,this.loader=new ng(i,r,_=>t.triggerEvent(new Jo(_)),_=>t.triggerEvent(new Xo(_)))}setUpPreloading(){this.subscription=this.router.events.pipe(Ur(t=>t instanceof Qo),vu(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(g.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const u of r)if(u.loadChildren&&!u.canLoad&&u._loadedConfig){const c=u._loadedConfig;i.push(this.processRoutes(c.module,c.routes))}else u.loadChildren&&!u.canLoad?i.push(this.preloadConfig(t,u)):u.children&&i.push(this.processRoutes(t,u.children));return(0,Zn.D)(i).pipe((0,Fs.J)(),(0,Rt.U)(u=>{}))}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>(r._loadedConfig?at(r._loadedConfig):this.loader.load(t.injector,r)).pipe((0,$n.z)(u=>(r._loadedConfig=u,this.processRoutes(u.module,u.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(Pi),g.LFG(g.Sil),g.LFG(g.zs3),g.LFG(C_))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})(),rg=(()=>{class n{constructor(t,r,i={}){this.router=t,this.viewportScroller=r,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof mo?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Qo&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Tl&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new Tl(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){g.$Z()},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();const Es=new g.OlP("ROUTER_CONFIGURATION"),T_=new g.OlP("ROUTER_FORROOT_GUARD"),v0=[ke,{provide:Pt,useClass:Ct},{provide:Pi,useFactory:function S_(n,e,t,r,i,u,c={},h,_){const w=new Pi(null,n,e,t,r,i,bu(u));return h&&(w.urlHandlingStrategy=h),_&&(w.routeReuseStrategy=_),function I0(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(c,w),c.enableTracing&&w.events.subscribe(D=>{var S,P;null===(S=console.group)||void 0===S||S.call(console,`Router Event: ${D.constructor.name}`),console.log(D.toString()),console.log(D),null===(P=console.groupEnd)||void 0===P||P.call(console)}),w},deps:[Pt,Ru,ke,g.zs3,g.Sil,Hh,Es,[class p0{},new g.FiY],[class $h{},new g.FiY]]},Ru,{provide:Su,useFactory:function ig(n){return n.routerState.root},deps:[Pi]},y0,_0,class b_{preload(e,t){return t().pipe(ms(()=>at(null)))}},{provide:Es,useValue:{enableTracing:!1}}];function Sb(){return new g.PXZ("Router",Pi)}let Wh=(()=>{class n{constructor(t,r){}static forRoot(t,r){return{ngModule:n,providers:[v0,D_(t),{provide:T_,useFactory:w0,deps:[[Pi,new g.FiY,new g.tp0]]},{provide:Es,useValue:r||{}},{provide:_e,useFactory:E0,deps:[le,[new g.tBr(ze),new g.FiY],Es]},{provide:rg,useFactory:Ab,deps:[Pi,hu,Es]},{provide:C_,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:_0},{provide:g.PXZ,multi:!0,useFactory:Sb},[td,{provide:g.ip1,multi:!0,useFactory:C0,deps:[td]},{provide:x_,useFactory:A_,deps:[td]},{provide:g.tb,multi:!0,useExisting:x_}]]}}static forChild(t){return{ngModule:n,providers:[D_(t)]}}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(T_,8),g.LFG(Pi,8))},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({}),n})();function Ab(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new rg(n,e,t)}function E0(n,e,t={}){return t.useHash?new Pe(n,e):new We(n,e)}function w0(n){return"guarded"}function D_(n){return[{provide:g.deG,multi:!0,useValue:n},{provide:Hh,multi:!0,useValue:n}]}let td=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new Ls.x}appInitializer(){return this.injector.get(W,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const i=new Promise(h=>r=h),u=this.injector.get(Pi),c=this.injector.get(Es);return"disabled"===c.initialNavigation?(u.setUpLocationChangeListener(),r(!0)):"enabled"===c.initialNavigation||"enabledBlocking"===c.initialNavigation?(u.hooks.afterPreactivation=()=>this.initNavigation?at(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),u.initialNavigation()):r(!0),i})}bootstrapListener(t){const r=this.injector.get(Es),i=this.injector.get(y0),u=this.injector.get(rg),c=this.injector.get(Pi),h=this.injector.get(g.z2F);t===h.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&c.initialNavigation(),i.setUpPreloading(),u.init(),c.resetRootComponentType(h.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(g.zs3))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();function C0(n){return n.appInitializer.bind(n)}function A_(n){return n.bootstrapListener.bind(n)}const x_=new g.OlP("Router Initializer");var me=k(5861),b0=k(6451),og=k(5363),xb=k(6063);class T0 extends Ls.x{constructor(e=1/0,t=1/0,r=xb.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:u,_windowTime:c}=this;t||(r.push(e),!i&&r.push(u.now()+c)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,u=i.slice();for(let c=0;c<u.length&&!e.closed;c+=r?1:2)e.next(u[c]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,u=(i?1:2)*e;if(e<1/0&&u<r.length&&r.splice(0,r.length-u),!i){const c=t.now();let h=0;for(let _=1;_<r.length&&r[_]<=c;_+=2)h=_;h&&r.splice(0,h+1)}}}var M_=k(3099);function N_(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=null!=n?n:1/0,(0,M_.B)({connector:()=>new T0(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function Rb(n,e){return(0,qo.m)(e)?Er(()=>n,e):Er(()=>n)}var ag=k(9468),tn=k(5813),Hs=k(2011),Qa=k(5867);class Vl{constructor(e){return e}}class Ki{constructor(){return(0,Qa.C6)()}}const P_=new g.OlP("angularfire2._apps"),Mb={provide:Vl,useFactory:function D0(n){return n&&1===n.length?n[0]:new Vl((0,Qa.Mq)())},deps:[[new g.FiY,P_]]},Nb={provide:Ki,deps:[[new g.FiY,P_]]};function Pb(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new Vl(r)}}let S0=(()=>{class n{constructor(t){(0,Qa.KN)("angularfire",tn.q4.full,"core"),(0,Qa.KN)("angularfire",tn.q4.full,"app"),(0,Qa.KN)("angular",g.q4F.full,t.toString())}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(g.Lbi))},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({providers:[Mb,Nb]}),n})();function kb(n,...e){return{ngModule:S0,providers:[{provide:P_,useFactory:Pb(n),multi:!0,deps:[g.R0b,g.zs3,tn.HU,...e]}]}}const A0=(0,tn.u3)(Qa.ZF,!0);var Hn=k(9681),nd=k(4859),Q=k(2090),Ws=k(1877);const ia=new Map,O_={activated:!1,tokenObservers:[]},x0={initialized:!1,enabled:!1};function Sr(n){return ia.get(n)||O_}function sa(n,e){ia.set(n,e)}function zh(){return x0}class Tx{constructor(e,t,r,i,u){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=u,this.pending=null,this.nextErrorWaitInterval=i,i>u)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,me.Z)(function*(){t.stop();try{t.pending=new Q.BH,yield function Fb(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new Q.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const ki=new Q.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function U_(n){if(!Sr(n).activated)throw ki.create("use-before-activation",{appName:n.name})}function hg(n,e){return fg.apply(this,arguments)}function fg(){return(fg=(0,me.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});if(i){const S=yield i.getHeartbeatsHeader();S&&(r["X-Firebase-Client"]=S)}const u={method:"POST",body:JSON.stringify(e),headers:r};let c,h;try{c=yield fetch(n,u)}catch(S){throw ki.create("fetch-network-error",{originalErrorMessage:S.message})}if(200!==c.status)throw ki.create("fetch-status-error",{httpStatus:c.status});try{h=yield c.json()}catch(S){throw ki.create("fetch-parse-error",{originalErrorMessage:S.message})}const _=h.ttl.match(/^([\d.]+)(s)$/);if(!_||!_[2]||isNaN(Number(_[1])))throw ki.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${h.ttl}`});const w=1e3*Number(_[1]),D=Date.now();return{token:h.token,expireTimeMillis:D+w,issuedAtTimeMillis:D}})).apply(this,arguments)}function Sx(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:e}}}const pg="firebase-app-check-store";let $_=null;function jb(){return $_||($_=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(ki.create("storage-open",{originalErrorMessage:null===(i=r.target.error)||void 0===i?void 0:i.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(pg,{keyPath:"compositeKey"})}}catch(t){e(ki.create("storage-open",{originalErrorMessage:t.message}))}}),$_)}function H_(){return(H_=(0,me.Z)(function*(n,e){const r=(yield jb()).transaction(pg,"readwrite"),u=r.objectStore(pg).put({compositeKey:n,value:e});return new Promise((c,h)=>{u.onsuccess=_=>{c()},r.onerror=_=>{var w;h(ki.create("storage-set",{originalErrorMessage:null===(w=_.target.error)||void 0===w?void 0:w.message}))}})})).apply(this,arguments)}const Bl=new Ws.Yd("@firebase/app-check");function G_(n,e){return(0,Q.hl)()?function Mx(n,e){return function gg(n,e){return H_.apply(this,arguments)}(function z_(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{Bl.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function M0(){return zh().enabled}function q_(){return K_.apply(this,arguments)}function K_(){return(K_=(0,me.Z)(function*(){const n=zh();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const Kh={error:"UNKNOWN_ERROR"};function rd(n){return Q.US.encodeString(JSON.stringify(n),!1)}function id(n){return Pu.apply(this,arguments)}function Pu(){return(Pu=(0,me.Z)(function*(n,e=!1){const t=n.app;U_(t);const r=Sr(t);let u,i=r.token;if(!i){const _=yield r.cachedTokenPromise;_&&sd(_)&&(i=_)}if(!e&&i&&sd(i))return{token:i.token};let h,c=!1;if(M0()){r.exchangeTokenPromise||(r.exchangeTokenPromise=hg(Sx(t,yield q_()),n.heartbeatServiceProvider).then(w=>(r.exchangeTokenPromise=void 0,w)),c=!0);const _=yield r.exchangeTokenPromise;return yield G_(t,_),sa(t,Object.assign(Object.assign({},r),{token:_})),{token:_.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(_=>(r.exchangeTokenPromise=void 0,_)),c=!0),i=yield r.exchangeTokenPromise}catch(_){"appCheck/throttled"===_.code?Bl.warn(_.message):Bl.error(_),u=_}return i?(h={token:i.token},sa(t,Object.assign(Object.assign({},r),{token:i})),yield G_(t,i)):h=Y_(u),c&&Z_(t,h),h})).apply(this,arguments)}function ku(n,e){const t=Sr(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),sa(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function N0(n){const{app:e}=n,t=Sr(e);let r=t.tokenRefresher;r||(r=function P0(n){const{app:e}=n;return new Tx((0,me.Z)(function*(){let r;if(r=Sr(e).token?yield id(n,!0):yield id(n),r.error)throw r.error}),()=>!0,()=>{const t=Sr(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),sa(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function Z_(n,e){const t=Sr(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch(i){}}function sd(n){return n.expireTimeMillis-Date.now()>0}function Y_(n){return{token:rd(Kh),error:n}}class k0{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Sr(this.app);for(const t of e)ku(this.app,t.next);return Promise.resolve()}}const j0="app-check-internal";!function $0(){(0,Hn._registerComponent)(new nd.wA("app-check",n=>function mg(n,e){return new k0(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(j0).initialize()})),(0,Hn._registerComponent)(new nd.wA(j0,n=>function zb(n){return{getToken:e=>id(n,e),addTokenListener:e=>function jl(n,e,t,r){const{app:i}=n,u=Sr(i),c={next:t,error:r,type:e};if(sa(i,Object.assign(Object.assign({},u),{tokenObservers:[...u.tokenObservers,c]})),u.token&&sd(u.token)){const h=u.token;Promise.resolve().then(()=>{t({token:h.token}),N0(n)}).catch(()=>{})}u.cachedTokenPromise.then(()=>N0(n))}(n,"INTERNAL",e),removeTokenListener:e=>ku(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Hn.registerVersion)("@firebase/app-check","0.5.8")}();class Oi{constructor(){return(0,tn.vb)("app-check")}}"undefined"!=typeof window&&window;var sy=k(127);const K0=new g.OlP("angularfire2.auth.use-emulator"),Z0=new g.OlP("angularfire2.auth.settings"),vg=new g.OlP("angularfire2.auth.tenant-id"),rT=new g.OlP("angularfire2.auth.langugage-code"),Y0=new g.OlP("angularfire2.auth.use-device-language"),oy=new g.OlP("angularfire.auth.persistence"),ay=(n,e,t,r,i,u,c,h)=>(0,Hs.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const _=e.runOutsideAngular(()=>n.auth());if(t&&_.useEmulator(...t),r&&(_.tenantId=r),_.languageCode=i,u&&_.useDeviceLanguage(),c)for(const[w,D]of Object.entries(c))_.settings[w]=D;return h&&_.setPersistence(h),_},[t,r,i,u,c,h]);let Eg=(()=>{class n{constructor(t,r,i,u,c,h,_,w,D,S,P,B){const Y=new Ls.x,xe=at(void 0).pipe((0,og.Q)(c.outsideAngular),Er(()=>u.runOutsideAngular(()=>Promise.resolve().then(k.bind(k,5881)))),(0,Rt.U)(()=>(0,Hs.on)(t,u,r)),(0,Rt.U)(Ke=>ay(Ke,u,h,w,D,S,_,P)),N_({bufferSize:1,refCount:!1}));if(Lr(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=at(null);else{xe.pipe(Yo()).subscribe();const Gt=xe.pipe(Er(Ot=>Ot.getRedirectResult().then(rn=>rn,()=>null)),tn.iC,N_({bufferSize:1,refCount:!1})),Wt=xe.pipe(Er(Ot=>new Ri.y(rn=>({unsubscribe:u.runOutsideAngular(()=>Ot.onAuthStateChanged(In=>rn.next(In),In=>rn.error(In),()=>rn.complete()))})))),Kt=xe.pipe(Er(Ot=>new Ri.y(rn=>({unsubscribe:u.runOutsideAngular(()=>Ot.onIdTokenChanged(In=>rn.next(In),In=>rn.error(In),()=>rn.complete()))}))));this.authState=Gt.pipe(Rb(Wt),(0,ag.R)(c.outsideAngular),(0,og.Q)(c.insideAngular)),this.user=Gt.pipe(Rb(Kt),(0,ag.R)(c.outsideAngular),(0,og.Q)(c.insideAngular)),this.idToken=this.user.pipe(Er(Ot=>Ot?(0,Zn.D)(Ot.getIdToken()):at(null))),this.idTokenResult=this.user.pipe(Er(Ot=>Ot?(0,Zn.D)(Ot.getIdTokenResult()):at(null))),this.credential=(0,b0.T)(Gt,Y,this.authState.pipe(Ur(Ot=>!Ot))).pipe((0,Rt.U)(Ot=>(null==Ot?void 0:Ot.user)?Ot:null),(0,ag.R)(c.outsideAngular),(0,og.Q)(c.insideAngular))}return(0,Hs.pX)(this,xe,u,{spy:{apply:(Ke,Gt,Wt)=>{(Ke.startsWith("signIn")||Ke.startsWith("createUser"))&&Wt.then(Kt=>Y.next(Kt))}}})}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(Hs.Dh),g.LFG(Hs.xv,8),g.LFG(g.Lbi),g.LFG(g.R0b),g.LFG(tn.HU),g.LFG(K0,8),g.LFG(Z0,8),g.LFG(vg,8),g.LFG(rT,8),g.LFG(Y0,8),g.LFG(oy,8),g.LFG(Oi,8))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();var Q0=k(4986);function So(){return(0,Dr.e)((n,e)=>{let t,r=!1;n.subscribe((0,xn.x)(e,i=>{const u=t;t=i,r&&e.next([u,i]),r=!0}))})}function sT(n,e){return n===e}k(5881);var ot,Wx=k(3942),uy="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},aa={},$l=$l||{},At=uy||self;function od(){}function Ig(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function ad(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var ly="closure_uid_"+(1e9*Math.random()>>>0),cy=0;function oT(n,e,t){return n.call.apply(n.bind,arguments)}function aT(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function Zr(n,e,t){return(Zr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?oT:aT).apply(null,arguments)}function Ja(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Yr(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,i,u){for(var c=Array(arguments.length-2),h=2;h<arguments.length;h++)c[h-2]=arguments[h];return e.prototype[i].apply(r,c)}}function Ou(){this.s=this.s,this.o=this.o}var ud={};Ou.prototype.s=!1,Ou.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function J0(n){return Object.prototype.hasOwnProperty.call(n,ly)&&n[ly]||(n[ly]=++cy)}(this);delete ud[n]}},Ou.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const X0=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},ew=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const r=n.length,i="string"==typeof n?n.split(""):n;for(let u=0;u<r;u++)u in i&&e.call(t,i[u],u,n)};function tw(n){return Array.prototype.concat.apply([],arguments)}function zs(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function ld(n){return/^[\s\xa0]*$/.test(n)}var Ei,dy=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function vi(n,e){return-1!=n.indexOf(e)}function Cg(n,e){return n<e?-1:n>e?1:0}e:{var nw=At.navigator;if(nw){var rw=nw.userAgent;if(rw){Ei=rw;break e}}Ei=""}function hy(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function iw(n){const e={};for(const t in n)e[t]=n[t];return e}var fy="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function cT(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let u=0;u<fy.length;u++)t=fy[u],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function bg(n){return bg[" "](n),n}bg[" "]=od;var gy,n,hT=vi(Ei,"Opera"),Zh=vi(Ei,"Trident")||vi(Ei,"MSIE"),fT=vi(Ei,"Edge"),Yh=fT||Zh,sw=vi(Ei,"Gecko")&&!(vi(Ei.toLowerCase(),"webkit")&&!vi(Ei,"Edge"))&&!(vi(Ei,"Trident")||vi(Ei,"MSIE"))&&!vi(Ei,"Edge"),ow=vi(Ei.toLowerCase(),"webkit")&&!vi(Ei,"Edge");function py(){var n=At.document;return n?n.documentMode:void 0}e:{var ws="",aw=(n=Ei,sw?/rv:([^\);]+)(\)|;)/.exec(n):fT?/Edge\/([\d\.]+)/.exec(n):Zh?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):ow?/WebKit\/(\S+)/.exec(n):hT?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(aw&&(ws=aw?aw[1]:""),Zh){var uw=py();if(null!=uw&&uw>parseFloat(ws)){gy=String(uw);break e}}gy=ws}var lw={};var zx=At.document&&Zh&&(py()||parseInt(gy,10))||void 0,hw=function(){if(!At.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{At.addEventListener("test",od,e),At.removeEventListener("test",od,e)}catch(t){}return n}();function ai(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function Qh(n,e){if(ai.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(sw){e:{try{bg(e.nodeName);var i=!0;break e}catch(u){}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:my[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Qh.Z.h.call(this)}}ai.prototype.h=function(){this.defaultPrevented=!0},Yr(Qh,ai);var my={2:"touch",3:"pen",4:"mouse"};Qh.prototype.h=function(){Qh.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Jh="closure_listenable_"+(1e6*Math.random()|0),pT=0;function gT(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ia=i,this.key=++pT,this.ca=this.fa=!1}function Dg(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function Sg(n){this.src=n,this.g={},this.h=0}function _y(n,e){var t=e.type;if(t in n.g){var u,r=n.g[t],i=X0(r,e);(u=0<=i)&&Array.prototype.splice.call(r,i,1),u&&(Dg(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function cd(n,e,t,r){for(var i=0;i<n.length;++i){var u=n[i];if(!u.ca&&u.listener==e&&u.capture==!!t&&u.ia==r)return i}return-1}Sg.prototype.add=function(n,e,t,r,i){var u=n.toString();(n=this.g[u])||(n=this.g[u]=[],this.h++);var c=cd(n,e,r,i);return-1<c?(e=n[c],t||(e.fa=!1)):((e=new gT(e,this.src,u,!!r,i)).fa=t,n.push(e)),e};var Lu="closure_lm_"+(1e6*Math.random()|0),yy={};function dd(n,e,t,r,i){if(r&&r.once)return Ag(n,e,t,r,i);if(Array.isArray(e)){for(var u=0;u<e.length;u++)dd(n,e[u],t,r,i);return null}return t=Xh(t),n&&n[Jh]?n.N(e,t,ad(r)?!!r.capture:!!r,i):fw(n,e,t,!1,r,i)}function fw(n,e,t,r,i,u){if(!e)throw Error("Invalid event type");var c=ad(i)?!!i.capture:!!i,h=hd(n);if(h||(n[Lu]=h=new Sg(n)),(t=h.add(e,t,r,c,u)).proxy)return t;if(r=function mT(){var e=Wl;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)hw||(i=c),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(ui(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function Ag(n,e,t,r,i){if(Array.isArray(e)){for(var u=0;u<e.length;u++)Ag(n,e[u],t,r,i);return null}return t=Xh(t),n&&n[Jh]?n.O(e,t,ad(r)?!!r.capture:!!r,i):fw(n,e,t,!0,r,i)}function Ao(n,e,t,r,i){if(Array.isArray(e))for(var u=0;u<e.length;u++)Ao(n,e[u],t,r,i);else r=ad(r)?!!r.capture:!!r,t=Xh(t),n&&n[Jh]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=cd(u=n.g[e],t,r,i))&&(Dg(u[t]),Array.prototype.splice.call(u,t,1),0==u.length&&(delete n.g[e],n.h--))):n&&(n=hd(n))&&(e=n.g[e.toString()],n=-1,e&&(n=cd(e,t,r,i)),(t=-1<n?e[n]:null)&&Hl(t))}function Hl(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[Jh])_y(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(ui(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=hd(e))?(_y(t,n),0==t.h&&(t.src=null,e[Lu]=null)):Dg(n)}}}function ui(n){return n in yy?yy[n]:yy[n]="on"+n}function Wl(n,e){if(n.ca)n=!0;else{e=new Qh(e,this);var t=n.listener,r=n.ia||n.src;n.fa&&Hl(n),n=t.call(r,e)}return n}function hd(n){return(n=n[Lu])instanceof Sg?n:null}var Yi="__closure_events_fn_"+(1e9*Math.random()>>>0);function Xh(n){return"function"==typeof n?n:(n[Yi]||(n[Yi]=function(e){return n.handleEvent(e)}),n[Yi])}function ir(){Ou.call(this),this.i=new Sg(this),this.P=this,this.I=null}function ur(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new ai(e,n);else if(e instanceof ai)e.target=e.target||n;else{var i=e;cT(e=new ai(r,n),i)}if(i=!0,t)for(var u=t.length-1;0<=u;u--){var c=e.g=t[u];i=Xa(c,r,!0,e)&&i}if(i=Xa(c=e.g=n,r,!0,e)&&i,i=Xa(c,r,!1,e)&&i,t)for(u=0;u<t.length;u++)i=Xa(c=e.g=t[u],r,!1,e)&&i}function Xa(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,u=0;u<e.length;++u){var c=e[u];if(c&&!c.ca&&c.capture==t){var h=c.listener,_=c.ia||c.src;c.fa&&_y(n.i,c),i=!1!==h.call(_,r)&&i}}return i&&!r.defaultPrevented}Yr(ir,Ou),ir.prototype[Jh]=!0,ir.prototype.removeEventListener=function(n,e,t,r){Ao(this,n,e,t,r)},ir.prototype.M=function(){if(ir.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)Dg(t[r]);delete n.g[e],n.h--}}this.I=null},ir.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},ir.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var Fu=At.JSON.stringify;function fd(){var n=vy;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var Rg,zl=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new gd,n=>n.reset());class gd{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function md(n){At.setTimeout(()=>{throw n},0)}function xg(n,e){Rg||function pw(){var n=At.Promise.resolve(void 0);Rg=function(){n.then(gw)}}(),Mg||(Rg(),Mg=!0),vy.add(n,e)}var Mg=!1,vy=new class pd{constructor(){this.h=this.g=null}add(e,t){const r=zl.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function gw(){for(var n;n=fd();){try{n.h.call(n.g)}catch(t){md(t)}var e=zl;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Mg=!1}function ef(n,e){ir.call(this),this.h=n||1,this.g=e||At,this.j=Zr(this.kb,this),this.l=Date.now()}function Ng(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function Pg(n,e,t){if("function"==typeof n)t&&(n=Zr(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Zr(n.handleEvent,n)}return 2147483647<Number(e)?-1:At.setTimeout(n,e||0)}function mw(n){n.g=Pg(()=>{n.g=null,n.i&&(n.i=!1,mw(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Yr(ef,ir),(ot=ef.prototype).da=!1,ot.S=null,ot.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),ur(this,"tick"),this.da&&(Ng(this),this.start()))}},ot.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},ot.M=function(){ef.Z.M.call(this),Ng(this),delete this.g};class _w extends Ou{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:mw(this)}M(){super.M(),this.g&&(At.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function tf(n){Ou.call(this),this.h=n,this.g={}}Yr(tf,Ou);var Ey=[];function wy(n,e,t,r){Array.isArray(t)||(t&&(Ey[0]=t.toString()),t=Ey);for(var i=0;i<t.length;i++){var u=dd(e,t[i],r||n.handleEvent,!1,n.h||n);if(!u)break;n.g[u.key]=u}}function yw(n){hy(n.g,function(e,t){this.g.hasOwnProperty(t)&&Hl(e)},n),n.g={}}function kg(){this.g=!0}function Gl(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function vT(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var u=i[0];if("noop"!=u&&"stop"!=u&&"close"!=u)for(var c=1;c<i.length;c++)i[c]=""}}}return Fu(t)}catch(h){return e}}(n,t)+(r?" "+r:"")})}tf.prototype.M=function(){tf.Z.M.call(this),yw(this)},tf.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},kg.prototype.Aa=function(){this.g=!1},kg.prototype.info=function(){};var _d={},Ew=null;function yd(){return Ew=Ew||new ir}function Og(n){ai.call(this,_d.Ma,n)}function nf(n){const e=yd();ur(e,new Og(e,n))}function ET(n,e){ai.call(this,_d.STAT_EVENT,n),this.stat=e}function Qi(n){const e=yd();ur(e,new ET(e,n))}function wT(n,e){ai.call(this,_d.Na,n),this.size=e}function rf(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return At.setTimeout(function(){n()},e)}_d.Ma="serverreachability",Yr(Og,ai),_d.STAT_EVENT="statevent",Yr(ET,ai),_d.Na="timingevent",Yr(wT,ai);var sf={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},IT={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function Iy(){}function ww(){}Iy.prototype.h=null;var Ed,vd={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function Cy(){ai.call(this,"d")}function Lg(){ai.call(this,"c")}function Fg(){}function wd(n,e,t,r){this.l=n,this.j=e,this.m=t,this.X=r||1,this.V=new tf(this),this.P=CT,this.W=new ef(n=Yh?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new Iw}function Iw(){this.i=null,this.g="",this.h=!1}Yr(Cy,ai),Yr(Lg,ai),Yr(Fg,Iy),Fg.prototype.g=function(){return new XMLHttpRequest},Fg.prototype.i=function(){return{}},Ed=new Fg;var CT=45e3,by={},Ug={};function Ty(n,e,t){n.K=1,n.v=cf(eu(e)),n.s=t,n.U=!0,Dy(n,null)}function Dy(n,e){n.F=Date.now(),Kl(n),n.A=eu(n.v);var t=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),Oy(t.h,"t",r),n.C=0,t=n.l.H,n.h=new Iw,n.g=Yy(n.l,t?e:null,!n.s),0<n.O&&(n.L=new _w(Zr(n.Ia,n,n.g),n.O)),wy(n.V,n.g,"readystatechange",n.gb),e=n.H?iw(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),nf(1),function vw(n,e,t,r,i,u){n.info(function(){if(n.g)if(u)for(var c="",h=u.split("&"),_=0;_<h.length;_++){var w=h[_].split("=");if(1<w.length){var D=w[0];w=w[1];var S=D.split("_");c=2<=S.length&&"type"==S[1]?c+(D+"=")+w+"&":c+(D+"=redacted&")}}else c=null;else c=u;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+c})}(n.j,n.u,n.A,n.m,n.X,n.s)}function Cw(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function Sy(n,e,t){let i,r=!0;for(;!n.I&&n.C<t.length;){if(i=bw(n,t),i==Ug){4==e&&(n.o=4,Qi(14),r=!1),Gl(n.j,n.m,null,"[Incomplete Response]");break}if(i==by){n.o=4,Qi(15),Gl(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}Gl(n.j,n.m,i,null),Zl(n,i)}Cw(n)&&i!=Ug&&i!=by&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Qi(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),Ef(e),e.L=!0,Qi(11))):(Gl(n.j,n.m,t,"[Invalid Chunked Response]"),Cd(n),of(n))}function bw(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?Ug:(t=Number(e.substring(t,r)),isNaN(t)?by:(r+=1)+t>e.length?Ug:(e=e.substr(r,t),n.C=r+t,e))}function Kl(n){n.Y=Date.now()+n.P,bT(n,n.P)}function bT(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=rf(Zr(n.eb,n),e)}function Id(n){n.B&&(At.clearTimeout(n.B),n.B=null)}function of(n){0==n.l.G||n.I||Gy(n.l,n)}function Cd(n){Id(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,Ng(n.W),yw(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function Zl(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||Uy(t.i,n)))if(t.I=n.N,!n.J&&Uy(t.i,n)&&3==t.G){try{var r=t.Ca.g.parse(e)}catch(w){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0])e:if(t.u)t.ta=i[1],0<t.ta-t.U&&37500>i[2]&&t.N&&0==t.A&&!t.v&&(t.v=rf(Zr(t.ab,t),6e3));else{if(t.g){if(!(t.g.F+3e3<n.F))break e;If(t),Vu(t)}Hg(t),Qi(18)}if(1>=ST(t.i)&&t.ka){try{t.ka()}catch(w){}t.ka=void 0}}else ju(t,11)}else if((n.J||t.g==n)&&If(t),!ld(e))for(i=t.Ca.g.parse(e),e=0;e<i.length;e++){let w=i[e];if(t.U=w[0],w=w[1],2==t.G)if("c"==w[0]){t.J=w[1],t.la=w[2];const D=w[3];null!=D&&(t.ma=D,t.h.info("VER="+t.ma));const S=w[4];null!=S&&(t.za=S,t.h.info("SVER="+t.za));const P=w[5];null!=P&&"number"==typeof P&&0<P&&(t.K=r=1.5*P,t.h.info("backChannelRequestTimeoutMs_="+r)),r=t;const B=n.g;if(B){const Y=B.g?B.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Y){var u=r.i;!u.g&&(vi(Y,"spdy")||vi(Y,"quic")||vi(Y,"h2"))&&(u.j=u.l,u.g=new Set,u.h&&(Vy(u,u.h),u.h=null))}if(r.D){const xe=B.g?B.g.getResponseHeader("X-HTTP-Session-Id"):null;xe&&(r.sa=xe,Pn(r.F,r.D,xe))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var c=n;if((r=t).oa=Zy(r,r.H?r.la:null,r.W),c.J){By(r.i,c);var h=c,_=r.K;_&&h.setTimeout(_),h.B&&(Id(h),Kl(h)),r.g=c}else zy(r);0<t.l.length&&$g(t)}else"stop"!=w[0]&&"close"!=w[0]||ju(t,7);else 3==t.G&&("stop"==w[0]||"close"==w[0]?"stop"==w[0]?ju(t,7):vf(t):"noop"!=w[0]&&t.j&&t.j.wa(w),t.A=0)}nf(4)}catch(w){}}function af(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(Ig(n)||"string"==typeof n)ew(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(Ig(n)||"string"==typeof n){t=[];for(var r=n.length,i=0;i<r;i++)t.push(i)}else for(i in t=[],r=0,n)t[r++]=i;r=function Tw(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(Ig(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length;for(var u=0;u<i;u++)e.call(void 0,r[u],t&&t[u],n)}}function Uu(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var r=0;r<t;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof Uu)for(t=n.T(),r=0;r<t.length;r++)this.set(t[r],n.get(t[r]));else for(r in n)this.set(r,n[r])}function Ay(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var r=n.g[e];ua(n.h,r)&&(n.g[t++]=r),e++}n.g.length=t}if(n.i!=n.g.length){var i={};for(t=e=0;e<n.g.length;)ua(i,r=n.g[e])||(n.g[t++]=r,i[r]=1),e++;n.g.length=t}}function ua(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(ot=wd.prototype).setTimeout=function(n){this.P=n},ot.gb=function(n){n=n.target;const e=this.L;e&&3==da(n)?e.l():this.Ia(n)},ot.Ia=function(n){try{if(n==this.g)e:{const D=da(this.g);var e=this.g.Da();const S=this.g.ba();if(!(3>D)&&(3!=D||Yh||this.g&&(this.h.h||this.g.ga()||$y(this.g)))){this.I||4!=D||7==e||nf(8==e||0>=S?3:2),Id(this);var t=this.g.ba();this.N=t;t:if(Cw(this)){var r=$y(this.g);n="";var i=r.length,u=4==da(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Cd(this),of(this);var c="";break t}this.h.i=new At.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:u&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,c=this.h.g}else c=this.g.ga();if(this.i=200==t,function _T(n,e,t,r,i,u,c){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+u+" "+c})}(this.j,this.u,this.A,this.m,this.X,D,t),this.i){if(this.$&&!this.J){t:{if(this.g){var h,_=this.g;if((h=_.g?_.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ld(h)){var w=h;break t}}w=null}if(!(t=w)){this.i=!1,this.o=3,Qi(12),Cd(this),of(this);break e}Gl(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Zl(this,t)}this.U?(Sy(this,D,c),Yh&&this.i&&3==D&&(wy(this.V,this.W,"tick",this.fb),this.W.start())):(Gl(this.j,this.m,c,null),Zl(this,c)),4==D&&Cd(this),this.i&&!this.I&&(4==D?Gy(this.l,this):(this.i=!1,Kl(this)))}else 400==t&&0<c.indexOf("Unknown SID")?(this.o=3,Qi(12)):(this.o=0,Qi(13)),Cd(this),of(this)}}}catch(D){}},ot.fb=function(){if(this.g){var n=da(this.g),e=this.g.ga();this.C<e.length&&(Id(this),Sy(this,n,e),this.i&&4!=n&&Kl(this))}},ot.cancel=function(){this.I=!0,Cd(this)},ot.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function yT(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(nf(3),Qi(17)),Cd(this),this.o=2,of(this)):bT(this,this.Y-n)},(ot=Uu.prototype).R=function(){Ay(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},ot.T=function(){return Ay(this),this.g.concat()},ot.get=function(n,e){return ua(this.h,n)?this.h[n]:e},ot.set=function(n,e){ua(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},ot.forEach=function(n,e){for(var t=this.T(),r=0;r<t.length;r++){var i=t[r],u=this.get(i);n.call(e,u,i,this)}};var uf=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function bd(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof bd){this.g=void 0!==e?e:n.g,Td(this,n.j),this.s=n.s,Dd(this,n.i),lf(this,n.m),this.l=n.l,e=n.h;var t=new hf;t.i=e.i,e.g&&(t.g=new Uu(e.g),t.h=e.h),Ry(this,t),this.o=n.o}else n&&(t=String(n).match(uf))?(this.g=!!e,Td(this,t[1]||"",!0),this.s=Sd(t[2]||""),Dd(this,t[3]||"",!0),lf(this,t[4]),this.l=Sd(t[5]||"",!0),Ry(this,t[6]||"",!0),this.o=Sd(t[7]||"")):(this.g=!!e,this.h=new hf(null,this.g))}function eu(n){return new bd(n)}function Td(n,e,t){n.j=t?Sd(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function Dd(n,e,t){n.i=t?Sd(e,!0):e}function lf(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function Ry(n,e,t){e instanceof hf?(n.h=e,function xw(n,e){e&&!n.j&&(la(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(Vg(this,r),Oy(this,i,t))},n)),n.j=e}(n.h,n.g)):(t||(e=df(e,TT)),n.h=new hf(e,n.g))}function Pn(n,e,t){n.h.set(e,t)}function cf(n){return Pn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Sd(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function df(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,Sw),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function Sw(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}bd.prototype.toString=function(){var n=[],e=this.j;e&&n.push(df(e,Ny,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(df(e,Ny,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(df(t,"/"==t.charAt(0)?Aw:Py,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",df(t,DT)),n.join("")};var Ny=/[#\/\?@]/g,Py=/[#\?:]/g,Aw=/[#\?]/g,TT=/[#\?@]/g,DT=/#/g;function hf(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function la(n){n.g||(n.g=new Uu,n.h=0,n.i&&function xy(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var u=n[t].substring(0,r);i=n[t].substring(r+1)}else u=n[t];e(u,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function Vg(n,e){la(n),e=Yl(n,e),ua(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,ua((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&Ay(n)))}function ky(n,e){return la(n),e=Yl(n,e),ua(n.g.h,e)}function Oy(n,e,t){Vg(n,e),0<t.length&&(n.i=null,n.g.set(Yl(n,e),zs(t)),n.h+=t.length)}function Yl(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function Ly(n){this.l=n||Mw,n=At.PerformanceNavigationTiming?0<(n=At.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(At.g&&At.g.Ea&&At.g.Ea()&&At.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(ot=hf.prototype).add=function(n,e){la(this),this.i=null,n=Yl(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},ot.forEach=function(n,e){la(this),this.g.forEach(function(t,r){ew(t,function(i){n.call(e,i,r,this)},this)},this)},ot.T=function(){la(this);for(var n=this.g.R(),e=this.g.T(),t=[],r=0;r<e.length;r++)for(var i=n[r],u=0;u<i.length;u++)t.push(e[r]);return t},ot.R=function(n){la(this);var e=[];if("string"==typeof n)ky(this,n)&&(e=tw(e,this.g.get(Yl(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=tw(e,n[t])}return e},ot.set=function(n,e){return la(this),this.i=null,ky(this,n=Yl(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},ot.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},ot.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var r=e[t],i=encodeURIComponent(String(r));r=this.R(r);for(var u=0;u<r.length;u++){var c=i;""!==r[u]&&(c+="="+encodeURIComponent(String(r[u]))),n.push(c)}}return this.i=n.join("&")};var Mw=10;function Fy(n){return!!n.h||!!n.g&&n.g.size>=n.j}function ST(n){return n.h?1:n.g?n.g.size:0}function Uy(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function Vy(n,e){n.g?n.g.add(e):n.h=e}function By(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function Nw(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return zs(n.i)}function Ir(){}function Pw(){this.g=new Ir}function AT(n,e,t){const r=t||"";try{af(n,function(i,u){let c=i;ad(i)&&(c=Fu(i)),e.push(r+u+"="+encodeURIComponent(c))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function ff(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(u){}}function pf(n){this.l=n.$b||null,this.j=n.ib||!1}function gf(n,e){ir.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=Bg,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Ly.prototype.cancel=function(){if(this.i=Nw(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},Ir.prototype.stringify=function(n){return At.JSON.stringify(n,void 0)},Ir.prototype.parse=function(n){return At.JSON.parse(n,void 0)},Yr(pf,Iy),pf.prototype.g=function(){return new gf(this.l,this.j)},pf.prototype.i=function(n){return function(){return n}}({}),Yr(gf,ir);var Bg=0;function Ql(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function mf(n){n.readyState=4,n.l=null,n.j=null,n.A=null,_f(n)}function _f(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(ot=gf.prototype).open=function(n,e){if(this.readyState!=Bg)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,_f(this)},ot.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||At).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},ot.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,mf(this)),this.readyState=Bg},ot.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,_f(this)),this.g&&(this.readyState=3,_f(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==At.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Ql(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},ot.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?mf(this):_f(this),3==this.readyState&&Ql(this)}},ot.Ua=function(n){this.g&&(this.response=this.responseText=n,mf(this))},ot.Ta=function(n){this.g&&(this.response=n,mf(this))},ot.ha=function(){this.g&&mf(this)},ot.setRequestHeader=function(n,e){this.v.append(n,e)},ot.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},ot.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(gf.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var kw=At.JSON.parse;function Ar(n){ir.call(this),this.headers=new Uu,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=jy,this.K=this.L=!1}Yr(Ar,ir);var jy="",Gx=/^https?$/i,Ow=["POST","PUT"];function ca(n){return"content-type"==n.toLowerCase()}function Fw(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,Uw(n),Ji(n)}function Uw(n){n.D||(n.D=!0,ur(n,"complete"),ur(n,"error"))}function xo(n){if(n.h&&void 0!==$l&&(!n.C[1]||4!=da(n)||2!=n.ba()))if(n.v&&4==da(n))Pg(n.Fa,0,n);else if(ur(n,"readystatechange"),4==da(n)){n.h=!1;try{const h=n.ba();e:switch(h){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===h){var i=String(n.H).match(uf)[1]||null;if(!i&&At.self&&At.self.location){var u=At.self.location.protocol;i=u.substr(0,u.length-1)}r=!Gx.test(i?i.toLowerCase():"")}t=r}if(t)ur(n,"complete"),ur(n,"success");else{n.m=6;try{var c=2<da(n)?n.g.statusText:""}catch(_){c=""}n.j=c+" ["+n.ba()+"]",Uw(n)}}finally{Ji(n)}}}function Ji(n,e){if(n.g){Gs(n);const t=n.g,r=n.C[0]?od:null;n.g=null,n.C=null,e||ur(n,"ready");try{t.onreadystatechange=r}catch(i){}}}function Gs(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(At.clearTimeout(n.A),n.A=null)}function da(n){return n.g?n.g.readyState:0}function $y(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case jy:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function Hy(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=function RT(n){let e="";return hy(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):Pn(n,e,t))}function yf(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function Vw(n){this.za=0,this.l=[],this.h=new kg,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=yf("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=yf("baseRetryDelayMs",5e3,n),this.$a=yf("retryDelaySeedMs",1e4,n),this.Ya=yf("forwardChannelMaxRetries",2,n),this.ra=yf("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new Ly(n&&n.concurrentRequestLimit),this.Ca=new Pw,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function vf(n){if(Bw(n),3==n.G){var e=n.V++,t=eu(n.F);Pn(t,"SID",n.J),Pn(t,"RID",e),Pn(t,"TYPE","terminate"),Bu(n,t),(e=new wd(n,n.h,e,void 0)).K=2,e.v=cf(eu(t)),t=!1,At.navigator&&At.navigator.sendBeacon&&(t=At.navigator.sendBeacon(e.v.toString(),"")),!t&&At.Image&&((new Image).src=e.v,t=!0),t||(e.g=Yy(e.l,null),e.g.ea(e.v)),e.F=Date.now(),Kl(e)}Ky(n)}function Vu(n){n.g&&(Ef(n),n.g.cancel(),n.g=null)}function Bw(n){Vu(n),n.u&&(At.clearTimeout(n.u),n.u=null),If(n),n.i.cancel(),n.m&&("number"==typeof n.m&&At.clearTimeout(n.m),n.m=null)}function jg(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&$g(n)}function $g(n){Fy(n.i)||n.m||(n.m=!0,xg(n.Ha,n),n.C=0)}function Wy(n,e){var t;t=e?e.m:n.V++;const r=eu(n.F);Pn(r,"SID",n.J),Pn(r,"RID",t),Pn(r,"AID",n.U),Bu(n,r),n.o&&n.s&&Hy(r,n.o,n.s),t=new wd(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=$w(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),Vy(n.i,t),Ty(t,r,e)}function Bu(n,e){n.j&&af({},function(t,r){Pn(e,r,t)})}function $w(n,e,t){t=Math.min(n.l.length,t);var r=n.j?Zr(n.j.Oa,n.j,n):null;e:{var i=n.l;let u=-1;for(;;){const c=["count="+t];-1==u?0<t?(u=i[0].h,c.push("ofs="+u)):u=0:c.push("ofs="+u);let h=!0;for(let _=0;_<t;_++){let w=i[_].h;const D=i[_].g;if(w-=u,0>w)u=Math.max(0,i[_].h-100),h=!1;else try{AT(D,c,"req"+w+"_")}catch(S){r&&r(D)}}if(h){r=c.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,r}function zy(n){n.g||n.u||(n.Y=1,xg(n.Ga,n),n.A=0)}function Hg(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=rf(Zr(n.Ga,n),qy(n,n.A)),n.A++,0))}function Ef(n){null!=n.B&&(At.clearTimeout(n.B),n.B=null)}function wf(n){n.g=new wd(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=eu(n.oa);Pn(e,"RID","rpc"),Pn(e,"SID",n.J),Pn(e,"CI",n.N?"0":"1"),Pn(e,"AID",n.U),Bu(n,e),Pn(e,"TYPE","xmlhttp"),n.o&&n.s&&Hy(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=cf(eu(e)),t.s=null,t.U=!0,Dy(t,n)}function If(n){null!=n.v&&(At.clearTimeout(n.v),n.v=null)}function Gy(n,e){var t=null;if(n.g==e){If(n),Ef(n),n.g=null;var r=2}else{if(!Uy(n.i,e))return;t=e.D,By(n.i,e),r=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var i=n.C;ur(r=yd(),new wT(r,t,e,i)),$g(n)}else zy(n);else if(3==(i=e.o)||0==i&&0<n.I||!(1==r&&function jw(n,e){return!(ST(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=rf(Zr(n.Ha,n,e),qy(n,n.C)),n.C++,0)))}(n,e)||2==r&&Hg(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),i){case 1:ju(n,5);break;case 4:ju(n,10);break;case 3:ju(n,6);break;default:ju(n,2)}}function qy(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function ju(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var r=Zr(n.jb,n);t||(t=new bd("//www.google.com/images/cleardot.gif"),At.location&&"http"==At.location.protocol||Td(t,"https"),cf(t)),function xT(n,e){const t=new kg;if(At.Image){const r=new Image;r.onload=Ja(ff,t,r,"TestLoadImage: loaded",!0,e),r.onerror=Ja(ff,t,r,"TestLoadImage: error",!1,e),r.onabort=Ja(ff,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=Ja(ff,t,r,"TestLoadImage: timeout",!1,e),At.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Qi(2);n.G=0,n.j&&n.j.va(e),Ky(n),Bw(n)}function Ky(n){n.G=0,n.I=-1,n.j&&((0!=Nw(n.i).length||0!=n.l.length)&&(n.i.i.length=0,zs(n.l),n.l.length=0),n.j.ua())}function Zy(n,e,t){let r=function Dw(n){return n instanceof bd?eu(n):new bd(n,void 0)}(t);if(""!=r.i)e&&Dd(r,e+"."+r.i),lf(r,r.m);else{const i=At.location;r=function My(n,e,t,r){var i=new bd(null,void 0);return n&&Td(i,n),e&&Dd(i,e),t&&lf(i,t),r&&(i.l=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,t)}return n.aa&&hy(n.aa,function(i,u){Pn(r,u,i)}),t=n.sa,(e=n.D)&&t&&Pn(r,e,t),Pn(r,"VER",n.ma),Bu(n,r),r}function Yy(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Ar(t&&n.Ba&&!n.qa?new pf({ib:!0}):n.qa)).L=n.H,e}function Qy(){}function Wg(){if(Zh&&!(10<=Number(zx)))throw Error("Environmental error: no available transport.")}function Is(n,e){ir.call(this),this.g=new Vw(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!ld(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!ld(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Ad(this)}function Hw(n){Cy.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function Ww(){Lg.call(this),this.status=1}function Ad(n){this.g=n}(ot=Ar.prototype).ea=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Ed.g(),this.C=function ql(n){return n.h||(n.h=n.i())}(this.u?this.u:Ed),this.g.onreadystatechange=Zr(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(u){return void Fw(this,u)}n=t||"";const i=new Uu(this.headers);r&&af(r,function(u,c){i.set(c,u)}),r=function lT(n){e:{var e=ca;const t=n.length,r="string"==typeof n?n.split(""):n;for(let i=0;i<t;i++)if(i in r&&e.call(void 0,r[i],i,n)){e=i;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(i.T()),t=At.FormData&&n instanceof At.FormData,!(0<=X0(Ow,e))||r||t||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(u,c){this.g.setRequestHeader(c,u)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Gs(this),0<this.B&&((this.K=function Lw(n){return Zh&&function cw(){return function dT(n){var e=lw;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=dy(String(gy)).split("."),t=dy("9").split("."),r=Math.max(e.length,t.length);for(let c=0;0==n&&c<r;c++){var i=e[c]||"",u=t[c]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],0==i[0].length&&0==u[0].length)break;n=Cg(0==i[1].length?0:parseInt(i[1],10),0==u[1].length?0:parseInt(u[1],10))||Cg(0==i[2].length,0==u[2].length)||Cg(i[2],u[2]),i=i[3],u=u[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Zr(this.pa,this)):this.A=Pg(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(u){Fw(this,u)}},ot.pa=function(){void 0!==$l&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,ur(this,"timeout"),this.abort(8))},ot.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,ur(this,"complete"),ur(this,"abort"),Ji(this))},ot.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Ji(this,!0)),Ar.Z.M.call(this)},ot.Fa=function(){this.s||(this.F||this.v||this.l?xo(this):this.cb())},ot.cb=function(){xo(this)},ot.ba=function(){try{return 2<da(this)?this.g.status:-1}catch(n){return-1}},ot.ga=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},ot.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),kw(e)}},ot.Da=function(){return this.m},ot.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(ot=Vw.prototype).ma=8,ot.G=1,ot.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch(e){}},ot.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const i=new wd(this,this.h,n,void 0);let u=this.s;if(this.P&&(u?(u=iw(u),cT(u,this.P)):u=this.P),null===this.o&&(i.H=u),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var r=this.l[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=$w(this,i,e),Pn(t=eu(this.F),"RID",n),Pn(t,"CVER",22),this.D&&Pn(t,"X-HTTP-Session-Id",this.D),Bu(this,t),this.o&&u&&Hy(t,this.o,u),Vy(this.i,i),this.Ra&&Pn(t,"TYPE","init"),this.ja?(Pn(t,"$req",e),Pn(t,"SID","null"),i.$=!0,Ty(i,t,null)):Ty(i,t,e),this.G=2}}else 3==this.G&&(n?Wy(this,n):0==this.l.length||Fy(this.i)||Wy(this))},ot.Ga=function(){if(this.u=null,wf(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=rf(Zr(this.bb,this),n)}},ot.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Qi(10),Vu(this),wf(this))},ot.ab=function(){null!=this.v&&(this.v=null,Vu(this),Hg(this),Qi(19))},ot.jb=function(n){n?(this.h.info("Successfully pinged google.com"),Qi(2)):(this.h.info("Failed to ping google.com"),Qi(1))},(ot=Qy.prototype).xa=function(){},ot.wa=function(){},ot.va=function(){},ot.ua=function(){},ot.Oa=function(){},Wg.prototype.g=function(n,e){return new Is(n,e)},Yr(Is,ir),Is.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),xg(Zr(n.hb,n,e))),Qi(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=Zy(n,null,n.W),$g(n)},Is.prototype.close=function(){vf(this.g)},Is.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,jg(this.g,e)}else this.v?((e={}).__data__=Fu(n),jg(this.g,e)):jg(this.g,n)},Is.prototype.M=function(){this.g.j=null,delete this.j,vf(this.g),delete this.g,Is.Z.M.call(this)},Yr(Hw,Cy),Yr(Ww,Lg),Yr(Ad,Qy),Ad.prototype.xa=function(){ur(this.g,"a")},Ad.prototype.wa=function(n){ur(this.g,new Hw(n))},Ad.prototype.va=function(n){ur(this.g,new Ww(n))},Ad.prototype.ua=function(){ur(this.g,"b")},Wg.prototype.createWebChannel=Wg.prototype.g,Is.prototype.send=Is.prototype.u,Is.prototype.open=Is.prototype.m,Is.prototype.close=Is.prototype.close,sf.NO_ERROR=0,sf.TIMEOUT=8,sf.HTTP_ERROR=6,IT.COMPLETE="complete",ww.EventType=vd,vd.OPEN="a",vd.CLOSE="b",vd.ERROR="c",vd.MESSAGE="d",ir.prototype.listen=ir.prototype.N,Ar.prototype.listenOnce=Ar.prototype.O,Ar.prototype.getLastError=Ar.prototype.La,Ar.prototype.getLastErrorCode=Ar.prototype.Da,Ar.prototype.getStatus=Ar.prototype.ba,Ar.prototype.getResponseJson=Ar.prototype.Qa,Ar.prototype.getResponseText=Ar.prototype.ga,Ar.prototype.send=Ar.prototype.ea;var MT=aa.createWebChannelTransport=function(){return new Wg},NT=aa.getStatEventTarget=function(){return yd()},Jy=aa.ErrorCode=sf,PT=aa.EventType=IT,kT=aa.Event=_d,zw=aa.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},OT=aa.FetchXmlHttpFactory=pf,zg=aa.WebChannel=ww,LT=aa.XhrIo=Ar;const Gw="@firebase/firestore";class li{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}li.UNAUTHENTICATED=new li(null),li.GOOGLE_CREDENTIALS=new li("google-credentials-uid"),li.FIRST_PARTY=new li("first-party-uid"),li.MOCK_USER=new li("mock-user");let xd="9.8.0";const $u=new Ws.Yd("@firebase/firestore");function Gg(){return $u.logLevel}function Be(n,...e){if($u.logLevel<=Ws.in.DEBUG){const t=e.map(qg);$u.debug(`Firestore (${xd}): ${n}`,...t)}}function Cr(n,...e){if($u.logLevel<=Ws.in.ERROR){const t=e.map(qg);$u.error(`Firestore (${xd}): ${n}`,...t)}}function Rd(n,...e){if($u.logLevel<=Ws.in.WARN){const t=e.map(qg);$u.warn(`Firestore (${xd}): ${n}`,...t)}}function qg(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function lt(n="Unexpected state"){const e=`FIRESTORE (${xd}) INTERNAL ASSERTION FAILED: `+n;throw Cr(e),new Error(e)}function It(n,e){n||lt()}function tt(n,e){return n}const pe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Le extends Q.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Qr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Zw{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Md{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(li.UNAUTHENTICATED))}shutdown(){}}class qx{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Xy{constructor(e){this.t=e,this.currentUser=li.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const u=w=>this.i!==i?(i=this.i,t(w)):Promise.resolve();let c=new Qr;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new Qr,e.enqueueRetryable(()=>u(this.currentUser))};const h=()=>{const w=c;e.enqueueRetryable((0,me.Z)(function*(){yield w.promise,yield u(r.currentUser)}))},_=w=>{Be("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=w,this.auth.addAuthTokenListener(this.o),h()};this.t.onInit(w=>_(w)),setTimeout(()=>{if(!this.auth){const w=this.t.getImmediate({optional:!0});w?_(w):(Be("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new Qr)}},0),h()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Be("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(It("string"==typeof r.accessToken),new Zw(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return It(null===e||"string"==typeof e),new li(e)}}class Kx{constructor(e,t,r){this.type="FirstParty",this.user=li.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const i=e.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)}}class Yw{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new Kx(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(li.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class ev{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Zx{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const r=u=>{null!=u.error&&Be("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const c=u.token!==this.p;return this.p=u.token,Be("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>r(u))};const i=u=>{Be("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.appCheck.addTokenListener(this.o)};this.g.onInit(u=>i(u)),setTimeout(()=>{if(!this.appCheck){const u=this.g.getImmediate({optional:!0});u?i(u):Be("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(It("string"==typeof t.token),this.p=t.token,new ev(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class Cs{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.I(r),this.T=r=>t.writeSequenceNumber(r))}I(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.T&&this.T(e),e}}function FT(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}Cs.A=-1;class Qw{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=FT(40);for(let u=0;u<i.length;++u)r.length<20&&i[u]<t&&(r+=e.charAt(i[u]%e.length))}return r}}function xt(n,e){return n<e?-1:n>e?1:0}function Nd(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function Cf(n){return n+"\0"}class Qn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Le(pe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Le(pe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Le(pe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Le(pe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Qn.fromMillis(Date.now())}static fromDate(e){return Qn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Qn(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?xt(this.nanoseconds,e.nanoseconds):xt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class it{constructor(e){this.timestamp=e}static fromTimestamp(e){return new it(e)}static min(){return new it(new Qn(0,0))}static max(){return new it(new Qn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function UT(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Hu(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Jw(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class bf{constructor(e,t,r){void 0===t?t=0:t>e.length&&lt(),void 0===r?r=e.length-t:r>e.length-t&&lt(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===bf.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof bf?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const u=e.get(i),c=t.get(i);if(u<c)return-1;if(u>c)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class sn extends bf{construct(e,t,r){return new sn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Le(pe.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new sn(t)}static emptyPath(){return new sn([])}}const Xw=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class xr extends bf{construct(e,t,r){return new xr(e,t,r)}static isValidIdentifier(e){return Xw.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),xr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new xr(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const u=()=>{if(0===r.length)throw new Le(pe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;i<e.length;){const h=e[i];if("\\"===h){if(i+1===e.length)throw new Le(pe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const _=e[i+1];if("\\"!==_&&"."!==_&&"`"!==_)throw new Le(pe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=_,i+=2}else"`"===h?(c=!c,i++):"."!==h||c?(r+=h,i++):(u(),i++)}if(u(),c)throw new Le(pe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new xr(t)}static emptyPath(){return new xr([])}}class Jl{constructor(e){this.fields=e,e.sort(xr.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Nd(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class Br{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new Br(t)}static fromUint8Array(e){const t=function(r){let i="";for(let u=0;u<r.length;++u)i+=String.fromCharCode(r[u]);return i}(e);return new Br(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return xt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Br.EMPTY_BYTE_STRING=new Br("");const BT=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function qs(n){if(It(!!n),"string"==typeof n){let e=0;const t=BT.exec(n);if(It(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:lr(n.seconds),nanos:lr(n.nanos)}}function lr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Xl(n){return"string"==typeof n?Br.fromBase64String(n):Br.fromUint8Array(n)}function tv(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function Tf(n){const e=n.mapValue.fields.__previous_value__;return tv(e)?Tf(e):e}function Pd(n){const e=qs(n.mapValue.fields.__local_write_time__.timestampValue);return new Qn(e.seconds,e.nanos)}class eI{constructor(e,t,r,i,u,c,h,_){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=u,this.forceLongPolling=c,this.autoDetectLongPolling=h,this.useFetchStreams=_}}class ha{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new ha("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof ha&&e.projectId===this.projectId&&e.database===this.database}}function Df(n){return null==n}function tu(n){return 0===n&&1/n==-1/0}function kd(n){return"number"==typeof n&&Number.isInteger(n)&&!tu(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class Je{constructor(e){this.path=e}static fromPath(e){return new Je(sn.fromString(e))}static fromName(e){return new Je(sn.fromString(e).popFirst(5))}static empty(){return new Je(sn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===sn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return sn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Je(new sn(e.slice()))}}const Wu={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Kg={nullValue:"NULL_VALUE"};function zu(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?tv(n)?4:nI(n)?9007199254740991:10:lt()}function Ro(n,e){if(n===e)return!0;const t=zu(n);if(t!==zu(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Pd(n).isEqual(Pd(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const u=qs(r.timestampValue),c=qs(i.timestampValue);return u.seconds===c.seconds&&u.nanos===c.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,Xl(n.bytesValue).isEqual(Xl(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return lr(r.geoPointValue.latitude)===lr(i.geoPointValue.latitude)&&lr(r.geoPointValue.longitude)===lr(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return lr(r.integerValue)===lr(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const u=lr(r.doubleValue),c=lr(i.doubleValue);return u===c?tu(u)===tu(c):isNaN(u)&&isNaN(c)}return!1}(n,e);case 9:return Nd(n.arrayValue.values||[],e.arrayValue.values||[],Ro);case 10:return function(r,i){const u=r.mapValue.fields||{},c=i.mapValue.fields||{};if(UT(u)!==UT(c))return!1;for(const h in u)if(u.hasOwnProperty(h)&&(void 0===c[h]||!Ro(u[h],c[h])))return!1;return!0}(n,e);default:return lt()}var i}function Od(n,e){return void 0!==(n.values||[]).find(t=>Ro(t,e))}function Gu(n,e){if(n===e)return 0;const t=zu(n),r=zu(e);if(t!==r)return xt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return xt(n.booleanValue,e.booleanValue);case 2:return function(i,u){const c=lr(i.integerValue||i.doubleValue),h=lr(u.integerValue||u.doubleValue);return c<h?-1:c>h?1:c===h?0:isNaN(c)?isNaN(h)?0:-1:1}(n,e);case 3:return nv(n.timestampValue,e.timestampValue);case 4:return nv(Pd(n),Pd(e));case 5:return xt(n.stringValue,e.stringValue);case 6:return function(i,u){const c=Xl(i),h=Xl(u);return c.compareTo(h)}(n.bytesValue,e.bytesValue);case 7:return function(i,u){const c=i.split("/"),h=u.split("/");for(let _=0;_<c.length&&_<h.length;_++){const w=xt(c[_],h[_]);if(0!==w)return w}return xt(c.length,h.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,u){const c=xt(lr(i.latitude),lr(u.latitude));return 0!==c?c:xt(lr(i.longitude),lr(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,u){const c=i.values||[],h=u.values||[];for(let _=0;_<c.length&&_<h.length;++_){const w=Gu(c[_],h[_]);if(w)return w}return xt(c.length,h.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,u){if(i===Wu.mapValue&&u===Wu.mapValue)return 0;if(i===Wu.mapValue)return 1;if(u===Wu.mapValue)return-1;const c=i.fields||{},h=Object.keys(c),_=u.fields||{},w=Object.keys(_);h.sort(),w.sort();for(let D=0;D<h.length&&D<w.length;++D){const S=xt(h[D],w[D]);if(0!==S)return S;const P=Gu(c[h[D]],_[w[D]]);if(0!==P)return P}return xt(h.length,w.length)}(n.mapValue,e.mapValue);default:throw lt()}}function nv(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return xt(n,e);const t=qs(n),r=qs(e),i=xt(t.seconds,r.seconds);return 0!==i?i:xt(t.nanos,r.nanos)}function Ld(n){return rv(n)}function rv(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=qs(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Xl(n.bytesValue).toBase64():"referenceValue"in n?Je.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",u=!0;for(const c of r.values||[])u?u=!1:i+=",",i+=rv(c);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let u="{",c=!0;for(const h of i)c?c=!1:u+=",",u+=`${h}:${rv(r.fields[h])}`;return u+"}"}(n.mapValue):lt();var e}function Fd(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function tI(n){return!!n&&"integerValue"in n}function Zg(n){return!!n&&"arrayValue"in n}function jT(n){return!!n&&"nullValue"in n}function iv(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function ec(n){return!!n&&"mapValue"in n}function Sf(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Hu(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Sf(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Sf(n.arrayValue.values[t]);return e}return Object.assign({},n)}function nI(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function rI(n){return"nullValue"in n?Kg:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Fd(ha.empty(),Je.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:lt()}function Af(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Fd(ha.empty(),Je.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Wu:lt()}function iI(n,e){const t=Gu(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function sI(n,e){const t=Gu(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class wi{constructor(e){this.value=e}static empty(){return new wi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!ec(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Sf(t)}setAll(e){let t=xr.emptyPath(),r={},i=[];e.forEach((c,h)=>{if(!t.isImmediateParentOf(h)){const _=this.getFieldsMap(t);this.applyChanges(_,r,i),r={},i=[],t=h.popLast()}c?r[h.lastSegment()]=Sf(c):i.push(h.lastSegment())});const u=this.getFieldsMap(t);this.applyChanges(u,r,i)}delete(e){const t=this.field(e.popLast());ec(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ro(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];ec(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Hu(t,(i,u)=>e[i]=u);for(const i of r)delete e[i]}clone(){return new wi(Sf(this.value))}}function oI(n){const e=[];return Hu(n.fields,(t,r)=>{const i=new xr([t]);if(ec(r)){const u=oI(r.mapValue).fields;if(0===u.length)e.push(i);else for(const c of u)e.push(i.child(c))}else e.push(i)}),new Jl(e)}class Wn{constructor(e,t,r,i,u,c){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.data=u,this.documentState=c}static newInvalidDocument(e){return new Wn(e,0,it.min(),it.min(),wi.empty(),0)}static newFoundDocument(e,t,r){return new Wn(e,1,t,it.min(),r,0)}static newNoDocument(e,t){return new Wn(e,2,t,it.min(),wi.empty(),0)}static newUnknownDocument(e,t){return new Wn(e,3,t,it.min(),wi.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=wi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=wi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Wn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Wn(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class xf{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function sv(n){return n.fields.find(e=>2===e.kind)}function tc(n){return n.fields.filter(e=>2!==e.kind)}xf.UNKNOWN_ID=-1;class nu{constructor(e,t){this.fieldPath=e,this.kind=t}}class Rf{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Rf(0,Ks.min())}}function ov(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=it.fromTimestamp(1e9===r?new Qn(t+1,0):new Qn(t,r));return new Ks(i,Je.empty(),e)}function $T(n){return new Ks(n.readTime,n.key,-1)}class Ks{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Ks(it.min(),Je.empty(),-1)}static max(){return new Ks(it.max(),Je.empty(),-1)}}function aI(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Je.comparator(n.documentKey,e.documentKey),0!==t?t:xt(n.largestBatchId,e.largestBatchId))}class cr{constructor(e,t){this.comparator=e,this.root=t||jr.EMPTY}insert(e,t){return new cr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,jr.BLACK,null,null))}remove(e){return new cr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,jr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Yg(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Yg(this.root,e,this.comparator,!1)}getReverseIterator(){return new Yg(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Yg(this.root,e,this.comparator,!0)}}class Yg{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,t&&i&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(0===u){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class jr{constructor(e,t,r,i,u){this.key=e,this.value=t,this.color=null!=r?r:jr.RED,this.left=null!=i?i:jr.EMPTY,this.right=null!=u?u:jr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,u){return new jr(null!=e?e:this.key,null!=t?t:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=u?u:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const u=r(e,i.key);return i=u<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===u?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return jr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return jr.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,jr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,jr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw lt();const e=this.left.check();if(e!==this.right.check())throw lt();return e+(this.isRed()?0:1)}}jr.EMPTY=null,jr.RED=!0,jr.BLACK=!1,jr.EMPTY=new class{constructor(){this.size=0}get key(){throw lt()}get value(){throw lt()}get color(){throw lt()}get left(){throw lt()}get right(){throw lt()}copy(n,e,t,r,i){return this}insert(n,e,t){return new jr(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class kn{constructor(e){this.comparator=e,this.data=new cr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new av(this.data.getIterator())}getIteratorFrom(e){return new av(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof kn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,u=r.getNext().key;if(0!==this.comparator(i,u))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new kn(this.comparator);return t.data=e,t}}class av{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function nc(n){return n.hasNext()?n.getNext():void 0}class HT{constructor(e,t=null,r=[],i=[],u=null,c=null,h=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=u,this.startAt=c,this.endAt=h,this.P=null}}function uI(n,e=null,t=[],r=[],i=null,u=null,c=null){return new HT(n,e,t,r,i,u,c)}function rc(n){const e=tt(n);if(null===e.P){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(i=r).field.canonicalString()+i.op.toString()+Ld(i.value);var i}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),Df(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Ld(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Ld(r)).join(",")),e.P=t}return e.P}function Mf(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let i=0;i<n.orderBy.length;i++)if(!ZT(n.orderBy[i],e.orderBy[i]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let i=0;i<n.filters.length;i++)if((t=n.filters[i]).op!==(r=e.filters[i]).op||!t.field.isEqual(r.field)||!Ro(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Jg(n.startAt,e.startAt)&&Jg(n.endAt,e.endAt)}function Nf(n){return Je.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function Qg(n,e){return n.filters.filter(t=>t instanceof ci&&t.field.isEqual(e))}function lI(n,e,t){let r=Kg,i=!0;for(const u of Qg(n,e)){let c=Kg,h=!0;switch(u.op){case"<":case"<=":c=rI(u.value);break;case"==":case"in":case">=":c=u.value;break;case">":c=u.value,h=!1;break;case"!=":case"not-in":c=Kg}iI({value:r,inclusive:i},{value:c,inclusive:h})<0&&(r=c,i=h)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const c=t.position[u];iI({value:r,inclusive:i},{value:c,inclusive:t.inclusive})<0&&(r=c,i=t.inclusive);break}return{value:r,inclusive:i}}function cI(n,e,t){let r=Wu,i=!0;for(const u of Qg(n,e)){let c=Wu,h=!0;switch(u.op){case">=":case">":c=Af(u.value),h=!1;break;case"==":case"in":case"<=":c=u.value;break;case"<":c=u.value,h=!1;break;case"!=":case"not-in":c=Wu}sI({value:r,inclusive:i},{value:c,inclusive:h})>0&&(r=c,i=h)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const c=t.position[u];sI({value:r,inclusive:i},{value:c,inclusive:t.inclusive})>0&&(r=c,i=t.inclusive);break}return{value:r,inclusive:i}}class ci extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.V(e,t,r):new WT(e,t,r):"array-contains"===t?new hI(e,r):"in"===t?new fI(e,r):"not-in"===t?new qT(e,r):"array-contains-any"===t?new KT(e,r):new ci(e,t,r)}static V(e,t,r){return"in"===t?new zT(e,r):new GT(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(Gu(t,this.value)):null!==t&&zu(this.value)===zu(t)&&this.v(Gu(t,this.value))}v(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return lt()}}S(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class WT extends ci{constructor(e,t,r){super(e,t,r),this.key=Je.fromName(r.referenceValue)}matches(e){const t=Je.comparator(e.key,this.key);return this.v(t)}}class zT extends ci{constructor(e,t){super(e,"in",t),this.keys=dI(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class GT extends ci{constructor(e,t){super(e,"not-in",t),this.keys=dI(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function dI(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Je.fromName(r.referenceValue))}class hI extends ci{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Zg(t)&&Od(t.arrayValue,this.value)}}class fI extends ci{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Od(this.value.arrayValue,t)}}class qT extends ci{constructor(e,t){super(e,"not-in",t)}matches(e){if(Od(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Od(this.value.arrayValue,t)}}class KT extends ci{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Zg(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Od(this.value.arrayValue,r))}}class ru{constructor(e,t){this.position=e,this.inclusive=t}}class Ud{constructor(e,t="asc"){this.field=e,this.dir=t}}function ZT(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function pI(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const u=e[i],c=n.position[i];if(r=u.field.isKeyField()?Je.comparator(Je.fromName(c.referenceValue),t.key):Gu(c,t.data.field(u.field)),"desc"===u.dir&&(r*=-1),0!==r)break}return r}function Jg(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Ro(n.position[t],e.position[t]))return!1;return!0}class Mo{constructor(e,t=null,r=[],i=[],u=null,c="F",h=null,_=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=u,this.limitType=c,this.startAt=h,this.endAt=_,this.D=null,this.C=null}}function lv(n,e,t,r,i,u,c,h){return new Mo(n,e,t,r,i,u,c,h)}function qu(n){return new Mo(n)}function cv(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function Pf(n){for(const e of n.filters)if(e.S())return e.field;return null}function dv(n){return null!==n.collectionGroup}function Vd(n){const e=tt(n);if(null===e.D){e.D=[];const t=Pf(e),r=cv(e);if(null!==t&&null===r)t.isKeyField()||e.D.push(new Ud(t)),e.D.push(new Ud(xr.keyField(),"asc"));else{let i=!1;for(const u of e.explicitOrderBy)e.D.push(u),u.field.isKeyField()&&(i=!0);if(!i){const u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.D.push(new Ud(xr.keyField(),u))}}}return e.D}function Zs(n){const e=tt(n);if(!e.C)if("F"===e.limitType)e.C=uI(e.path,e.collectionGroup,Vd(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const u of Vd(e))t.push(new Ud(u.field,"desc"===u.dir?"asc":"desc"));const r=e.endAt?new ru(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new ru(e.startAt.position,e.startAt.inclusive):null;e.C=uI(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e.C}function hv(n,e,t){return new Mo(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function kf(n,e){return Mf(Zs(n),Zs(e))&&n.limitType===e.limitType}function fv(n){return`${rc(Zs(n))}|lt:${n.limitType}`}function gI(n){return`Query(target=${function uv(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${Ld(r.value)}`;var r}).join(", ")}]`),Df(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>Ld(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>Ld(t)).join(",")),`Target(${e})`}(Zs(n))}; limitType=${n.limitType})`}function pv(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):Je.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of t.explicitOrderBy)if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,u,c){const h=pI(i,u,c);return i.inclusive?h<=0:h<0}(t.startAt,Vd(t),r)||t.endAt&&!function(i,u,c){const h=pI(i,u,c);return i.inclusive?h>=0:h>0}(t.endAt,Vd(t),r)));var t,r}function Of(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function mI(n){return(e,t)=>{let r=!1;for(const i of Vd(n)){const u=Bd(i,e,t);if(0!==u)return u;r=r||i.field.isKeyField()}return 0}}function Bd(n,e,t){const r=n.field.isKeyField()?Je.comparator(e.key,t.key):function(i,u,c){const h=u.data.field(i),_=c.data.field(i);return null!==h&&null!==_?Gu(h,_):lt()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return lt()}}function jd(n,e){if(n.N){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:tu(e)?"-0":e}}function _I(n){return{integerValue:""+n}}function QT(n,e){return kd(e)?_I(e):jd(n,e)}class Lf{constructor(){this._=void 0}}function JT(n,e,t){return n instanceof $d?function(r,i){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(u.fields.__previous_value__=i),{mapValue:u}}(t,e):n instanceof Ku?gv(n,e):n instanceof iu?Ff(n,e):function(r,i){const u=yI(r,i),c=vI(u)+vI(r.k);return tI(u)&&tI(r.k)?_I(c):jd(r.M,c)}(n,e)}function XT(n,e,t){return n instanceof Ku?gv(n,e):n instanceof iu?Ff(n,e):t}function yI(n,e){return n instanceof fa?tI(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class $d extends Lf{}class Ku extends Lf{constructor(e){super(),this.elements=e}}function gv(n,e){const t=mv(e);for(const r of n.elements)t.some(i=>Ro(i,r))||t.push(r);return{arrayValue:{values:t}}}class iu extends Lf{constructor(e){super(),this.elements=e}}function Ff(n,e){let t=mv(e);for(const r of n.elements)t=t.filter(i=>!Ro(i,r));return{arrayValue:{values:t}}}class fa extends Lf{constructor(e,t){super(),this.M=e,this.k=t}}function vI(n){return lr(n.integerValue||n.doubleValue)}function mv(n){return Zg(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Hd{constructor(e,t){this.field=e,this.transform=t}}class tD{constructor(e,t){this.version=e,this.transformResults=t}}class dr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new dr}static exists(e){return new dr(void 0,e)}static updateTime(e){return new dr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Xg(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class _v{}function nD(n,e,t){n instanceof em?function(r,i,u){const c=r.value.clone(),h=rD(r.fieldTransforms,i,u.transformResults);c.setAll(h),i.convertToFoundDocument(u.version,c).setHasCommittedMutations()}(n,e,t):n instanceof Zu?function(r,i,u){if(!Xg(r.precondition,i))return void i.convertToUnknownDocument(u.version);const c=rD(r.fieldTransforms,i,u.transformResults),h=i.data;h.setAll(EI(r)),h.setAll(c),i.convertToFoundDocument(u.version,h).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function yv(n,e,t){var i;n instanceof em?function(r,i,u){if(!Xg(r.precondition,i))return;const c=r.value.clone(),h=Ev(r.fieldTransforms,u,i);c.setAll(h),i.convertToFoundDocument(ic(i),c).setHasLocalMutations()}(n,e,t):n instanceof Zu?function(r,i,u){if(!Xg(r.precondition,i))return;const c=Ev(r.fieldTransforms,u,i),h=i.data;h.setAll(EI(r)),h.setAll(c),i.convertToFoundDocument(ic(i),h).setHasLocalMutations()}(n,e,t):Xg(n.precondition,i=e)&&i.convertToNoDocument(it.min())}function Wd(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),u=yI(r.transform,i||null);null!=u&&(null==t&&(t=wi.empty()),t.set(r.field,u))}return t||null}function vv(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&Nd(t,r,(i,u)=>function eD(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Ku&&r instanceof Ku||t instanceof iu&&r instanceof iu?Nd(t.elements,r.elements,Ro):t instanceof fa&&r instanceof fa?Ro(t.k,r.k):t instanceof $d&&r instanceof $d);var t,r}(i,u))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}function ic(n){return n.isFoundDocument()?n.version:it.min()}class em extends _v{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}}class Zu extends _v{constructor(e,t,r,i,u=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=u,this.type=1}}function EI(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function rD(n,e,t){const r=new Map;It(n.length===t.length);for(let i=0;i<t.length;i++){const u=n[i],c=u.transform,h=e.data.field(u.field);r.set(u.field,XT(c,h,t[i]))}return r}function Ev(n,e,t){const r=new Map;for(const i of n){const u=i.transform,c=t.data.field(i.field);r.set(i.field,JT(u,c,e))}return r}class tm extends _v{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class nm extends _v{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}class wv{constructor(e){this.count=e}}var Rr,on;function wI(n){switch(n){default:return lt();case pe.CANCELLED:case pe.UNKNOWN:case pe.DEADLINE_EXCEEDED:case pe.RESOURCE_EXHAUSTED:case pe.INTERNAL:case pe.UNAVAILABLE:case pe.UNAUTHENTICATED:return!1;case pe.INVALID_ARGUMENT:case pe.NOT_FOUND:case pe.ALREADY_EXISTS:case pe.PERMISSION_DENIED:case pe.FAILED_PRECONDITION:case pe.ABORTED:case pe.OUT_OF_RANGE:case pe.UNIMPLEMENTED:case pe.DATA_LOSS:return!0}}function II(n){if(void 0===n)return Cr("GRPC error has no .code"),pe.UNKNOWN;switch(n){case Rr.OK:return pe.OK;case Rr.CANCELLED:return pe.CANCELLED;case Rr.UNKNOWN:return pe.UNKNOWN;case Rr.DEADLINE_EXCEEDED:return pe.DEADLINE_EXCEEDED;case Rr.RESOURCE_EXHAUSTED:return pe.RESOURCE_EXHAUSTED;case Rr.INTERNAL:return pe.INTERNAL;case Rr.UNAVAILABLE:return pe.UNAVAILABLE;case Rr.UNAUTHENTICATED:return pe.UNAUTHENTICATED;case Rr.INVALID_ARGUMENT:return pe.INVALID_ARGUMENT;case Rr.NOT_FOUND:return pe.NOT_FOUND;case Rr.ALREADY_EXISTS:return pe.ALREADY_EXISTS;case Rr.PERMISSION_DENIED:return pe.PERMISSION_DENIED;case Rr.FAILED_PRECONDITION:return pe.FAILED_PRECONDITION;case Rr.ABORTED:return pe.ABORTED;case Rr.OUT_OF_RANGE:return pe.OUT_OF_RANGE;case Rr.UNIMPLEMENTED:return pe.UNIMPLEMENTED;case Rr.DATA_LOSS:return pe.DATA_LOSS;default:return lt()}}(on=Rr||(Rr={}))[on.OK=0]="OK",on[on.CANCELLED=1]="CANCELLED",on[on.UNKNOWN=2]="UNKNOWN",on[on.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",on[on.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",on[on.NOT_FOUND=5]="NOT_FOUND",on[on.ALREADY_EXISTS=6]="ALREADY_EXISTS",on[on.PERMISSION_DENIED=7]="PERMISSION_DENIED",on[on.UNAUTHENTICATED=16]="UNAUTHENTICATED",on[on.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",on[on.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",on[on.ABORTED=10]="ABORTED",on[on.OUT_OF_RANGE=11]="OUT_OF_RANGE",on[on.UNIMPLEMENTED=12]="UNIMPLEMENTED",on[on.INTERNAL=13]="INTERNAL",on[on.UNAVAILABLE=14]="UNAVAILABLE",on[on.DATA_LOSS=15]="DATA_LOSS";class Yu{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,u]of r)if(this.equalsFn(i,e))return u}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let u=0;u<i.length;u++)if(this.equalsFn(i[u][0],e))return void(i[u]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Hu(this.inner,(t,r)=>{for(const[i,u]of r)e(i,u)})}isEmpty(){return Jw(this.inner)}size(){return this.innerSize}}const iD=new cr(Je.comparator);function Ys(){return iD}const sD=new cr(Je.comparator);function Iv(...n){let e=sD;for(const t of n)e=e.insert(t.key,t);return e}function Uf(){return new Yu(n=>n.toString(),(n,e)=>n.isEqual(e))}const Vf=new cr(Je.comparator),CI=new kn(Je.comparator);function mn(...n){let e=CI;for(const t of n)e=e.add(t);return e}const bI=new kn(xt);function Bf(){return bI}class zd{constructor(e,t,r,i,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,jf.createSynthesizedTargetChangeForCurrentChange(e,t)),new zd(it.min(),r,Bf(),Ys(),mn())}}class jf{constructor(e,t,r,i,u){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t){return new jf(Br.EMPTY_BYTE_STRING,t,mn(),mn(),mn())}}class rm{constructor(e,t,r,i){this.O=e,this.removedTargetIds=t,this.key=r,this.F=i}}class TI{constructor(e,t){this.targetId=e,this.$=t}}class DI{constructor(e,t,r=Br.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class SI{constructor(){this.B=0,this.L=Gd(),this.U=Br.EMPTY_BYTE_STRING,this.q=!1,this.K=!0}get current(){return this.q}get resumeToken(){return this.U}get G(){return 0!==this.B}get j(){return this.K}W(e){e.approximateByteSize()>0&&(this.K=!0,this.U=e)}H(){let e=mn(),t=mn(),r=mn();return this.L.forEach((i,u)=>{switch(u){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:lt()}}),new jf(this.U,this.q,e,t,r)}J(){this.K=!1,this.L=Gd()}Y(e,t){this.K=!0,this.L=this.L.insert(e,t)}X(e){this.K=!0,this.L=this.L.remove(e)}Z(){this.B+=1}tt(){this.B-=1}et(){this.K=!0,this.q=!0}}class oD{constructor(e){this.nt=e,this.st=new Map,this.it=Ys(),this.rt=AI(),this.ot=new kn(xt)}ut(e){for(const t of e.O)e.F&&e.F.isFoundDocument()?this.at(t,e.F):this.ct(t,e.key,e.F);for(const t of e.removedTargetIds)this.ct(t,e.key,e.F)}ht(e){this.forEachTarget(e,t=>{const r=this.lt(t);switch(e.state){case 0:this.ft(t)&&r.W(e.resumeToken);break;case 1:r.tt(),r.G||r.J(),r.W(e.resumeToken);break;case 2:r.tt(),r.G||this.removeTarget(t);break;case 3:this.ft(t)&&(r.et(),r.W(e.resumeToken));break;case 4:this.ft(t)&&(this.dt(t),r.W(e.resumeToken));break;default:lt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach((r,i)=>{this.ft(i)&&t(i)})}_t(e){const t=e.targetId,r=e.$.count,i=this.wt(t);if(i){const u=i.target;if(Nf(u))if(0===r){const c=new Je(u.path);this.ct(t,c,Wn.newNoDocument(c,it.min()))}else It(1===r);else this.gt(t)!==r&&(this.dt(t),this.ot=this.ot.add(t))}}yt(e){const t=new Map;this.st.forEach((u,c)=>{const h=this.wt(c);if(h){if(u.current&&Nf(h.target)){const _=new Je(h.target.path);null!==this.it.get(_)||this.It(c,_)||this.ct(c,_,Wn.newNoDocument(_,e))}u.j&&(t.set(c,u.H()),u.J())}});let r=mn();this.rt.forEach((u,c)=>{let h=!0;c.forEachWhile(_=>{const w=this.wt(_);return!w||2===w.purpose||(h=!1,!1)}),h&&(r=r.add(u))}),this.it.forEach((u,c)=>c.setReadTime(e));const i=new zd(e,t,this.ot,this.it,r);return this.it=Ys(),this.rt=AI(),this.ot=new kn(xt),i}at(e,t){if(!this.ft(e))return;const r=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,r),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Tt(t.key).add(e))}ct(e,t,r){if(!this.ft(e))return;const i=this.lt(e);this.It(e,t)?i.Y(t,1):i.X(t),this.rt=this.rt.insert(t,this.Tt(t).delete(e)),r&&(this.it=this.it.insert(t,r))}removeTarget(e){this.st.delete(e)}gt(e){const t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Z(e){this.lt(e).Z()}lt(e){let t=this.st.get(e);return t||(t=new SI,this.st.set(e,t)),t}Tt(e){let t=this.rt.get(e);return t||(t=new kn(xt),this.rt=this.rt.insert(e,t)),t}ft(e){const t=null!==this.wt(e);return t||Be("WatchChangeAggregator","Detected inactive target",e),t}wt(e){const t=this.st.get(e);return t&&t.G?null:this.nt.Et(e)}dt(e){this.st.set(e,new SI),this.nt.getRemoteKeysForTarget(e).forEach(t=>{this.ct(e,t,null)})}It(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}function AI(){return new cr(Je.comparator)}function Gd(){return new cr(Je.comparator)}const aD={asc:"ASCENDING",desc:"DESCENDING"},Cv={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class pa{constructor(e,t){this.databaseId=e,this.N=t}}function $f(n,e){return n.N?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function im(n,e){return n.N?e.toBase64():e.toUint8Array()}function Hf(n,e){return $f(n,e.toTimestamp())}function Jr(n){return It(!!n),it.fromTimestamp(function(e){const t=qs(e);return new Qn(t.seconds,t.nanos)}(n))}function bv(n,e){return(t=n,new sn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function xI(n){const e=sn.fromString(n);return It(Rv(e)),e}function Qu(n,e){return bv(n.databaseId,e.path)}function bs(n,e){const t=xI(e);if(t.get(1)!==n.databaseId.projectId)throw new Le(pe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Le(pe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Je(Dv(t))}function Tv(n,e){return bv(n.databaseId,e)}function RI(n){const e=xI(n);return 4===e.length?sn.emptyPath():Dv(e)}function qd(n){return new sn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Dv(n){return It(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function sm(n,e,t){return{name:Qu(n,e),fields:t.value.mapValue.fields}}function Sv(n,e,t){const r=bs(n,e.name),i=Jr(e.updateTime),u=new wi({mapValue:{fields:e.fields}}),c=Wn.newFoundDocument(r,i,u);return t&&c.setHasCommittedMutations(),t?c.setHasCommittedMutations():c}function om(n,e){let t;if(e instanceof em)t={update:sm(n,e.key,e.value)};else if(e instanceof tm)t={delete:Qu(n,e.key)};else if(e instanceof Zu)t={update:sm(n,e.key,e.data),updateMask:PI(e.fieldMask)};else{if(!(e instanceof nm))return lt();t={verify:Qu(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,u){const c=u.transform;if(c instanceof $d)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Ku)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof iu)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof fa)return{fieldPath:u.field.canonicalString(),increment:c.k};throw lt()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:Hf(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:lt()),t;var i}function Wf(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?dr.updateTime(Jr(i.updateTime)):void 0!==i.exists?dr.exists(i.exists):dr.none():dr.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(u,c){let h=null;"setToServerValue"in c?(It("REQUEST_TIME"===c.setToServerValue),h=new $d):"appendMissingElements"in c?h=new Ku(c.appendMissingElements.values||[]):"removeAllFromArray"in c?h=new iu(c.removeAllFromArray.values||[]):"increment"in c?h=new fa(u,c.increment):lt();const _=xr.fromServerFormat(c.fieldPath);return new Hd(_,h)}(n,i)):[];var i;if(e.update){const i=bs(n,e.update.name),u=new wi({mapValue:{fields:e.update.fields}});if(e.updateMask){const c=new Jl((e.updateMask.fieldPaths||[]).map(w=>xr.fromServerFormat(w)));return new Zu(i,u,c,t,r)}return new em(i,u,t,r)}if(e.delete){const i=bs(n,e.delete);return new tm(i,t)}if(e.verify){const i=bs(n,e.verify);return new nm(i,t)}return lt()}function xv(n,e){return{documents:[Tv(n,e.path)]}}function am(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=Tv(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=Tv(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(_){if(0===_.length)return;const w=_.map(D=>function(S){if("=="===S.op){if(iv(S.value))return{unaryFilter:{field:sc(S.field),op:"IS_NAN"}};if(jT(S.value))return{unaryFilter:{field:sc(S.field),op:"IS_NULL"}}}else if("!="===S.op){if(iv(S.value))return{unaryFilter:{field:sc(S.field),op:"IS_NOT_NAN"}};if(jT(S.value))return{unaryFilter:{field:sc(S.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:sc(S.field),op:hD(S.op),value:S.value}}}(D));return 1===w.length?w[0]:{compositeFilter:{op:"AND",filters:w}}}(e.filters);i&&(t.structuredQuery.where=i);const u=function(_){if(0!==_.length)return _.map(w=>{return{field:sc((D=w).field),direction:dD(D.dir)};var D})}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const c=(w=e.limit,n.N||Df(w)?w:{value:w});var w,h,_;return null!==c&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt={before:(h=e.startAt).inclusive,values:h.position}),e.endAt&&(t.structuredQuery.endAt={before:!(_=e.endAt).inclusive,values:_.position}),t}function um(n){let e=RI(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){It(1===r);const D=t.from[0];D.allDescendants?i=D.collectionId:e=e.child(D.collectionId)}let u=[];t.where&&(u=MI(t.where));let c=[];t.orderBy&&(c=t.orderBy.map(D=>{return new Ud(Ju((S=D).field),function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(S.direction));var S}));let h=null;t.limit&&(h=function(D){let S;return S="object"==typeof D?D.value:D,Df(S)?null:S}(t.limit));let _=null;var D;t.startAt&&(_=new ru((D=t.startAt).values||[],!!D.before));let w=null;return t.endAt&&(w=function(D){return new ru(D.values||[],!D.before)}(t.endAt)),lv(e,i,c,u,h,"F",_,w)}function MI(n){return n?void 0!==n.unaryFilter?[fD(n)]:void 0!==n.fieldFilter?[NI(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>MI(e)).reduce((e,t)=>e.concat(t)):lt():[]}function dD(n){return aD[n]}function hD(n){return Cv[n]}function sc(n){return{fieldPath:n.canonicalString()}}function Ju(n){return xr.fromServerFormat(n.fieldPath)}function NI(n){return ci.create(Ju(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return lt()}}(n.fieldFilter.op),n.fieldFilter.value)}function fD(n){switch(n.unaryFilter.op){case"IS_NAN":const e=Ju(n.unaryFilter.field);return ci.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=Ju(n.unaryFilter.field);return ci.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Ju(n.unaryFilter.field);return ci.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Ju(n.unaryFilter.field);return ci.create(i,"!=",{nullValue:"NULL_VALUE"});default:return lt()}}function PI(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Rv(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function Li(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Mv(e)),e=kI(n.get(t),e);return Mv(e)}function kI(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const u=n.charAt(i);switch(u){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=u}}return t}function Mv(n){return n+"\x01\x01"}function ga(n){const e=n.length;if(It(e>=2),2===e)return It("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),sn.emptyPath();const t=e-2,r=[];let i="";for(let u=0;u<e;){const c=n.indexOf("\x01",u);switch((c<0||c>t)&&lt(),n.charAt(c+1)){case"\x01":const h=n.substring(u,c);let _;0===i.length?_=h:(i+=h,_=i,i=""),r.push(_);break;case"\x10":i+=n.substring(u,c),i+="\0";break;case"\x11":i+=n.substring(u,c+1);break;default:lt()}u=c+2}return new sn(r)}const Nv=["userId","batchId"];function zf(n,e){return[n,Li(e)]}function Ii(n,e,t){return[n,Li(e),t]}const Kd={},pD=["prefixPath","collectionGroup","readTime","documentId"],gD=["prefixPath","collectionGroup","documentId"],Yx=["collectionGroup","readTime","prefixPath","documentId"],Gf=["canonicalId","targetId"],mD=["targetId","path"],Pv=["path","targetId"],_D=["collectionId","parent"],OI=["indexId","uid"],yD=["uid","sequenceNumber"],vD=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],kv=["indexId","uid","orderedDocumentKey"],LI=["userId","collectionPath","documentId"],FI=["userId","collectionPath","largestBatchId"],lm=["userId","collectionGroup","largestBatchId"],cm=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Qx=[...cm,"documentOverlays"],Ov=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],ED=[...Ov,"indexConfiguration","indexState","indexEntries"],Lv="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class qf{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class ge{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&lt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ge((r,i)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,i)},this.catchCallback=u=>{this.wrapFailure(t,u).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ge?t:ge.resolve(t)}catch(t){return ge.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ge.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ge.reject(t)}static resolve(e){return new ge((t,r)=>{t(e)})}static reject(e){return new ge((t,r)=>{r(e)})}static waitFor(e){return new ge((t,r)=>{let i=0,u=0,c=!1;e.forEach(h=>{++i,h.next(()=>{++u,c&&u===i&&t()},_=>r(_))}),c=!0,u===i&&t()})}static or(e){let t=ge.resolve(!1);for(const r of e)t=t.next(i=>i?ge.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,u)=>{r.push(t.call(this,i,u))}),this.waitFor(r)}}class dm{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.At=new Qr,this.transaction.oncomplete=()=>{this.At.resolve()},this.transaction.onabort=()=>{t.error?this.At.reject(new hm(e,t.error)):this.At.resolve()},this.transaction.onerror=r=>{const i=Vv(r.target.error);this.At.reject(new hm(e,i))}}static open(e,t,r,i){try{return new dm(t,e.transaction(i,r))}catch(u){throw new hm(t,u)}}get Rt(){return this.At.promise}abort(e){e&&this.At.reject(e),this.aborted||(Be("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}bt(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new wD(t)}}class Ts{constructor(e,t,r){this.name=e,this.version=t,this.Pt=r,12.2===Ts.Vt((0,Q.z$)())&&Cr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Be("SimpleDb","Removing database:",e),Xu(window.indexedDB.deleteDatabase(e)).toPromise()}static vt(){if(!(0,Q.hl)())return!1;if(Ts.St())return!0;const e=(0,Q.z$)(),t=Ts.Vt(e),r=0<t&&t<10,i=Ts.Dt(e),u=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||u)}static St(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.Ct)}static xt(e,t){return e.store(t)}static Vt(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static Dt(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}Nt(e){var t=this;return(0,me.Z)(function*(){return t.db||(Be("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const u=indexedDB.open(t.name,t.version);u.onsuccess=c=>{r(c.target.result)},u.onblocked=()=>{i(new hm(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},u.onerror=c=>{const h=c.target.error;i("VersionError"===h.name?new Le(pe.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===h.name?new Le(pe.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+h):new hm(e,h))},u.onupgradeneeded=c=>{Be("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',c.oldVersion),t.Pt.kt(c.target.result,u.transaction,c.oldVersion,t.version).next(()=>{Be("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.Mt&&(t.db.onversionchange=r=>t.Mt(r)),t.db})()}Ot(e){this.Mt=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var u=this;return(0,me.Z)(function*(){const c="readonly"===t;let h=0;for(;;){++h;try{u.db=yield u.Nt(e);const _=dm.open(u.db,e,c?"readonly":"readwrite",r),w=i(_).next(D=>(_.bt(),D)).catch(D=>(_.abort(D),ge.reject(D))).toPromise();return w.catch(()=>{}),yield _.Rt,w}catch(_){const w="FirebaseError"!==_.name&&h<3;if(Be("SimpleDb","Transaction failed with error:",_.message,"Retrying:",w),u.close(),!w)return Promise.reject(_)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class Fv{constructor(e){this.Ft=e,this.$t=!1,this.Bt=null}get isDone(){return this.$t}get Lt(){return this.Bt}set cursor(e){this.Ft=e}done(){this.$t=!0}Ut(e){this.Bt=e}delete(){return Xu(this.Ft.delete())}}class hm extends Le{constructor(e,t){super(pe.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function oc(n){return"IndexedDbTransactionError"===n.name}class wD{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Be("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Be("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Xu(r)}add(e){return Be("SimpleDb","ADD",this.store.name,e,e),Xu(this.store.add(e))}get(e){return Xu(this.store.get(e)).next(t=>(void 0===t&&(t=null),Be("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Be("SimpleDb","DELETE",this.store.name,e),Xu(this.store.delete(e))}count(){return Be("SimpleDb","COUNT",this.store.name),Xu(this.store.count())}qt(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),u=[];return this.Kt(i,(c,h)=>{u.push(h)}).next(()=>u)}{const i=this.store.getAll(r.range);return new ge((u,c)=>{i.onerror=h=>{c(h.target.error)},i.onsuccess=h=>{u(h.target.result)}})}}Gt(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new ge((i,u)=>{r.onerror=c=>{u(c.target.error)},r.onsuccess=c=>{i(c.target.result)}})}Qt(e,t){Be("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.jt=!1;const i=this.cursor(r);return this.Kt(i,(u,c,h)=>h.delete())}Wt(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.Kt(i,t)}zt(e){const t=this.cursor({});return new ge((r,i)=>{t.onerror=u=>{const c=Vv(u.target.error);i(c)},t.onsuccess=u=>{const c=u.target.result;c?e(c.primaryKey,c.value).next(h=>{h?c.continue():r()}):r()}})}Kt(e,t){const r=[];return new ge((i,u)=>{e.onerror=c=>{u(c.target.error)},e.onsuccess=c=>{const h=c.target.result;if(!h)return void i();const _=new Fv(h),w=t(h.primaryKey,h.value,_);if(w instanceof ge){const D=w.catch(S=>(_.done(),ge.reject(S)));r.push(D)}_.isDone?i():null===_.Lt?h.continue():h.continue(_.Lt)}}).next(()=>ge.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.jt?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Xu(n){return new ge((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=Vv(r.target.error);t(i)}})}let Uv=!1;function Vv(n){const e=Ts.Vt((0,Q.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Le("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Uv||(Uv=!0,setTimeout(()=>{throw r},0)),r}}return n}class Bv extends qf{constructor(e,t){super(),this.Ht=e,this.currentSequenceNumber=t}}function $r(n,e){const t=tt(n);return Ts.xt(t.Ht,e)}class jv{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const u=this.mutations[i];u.key.isEqual(e.key)&&nD(u,e,r[i])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&yv(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&yv(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(t=>{const r=e.get(t.key),i=r;this.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(it.min())})}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),mn())}isEqual(e){return this.batchId===e.batchId&&Nd(this.mutations,e.mutations,(t,r)=>vv(t,r))&&Nd(this.baseMutations,e.baseMutations,(t,r)=>vv(t,r))}}class $v{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){It(e.mutations.length===r.length);let i=Vf;const u=e.mutations;for(let c=0;c<u.length;c++)i=i.insert(u[c].key,r[c].version);return new $v(e,t,r,i)}}class fm{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class el{constructor(e,t,r,i,u=it.min(),c=it.min(),h=Br.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=h}withSequenceNumber(e){return new el(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new el(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new el(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class Hv{constructor(e){this.Jt=e}}function Wv(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Kf(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:Qu(i=n.Jt,(u=e).key),fields:u.data.value.mapValue.fields,updateTime:$f(i,u.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:ac(e.version)};else{if(!e.isUnknownDocument())return lt();r.unknownDocument={path:t.path.toArray(),version:ac(e.version)}}var i,u;return r}function Kf(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function ac(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function uc(n){const e=new Qn(n.seconds,n.nanoseconds);return it.fromTimestamp(e)}function Zf(n,e){const t=(e.baseMutations||[]).map(u=>Wf(n.Jt,u));for(let u=0;u<e.mutations.length-1;++u){const c=e.mutations[u];u+1<e.mutations.length&&void 0!==e.mutations[u+1].transform&&(c.updateTransforms=e.mutations[u+1].transform.fieldTransforms,e.mutations.splice(u+1,1),++u)}const r=e.mutations.map(u=>Wf(n.Jt,u)),i=Qn.fromMillis(e.localWriteTimeMs);return new jv(e.batchId,i,t,r)}function Zd(n){const e=uc(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?uc(n.lastLimboFreeSnapshotVersion):it.min();let r;var i;return void 0!==n.query.documents?(It(1===(i=n.query).documents.length),r=Zs(qu(RI(i.documents[0])))):r=Zs(um(n.query)),new el(r,n.targetId,0,n.lastListenSequenceNumber,e,t,Br.fromBase64String(n.resumeToken))}function ID(n,e){const t=ac(e.snapshotVersion),r=ac(e.lastLimboFreeSnapshotVersion);let i;i=Nf(e.target)?xv(n.Jt,e.target):am(n.Jt,e.target);const u=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:rc(e.target),readTime:t,resumeToken:u,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function VI(n){const e=um({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?hv(e,e.limit,"L"):e}function BI(n,e){return new fm(e.largestBatchId,Wf(n.Jt,e.overlayMutation))}function CD(n,e){const t=e.path.lastSegment();return[n,Li(e.path.popLast()),t]}class Jx{getBundleMetadata(e,t){return bD(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:uc(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return bD(e).put({bundleId:(r=t).id,createTime:ac(Jr(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return TD(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:VI(i.bundledQuery),readTime:uc(i.readTime)};var i})}saveNamedQuery(e,t){return TD(e).put({name:(r=t).name,readTime:ac(Jr(r.readTime)),bundledQuery:r.bundledQuery});var r}}function bD(n){return $r(n,"bundles")}function TD(n){return $r(n,"namedQueries")}class jI{constructor(e,t){this.M=e,this.userId=t}static Yt(e,t){return new jI(e,t.uid||"")}getOverlay(e,t){return tl(e).get(CD(this.userId,t)).next(r=>r?BI(this.M,r):null)}saveOverlays(e,t,r){const i=[];return r.forEach((u,c)=>{const h=new fm(t,c);i.push(this.Xt(e,h))}),ge.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(c=>i.add(Li(c.getCollectionPath())));const u=[];return i.forEach(c=>{const h=IDBKeyRange.bound([this.userId,c,r],[this.userId,c,r+1],!1,!0);u.push(tl(e).Qt("collectionPathOverlayIndex",h))}),ge.waitFor(u)}getOverlaysForCollection(e,t,r){const i=Uf(),u=Li(t),c=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,Number.POSITIVE_INFINITY],!0);return tl(e).qt("collectionPathOverlayIndex",c).next(h=>{for(const _ of h){const w=BI(this.M,_);i.set(w.getKey(),w)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const u=Uf();let c;const h=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return tl(e).Wt({index:"collectionGroupOverlayIndex",range:h},(_,w,D)=>{const S=BI(this.M,w);u.size()<i||S.largestBatchId===c?(u.set(S.getKey(),S),c=S.largestBatchId):D.done()}).next(()=>u)}Xt(e,t){return tl(e).put(function(r,i,u){const[c,h,_]=CD(i,u.mutation.key);return{userId:i,collectionPath:h,documentId:_,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:om(r.Jt,u.mutation)}}(this.M,this.userId,t))}}function tl(n){return $r(n,"documentOverlays")}class Yd{constructor(){}Zt(e,t){this.te(e,t),t.ee()}te(e,t){if("nullValue"in e)this.ne(t,5);else if("booleanValue"in e)this.ne(t,10),t.se(e.booleanValue?1:0);else if("integerValue"in e)this.ne(t,15),t.se(lr(e.integerValue));else if("doubleValue"in e){const r=lr(e.doubleValue);isNaN(r)?this.ne(t,13):(this.ne(t,15),tu(r)?t.se(0):t.se(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ne(t,20),"string"==typeof r?t.ie(r):(t.ie(`${r.seconds||""}`),t.se(r.nanos||0))}else if("stringValue"in e)this.re(e.stringValue,t),this.oe(t);else if("bytesValue"in e)this.ne(t,30),t.ue(Xl(e.bytesValue)),this.oe(t);else if("referenceValue"in e)this.ae(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ne(t,45),t.se(r.latitude||0),t.se(r.longitude||0)}else"mapValue"in e?nI(e)?this.ne(t,Number.MAX_SAFE_INTEGER):(this.ce(e.mapValue,t),this.oe(t)):"arrayValue"in e?(this.he(e.arrayValue,t),this.oe(t)):lt()}re(e,t){this.ne(t,25),this.le(e,t)}le(e,t){t.ie(e)}ce(e,t){const r=e.fields||{};this.ne(t,55);for(const i of Object.keys(r))this.re(i,t),this.te(r[i],t)}he(e,t){const r=e.values||[];this.ne(t,50);for(const i of r)this.te(i,t)}ae(e,t){this.ne(t,37),Je.fromName(e).path.forEach(r=>{this.ne(t,60),this.le(r,t)})}ne(e,t){e.se(t)}oe(e){e.se(2)}}function $I(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function pm(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const u=$I(255&t[i]);if(r+=u,8!==u)break}return r}(n);return Math.ceil(e/8)}Yd.fe=new Yd;class HI{constructor(){this.buffer=new Uint8Array(1024),this.position=0}de(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this._e(r.value),r=t.next();this.we()}me(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.ge(r.value),r=t.next();this.ye()}pe(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this._e(r);else if(r<2048)this._e(960|r>>>6),this._e(128|63&r);else if(t<"\ud800"||"\udbff"<t)this._e(480|r>>>12),this._e(128|63&r>>>6),this._e(128|63&r);else{const i=t.codePointAt(0);this._e(240|i>>>18),this._e(128|63&i>>>12),this._e(128|63&i>>>6),this._e(128|63&i)}}this.we()}Ie(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.ge(r);else if(r<2048)this.ge(960|r>>>6),this.ge(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.ge(480|r>>>12),this.ge(128|63&r>>>6),this.ge(128|63&r);else{const i=t.codePointAt(0);this.ge(240|i>>>18),this.ge(128|63&i>>>12),this.ge(128|63&i>>>6),this.ge(128|63&i)}}this.ye()}Te(e){const t=this.Ee(e),r=pm(t);this.Ae(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Re(e){const t=this.Ee(e),r=pm(t);this.Ae(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}be(){this.Pe(255),this.Pe(255)}Ve(){this.ve(255),this.ve(255)}reset(){this.position=0}seed(e){this.Ae(e.length),this.buffer.set(e,this.position),this.position+=e.length}Se(){return this.buffer.slice(0,this.position)}Ee(e){const t=function(i){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,i,!1),new Uint8Array(u.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}_e(e){const t=255&e;0===t?(this.Pe(0),this.Pe(255)):255===t?(this.Pe(255),this.Pe(0)):this.Pe(t)}ge(e){const t=255&e;0===t?(this.ve(0),this.ve(255)):255===t?(this.ve(255),this.ve(0)):this.ve(e)}we(){this.Pe(0),this.Pe(1)}ye(){this.ve(0),this.ve(1)}Pe(e){this.Ae(1),this.buffer[this.position++]=e}ve(e){this.Ae(1),this.buffer[this.position++]=~e}Ae(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class WI{constructor(e){this.De=e}ue(e){this.De.de(e)}ie(e){this.De.pe(e)}se(e){this.De.Te(e)}ee(){this.De.be()}}class Xx{constructor(e){this.De=e}ue(e){this.De.me(e)}ie(e){this.De.Ie(e)}se(e){this.De.Re(e)}ee(){this.De.Ve()}}class lc{constructor(){this.De=new HI,this.Ce=new WI(this.De),this.xe=new Xx(this.De)}seed(e){this.De.seed(e)}Ne(e){return 0===e?this.Ce:this.xe}Se(){return this.De.Se()}reset(){this.De.reset()}}class nl{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new nl(this.indexId,this.documentKey,this.arrayValue,r)}}function cc(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=zv(n.arrayValue,e.arrayValue),0!==t?t:(t=zv(n.directionalValue,e.directionalValue),0!==t?t:Je.comparator(n.documentKey,e.documentKey)))}function zv(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class eR{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Me=e.orderBy,this.Oe=[];for(const t of e.filters){const r=t;r.S()?this.Fe=r:this.Oe.push(r)}}$e(e){const t=sv(e);if(void 0!==t&&!this.Be(t))return!1;const r=tc(e);let i=0,u=0;for(;i<r.length&&this.Be(r[i]);++i);if(i===r.length)return!0;if(void 0!==this.Fe){const c=r[i];if(!this.Le(this.Fe,c)||!this.Ue(this.Me[u++],c))return!1;++i}for(;i<r.length;++i){const c=r[i];if(u>=this.Me.length||!this.Ue(this.Me[u++],c))return!1}return!0}Be(e){for(const t of this.Oe)if(this.Le(t,e))return!0;return!1}Le(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Ue(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class DD{constructor(){this.qe=new Gv}addToCollectionParentIndex(e,t){return this.qe.add(t),ge.resolve()}getCollectionParents(e,t){return ge.resolve(this.qe.getEntries(t))}addFieldIndex(e,t){return ge.resolve()}deleteFieldIndex(e,t){return ge.resolve()}getDocumentsMatchingTarget(e,t){return ge.resolve(null)}getIndexType(e,t){return ge.resolve(0)}getFieldIndexes(e,t){return ge.resolve([])}getNextCollectionGroupToUpdate(e){return ge.resolve(null)}getMinOffset(e,t){return ge.resolve(Ks.min())}updateCollectionGroup(e,t,r){return ge.resolve()}updateIndexEntries(e,t){return ge.resolve()}}class Gv{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new kn(sn.comparator),u=!i.has(r);return this.index[t]=i.add(r),u}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new kn(sn.comparator)).toArray()}}const Qd=new Uint8Array(0);class SD{constructor(e,t){this.user=e,this.databaseId=t,this.Ke=new Gv,this.Ge=new Yu(r=>rc(r),(r,i)=>Mf(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Ke.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.Ke.add(t)});const u={collectionId:r,parent:Li(i)};return AD(e).put(u)}return ge.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[Cf(t),""],!1,!0);return AD(e).qt(i).next(u=>{for(const c of u){if(c.collectionId!==t)break;r.push(ga(c.parent))}return r})}addFieldIndex(e,t){const r=qv(e),i={indexId:(u=t).indexId,collectionGroup:u.collectionGroup,fields:u.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])};var u;return delete i.indexId,r.add(i).next()}deleteFieldIndex(e,t){const r=qv(e),i=mm(e),u=gm(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=gm(e);let i=!0;const u=new Map;return ge.forEach(this.Qe(t),c=>this.je(e,c).next(h=>{i&&(i=!!h),u.set(c,h)})).next(()=>{if(i){let c=mn();const h=[];return ge.forEach(u,(_,w)=>{var D;Be("IndexedDbIndexManager",`Using index ${D=_,`id=${D.indexId}|cg=${D.collectionGroup}|f=${D.fields.map(Kt=>`${Kt.fieldPath}:${Kt.kind}`).join(",")}`} to execute ${rc(t)}`);const S=function(Kt,Ot){const rn=sv(Ot);if(void 0===rn)return null;for(const In of Qg(Kt,rn.fieldPath))switch(In.op){case"array-contains-any":return In.value.arrayValue.values||[];case"array-contains":return[In.value]}return null}(w,_),P=function(Kt,Ot){const rn=new Map;for(const In of tc(Ot))for(const ns of Qg(Kt,In.fieldPath))switch(ns.op){case"==":case"in":rn.set(In.fieldPath.canonicalString(),ns.value);break;case"not-in":case"!=":return rn.set(In.fieldPath.canonicalString(),ns.value),Array.from(rn.values())}return null}(w,_),B=function(Kt,Ot){const rn=[];let In=!0;for(const ns of tc(Ot)){const YE=0===ns.kind?lI(Kt,ns.fieldPath,Kt.startAt):cI(Kt,ns.fieldPath,Kt.startAt);rn.push(YE.value),In&&(In=YE.inclusive)}return new ru(rn,In)}(w,_),Y=function(Kt,Ot){const rn=[];let In=!0;for(const ns of tc(Ot)){const YE=0===ns.kind?cI(Kt,ns.fieldPath,Kt.endAt):lI(Kt,ns.fieldPath,Kt.endAt);rn.push(YE.value),In&&(In=YE.inclusive)}return new ru(rn,In)}(w,_),xe=this.We(_,w,B),Ke=this.We(_,w,Y),Gt=this.ze(_,w,P),Wt=this.He(_.indexId,S,xe,B.inclusive,Ke,Y.inclusive,Gt);return ge.forEach(Wt,Kt=>r.Gt(Kt,t.limit).next(Ot=>{Ot.forEach(rn=>{const In=Je.fromSegments(rn.documentKey);c.has(In)||(c=c.add(In),h.push(In))})}))}).next(()=>h)}return ge.resolve(null)})}Qe(e){let t=this.Ge.get(e);return t||(t=[e],this.Ge.set(e,t),t)}He(e,t,r,i,u,c,h){const _=(null!=t?t.length:1)*Math.max(r.length,u.length),w=_/(null!=t?t.length:1),D=[];for(let S=0;S<_;++S){const P=t?this.Je(t[S/w]):Qd,B=this.Ye(e,P,r[S%w],i),Y=this.Xe(e,P,u[S%w],c),xe=h.map(Ke=>this.Ye(e,P,Ke,!0));D.push(...this.createRange(B,Y,xe))}return D}Ye(e,t,r,i){const u=new nl(e,Je.empty(),t,r);return i?u:u.ke()}Xe(e,t,r,i){const u=new nl(e,Je.empty(),t,r);return i?u.ke():u}je(e,t){const r=new eR(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(u=>{let c=null;for(const h of u)r.$e(h)&&(!c||h.fields.length>c.fields.length)&&(c=h);return c})}getIndexType(e,t){let r=2;return ge.forEach(this.Qe(t),i=>this.je(e,i).next(u=>{u?0!==r&&u.fields.length<function(c){let h=new kn(xr.comparator),_=!1;for(const w of c.filters){const D=w;D.field.isKeyField()||("array-contains"===D.op||"array-contains-any"===D.op?_=!0:h=h.add(D.field))}for(const w of c.orderBy)w.field.isKeyField()||(h=h.add(w.field));return h.size+(_?1:0)}(i)&&(r=1):r=0})).next(()=>r)}Ze(e,t){const r=new lc;for(const i of tc(e)){const u=t.data.field(i.fieldPath);if(null==u)return null;const c=r.Ne(i.kind);Yd.fe.Zt(u,c)}return r.Se()}Je(e){const t=new lc;return Yd.fe.Zt(e,t.Ne(0)),t.Se()}tn(e,t){const r=new lc;return Yd.fe.Zt(Fd(this.databaseId,t),r.Ne(function(i){const u=tc(i);return 0===u.length?0:u[u.length-1].kind}(e))),r.Se()}ze(e,t,r){if(null===r)return[];let i=[];i.push(new lc);let u=0;for(const c of tc(e)){const h=r[u++];for(const _ of i)if(this.en(t,c.fieldPath)&&Zg(h))i=this.nn(i,c,h);else{const w=_.Ne(c.kind);Yd.fe.Zt(h,w)}}return this.sn(i)}We(e,t,r){return this.ze(e,t,r.position)}sn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Se();return t}nn(e,t,r){const i=[...e],u=[];for(const c of r.arrayValue.values||[])for(const h of i){const _=new lc;_.seed(h.Se()),Yd.fe.Zt(c,_.Ne(t.kind)),u.push(_)}return u}en(e,t){return!!e.filters.find(r=>r instanceof ci&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=qv(e),i=mm(e);return(t?r.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.qt()).next(u=>{const c=[];return ge.forEach(u,h=>i.get([h.indexId,this.uid]).next(_=>{c.push(function(w,D){const S=D?new Rf(D.sequenceNumber,new Ks(uc(D.readTime),new Je(ga(D.documentKey)),D.largestBatchId)):Rf.empty(),P=w.fields.map(([B,Y])=>new nu(xr.fromServerFormat(B),Y));return new xf(w.indexId,w.collectionGroup,P,S)}(h,_))})).next(()=>c)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const u=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==u?u:xt(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=qv(e),u=mm(e);return this.rn(e).next(c=>i.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(h=>ge.forEach(h,_=>{return u.put({indexId:_.indexId,uid:this.user.uid||"",sequenceNumber:c,readTime:ac((P=r).readTime),documentKey:Li(P.documentKey.path),largestBatchId:P.largestBatchId});var P})))}updateIndexEntries(e,t){const r=new Map;return ge.forEach(t,(i,u)=>{const c=r.get(i.collectionGroup);return(c?ge.resolve(c):this.getFieldIndexes(e,i.collectionGroup)).next(h=>(r.set(i.collectionGroup,h),ge.forEach(h,_=>this.on(e,i,_).next(w=>{const D=this.un(u,_);return w.isEqual(D)?ge.resolve():this.an(e,u,_,w,D)}))))})}cn(e,t,r,i){return gm(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.tn(r,t.key),documentKey:t.key.path.toArray()})}hn(e,t,r,i){return gm(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.tn(r,t.key),t.key.path.toArray()])}on(e,t,r){const i=gm(e);let u=new kn(cc);return i.Wt({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.tn(r,t)])},(c,h)=>{u=u.add(new nl(r.indexId,t,h.arrayValue,h.directionalValue))}).next(()=>u)}un(e,t){let r=new kn(cc);const i=this.Ze(t,e);if(null==i)return r;const u=sv(t);if(null!=u){const c=e.data.field(u.fieldPath);if(Zg(c))for(const h of c.arrayValue.values||[])r=r.add(new nl(t.indexId,e.key,this.Je(h),i))}else r=r.add(new nl(t.indexId,e.key,Qd,i));return r}an(e,t,r,i,u){Be("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const c=[];return function(h,_,w,D,S){const P=h.getIterator(),B=_.getIterator();let Y=nc(P),xe=nc(B);for(;Y||xe;){let Ke=!1,Gt=!1;if(Y&&xe){const Wt=w(Y,xe);Wt<0?Gt=!0:Wt>0&&(Ke=!0)}else null!=Y?Gt=!0:Ke=!0;Ke?(D(xe),xe=nc(B)):Gt?(S(Y),Y=nc(P)):(Y=nc(P),xe=nc(B))}}(i,u,cc,h=>{c.push(this.cn(e,t,r,h))},h=>{c.push(this.hn(e,t,r,h))}),ge.waitFor(c)}rn(e){let t=1;return mm(e).Wt({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,u)=>{u.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((c,h)=>cc(c,h)).filter((c,h,_)=>!h||0!==cc(c,_[h-1]));const i=[];i.push(e);for(const c of r){const h=cc(c,e),_=cc(c,t);if(0===h)i[0]=e.ke();else if(h>0&&_<0)i.push(c),i.push(c.ke());else if(_>0)break}i.push(t);const u=[];for(let c=0;c<i.length;c+=2)u.push(IDBKeyRange.bound([i[c].indexId,this.uid,i[c].arrayValue,i[c].directionalValue,Qd,[]],[i[c+1].indexId,this.uid,i[c+1].arrayValue,i[c+1].directionalValue,Qd,[]]));return u}getMinOffset(e,t){let r;return ge.forEach(this.Qe(t),i=>this.je(e,i).next(u=>{u?(!r||aI(u.indexState.offset,r)<0)&&(r=u.indexState.offset):r=Ks.min()})).next(()=>r)}}function AD(n){return $r(n,"collectionParents")}function gm(n){return $r(n,"indexEntries")}function qv(n){return $r(n,"indexConfiguration")}function mm(n){return $r(n,"indexState")}const zI={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Xi{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Xi(e,Xi.DEFAULT_COLLECTION_PERCENTILE,Xi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function xD(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),u=[],c=IDBKeyRange.only(t.batchId);let h=0;const _=r.Wt({range:c},(D,S,P)=>(h++,P.delete()));u.push(_.next(()=>{It(1===h)}));const w=[];for(const D of t.mutations){const S=Ii(e,D.key.path,t.batchId);u.push(i.delete(S)),w.push(D.key)}return ge.waitFor(u).next(()=>w)}function _m(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw lt();e=n.noDocument}return JSON.stringify(e).length}Xi.DEFAULT_COLLECTION_PERCENTILE=10,Xi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Xi.DEFAULT=new Xi(41943040,Xi.DEFAULT_COLLECTION_PERCENTILE,Xi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Xi.DISABLED=new Xi(-1,0,0);class Yf{constructor(e,t,r,i){this.userId=e,this.M=t,this.indexManager=r,this.referenceDelegate=i,this.ln={}}static Yt(e,t,r,i){It(""!==e.uid);const u=e.isAuthenticated()?e.uid:"";return new Yf(u,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Xr(e).Wt({index:"userMutationsIndex",range:r},(i,u,c)=>{t=!1,c.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const u=Jd(e),c=Xr(e);return c.add({}).next(h=>{It("number"==typeof h);const _=new jv(h,t,r,i),w=function(P,B,Y){const xe=Y.baseMutations.map(Gt=>om(P.Jt,Gt)),Ke=Y.mutations.map(Gt=>om(P.Jt,Gt));return{userId:B,batchId:Y.batchId,localWriteTimeMs:Y.localWriteTime.toMillis(),baseMutations:xe,mutations:Ke}}(this.M,this.userId,_),D=[];let S=new kn((P,B)=>xt(P.canonicalString(),B.canonicalString()));for(const P of i){const B=Ii(this.userId,P.key.path,h);S=S.add(P.key.path.popLast()),D.push(c.put(w)),D.push(u.put(B,Kd))}return S.forEach(P=>{D.push(this.indexManager.addToCollectionParentIndex(e,P))}),e.addOnCommittedListener(()=>{this.ln[h]=_.keys()}),ge.waitFor(D).next(()=>_)})}lookupMutationBatch(e,t){return Xr(e).get(t).next(r=>r?(It(r.userId===this.userId),Zf(this.M,r)):null)}fn(e,t){return this.ln[t]?ge.resolve(this.ln[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.ln[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let u=null;return Xr(e).Wt({index:"userMutationsIndex",range:i},(c,h,_)=>{h.userId===this.userId&&(It(h.batchId>=r),u=Zf(this.M,h)),_.done()}).next(()=>u)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Xr(e).Wt({index:"userMutationsIndex",range:t,reverse:!0},(i,u,c)=>{r=u.batchId,c.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Xr(e).qt("userMutationsIndex",t).next(r=>r.map(i=>Zf(this.M,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=zf(this.userId,t.path),i=IDBKeyRange.lowerBound(r),u=[];return Jd(e).Wt({range:i},(c,h,_)=>{const[w,D,S]=c,P=ga(D);if(w===this.userId&&t.path.isEqual(P))return Xr(e).get(S).next(B=>{if(!B)throw lt();It(B.userId===this.userId),u.push(Zf(this.M,B))});_.done()}).next(()=>u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new kn(xt);const i=[];return t.forEach(u=>{const c=zf(this.userId,u.path),h=IDBKeyRange.lowerBound(c),_=Jd(e).Wt({range:h},(w,D,S)=>{const[P,B,Y]=w,xe=ga(B);P===this.userId&&u.path.isEqual(xe)?r=r.add(Y):S.done()});i.push(_)}),ge.waitFor(i).next(()=>this.dn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,u=zf(this.userId,r),c=IDBKeyRange.lowerBound(u);let h=new kn(xt);return Jd(e).Wt({range:c},(_,w,D)=>{const[S,P,B]=_,Y=ga(P);S===this.userId&&r.isPrefixOf(Y)?Y.length===i&&(h=h.add(B)):D.done()}).next(()=>this.dn(e,h))}dn(e,t){const r=[],i=[];return t.forEach(u=>{i.push(Xr(e).get(u).next(c=>{if(null===c)throw lt();It(c.userId===this.userId),r.push(Zf(this.M,c))}))}),ge.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return xD(e.Ht,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this._n(t.batchId)}),ge.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}_n(e){delete this.ln[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return ge.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return Jd(e).Wt({range:r},(u,c,h)=>{if(u[0]===this.userId){const _=ga(u[1]);i.push(_)}else h.done()}).next(()=>{It(0===i.length)})})}containsKey(e,t){return GI(e,this.userId,t)}wn(e){return ym(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function GI(n,e,t){const r=zf(e,t.path),i=r[1],u=IDBKeyRange.lowerBound(r);let c=!1;return Jd(n).Wt({range:u,jt:!0},(h,_,w)=>{const[D,S,P]=h;D===e&&S===i&&(c=!0),w.done()}).next(()=>c)}function Xr(n){return $r(n,"mutations")}function Jd(n){return $r(n,"documentMutations")}function ym(n){return $r(n,"mutationQueues")}class dc{constructor(e){this.mn=e}next(){return this.mn+=2,this.mn}static gn(){return new dc(0)}static yn(){return new dc(-1)}}class RD{constructor(e,t){this.referenceDelegate=e,this.M=t}allocateTargetId(e){return this.pn(e).next(t=>{const r=new dc(t.highestTargetId);return t.highestTargetId=r.next(),this.In(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.pn(e).next(t=>it.fromTimestamp(new Qn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.pn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.pn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.In(e,i)))}addTargetData(e,t){return this.Tn(e,t).next(()=>this.pn(e).next(r=>(r.targetCount+=1,this.En(t,r),this.In(e,r))))}updateTargetData(e,t){return this.Tn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>rl(e).delete(t.targetId)).next(()=>this.pn(e)).next(r=>(It(r.targetCount>0),r.targetCount-=1,this.In(e,r)))}removeTargets(e,t,r){let i=0;const u=[];return rl(e).Wt((c,h)=>{const _=Zd(h);_.sequenceNumber<=t&&null===r.get(_.targetId)&&(i++,u.push(this.removeTargetData(e,_)))}).next(()=>ge.waitFor(u)).next(()=>i)}forEachTarget(e,t){return rl(e).Wt((r,i)=>{const u=Zd(i);t(u)})}pn(e){return Kv(e).get("targetGlobalKey").next(t=>(It(null!==t),t))}In(e,t){return Kv(e).put("targetGlobalKey",t)}Tn(e,t){return rl(e).put(ID(this.M,t))}En(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.pn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=rc(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let u=null;return rl(e).Wt({range:i,index:"queryTargetsIndex"},(c,h,_)=>{const w=Zd(h);Mf(t,w.target)&&(u=w,_.done())}).next(()=>u)}addMatchingKeys(e,t,r){const i=[],u=su(e);return t.forEach(c=>{const h=Li(c.path);i.push(u.put({targetId:r,path:h})),i.push(this.referenceDelegate.addReference(e,r,c))}),ge.waitFor(i)}removeMatchingKeys(e,t,r){const i=su(e);return ge.forEach(t,u=>{const c=Li(u.path);return ge.waitFor([i.delete([r,c]),this.referenceDelegate.removeReference(e,r,u)])})}removeMatchingKeysForTargetId(e,t){const r=su(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=su(e);let u=mn();return i.Wt({range:r,jt:!0},(c,h,_)=>{const w=ga(c[1]),D=new Je(w);u=u.add(D)}).next(()=>u)}containsKey(e,t){const r=Li(t.path),i=IDBKeyRange.bound([r],[Cf(r)],!1,!0);let u=0;return su(e).Wt({index:"documentTargetsIndex",jt:!0,range:i},([c,h],_,w)=>{0!==c&&(u++,w.done())}).next(()=>u>0)}Et(e,t){return rl(e).get(t).next(r=>r?Zd(r):null)}}function rl(n){return $r(n,"targets")}function Kv(n){return $r(n,"targetGlobal")}function su(n){return $r(n,"targetDocuments")}function hc(n){return vm.apply(this,arguments)}function vm(){return vm=(0,me.Z)(function*(n){if(n.code!==pe.FAILED_PRECONDITION||n.message!==Lv)throw n;Be("LocalStore","Unexpectedly lost primary lease")}),vm.apply(this,arguments)}function qI([n,e],[t,r]){const i=xt(n,t);return 0===i?xt(e,r):i}class MD{constructor(e){this.An=e,this.buffer=new kn(qI),this.Rn=0}bn(){return++this.Rn}Pn(e){const t=[e,this.bn()];if(this.buffer.size<this.An)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();qI(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class ND{constructor(e,t){this.garbageCollector=e,this.asyncQueue=t,this.Vn=!1,this.vn=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Sn(e)}stop(){this.vn&&(this.vn.cancel(),this.vn=null)}get started(){return null!==this.vn}Sn(e){var t=this;const r=this.Vn?3e5:6e4;Be("LruGarbageCollector",`Garbage collection scheduled in ${r}ms`),this.vn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",r,(0,me.Z)(function*(){t.vn=null,t.Vn=!0;try{yield e.collectGarbage(t.garbageCollector)}catch(i){oc(i)?Be("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",i):yield hc(i)}yield t.Sn(e)}))}}class Zv{constructor(e,t){this.Dn=e,this.params=t}calculateTargetCount(e,t){return this.Dn.Cn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return ge.resolve(Cs.A);const r=new MD(t);return this.Dn.forEachTarget(e,i=>r.Pn(i.sequenceNumber)).next(()=>this.Dn.xn(e,i=>r.Pn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Dn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Dn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Be("LruGarbageCollector","Garbage collection skipped; disabled"),ge.resolve(zI)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Be("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),zI):this.Nn(e,t))}getCacheSize(e){return this.Dn.getCacheSize(e)}Nn(e,t){let r,i,u,c,h,_,w;const D=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(S=>(S>this.params.maximumSequenceNumbersToCollect?(Be("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${S}`),i=this.params.maximumSequenceNumbersToCollect):i=S,c=Date.now(),this.nthSequenceNumber(e,i))).next(S=>(r=S,h=Date.now(),this.removeTargets(e,r,t))).next(S=>(u=S,_=Date.now(),this.removeOrphanedDocuments(e,r))).next(S=>(w=Date.now(),Gg()<=Ws.in.DEBUG&&Be("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${c-D}ms\n\tDetermined least recently used ${i} in `+(h-c)+`ms\n\tRemoved ${u} targets in `+(_-h)+`ms\n\tRemoved ${S} documents in `+(w-_)+`ms\nTotal Duration: ${w-D}ms`),ge.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:u,documentsRemoved:S})))}}class fc{constructor(e,t){this.db=e,this.garbageCollector=new Zv(this,t)}Cn(e){const t=this.kn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}kn(e){let t=0;return this.xn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}xn(e,t){return this.Mn(e,(r,i)=>t(i))}addReference(e,t,r){return Qf(e,r)}removeReference(e,t,r){return Qf(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return Qf(e,t)}On(e,t){return function(r,i){let u=!1;return ym(r).zt(c=>GI(r,c,i).next(h=>(h&&(u=!0),ge.resolve(!h)))).next(()=>u)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let u=0;return this.Mn(e,(c,h)=>{if(h<=t){const _=this.On(e,c).next(w=>{if(!w)return u++,r.getEntry(e,c).next(()=>(r.removeEntry(c,it.min()),su(e).delete([0,Li(c.path)])))});i.push(_)}}).next(()=>ge.waitFor(i)).next(()=>r.apply(e)).next(()=>u)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return Qf(e,t)}Mn(e,t){const r=su(e);let i,u=Cs.A;return r.Wt({index:"documentTargetsIndex"},([c,h],{path:_,sequenceNumber:w})=>{0===c?(u!==Cs.A&&t(new Je(ga(i)),u),u=w,i=_):u=Cs.A}).next(()=>{u!==Cs.A&&t(new Je(ga(i)),u)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Qf(n,e){return su(n).put((r=n.currentSequenceNumber,{targetId:0,path:Li(e.path),sequenceNumber:r}));var r}class Yv{constructor(){this.changes=new Yu(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Wn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?ge.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class PD{constructor(e){this.M=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return pc(e).put(r)}removeEntry(e,t,r){return pc(e).delete(function(i,u){const c=i.path.toArray();return[c.slice(0,c.length-2),c[c.length-2],Kf(u),c[c.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Fn(e,r)))}getEntry(e,t){let r=Wn.newInvalidDocument(t);return pc(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(Jf(t))},(i,u)=>{r=this.$n(t,u)}).next(()=>r)}Bn(e,t){let r={size:0,document:Wn.newInvalidDocument(t)};return pc(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(Jf(t))},(i,u)=>{r={document:this.$n(t,u),size:_m(u)}}).next(()=>r)}getEntries(e,t){let r=Ys();return this.Ln(e,t,(i,u)=>{const c=this.$n(i,u);r=r.insert(i,c)}).next(()=>r)}Un(e,t){let r=Ys(),i=new cr(Je.comparator);return this.Ln(e,t,(u,c)=>{const h=this.$n(u,c);r=r.insert(u,h),i=i.insert(u,_m(c))}).next(()=>({documents:r,qn:i}))}Ln(e,t,r){if(t.isEmpty())return ge.resolve();let i=new kn(ZI);t.forEach(_=>i=i.add(_));const u=IDBKeyRange.bound(Jf(i.first()),Jf(i.last())),c=i.getIterator();let h=c.getNext();return pc(e).Wt({index:"documentKeyIndex",range:u},(_,w,D)=>{const S=Je.fromSegments([...w.prefixPath,w.collectionGroup,w.documentId]);for(;h&&ZI(h,S)<0;)r(h,null),h=c.getNext();h&&h.isEqual(S)&&(r(h,w),h=c.hasNext()?c.getNext():null),h?D.Ut(Jf(h)):D.done()}).next(()=>{for(;h;)r(h,null),h=c.hasNext()?c.getNext():null})}getAllFromCollection(e,t,r){const i=[t.popLast().toArray(),t.lastSegment(),Kf(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return pc(e).qt(IDBKeyRange.bound(i,u,!0)).next(c=>{let h=Ys();for(const _ of c){const w=this.$n(Je.fromSegments(_.prefixPath.concat(_.collectionGroup,_.documentId)),_);h=h.insert(w.key,w)}return h})}getAllFromCollectionGroup(e,t,r,i){let u=Ys();const c=Qv(t,r),h=Qv(t,Ks.max());return pc(e).Wt({index:"collectionGroupIndex",range:IDBKeyRange.bound(c,h,!0)},(_,w,D)=>{const S=this.$n(Je.fromSegments(w.prefixPath.concat(w.collectionGroup,w.documentId)),w);u=u.insert(S.key,S),u.size===i&&D.done()}).next(()=>u)}newChangeBuffer(e){return new tR(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return KI(e).get("remoteDocumentGlobalKey").next(t=>(It(!!t),t))}Fn(e,t){return KI(e).put("remoteDocumentGlobalKey",t)}$n(e,t){if(t){const r=function UI(n,e){let t;if(e.document)t=Sv(n.Jt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Je.fromSegments(e.noDocument.path),i=uc(e.noDocument.readTime);t=Wn.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return lt();{const r=Je.fromSegments(e.unknownDocument.path),i=uc(e.unknownDocument.version);t=Wn.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new Qn(r[0],r[1]);return it.fromTimestamp(i)}(e.readTime)),t}(this.M,t);if(!r.isNoDocument()||!r.version.isEqual(it.min()))return r}return Wn.newInvalidDocument(e)}}class tR extends Yv{constructor(e,t){super(),this.Kn=e,this.trackRemovals=t,this.Gn=new Yu(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new kn((u,c)=>xt(u.canonicalString(),c.canonicalString()));return this.changes.forEach((u,c)=>{const h=this.Gn.get(u);if(t.push(this.Kn.removeEntry(e,u,h.readTime)),c.isValidDocument()){const _=Wv(this.Kn.M,c);i=i.add(u.path.popLast()),r+=_m(_)-h.size,t.push(this.Kn.addEntry(e,u,_))}else if(r-=h.size,this.trackRemovals){const _=Wv(this.Kn.M,c.convertToNoDocument(it.min()));t.push(this.Kn.addEntry(e,u,_))}}),i.forEach(u=>{t.push(this.Kn.indexManager.addToCollectionParentIndex(e,u))}),t.push(this.Kn.updateMetadata(e,r)),ge.waitFor(t)}getFromCache(e,t){return this.Kn.Bn(e,t).next(r=>(this.Gn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Kn.Un(e,t).next(({documents:r,qn:i})=>(i.forEach((u,c)=>{this.Gn.set(u,{size:c,readTime:r.get(u).readTime})}),r))}}function KI(n){return $r(n,"remoteDocumentGlobal")}function pc(n){return $r(n,"remoteDocumentsV14")}function Jf(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Qv(n,e){const t=e.documentKey.path.toArray();return[n,Kf(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function ZI(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let u=0;u<t.length-2&&u<r.length-2;++u)if(i=xt(t[u],r[u]),i)return i;return i=xt(t.length,r.length),i||(i=xt(t[t.length-2],r[r.length-2]),i||xt(t[t.length-1],r[r.length-1]))}class kD{constructor(e){this.M=e}kt(e,t,r,i){const u=new dm("createOrUpgrade",t);var h;r<1&&i>=1&&(e.createObjectStore("owner"),(h=e).createObjectStore("mutationQueues",{keyPath:"userId"}),h.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Nv,{unique:!0}),h.createObjectStore("documentMutations"),OD(e),function(h){h.createObjectStore("remoteDocuments")}(e));let c=ge.resolve();return r<3&&i>=3&&(0!==r&&(function(h){h.deleteObjectStore("targetDocuments"),h.deleteObjectStore("targets"),h.deleteObjectStore("targetGlobal")}(e),OD(e)),c=c.next(()=>function(h){const _=h.store("targetGlobal"),w={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:it.min().toTimestamp(),targetCount:0};return _.put("targetGlobalKey",w)}(u))),r<4&&i>=4&&(0!==r&&(c=c.next(()=>function(h,_){return _.store("mutations").qt().next(w=>{h.deleteObjectStore("mutations"),h.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Nv,{unique:!0});const D=_.store("mutations"),S=w.map(P=>D.put(P));return ge.waitFor(S)})}(e,u))),c=c.next(()=>{!function(h){h.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(c=c.next(()=>this.Qn(u))),r<6&&i>=6&&(c=c.next(()=>(function(h){h.createObjectStore("remoteDocumentGlobal")}(e),this.jn(u)))),r<7&&i>=7&&(c=c.next(()=>this.Wn(u))),r<8&&i>=8&&(c=c.next(()=>this.zn(e,u))),r<9&&i>=9&&(c=c.next(()=>{!function(h){h.objectStoreNames.contains("remoteDocumentChanges")&&h.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(c=c.next(()=>this.Hn(u))),r<11&&i>=11&&(c=c.next(()=>{(function(h){h.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(h){h.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(c=c.next(()=>{!function(h){const _=h.createObjectStore("documentOverlays",{keyPath:LI});_.createIndex("collectionPathOverlayIndex",FI,{unique:!1}),_.createIndex("collectionGroupOverlayIndex",lm,{unique:!1})}(e)})),r<13&&i>=13&&(c=c.next(()=>function(h){const _=h.createObjectStore("remoteDocumentsV14",{keyPath:pD});_.createIndex("documentKeyIndex",gD),_.createIndex("collectionGroupIndex",Yx)}(e)).next(()=>this.Jn(e,u)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(c=c.next(()=>{!function(h){h.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),h.createObjectStore("indexState",{keyPath:OI}).createIndex("sequenceNumberIndex",yD,{unique:!1}),h.createObjectStore("indexEntries",{keyPath:vD}).createIndex("documentKeyIndex",kv,{unique:!1})}(e)})),c}jn(e){let t=0;return e.store("remoteDocuments").Wt((r,i)=>{t+=_m(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Qn(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.qt().next(i=>ge.forEach(i,u=>{const c=IDBKeyRange.bound([u.userId,-1],[u.userId,u.lastAcknowledgedBatchId]);return r.qt("userMutationsIndex",c).next(h=>ge.forEach(h,_=>{It(_.userId===u.userId);const w=Zf(this.M,_);return xD(e,u.userId,w).next(()=>{})}))}))}Wn(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const u=[];return r.Wt((c,h)=>{const _=new sn(c),w=[0,Li(_)];u.push(t.get(w).next(D=>D?ge.resolve():t.put({targetId:0,path:Li(_),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>ge.waitFor(u))})}zn(e,t){e.createObjectStore("collectionParents",{keyPath:_D});const r=t.store("collectionParents"),i=new Gv,u=c=>{if(i.add(c)){const h=c.lastSegment(),_=c.popLast();return r.put({collectionId:h,parent:Li(_)})}};return t.store("remoteDocuments").Wt({jt:!0},(c,h)=>{const _=new sn(c);return u(_.popLast())}).next(()=>t.store("documentMutations").Wt({jt:!0},([c,h,_],w)=>{const D=ga(h);return u(D.popLast())}))}Hn(e){const t=e.store("targets");return t.Wt((r,i)=>{const u=Zd(i),c=ID(this.M,u);return t.put(c)})}Jn(e,t){const r=t.store("remoteDocuments"),i=[];return r.Wt((u,c)=>{const h=t.store("remoteDocumentsV14"),_=(w=c,w.document?new Je(sn.fromString(w.document.name).popFirst(5)):w.noDocument?Je.fromSegments(w.noDocument.path):w.unknownDocument?Je.fromSegments(w.unknownDocument.path):lt()).path.toArray();var w;const D={prefixPath:_.slice(0,_.length-2),collectionGroup:_[_.length-2],documentId:_[_.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};i.push(h.put(D))}).next(()=>ge.waitFor(i))}}function OD(n){n.createObjectStore("targetDocuments",{keyPath:mD}).createIndex("documentTargetsIndex",Pv,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Gf,{unique:!0}),n.createObjectStore("targetGlobal")}const Xf="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Em{constructor(e,t,r,i,u,c,h,_,w,D,S=13){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Yn=u,this.window=c,this.document=h,this.Xn=w,this.Zn=D,this.ts=S,this.es=null,this.ns=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ss=null,this.inForeground=!1,this.rs=null,this.os=null,this.us=Number.NEGATIVE_INFINITY,this.cs=P=>Promise.resolve(),!Em.vt())throw new Le(pe.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new fc(this,i),this.hs=t+"main",this.M=new Hv(_),this.ls=new Ts(this.hs,this.ts,new kD(this.M)),this.fs=new RD(this.referenceDelegate,this.M),this.ds=new PD(this.M),this._s=new Jx,this.window&&this.window.localStorage?this.ws=this.window.localStorage:(this.ws=null,!1===D&&Cr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.gs().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Le(pe.FAILED_PRECONDITION,Xf);return this.ys(),this.ps(),this.Is(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.fs.getHighestSequenceNumber(e))}).then(e=>{this.es=new Cs(e,this.Xn)}).then(()=>{this.ns=!0}).catch(e=>(this.ls&&this.ls.close(),Promise.reject(e)))}Ts(e){var t=this;return this.cs=function(){var r=(0,me.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ls.Ot(function(){var t=(0,me.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Yn.enqueueAndForget((0,me.Z)(function*(){t.started&&(yield t.gs())})))}gs(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>wm(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Es(e).next(t=>{t||(this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)))})}).next(()=>this.As(e)).next(t=>this.isPrimary&&!t?this.Rs(e).next(()=>!1):!!t&&this.bs(e).next(()=>!0))).catch(e=>{if(oc(e))return Be("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Be("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Yn.enqueueRetryable(()=>this.cs(e)),this.isPrimary=e})}Es(e){return ep(e).get("owner").next(t=>ge.resolve(this.Ps(t)))}Vs(e){return wm(e).delete(this.clientId)}vs(){var e=this;return(0,me.Z)(function*(){if(e.isPrimary&&!e.Ss(e.us,18e5)){e.us=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=$r(r,"clientMetadata");return i.qt().next(u=>{const c=e.Ds(u,18e5),h=u.filter(_=>-1===c.indexOf(_));return ge.forEach(h,_=>i.delete(_.clientId)).next(()=>h)})}).catch(()=>[]);if(e.ws)for(const r of t)e.ws.removeItem(e.Cs(r.clientId))}})()}Is(){this.os=this.Yn.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.gs().then(()=>this.vs()).then(()=>this.Is()))}Ps(e){return!!e&&e.ownerId===this.clientId}As(e){return this.Zn?ge.resolve(!0):ep(e).get("owner").next(t=>{if(null!==t&&this.Ss(t.leaseTimestampMs,5e3)&&!this.xs(t.ownerId)){if(this.Ps(t)&&this.networkEnabled)return!0;if(!this.Ps(t)){if(!t.allowTabSynchronization)throw new Le(pe.FAILED_PRECONDITION,Xf);return!1}}return!(!this.networkEnabled||!this.inForeground)||wm(e).qt().next(r=>void 0===this.Ds(r,5e3).find(i=>{if(this.clientId!==i.clientId){const c=!this.inForeground&&i.inForeground,h=this.networkEnabled===i.networkEnabled;if(!this.networkEnabled&&i.networkEnabled||c&&h)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Be("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,me.Z)(function*(){e.ns=!1,e.Ns(),e.os&&(e.os.cancel(),e.os=null),e.ks(),e.Ms(),yield e.ls.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new Bv(t,Cs.A);return e.Rs(r).next(()=>e.Vs(r))}),e.ls.close(),e.Os()})()}Ds(e,t){return e.filter(r=>this.Ss(r.updateTimeMs,t)&&!this.xs(r.clientId))}Fs(){return this.runTransaction("getActiveClients","readonly",e=>wm(e).qt().next(t=>this.Ds(t,18e5).map(r=>r.clientId)))}get started(){return this.ns}getMutationQueue(e,t){return Yf.Yt(e,this.M,t,this.referenceDelegate)}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getIndexManager(e){return new SD(e,this.M.Jt.databaseId)}getDocumentOverlayCache(e){return jI.Yt(this.M,e)}getBundleCache(){return this._s}runTransaction(e,t,r){Be("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",u=14===(c=this.ts)?ED:13===c?Ov:12===c?Qx:11===c?cm:void lt();var c;let h;return this.ls.runTransaction(e,i,u,_=>(h=new Bv(_,this.es?this.es.next():Cs.A),"readwrite-primary"===t?this.Es(h).next(w=>!!w||this.As(h)).next(w=>{if(!w)throw Cr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)),new Le(pe.FAILED_PRECONDITION,Lv);return r(h)}).next(w=>this.bs(h).next(()=>w)):this.$s(h).next(()=>r(h)))).then(_=>(h.raiseOnCommittedEvent(),_))}$s(e){return ep(e).get("owner").next(t=>{if(null!==t&&this.Ss(t.leaseTimestampMs,5e3)&&!this.xs(t.ownerId)&&!this.Ps(t)&&!(this.Zn||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Le(pe.FAILED_PRECONDITION,Xf)})}bs(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return ep(e).put("owner",t)}static vt(){return Ts.vt()}Rs(e){const t=ep(e);return t.get("owner").next(r=>this.Ps(r)?(Be("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):ge.resolve())}Ss(e,t){const r=Date.now();return!(e<r-t||e>r&&(Cr(`Detected an update time that is in the future: ${e} > ${r}`),1))}ys(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.rs=()=>{this.Yn.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.gs()))},this.document.addEventListener("visibilitychange",this.rs),this.inForeground="visible"===this.document.visibilityState)}ks(){this.rs&&(this.document.removeEventListener("visibilitychange",this.rs),this.rs=null)}ps(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ss=()=>{this.Ns(),(0,Q.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Yn.enterRestrictedMode(!0),this.Yn.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ss))}Ms(){this.ss&&(this.window.removeEventListener("pagehide",this.ss),this.ss=null)}xs(e){var t;try{const r=null!==(null===(t=this.ws)||void 0===t?void 0:t.getItem(this.Cs(e)));return Be("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Cr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ns(){if(this.ws)try{this.ws.setItem(this.Cs(this.clientId),String(Date.now()))}catch(e){Cr("Failed to set zombie client id.",e)}}Os(){if(this.ws)try{this.ws.removeItem(this.Cs(this.clientId))}catch(e){}}Cs(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function ep(n){return $r(n,"owner")}function wm(n){return $r(n,"clientMetadata")}function Im(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class Jv{constructor(e,t,r){this.ds=e,this.Bs=t,this.indexManager=r}Ls(e,t){return this.Bs.getAllMutationBatchesAffectingDocumentKey(e,t).next(r=>this.Us(e,t,r))}Us(e,t,r){return this.ds.getEntry(e,t).next(i=>{for(const u of r)u.applyToLocalView(i);return i})}qs(e,t){e.forEach((r,i)=>{for(const u of t)u.applyToLocalView(i)})}Ks(e,t){return this.ds.getEntries(e,t).next(r=>this.Gs(e,r).next(()=>r))}Gs(e,t){return this.Bs.getAllMutationBatchesAffectingDocumentKeys(e,t).next(r=>this.qs(t,r))}Qs(e,t,r){return Je.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.js(e,t.path):dv(t)?this.Ws(e,t,r):this.zs(e,t,r);var i}js(e,t){return this.Ls(e,new Je(t)).next(r=>{let i=Iv();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}Ws(e,t,r){const i=t.collectionGroup;let u=Iv();return this.indexManager.getCollectionParents(e,i).next(c=>ge.forEach(c,h=>{const _=(w=t,D=h.child(i),new Mo(D,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt));var w,D;return this.zs(e,_,r).next(w=>{w.forEach((D,S)=>{u=u.insert(D,S)})})}).next(()=>u))}zs(e,t,r){let i;return this.ds.getAllFromCollection(e,t.path,r).next(u=>(i=u,this.Bs.getAllMutationBatchesAffectingQuery(e,t))).next(u=>{for(const c of u)for(const h of c.mutations){const _=h.key;let w=i.get(_);null==w&&(w=Wn.newInvalidDocument(_),i=i.insert(_,w)),yv(h,w,c.localWriteTime),w.isFoundDocument()||(i=i.remove(_))}}).next(()=>(i.forEach((u,c)=>{pv(t,c)||(i=i.remove(u))}),i))}}class tp{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Hs=r,this.Js=i}static Ys(e,t){let r=mn(),i=mn();for(const u of t.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:i=i.add(u.doc.key)}return new tp(e,t.fromCache,r,i)}}class Xv{constructor(){this.Xs=!1}initialize(e,t){this.Zs=e,this.indexManager=t,this.Xs=!0}Qs(e,t,r,i){return this.ti(e,t).next(u=>u||this.ei(e,t,i,r)).next(u=>u||this.ni(e,t))}ti(e,t){return ge.resolve(null)}ei(e,t,r,i){return function YT(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}(t)||i.isEqual(it.min())?this.ni(e,t):this.Zs.Ks(e,r).next(u=>{const c=this.si(t,u);return this.ii(t,c,r,i)?this.ni(e,t):(Gg()<=Ws.in.DEBUG&&Be("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),gI(t)),this.ri(e,c,t,ov(i,-1)))})}si(e,t){let r=new kn(mI(e));return t.forEach((i,u)=>{pv(e,u)&&(r=r.add(u))}),r}ii(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const u="F"===e.limitType?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(i)>0)}ni(e,t){return Gg()<=Ws.in.DEBUG&&Be("QueryEngine","Using full collection scan to execute query:",gI(t)),this.Zs.Qs(e,t,Ks.min())}ri(e,t,r,i){return this.Zs.Qs(e,r,i).next(u=>(t.forEach(c=>{u=u.insert(c.key,c)}),u))}}class LD{constructor(e,t,r,i){this.persistence=e,this.oi=t,this.M=i,this.ui=new cr(xt),this.ai=new Yu(u=>rc(u),Mf),this.ci=new Map,this.hi=e.getRemoteDocumentCache(),this.fs=e.getTargetCache(),this._s=e.getBundleCache(),this.li(r)}li(e){this.indexManager=this.persistence.getIndexManager(e),this.Bs=this.persistence.getMutationQueue(e,this.indexManager),this.fi=new Jv(this.hi,this.Bs,this.indexManager),this.hi.setIndexManager(this.indexManager),this.oi.initialize(this.fi,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.ui))}}function eE(n,e,t,r){return new LD(n,e,t,r)}function tE(n,e){return nE.apply(this,arguments)}function nE(){return nE=(0,me.Z)(function*(n,e){const t=tt(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.Bs.getAllMutationBatches(r).next(u=>(i=u,t.li(e),t.Bs.getAllMutationBatches(r))).next(u=>{const c=[],h=[];let _=mn();for(const w of i){c.push(w.batchId);for(const D of w.mutations)_=_.add(D.key)}for(const w of u){h.push(w.batchId);for(const D of w.mutations)_=_.add(D.key)}return t.fi.Ks(r,_).next(w=>({di:w,removedBatchIds:c,addedBatchIds:h}))})})}),nE.apply(this,arguments)}function FD(n,e){const t=tt(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),u=t.hi.newChangeBuffer({trackRemovals:!0});return function(c,h,_,w){const D=_.batch,S=D.keys();let P=ge.resolve();return S.forEach(B=>{P=P.next(()=>w.getEntry(h,B)).next(Y=>{const xe=_.docVersions.get(B);It(null!==xe),Y.version.compareTo(xe)<0&&(D.applyToRemoteDocument(Y,_),Y.isValidDocument()&&(Y.setReadTime(_.commitVersion),w.addEntry(Y)))})}),P.next(()=>c.Bs.removeMutationBatch(h,D))}(t,r,e,u).next(()=>u.apply(r)).next(()=>t.Bs.performConsistencyCheck(r)).next(()=>t.fi.Ks(r,i))})}function UD(n){const e=tt(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.fs.getLastRemoteSnapshotVersion(t))}function nR(n,e){const t=tt(n),r=e.snapshotVersion;let i=t.ui;return t.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const c=t.hi.newChangeBuffer({trackRemovals:!0});i=t.ui;const h=[];e.targetChanges.forEach((w,D)=>{const S=i.get(D);if(!S)return;h.push(t.fs.removeMatchingKeys(u,w.removedDocuments,D).next(()=>t.fs.addMatchingKeys(u,w.addedDocuments,D)));let P=S.withSequenceNumber(u.currentSequenceNumber);var B,Y,xe;e.targetMismatches.has(D)?P=P.withResumeToken(Br.EMPTY_BYTE_STRING,it.min()).withLastLimboFreeSnapshotVersion(it.min()):w.resumeToken.approximateByteSize()>0&&(P=P.withResumeToken(w.resumeToken,r)),i=i.insert(D,P),Y=P,xe=w,(0===(B=S).resumeToken.approximateByteSize()||Y.snapshotVersion.toMicroseconds()-B.snapshotVersion.toMicroseconds()>=3e8||xe.addedDocuments.size+xe.modifiedDocuments.size+xe.removedDocuments.size>0)&&h.push(t.fs.updateTargetData(u,P))});let _=Ys();if(e.documentUpdates.forEach(w=>{e.resolvedLimboDocuments.has(w)&&h.push(t.persistence.referenceDelegate.updateLimboDocument(u,w))}),h.push(rE(u,c,e.documentUpdates).next(w=>{_=w})),!r.isEqual(it.min())){const w=t.fs.getLastRemoteSnapshotVersion(u).next(D=>t.fs.setTargetsMetadata(u,u.currentSequenceNumber,r));h.push(w)}return ge.waitFor(h).next(()=>c.apply(u)).next(()=>t.fi.Gs(u,_)).next(()=>_)}).then(u=>(t.ui=i,u))}function rE(n,e,t){let r=mn();return t.forEach(i=>r=r.add(i)),e.getEntries(n,r).next(i=>{let u=Ys();return t.forEach((c,h)=>{const _=i.get(c);h.isNoDocument()&&h.version.isEqual(it.min())?(e.removeEntry(c,h.readTime),u=u.insert(c,h)):!_.isValidDocument()||h.version.compareTo(_.version)>0||0===h.version.compareTo(_.version)&&_.hasPendingWrites?(e.addEntry(h),u=u.insert(c,h)):Be("LocalStore","Ignoring outdated watch update for ",c,". Current version:",_.version," Watch version:",h.version)}),u})}function VD(n,e){const t=tt(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.Bs.getNextMutationBatchAfterBatchId(r,e)))}function Xd(n,e){const t=tt(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.fs.getTargetData(r,e).next(u=>u?(i=u,ge.resolve(i)):t.fs.allocateTargetId(r).next(c=>(i=new el(e,c,0,r.currentSequenceNumber),t.fs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.ui.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.ui=t.ui.insert(r.targetId,r),t.ai.set(e,r.targetId)),r})}function eh(n,e,t){return YI.apply(this,arguments)}function YI(){return YI=(0,me.Z)(function*(n,e,t){const r=tt(n),i=r.ui.get(e),u=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",u,c=>r.persistence.referenceDelegate.removeTarget(c,i)))}catch(c){if(!oc(c))throw c;Be("LocalStore",`Failed to update sequence numbers for target ${e}: ${c}`)}r.ui=r.ui.remove(e),r.ai.delete(i.target)}),YI.apply(this,arguments)}function iE(n,e,t){const r=tt(n);let i=it.min(),u=mn();return r.persistence.runTransaction("Execute query","readonly",c=>function(h,_,w){const D=tt(h),S=D.ai.get(w);return void 0!==S?ge.resolve(D.ui.get(S)):D.fs.getTargetData(_,w)}(r,c,Zs(e)).next(h=>{if(h)return i=h.lastLimboFreeSnapshotVersion,r.fs.getMatchingKeysForTargetId(c,h.targetId).next(_=>{u=_})}).next(()=>r.oi.Qs(c,e,t?i:it.min(),t?u:mn())).next(h=>($D(r,Of(e),h),{documents:h,_i:u})))}function BD(n,e){const t=tt(n),r=tt(t.fs),i=t.ui.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",u=>r.Et(u,e).next(c=>c?c.target:null))}function jD(n,e){const t=tt(n),r=t.ci.get(e)||it.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.hi.getAllFromCollectionGroup(i,e,ov(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>($D(t,e,i),i))}function $D(n,e,t){let r=it.min();t.forEach((i,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)}),n.ci.set(e,r)}function th(){return th=(0,me.Z)(function*(n,e,t,r){const i=tt(n);let u=mn(),c=Ys();for(const w of t){const D=e.wi(w.metadata.name);w.document&&(u=u.add(D));const S=e.mi(w);S.setReadTime(e.gi(w.metadata.readTime)),c=c.insert(D,S)}const h=i.hi.newChangeBuffer({trackRemovals:!0}),_=yield Xd(i,(w=r,Zs(qu(sn.fromString(`__bundle__/docs/${w}`)))));var w;return i.persistence.runTransaction("Apply bundle documents","readwrite",w=>rE(w,h,c).next(D=>(h.apply(w),D)).next(D=>i.fs.removeMatchingKeysForTargetId(w,_.targetId).next(()=>i.fs.addMatchingKeys(w,u,_.targetId)).next(()=>i.fi.Gs(w,D)).next(()=>D)))}),th.apply(this,arguments)}function WD(n,e){return sE.apply(this,arguments)}function sE(){return sE=(0,me.Z)(function*(n,e,t=mn()){const r=yield Xd(n,Zs(VI(e.bundledQuery))),i=tt(n);return i.persistence.runTransaction("Save named query","readwrite",u=>{const c=Jr(e.readTime);if(r.snapshotVersion.compareTo(c)>=0)return i._s.saveNamedQuery(u,e);const h=r.withResumeToken(Br.EMPTY_BYTE_STRING,c);return i.ui=i.ui.insert(h.targetId,h),i.fs.updateTargetData(u,h).next(()=>i.fs.removeMatchingKeysForTargetId(u,r.targetId)).next(()=>i.fs.addMatchingKeys(u,t,r.targetId)).next(()=>i._s.saveNamedQuery(u,e))})}),sE.apply(this,arguments)}class QI{constructor(e){this.M=e,this.yi=new Map,this.pi=new Map}getBundleMetadata(e,t){return ge.resolve(this.yi.get(t))}saveBundleMetadata(e,t){var r;return this.yi.set(t.id,{id:(r=t).id,version:r.version,createTime:Jr(r.createTime)}),ge.resolve()}getNamedQuery(e,t){return ge.resolve(this.pi.get(t))}saveNamedQuery(e,t){return this.pi.set(t.name,{name:(r=t).name,query:VI(r.bundledQuery),readTime:Jr(r.readTime)}),ge.resolve();var r}}class gc{constructor(){this.overlays=new cr(Je.comparator),this.Ii=new Map}getOverlay(e,t){return ge.resolve(this.overlays.get(t))}saveOverlays(e,t,r){return r.forEach((i,u)=>{this.Xt(e,t,u)}),ge.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.Ii.get(r);return void 0!==i&&(i.forEach(u=>this.overlays=this.overlays.remove(u)),this.Ii.delete(r)),ge.resolve()}getOverlaysForCollection(e,t,r){const i=Uf(),u=t.length+1,c=new Je(t.child("")),h=this.overlays.getIteratorFrom(c);for(;h.hasNext();){const _=h.getNext().value,w=_.getKey();if(!t.isPrefixOf(w.path))break;w.path.length===u&&_.largestBatchId>r&&i.set(_.getKey(),_)}return ge.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let u=new cr((w,D)=>w-D);const c=this.overlays.getIterator();for(;c.hasNext();){const w=c.getNext().value;if(w.getKey().getCollectionGroup()===t&&w.largestBatchId>r){let D=u.get(w.largestBatchId);null===D&&(D=Uf(),u=u.insert(w.largestBatchId,D)),D.set(w.getKey(),w)}}const h=Uf(),_=u.getIterator();for(;_.hasNext()&&(_.getNext().value.forEach((w,D)=>h.set(w,D)),!(h.size()>=i)););return ge.resolve(h)}Xt(e,t,r){if(null===r)return;const i=this.overlays.get(r.key);if(null!==i){const c=this.Ii.get(i.largestBatchId).delete(r.key);this.Ii.set(i.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new fm(t,r));let u=this.Ii.get(t);void 0===u&&(u=mn(),this.Ii.set(t,u)),this.Ii.set(t,u.add(r.key))}}class Cm{constructor(){this.Ti=new kn(Mr.Ei),this.Ai=new kn(Mr.Ri)}isEmpty(){return this.Ti.isEmpty()}addReference(e,t){const r=new Mr(e,t);this.Ti=this.Ti.add(r),this.Ai=this.Ai.add(r)}bi(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Pi(new Mr(e,t))}Vi(e,t){e.forEach(r=>this.removeReference(r,t))}vi(e){const t=new Je(new sn([])),r=new Mr(t,e),i=new Mr(t,e+1),u=[];return this.Ai.forEachInRange([r,i],c=>{this.Pi(c),u.push(c.key)}),u}Si(){this.Ti.forEach(e=>this.Pi(e))}Pi(e){this.Ti=this.Ti.delete(e),this.Ai=this.Ai.delete(e)}Di(e){const t=new Je(new sn([])),r=new Mr(t,e),i=new Mr(t,e+1);let u=mn();return this.Ai.forEachInRange([r,i],c=>{u=u.add(c.key)}),u}containsKey(e){const t=new Mr(e,0),r=this.Ti.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Mr{constructor(e,t){this.key=e,this.Ci=t}static Ei(e,t){return Je.comparator(e.key,t.key)||xt(e.Ci,t.Ci)}static Ri(e,t){return xt(e.Ci,t.Ci)||Je.comparator(e.key,t.key)}}class oE{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.Bs=[],this.xi=1,this.Ni=new kn(Mr.Ei)}checkEmpty(e){return ge.resolve(0===this.Bs.length)}addMutationBatch(e,t,r,i){const u=this.xi;this.xi++;const c=new jv(u,t,r,i);this.Bs.push(c);for(const h of i)this.Ni=this.Ni.add(new Mr(h.key,u)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return ge.resolve(c)}lookupMutationBatch(e,t){return ge.resolve(this.ki(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.Mi(t+1),u=i<0?0:i;return ge.resolve(this.Bs.length>u?this.Bs[u]:null)}getHighestUnacknowledgedBatchId(){return ge.resolve(0===this.Bs.length?-1:this.xi-1)}getAllMutationBatches(e){return ge.resolve(this.Bs.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Mr(t,0),i=new Mr(t,Number.POSITIVE_INFINITY),u=[];return this.Ni.forEachInRange([r,i],c=>{const h=this.ki(c.Ci);u.push(h)}),ge.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new kn(xt);return t.forEach(i=>{const u=new Mr(i,0),c=new Mr(i,Number.POSITIVE_INFINITY);this.Ni.forEachInRange([u,c],h=>{r=r.add(h.Ci)})}),ge.resolve(this.Oi(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let u=r;Je.isDocumentKey(u)||(u=u.child(""));const c=new Mr(new Je(u),0);let h=new kn(xt);return this.Ni.forEachWhile(_=>{const w=_.key.path;return!!r.isPrefixOf(w)&&(w.length===i&&(h=h.add(_.Ci)),!0)},c),ge.resolve(this.Oi(h))}Oi(e){const t=[];return e.forEach(r=>{const i=this.ki(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){It(0===this.Fi(t.batchId,"removed")),this.Bs.shift();let r=this.Ni;return ge.forEach(t.mutations,i=>{const u=new Mr(i.key,t.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Ni=r})}_n(e){}containsKey(e,t){const r=new Mr(t,0),i=this.Ni.firstAfterOrEqual(r);return ge.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return ge.resolve()}Fi(e,t){return this.Mi(e)}Mi(e){return 0===this.Bs.length?0:e-this.Bs[0].batchId}ki(e){const t=this.Mi(e);return t<0||t>=this.Bs.length?null:this.Bs[t]}}class zD{constructor(e){this.$i=e,this.docs=new cr(Je.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),u=i?i.size:0,c=this.$i(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ge.resolve(r?r.document.mutableCopy():Wn.newInvalidDocument(t))}getEntries(e,t){let r=Ys();return t.forEach(i=>{const u=this.docs.get(i);r=r.insert(i,u?u.document.mutableCopy():Wn.newInvalidDocument(i))}),ge.resolve(r)}getAllFromCollection(e,t,r){let i=Ys();const u=new Je(t.child("")),c=this.docs.getIteratorFrom(u);for(;c.hasNext();){const{key:h,value:{document:_}}=c.getNext();if(!t.isPrefixOf(h.path))break;h.path.length>t.length+1||aI($T(_),r)<=0||(i=i.insert(_.key,_.mutableCopy()))}return ge.resolve(i)}getAllFromCollectionGroup(e,t,r,i){lt()}Bi(e,t){return ge.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new aE(this)}getSize(e){return ge.resolve(this.size)}}class aE extends Yv{constructor(e){super(),this.Kn=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Kn.addEntry(e,i)):this.Kn.removeEntry(r)}),ge.waitFor(t)}getFromCache(e,t){return this.Kn.getEntry(e,t)}getAllFromCache(e,t){return this.Kn.getEntries(e,t)}}class uE{constructor(e){this.persistence=e,this.Li=new Yu(t=>rc(t),Mf),this.lastRemoteSnapshotVersion=it.min(),this.highestTargetId=0,this.Ui=0,this.qi=new Cm,this.targetCount=0,this.Ki=dc.gn()}forEachTarget(e,t){return this.Li.forEach((r,i)=>t(i)),ge.resolve()}getLastRemoteSnapshotVersion(e){return ge.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ge.resolve(this.Ui)}allocateTargetId(e){return this.highestTargetId=this.Ki.next(),ge.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Ui&&(this.Ui=t),ge.resolve()}Tn(e){this.Li.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ki=new dc(t),this.highestTargetId=t),e.sequenceNumber>this.Ui&&(this.Ui=e.sequenceNumber)}addTargetData(e,t){return this.Tn(t),this.targetCount+=1,ge.resolve()}updateTargetData(e,t){return this.Tn(t),ge.resolve()}removeTargetData(e,t){return this.Li.delete(t.target),this.qi.vi(t.targetId),this.targetCount-=1,ge.resolve()}removeTargets(e,t,r){let i=0;const u=[];return this.Li.forEach((c,h)=>{h.sequenceNumber<=t&&null===r.get(h.targetId)&&(this.Li.delete(c),u.push(this.removeMatchingKeysForTargetId(e,h.targetId)),i++)}),ge.waitFor(u).next(()=>i)}getTargetCount(e){return ge.resolve(this.targetCount)}getTargetData(e,t){const r=this.Li.get(t)||null;return ge.resolve(r)}addMatchingKeys(e,t,r){return this.qi.bi(t,r),ge.resolve()}removeMatchingKeys(e,t,r){this.qi.Vi(t,r);const i=this.persistence.referenceDelegate,u=[];return i&&t.forEach(c=>{u.push(i.markPotentiallyOrphaned(e,c))}),ge.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.qi.vi(t),ge.resolve()}getMatchingKeysForTargetId(e,t){const r=this.qi.Di(t);return ge.resolve(r)}containsKey(e,t){return ge.resolve(this.qi.containsKey(t))}}class bm{constructor(e,t){this.Gi={},this.overlays={},this.es=new Cs(0),this.ns=!1,this.ns=!0,this.referenceDelegate=e(this),this.fs=new uE(this),this.indexManager=new DD,this.ds=new zD(r=>this.referenceDelegate.Qi(r)),this.M=new Hv(t),this._s=new QI(this.M)}start(){return Promise.resolve()}shutdown(){return this.ns=!1,Promise.resolve()}get started(){return this.ns}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new gc,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Gi[e.toKey()];return r||(r=new oE(t,this.referenceDelegate),this.Gi[e.toKey()]=r),r}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getBundleCache(){return this._s}runTransaction(e,t,r){Be("MemoryPersistence","Starting transaction:",e);const i=new rR(this.es.next());return this.referenceDelegate.ji(),r(i).next(u=>this.referenceDelegate.Wi(i).next(()=>u)).toPromise().then(u=>(i.raiseOnCommittedEvent(),u))}zi(e,t){return ge.or(Object.values(this.Gi).map(r=>()=>r.containsKey(e,t)))}}class rR extends qf{constructor(e){super(),this.currentSequenceNumber=e}}class JI{constructor(e){this.persistence=e,this.Hi=new Cm,this.Ji=null}static Yi(e){return new JI(e)}get Xi(){if(this.Ji)return this.Ji;throw lt()}addReference(e,t,r){return this.Hi.addReference(r,t),this.Xi.delete(r.toString()),ge.resolve()}removeReference(e,t,r){return this.Hi.removeReference(r,t),this.Xi.add(r.toString()),ge.resolve()}markPotentiallyOrphaned(e,t){return this.Xi.add(t.toString()),ge.resolve()}removeTarget(e,t){this.Hi.vi(t.targetId).forEach(i=>this.Xi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(u=>this.Xi.add(u.toString()))}).next(()=>r.removeTargetData(e,t))}ji(){this.Ji=new Set}Wi(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ge.forEach(this.Xi,r=>{const i=Je.fromPath(r);return this.Zi(e,i).next(u=>{u||t.removeEntry(i,it.min())})}).next(()=>(this.Ji=null,t.apply(e)))}updateLimboDocument(e,t){return this.Zi(e,t).next(r=>{r?this.Xi.delete(t.toString()):this.Xi.add(t.toString())})}Qi(e){return 0}Zi(e,t){return ge.or([()=>ge.resolve(this.Hi.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.zi(e,t)])}}function GD(n,e){return`firestore_clients_${n}_${e}`}function qD(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function Tm(n,e){return`firestore_targets_${n}_${e}`}class Dm{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static tr(e,t,r){const i=JSON.parse(r);let u,c="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return c&&i.error&&(c="string"==typeof i.error.message&&"string"==typeof i.error.code,c&&(u=new Le(i.error.code,i.error.message))),c?new Dm(e,t,i.state,u):(Cr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}er(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class np{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static tr(e,t){const r=JSON.parse(t);let i,u="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return u&&r.error&&(u="string"==typeof r.error.message&&"string"==typeof r.error.code,u&&(i=new Le(r.error.code,r.error.message))),u?new np(e,r.state,i):(Cr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}er(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Sm{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static tr(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,u=Bf();for(let c=0;i&&c<r.activeTargetIds.length;++c)i=kd(r.activeTargetIds[c]),u=u.add(r.activeTargetIds[c]);return i?new Sm(e,u):(Cr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class lE{constructor(e,t){this.clientId=e,this.onlineState=t}static tr(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new lE(t.clientId,t.onlineState):(Cr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Am{constructor(){this.activeTargetIds=Bf()}nr(e){this.activeTargetIds=this.activeTargetIds.add(e)}sr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}er(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class xm{constructor(e,t,r,i,u){this.window=e,this.Yn=t,this.persistenceKey=r,this.ir=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.rr=this.ur.bind(this),this.ar=new cr(xt),this.started=!1,this.cr=[];const c=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=u,this.hr=GD(this.persistenceKey,this.ir),this.lr=`firestore_sequence_number_${this.persistenceKey}`,this.ar=this.ar.insert(this.ir,new Am),this.dr=new RegExp(`^firestore_clients_${c}_([^_]*)$`),this._r=new RegExp(`^firestore_mutations_${c}_(\\d+)(?:_(.*))?$`),this.wr=new RegExp(`^firestore_targets_${c}_(\\d+)$`),this.mr=`firestore_online_state_${this.persistenceKey}`,this.gr=function(h){return`firestore_bundle_loaded_v2_${h}`}(this.persistenceKey),this.window.addEventListener("storage",this.rr)}static vt(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,me.Z)(function*(){const t=yield e.syncEngine.Fs();for(const i of t){if(i===e.ir)continue;const u=e.getItem(GD(e.persistenceKey,i));if(u){const c=Sm.tr(i,u);c&&(e.ar=e.ar.insert(c.clientId,c))}}e.yr();const r=e.storage.getItem(e.mr);if(r){const i=e.pr(r);i&&e.Ir(i)}for(const i of e.cr)e.ur(i);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.lr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Tr(this.ar)}isActiveQueryTarget(e){let t=!1;return this.ar.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Er(e,"pending")}updateMutationState(e,t,r){this.Er(e,t,r),this.Ar(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(Tm(this.persistenceKey,e));if(r){const i=np.tr(e,r);i&&(t=i.state)}}return this.Rr.nr(e),this.yr(),t}removeLocalQueryTarget(e){this.Rr.sr(e),this.yr()}isLocalQueryTarget(e){return this.Rr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Tm(this.persistenceKey,e))}updateQueryState(e,t,r){this.br(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Ar(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Pr(e)}notifyBundleLoaded(e){this.Vr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.rr),this.removeItem(this.hr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Be("SharedClientState","READ",e,t),t}setItem(e,t){Be("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Be("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ur(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Be("SharedClientState","EVENT",r.key,r.newValue),r.key===this.hr)return void Cr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Yn.enqueueRetryable((0,me.Z)(function*(){if(t.started){if(null!==r.key)if(t.dr.test(r.key)){if(null==r.newValue){const i=t.vr(r.key);return t.Sr(i,null)}{const i=t.Dr(r.key,r.newValue);if(i)return t.Sr(i.clientId,i)}}else if(t._r.test(r.key)){if(null!==r.newValue){const i=t.Cr(r.key,r.newValue);if(i)return t.Nr(i)}}else if(t.wr.test(r.key)){if(null!==r.newValue){const i=t.kr(r.key,r.newValue);if(i)return t.Mr(i)}}else if(r.key===t.mr){if(null!==r.newValue){const i=t.pr(r.newValue);if(i)return t.Ir(i)}}else if(r.key===t.lr){const i=function(u){let c=Cs.A;if(null!=u)try{const h=JSON.parse(u);It("number"==typeof h),c=h}catch(h){Cr("SharedClientState","Failed to read sequence number from WebStorage",h)}return c}(r.newValue);i!==Cs.A&&t.sequenceNumberHandler(i)}else if(r.key===t.gr){const i=t.Or(r.newValue);yield Promise.all(i.map(u=>t.syncEngine.Fr(u)))}}else t.cr.push(r)}))}}get Rr(){return this.ar.get(this.ir)}yr(){this.setItem(this.hr,this.Rr.er())}Er(e,t,r){const i=new Dm(this.currentUser,e,t,r),u=qD(this.persistenceKey,this.currentUser,e);this.setItem(u,i.er())}Ar(e){const t=qD(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Pr(e){this.storage.setItem(this.mr,JSON.stringify({clientId:this.ir,onlineState:e}))}br(e,t,r){const i=Tm(this.persistenceKey,e),u=new np(e,t,r);this.setItem(i,u.er())}Vr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.gr,t)}vr(e){const t=this.dr.exec(e);return t?t[1]:null}Dr(e,t){const r=this.vr(e);return Sm.tr(r,t)}Cr(e,t){const r=this._r.exec(e),i=Number(r[1]);return Dm.tr(new li(void 0!==r[2]?r[2]:null),i,t)}kr(e,t){const r=this.wr.exec(e),i=Number(r[1]);return np.tr(i,t)}pr(e){return lE.tr(e)}Or(e){return JSON.parse(e)}Nr(e){var t=this;return(0,me.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.$r(e.batchId,e.state,e.error);Be("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Mr(e){return this.syncEngine.Br(e.targetId,e.state,e.error)}Sr(e,t){const r=t?this.ar.insert(e,t):this.ar.remove(e),i=this.Tr(this.ar),u=this.Tr(r),c=[],h=[];return u.forEach(_=>{i.has(_)||c.push(_)}),i.forEach(_=>{u.has(_)||h.push(_)}),this.syncEngine.Lr(c,h).then(()=>{this.ar=r})}Ir(e){this.ar.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Tr(e){let t=Bf();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class cE{constructor(){this.Ur=new Am,this.qr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Ur.nr(e),this.qr[e]||"not-current"}updateQueryState(e,t,r){this.qr[e]=t}removeLocalQueryTarget(e){this.Ur.sr(e)}isLocalQueryTarget(e){return this.Ur.activeTargetIds.has(e)}clearQueryState(e){delete this.qr[e]}getAllActiveQueryTargets(){return this.Ur.activeTargetIds}isActiveQueryTarget(e){return this.Ur.activeTargetIds.has(e)}start(){return this.Ur=new Am,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class KD{Kr(e){}shutdown(){}}class XI{constructor(){this.Gr=()=>this.Qr(),this.jr=()=>this.Wr(),this.zr=[],this.Hr()}Kr(e){this.zr.push(e)}shutdown(){window.removeEventListener("online",this.Gr),window.removeEventListener("offline",this.jr)}Hr(){window.addEventListener("online",this.Gr),window.addEventListener("offline",this.jr)}Qr(){Be("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.zr)e(0)}Wr(){Be("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.zr)e(1)}static vt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const eC={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class dE{constructor(e){this.Jr=e.Jr,this.Yr=e.Yr}Xr(e){this.Zr=e}eo(e){this.no=e}onMessage(e){this.so=e}close(){this.Yr()}send(e){this.Jr(e)}io(){this.Zr()}ro(e){this.no(e)}oo(e){this.so(e)}}class iR extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.uo=(e.ssl?"https":"http")+"://"+e.host,this.ao="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}co(e,t,r,i,u){const c=this.ho(e,t);Be("RestConnection","Sending: ",c,r);const h={};return this.lo(h,i,u),this.fo(e,c,h,r).then(_=>(Be("RestConnection","Received: ",_),_),_=>{throw Rd("RestConnection",`${e} failed with error: `,_,"url: ",c,"request:",r),_})}_o(e,t,r,i,u){return this.co(e,t,r,i,u)}lo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+xd,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,u)=>e[u]=i),r&&r.headers.forEach((i,u)=>e[u]=i)}ho(e,t){return`${this.uo}/v1/${t}:${eC[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,t,r,i){return new Promise((u,c)=>{const h=new LT;h.listenOnce(PT.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case Jy.NO_ERROR:const w=h.getResponseJson();Be("Connection","XHR received:",JSON.stringify(w)),u(w);break;case Jy.TIMEOUT:Be("Connection",'RPC "'+e+'" timed out'),c(new Le(pe.DEADLINE_EXCEEDED,"Request time out"));break;case Jy.HTTP_ERROR:const D=h.getStatus();if(Be("Connection",'RPC "'+e+'" failed with status:',D,"response text:",h.getResponseText()),D>0){const S=h.getResponseJson().error;if(S&&S.status&&S.message){const P=function(B){const Y=B.toLowerCase().replace(/_/g,"-");return Object.values(pe).indexOf(Y)>=0?Y:pe.UNKNOWN}(S.status);c(new Le(P,S.message))}else c(new Le(pe.UNKNOWN,"Server responded with status "+h.getStatus()))}else c(new Le(pe.UNAVAILABLE,"Connection failed."));break;default:lt()}}finally{Be("Connection",'RPC "'+e+'" completed.')}});const _=JSON.stringify(i);h.send(t,"POST",_,r,15)})}wo(e,t,r){const i=[this.uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=MT(),c=NT(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(h.xmlHttpFactory=new OT({})),this.lo(h.initMessageHeaders,t,r),(0,Q.uI)()||(0,Q.b$)()||(0,Q.d)()||(0,Q.w1)()||(0,Q.Mn)()||(0,Q.ru)()||(h.httpHeadersOverwriteParam="$httpHeaders");const _=i.join("");Be("Connection","Creating WebChannel: "+_,h);const w=u.createWebChannel(_,h);let D=!1,S=!1;const P=new dE({Jr:Y=>{S?Be("Connection","Not sending because WebChannel is closed:",Y):(D||(Be("Connection","Opening WebChannel transport."),w.open(),D=!0),Be("Connection","WebChannel sending:",Y),w.send(Y))},Yr:()=>w.close()}),B=(Y,xe,Ke)=>{Y.listen(xe,Gt=>{try{Ke(Gt)}catch(Wt){setTimeout(()=>{throw Wt},0)}})};return B(w,zg.EventType.OPEN,()=>{S||Be("Connection","WebChannel transport opened.")}),B(w,zg.EventType.CLOSE,()=>{S||(S=!0,Be("Connection","WebChannel transport closed"),P.ro())}),B(w,zg.EventType.ERROR,Y=>{S||(S=!0,Rd("Connection","WebChannel transport errored:",Y),P.ro(new Le(pe.UNAVAILABLE,"The operation could not be completed")))}),B(w,zg.EventType.MESSAGE,Y=>{var xe;if(!S){const Ke=Y.data[0];It(!!Ke);const Gt=Ke,Wt=Gt.error||(null===(xe=Gt[0])||void 0===xe?void 0:xe.error);if(Wt){Be("Connection","WebChannel received error:",Wt);const Kt=Wt.status;let Ot=function(In){const ns=Rr[In];if(void 0!==ns)return II(ns)}(Kt),rn=Wt.message;void 0===Ot&&(Ot=pe.INTERNAL,rn="Unknown error status: "+Kt+" with message "+Wt.message),S=!0,P.ro(new Le(Ot,rn)),w.close()}else Be("Connection","WebChannel received:",Ke),P.oo(Ke)}}),B(c,kT.STAT_EVENT,Y=>{Y.stat===zw.PROXY?Be("Connection","Detected buffering proxy"):Y.stat===zw.NOPROXY&&Be("Connection","Detected no buffering proxy")}),setTimeout(()=>{P.io()},0),P}}function hE(){return"undefined"!=typeof window?window:null}function nh(){return"undefined"!=typeof document?document:null}function rp(n){return new pa(n,!0)}class fE{constructor(e,t,r=1e3,i=1.5,u=6e4){this.Yn=e,this.timerId=t,this.mo=r,this.yo=i,this.po=u,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const t=Math.floor(this.Io+this.bo()),r=Math.max(0,Date.now()-this.Eo),i=Math.max(0,t-r);i>0&&Be("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Io} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.To=this.Yn.enqueueAfterDelay(this.timerId,i,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class ZD{constructor(e,t,r,i,u,c,h,_){this.Yn=e,this.Vo=r,this.vo=i,this.So=u,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=h,this.listener=_,this.state=0,this.Do=0,this.Co=null,this.xo=null,this.stream=null,this.No=new fE(e,t)}ko(){return 1===this.state||5===this.state||this.Mo()}Mo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}stop(){var e=this;return(0,me.Z)(function*(){e.ko()&&(yield e.close(0))})()}Fo(){this.state=0,this.No.reset()}$o(){this.Mo()&&null===this.Co&&(this.Co=this.Yn.enqueueAfterDelay(this.Vo,6e4,()=>this.Bo()))}Lo(e){this.Uo(),this.stream.send(e)}Bo(){var e=this;return(0,me.Z)(function*(){if(e.Mo())return e.close(0)})()}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}qo(){this.xo&&(this.xo.cancel(),this.xo=null)}close(e,t){var r=this;return(0,me.Z)(function*(){r.Uo(),r.qo(),r.No.cancel(),r.Do++,4!==e?r.No.reset():t&&t.code===pe.RESOURCE_EXHAUSTED?(Cr(t.toString()),Cr("Using maximum backoff delay to prevent overloading the backend."),r.No.Ao()):t&&t.code===pe.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Ko(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.eo(t)})()}Ko(){}auth(){this.state=1;const e=this.Go(this.Do),t=this.Do;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Do===t&&this.Qo(r,i)},r=>{e(()=>{const i=new Le(pe.UNKNOWN,"Fetching auth token failed: "+r.message);return this.jo(i)})})}Qo(e,t){const r=this.Go(this.Do);this.stream=this.Wo(e,t),this.stream.Xr(()=>{r(()=>(this.state=2,this.xo=this.Yn.enqueueAfterDelay(this.vo,1e4,()=>(this.Mo()&&(this.state=3),Promise.resolve())),this.listener.Xr()))}),this.stream.eo(i=>{r(()=>this.jo(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Oo(){var e=this;this.state=5,this.No.Ro((0,me.Z)(function*(){e.state=0,e.start()}))}jo(e){return Be("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Go(e){return t=>{this.Yn.enqueueAndForget(()=>this.Do===e?t():(Be("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class sR extends ZD{constructor(e,t,r,i,u,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,c),this.M=u}Wo(e,t){return this.So.wo("Listen",e,t)}onMessage(e){this.No.reset();const t=function lD(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(_=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===_?1:"REMOVE"===_?2:"CURRENT"===_?3:"RESET"===_?4:lt(),i=e.targetChange.targetIds||[],u=function(_,w){return _.N?(It(void 0===w||"string"==typeof w),Br.fromBase64String(w||"")):(It(void 0===w||w instanceof Uint8Array),Br.fromUint8Array(w||new Uint8Array))}(n,e.targetChange.resumeToken),c=e.targetChange.cause,h=c&&function(_){const w=void 0===_.code?pe.UNKNOWN:II(_.code);return new Le(w,_.message||"")}(c);t=new DI(r,i,u,h||null)}else if("documentChange"in e){const r=e.documentChange,i=bs(n,r.document.name),u=Jr(r.document.updateTime),c=new wi({mapValue:{fields:r.document.fields}}),h=Wn.newFoundDocument(i,u,c);t=new rm(r.targetIds||[],r.removedTargetIds||[],h.key,h)}else if("documentDelete"in e){const r=e.documentDelete,i=bs(n,r.document),u=r.readTime?Jr(r.readTime):it.min(),c=Wn.newNoDocument(i,u);t=new rm([],r.removedTargetIds||[],c.key,c)}else if("documentRemove"in e){const r=e.documentRemove,i=bs(n,r.document);t=new rm([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return lt();{const r=e.filter,u=new wv(r.count||0);t=new TI(r.targetId,u)}}var _;return t}(this.M,e),r=function(i){if(!("targetChange"in i))return it.min();const u=i.targetChange;return u.targetIds&&u.targetIds.length?it.min():u.readTime?Jr(u.readTime):it.min()}(e);return this.listener.zo(t,r)}Ho(e){const t={};t.database=qd(this.M),t.addTarget=function(i,u){let c;const h=u.target;return c=Nf(h)?{documents:xv(i,h)}:{query:am(i,h)},c.targetId=u.targetId,u.resumeToken.approximateByteSize()>0?c.resumeToken=im(i,u.resumeToken):u.snapshotVersion.compareTo(it.min())>0&&(c.readTime=$f(i,u.snapshotVersion.toTimestamp())),c}(this.M,e);const r=function cD(n,e){const t=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return lt()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Lo(t)}Jo(e){const t={};t.database=qd(this.M),t.removeTarget=e,this.Lo(t)}}class YD extends ZD{constructor(e,t,r,i,u,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,c),this.M=u,this.Yo=!1}get Xo(){return this.Yo}start(){this.Yo=!1,this.lastStreamToken=void 0,super.start()}Ko(){this.Yo&&this.Zo([])}Wo(e,t){return this.So.wo("Write",e,t)}onMessage(e){if(It(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Yo){this.No.reset();const t=function Av(n,e){return n&&n.length>0?(It(void 0!==e),n.map(t=>function(r,i){let u=Jr(r.updateTime?r.updateTime:i);return u.isEqual(it.min())&&(u=Jr(i)),new tD(u,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Jr(e.commitTime);return this.listener.tu(r,t)}return It(!e.writeResults||0===e.writeResults.length),this.Yo=!0,this.listener.eu()}nu(){const e={};e.database=qd(this.M),this.Lo(e)}Zo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>om(this.M,r))};this.Lo(t)}}class QD extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.So=r,this.M=i,this.su=!1}iu(){if(this.su)throw new Le(pe.FAILED_PRECONDITION,"The client has already been terminated.")}co(e,t,r){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,u])=>this.So.co(e,t,r,i,u)).catch(i=>{throw"FirebaseError"===i.name?(i.code===pe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Le(pe.UNKNOWN,i.toString())})}_o(e,t,r){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,u])=>this.So._o(e,t,r,i,u)).catch(i=>{throw"FirebaseError"===i.name?(i.code===pe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Le(pe.UNKNOWN,i.toString())})}terminate(){this.su=!0}}class oR{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.ru=0,this.ou=null,this.uu=!0}au(){0===this.ru&&(this.cu("Unknown"),this.ou=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ou=null,this.hu("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}lu(e){"Online"===this.state?this.cu("Unknown"):(this.ru++,this.ru>=1&&(this.fu(),this.hu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.fu(),this.ru=0,"Online"===e&&(this.uu=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}hu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.uu?(Cr(t),this.uu=!1):Be("OnlineStateTracker",t)}fu(){null!==this.ou&&(this.ou.cancel(),this.ou=null)}}class aR{constructor(e,t,r,i,u){var c=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.du=[],this._u=new Map,this.wu=new Set,this.mu=[],this.gu=u,this.gu.Kr(h=>{r.enqueueAndForget((0,me.Z)(function*(){var _;a(c)&&(Be("RemoteStore","Restarting streams for network reachability change."),yield(_=(0,me.Z)(function*(w){const D=tt(w);D.wu.add(4),yield ip(D),D.yu.set("Unknown"),D.wu.delete(4),yield Rm(D)}),function(w){return _.apply(this,arguments)})(c))}))}),this.yu=new oR(r,i)}}function Rm(n){return tC.apply(this,arguments)}function tC(){return tC=(0,me.Z)(function*(n){if(a(n))for(const e of n.mu)yield e(!0)}),tC.apply(this,arguments)}function ip(n){return pE.apply(this,arguments)}function pE(){return pE=(0,me.Z)(function*(n){for(const e of n.mu)yield e(!1)}),pE.apply(this,arguments)}function gE(n,e){const t=tt(n);t._u.has(e.targetId)||(t._u.set(e.targetId,e),o(t)?s(t):il(t).Mo()&&nC(t,e))}function Mm(n,e){const t=tt(n),r=il(t);t._u.delete(e),r.Mo()&&JD(t,e),0===t._u.size&&(r.Mo()?r.$o():a(t)&&t.yu.set("Unknown"))}function nC(n,e){n.pu.Z(e.targetId),il(n).Ho(e)}function JD(n,e){n.pu.Z(e),il(n).Jo(e)}function s(n){n.pu=new oD({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n._u.get(e)||null}),il(n).start(),n.yu.au()}function o(n){return a(n)&&!il(n).ko()&&n._u.size>0}function a(n){return 0===tt(n).wu.size}function l(n){n.pu=void 0}function d(n){return f.apply(this,arguments)}function f(){return f=(0,me.Z)(function*(n){n._u.forEach((e,t)=>{nC(n,e)})}),f.apply(this,arguments)}function y(n,e){return E.apply(this,arguments)}function E(){return E=(0,me.Z)(function*(n,e){l(n),o(n)?(n.yu.lu(e),s(n)):n.yu.set("Unknown")}),E.apply(this,arguments)}function C(n,e,t){return A.apply(this,arguments)}function A(){return A=(0,me.Z)(function*(n,e,t){if(n.yu.set("Online"),e instanceof DI&&2===e.state&&e.cause)try{yield(r=(0,me.Z)(function*(i,u){const c=u.cause;for(const h of u.targetIds)i._u.has(h)&&(yield i.remoteSyncer.rejectListen(h,c),i._u.delete(h),i.pu.removeTarget(h))}),function(i,u){return r.apply(this,arguments)})(n,e)}catch(r){Be("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield R(n,r)}else if(e instanceof rm?n.pu.ut(e):e instanceof TI?n.pu._t(e):n.pu.ht(e),!t.isEqual(it.min()))try{const r=yield UD(n.localStore);t.compareTo(r)>=0&&(yield function(i,u){const c=i.pu.yt(u);return c.targetChanges.forEach((h,_)=>{if(h.resumeToken.approximateByteSize()>0){const w=i._u.get(_);w&&i._u.set(_,w.withResumeToken(h.resumeToken,u))}}),c.targetMismatches.forEach(h=>{const _=i._u.get(h);if(!_)return;i._u.set(h,_.withResumeToken(Br.EMPTY_BYTE_STRING,_.snapshotVersion)),JD(i,h);const w=new el(_.target,h,1,_.sequenceNumber);nC(i,w)}),i.remoteSyncer.applyRemoteEvent(c)}(n,t))}catch(r){Be("RemoteStore","Failed to raise snapshot:",r),yield R(n,r)}var r}),A.apply(this,arguments)}function R(n,e,t){return L.apply(this,arguments)}function L(){return L=(0,me.Z)(function*(n,e,t){if(!oc(e))throw e;n.wu.add(1),yield ip(n),n.yu.set("Offline"),t||(t=()=>UD(n.localStore)),n.asyncQueue.enqueueRetryable((0,me.Z)(function*(){Be("RemoteStore","Retrying IndexedDB access"),yield t(),n.wu.delete(1),yield Rm(n)}))}),L.apply(this,arguments)}function H(n,e){return e().catch(t=>R(n,t,e))}function ee(n){return Ie.apply(this,arguments)}function Ie(){return Ie=(0,me.Z)(function*(n){const e=tt(n),t=ma(e);let r=e.du.length>0?e.du[e.du.length-1].batchId:-1;for(;$e(e);)try{const i=yield VD(e.localStore,r);if(null===i){0===e.du.length&&t.$o();break}r=i.batchId,Qe(e,i)}catch(i){yield R(e,i)}ut(e)&&Me(e)}),Ie.apply(this,arguments)}function $e(n){return a(n)&&n.du.length<10}function Qe(n,e){n.du.push(e);const t=ma(n);t.Mo()&&t.Xo&&t.Zo(e.mutations)}function ut(n){return a(n)&&!ma(n).ko()&&n.du.length>0}function Me(n){ma(n).start()}function yt(n){return qt.apply(this,arguments)}function qt(){return qt=(0,me.Z)(function*(n){ma(n).nu()}),qt.apply(this,arguments)}function vn(n){return Fi.apply(this,arguments)}function Fi(){return Fi=(0,me.Z)(function*(n){const e=ma(n);for(const t of n.du)e.Zo(t.mutations)}),Fi.apply(this,arguments)}function mc(n,e,t){return sp.apply(this,arguments)}function sp(){return sp=(0,me.Z)(function*(n,e,t){const r=n.du.shift(),i=$v.from(r,e,t);yield H(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield ee(n)}),sp.apply(this,arguments)}function mE(n,e){return op.apply(this,arguments)}function op(){return op=(0,me.Z)(function*(n,e){var t;e&&ma(n).Xo&&(yield(t=(0,me.Z)(function*(r,i){if(wI(u=i.code)&&u!==pe.ABORTED){const c=r.du.shift();ma(r).Fo(),yield H(r,()=>r.remoteSyncer.rejectFailedWrite(c.batchId,i)),yield ee(r)}var u}),function(r,i){return t.apply(this,arguments)})(n,e)),ut(n)&&Me(n)}),op.apply(this,arguments)}function Nm(n,e){return ap.apply(this,arguments)}function ap(){return ap=(0,me.Z)(function*(n,e){const t=tt(n);t.asyncQueue.verifyOperationInProgress(),Be("RemoteStore","RemoteStore received new credentials");const r=a(t);t.wu.add(3),yield ip(t),r&&t.yu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.wu.delete(3),yield Rm(t)}),ap.apply(this,arguments)}function up(n,e){return lp.apply(this,arguments)}function lp(){return lp=(0,me.Z)(function*(n,e){const t=tt(n);e?(t.wu.delete(2),yield Rm(t)):e||(t.wu.add(2),yield ip(t),t.yu.set("Unknown"))}),lp.apply(this,arguments)}function il(n){return n.Iu||(n.Iu=function(e,t,r){const i=tt(e);return i.iu(),new sR(t,i.So,i.authCredentials,i.appCheckCredentials,i.M,r)}(n.datastore,n.asyncQueue,{Xr:d.bind(null,n),eo:y.bind(null,n),zo:C.bind(null,n)}),n.mu.push(function(){var e=(0,me.Z)(function*(t){t?(n.Iu.Fo(),o(n)?s(n):n.yu.set("Unknown")):(yield n.Iu.stop(),l(n))});return function(t){return e.apply(this,arguments)}}())),n.Iu}function ma(n){return n.Tu||(n.Tu=function(e,t,r){const i=tt(e);return i.iu(),new YD(t,i.So,i.authCredentials,i.appCheckCredentials,i.M,r)}(n.datastore,n.asyncQueue,{Xr:yt.bind(null,n),eo:mE.bind(null,n),eu:vn.bind(null,n),tu:mc.bind(null,n)}),n.mu.push(function(){var e=(0,me.Z)(function*(t){t?(n.Tu.Fo(),yield ee(n)):(yield n.Tu.stop(),n.du.length>0&&(Be("RemoteStore",`Stopping write stream with ${n.du.length} pending writes`),n.du=[]))});return function(t){return e.apply(this,arguments)}}())),n.Tu}class XD{constructor(e,t,r,i,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=u,this.deferred=new Qr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}static createAndSchedule(e,t,r,i,u){const c=Date.now()+r,h=new XD(e,t,c,i,u);return h.start(r),h}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Le(pe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Pm(n,e){if(Cr("AsyncQueue",`${e}: ${n}`),oc(n))return new Le(pe.UNAVAILABLE,`${e}: ${n}`);throw n}class km{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Je.comparator(t.key,r.key):(t,r)=>Je.comparator(t.key,r.key),this.keyedMap=Iv(),this.sortedSet=new cr(this.comparator)}static emptySet(e){return new km(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof km)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,u=r.getNext().key;if(!i.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new km;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class uR{constructor(){this.Eu=new cr(Je.comparator)}track(e){const t=e.doc.key,r=this.Eu.get(t);r?0!==e.type&&3===r.type?this.Eu=this.Eu.insert(t,e):3===e.type&&1!==r.type?this.Eu=this.Eu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Eu=this.Eu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Eu=this.Eu.remove(t):1===e.type&&2===r.type?this.Eu=this.Eu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):lt():this.Eu=this.Eu.insert(t,e)}Au(){const e=[];return this.Eu.inorderTraversal((t,r)=>{e.push(r)}),e}}class Om{constructor(e,t,r,i,u,c,h,_){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=u,this.fromCache=c,this.syncStateChanged=h,this.excludesMetadataChanges=_}static fromInitialDocuments(e,t,r,i){const u=[];return t.forEach(c=>{u.push({type:0,doc:c})}),new Om(e,t,km.emptySet(t),u,r,i,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&kf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class MP{constructor(){this.Ru=void 0,this.listeners=[]}}class NP{constructor(){this.queries=new Yu(e=>fv(e),kf),this.onlineState="Unknown",this.bu=new Set}}function eS(n,e){return tS.apply(this,arguments)}function tS(){return tS=(0,me.Z)(function*(n,e){const t=tt(n),r=e.query;let i=!1,u=t.queries.get(r);if(u||(i=!0,u=new MP),i)try{u.Ru=yield t.onListen(r)}catch(c){const h=Pm(c,`Initialization of query '${gI(e.query)}' failed`);return void e.onError(h)}t.queries.set(r,u),u.listeners.push(e),e.Pu(t.onlineState),u.Ru&&e.Vu(u.Ru)&&iS(t)}),tS.apply(this,arguments)}function nS(n,e){return rS.apply(this,arguments)}function rS(){return rS=(0,me.Z)(function*(n,e){const t=tt(n),r=e.query;let i=!1;const u=t.queries.get(r);if(u){const c=u.listeners.indexOf(e);c>=0&&(u.listeners.splice(c,1),i=0===u.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),rS.apply(this,arguments)}function PP(n,e){const t=tt(n);let r=!1;for(const i of e){const c=t.queries.get(i.query);if(c){for(const h of c.listeners)h.Vu(i)&&(r=!0);c.Ru=i}}r&&iS(t)}function kP(n,e,t){const r=tt(n),i=r.queries.get(e);if(i)for(const u of i.listeners)u.onError(t);r.queries.delete(e)}function iS(n){n.bu.forEach(e=>{e.next()})}class sS{constructor(e,t,r){this.query=e,this.vu=t,this.Su=!1,this.Du=null,this.onlineState="Unknown",this.options=r||{}}Vu(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new Om(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.Su?this.Cu(e)&&(this.vu.next(e),t=!0):this.xu(e,this.onlineState)&&(this.Nu(e),t=!0),this.Du=e,t}onError(e){this.vu.error(e)}Pu(e){this.onlineState=e;let t=!1;return this.Du&&!this.Su&&this.xu(this.Du,e)&&(this.Nu(this.Du),t=!0),t}xu(e,t){return!e.fromCache||!(this.options.ku&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}Cu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Du&&this.Du.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Nu(e){e=Om.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.Su=!0,this.vu.next(e)}}class OP{constructor(e,t){this.payload=e,this.byteLength=t}Mu(){return"metadata"in this.payload}}class lR{constructor(e){this.M=e}wi(e){return bs(this.M,e)}mi(e){return e.metadata.exists?Sv(this.M,e.document,!1):Wn.newNoDocument(this.wi(e.metadata.name),this.gi(e.metadata.readTime))}gi(e){return Jr(e)}}class LP{constructor(e,t,r){this.Ou=e,this.localStore=t,this.M=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=cR(e)}Fu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const r=sn.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}$u(e){const t=new Map,r=new lR(this.M);for(const i of e)if(i.metadata.queries){const u=r.wi(i.metadata.name);for(const c of i.metadata.queries){const h=(t.get(c)||mn()).add(u);t.set(c,h)}}return t}complete(){var e=this;return(0,me.Z)(function*(){const t=yield function HD(n,e,t,r){return th.apply(this,arguments)}(e.localStore,new lR(e.M),e.documents,e.Ou.id),r=e.$u(e.documents);for(const i of e.queries)yield WD(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Bu:e.collectionGroups,Lu:t}})()}}function cR(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class dR{constructor(e){this.key=e}}class hR{constructor(e){this.key=e}}class fR{constructor(e,t){this.query=e,this.Uu=t,this.qu=null,this.current=!1,this.Ku=mn(),this.mutatedKeys=mn(),this.Gu=mI(e),this.Qu=new km(this.Gu)}get ju(){return this.Uu}Wu(e,t){const r=t?t.zu:new uR,i=t?t.Qu:this.Qu;let u=t?t.mutatedKeys:this.mutatedKeys,c=i,h=!1;const _="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,w="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((D,S)=>{const P=i.get(D),B=pv(this.query,S)?S:null,Y=!!P&&this.mutatedKeys.has(P.key),xe=!!B&&(B.hasLocalMutations||this.mutatedKeys.has(B.key)&&B.hasCommittedMutations);let Ke=!1;P&&B?P.data.isEqual(B.data)?Y!==xe&&(r.track({type:3,doc:B}),Ke=!0):this.Hu(P,B)||(r.track({type:2,doc:B}),Ke=!0,(_&&this.Gu(B,_)>0||w&&this.Gu(B,w)<0)&&(h=!0)):!P&&B?(r.track({type:0,doc:B}),Ke=!0):P&&!B&&(r.track({type:1,doc:P}),Ke=!0,(_||w)&&(h=!0)),Ke&&(B?(c=c.add(B),u=xe?u.add(D):u.delete(D)):(c=c.delete(D),u=u.delete(D)))}),null!==this.query.limit)for(;c.size>this.query.limit;){const D="F"===this.query.limitType?c.last():c.first();c=c.delete(D.key),u=u.delete(D.key),r.track({type:1,doc:D})}return{Qu:c,zu:r,ii:h,mutatedKeys:u}}Hu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const u=e.zu.Au();u.sort((w,D)=>function(S,P){const B=Y=>{switch(Y){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return lt()}};return B(S)-B(P)}(w.type,D.type)||this.Gu(w.doc,D.doc)),this.Ju(r);const c=t?this.Yu():[],h=0===this.Ku.size&&this.current?1:0,_=h!==this.qu;return this.qu=h,0!==u.length||_?{snapshot:new Om(this.query,e.Qu,i,u,e.mutatedKeys,0===h,_,!1),Xu:c}:{Xu:c}}Pu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new uR,mutatedKeys:this.mutatedKeys,ii:!1},!1)):{Xu:[]}}Zu(e){return!this.Uu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(t=>this.Uu=this.Uu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Uu=this.Uu.delete(t)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=mn(),this.Qu.forEach(r=>{this.Zu(r.key)&&(this.Ku=this.Ku.add(r.key))});const t=[];return e.forEach(r=>{this.Ku.has(r)||t.push(new hR(r))}),this.Ku.forEach(r=>{e.has(r)||t.push(new dR(r))}),t}ta(e){this.Uu=e._i,this.Ku=mn();const t=this.Wu(e.documents);return this.applyChanges(t,!0)}ea(){return Om.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.qu)}}class FP{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class UP{constructor(e){this.key=e,this.na=!1}}class VP{constructor(e,t,r,i,u,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=u,this.maxConcurrentLimboResolutions=c,this.sa={},this.ia=new Yu(h=>fv(h),kf),this.ra=new Map,this.oa=new Set,this.ua=new cr(Je.comparator),this.aa=new Map,this.ca=new Cm,this.ha={},this.la=new Map,this.fa=dc.yn(),this.onlineState="Unknown",this.da=void 0}get isPrimaryClient(){return!0===this.da}}function BP(n,e){return oS.apply(this,arguments)}function oS(){return oS=(0,me.Z)(function*(n,e){const t=xS(n);let r,i;const u=t.ia.get(e);if(u)r=u.targetId,t.sharedClientState.addLocalQueryTarget(r),i=u.view.ea();else{const c=yield Xd(t.localStore,Zs(e));t.isPrimaryClient&&gE(t.remoteStore,c);const h=t.sharedClientState.addLocalQueryTarget(c.targetId);r=c.targetId,i=yield aS(t,e,r,"current"===h)}return i}),oS.apply(this,arguments)}function aS(n,e,t,r){return uS.apply(this,arguments)}function uS(){return uS=(0,me.Z)(function*(n,e,t,r){n._a=(D,S,P)=>{return(B=(0,me.Z)(function*(Y,xe,Ke,Gt){let Wt=xe.view.Wu(Ke);Wt.ii&&(Wt=yield iE(Y.localStore,xe.query,!1).then(({documents:rn})=>xe.view.Wu(rn,Wt)));const Kt=Gt&&Gt.targetChanges.get(xe.targetId),Ot=xe.view.applyChanges(Wt,Y.isPrimaryClient,Kt);return yS(Y,xe.targetId,Ot.Xu),Ot.snapshot}),function(Y,xe,Ke,Gt){return B.apply(this,arguments)})(n,D,S,P);var B};const i=yield iE(n.localStore,e,!0),u=new fR(e,i._i),c=u.Wu(i.documents),h=jf.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),_=u.applyChanges(c,n.isPrimaryClient,h);yS(n,t,_.Xu);const w=new FP(e,t,u);return n.ia.set(e,w),n.ra.has(t)?n.ra.get(t).push(e):n.ra.set(t,[e]),_.snapshot}),uS.apply(this,arguments)}function jP(n,e){return lS.apply(this,arguments)}function lS(){return lS=(0,me.Z)(function*(n,e){const t=tt(n),r=t.ia.get(e),i=t.ra.get(r.targetId);if(i.length>1)return t.ra.set(r.targetId,i.filter(u=>!kf(u,e))),void t.ia.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield eh(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),Mm(t.remoteStore,r.targetId),Lm(t,r.targetId)}).catch(hc))):(Lm(t,r.targetId),yield eh(t.localStore,r.targetId,!0))}),lS.apply(this,arguments)}function cS(){return cS=(0,me.Z)(function*(n,e,t){const r=RS(n);try{const i=yield function(u,c){const h=tt(u),_=Qn.now(),w=c.reduce((S,P)=>S.add(P.key),mn());let D;return h.persistence.runTransaction("Locally write mutations","readwrite",S=>h.fi.Ks(S,w).next(P=>{D=P;const B=[];for(const Y of c){const xe=Wd(Y,D.get(Y.key));null!=xe&&B.push(new Zu(Y.key,xe,oI(xe.value.mapValue),dr.exists(!0)))}return h.Bs.addMutationBatch(S,_,B,c)})).then(S=>(S.applyToLocalDocumentSet(D),{batchId:S.batchId,changes:D}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(u,c,h){let _=u.ha[u.currentUser.toKey()];_||(_=new cr(xt)),_=_.insert(c,h),u.ha[u.currentUser.toKey()]=_}(r,i.batchId,t),yield _c(r,i.changes),yield ee(r.remoteStore)}catch(i){const u=Pm(i,"Failed to persist write");t.reject(u)}}),cS.apply(this,arguments)}function pR(n,e){return dS.apply(this,arguments)}function dS(){return dS=(0,me.Z)(function*(n,e){const t=tt(n);try{const r=yield nR(t.localStore,e);e.targetChanges.forEach((i,u)=>{const c=t.aa.get(u);c&&(It(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?c.na=!0:i.modifiedDocuments.size>0?It(c.na):i.removedDocuments.size>0&&(It(c.na),c.na=!1))}),yield _c(t,r,e)}catch(r){yield hc(r)}}),dS.apply(this,arguments)}function gR(n,e,t){const r=tt(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.ia.forEach((u,c)=>{const h=c.view.Pu(e);h.snapshot&&i.push(h.snapshot)}),function(u,c){const h=tt(u);h.onlineState=c;let _=!1;h.queries.forEach((w,D)=>{for(const S of D.listeners)S.Pu(c)&&(_=!0)}),_&&iS(h)}(r.eventManager,e),i.length&&r.sa.zo(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function HP(n,e,t){return hS.apply(this,arguments)}function hS(){return hS=(0,me.Z)(function*(n,e,t){const r=tt(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.aa.get(e),u=i&&i.key;if(u){let c=new cr(Je.comparator);c=c.insert(u,Wn.newNoDocument(u,it.min()));const h=mn().add(u),_=new zd(it.min(),new Map,new kn(xt),c,h);yield pR(r,_),r.ua=r.ua.remove(u),r.aa.delete(e),vS(r)}else yield eh(r.localStore,e,!1).then(()=>Lm(r,e,t)).catch(hc)}),hS.apply(this,arguments)}function WP(n,e){return fS.apply(this,arguments)}function fS(){return fS=(0,me.Z)(function*(n,e){const t=tt(n),r=e.batch.batchId;try{const i=yield FD(t.localStore,e);_S(t,r,null),mS(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield _c(t,i)}catch(i){yield hc(i)}}),fS.apply(this,arguments)}function zP(n,e,t){return pS.apply(this,arguments)}function pS(){return pS=(0,me.Z)(function*(n,e,t){const r=tt(n);try{const i=yield function(u,c){const h=tt(u);return h.persistence.runTransaction("Reject batch","readwrite-primary",_=>{let w;return h.Bs.lookupMutationBatch(_,c).next(D=>(It(null!==D),w=D.keys(),h.Bs.removeMutationBatch(_,D))).next(()=>h.Bs.performConsistencyCheck(_)).next(()=>h.fi.Ks(_,w))})}(r.localStore,e);_S(r,e,t),mS(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield _c(r,i)}catch(i){yield hc(i)}}),pS.apply(this,arguments)}function gS(){return gS=(0,me.Z)(function*(n,e){const t=tt(n);a(t.remoteStore)||Be("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(u){const c=tt(u);return c.persistence.runTransaction("Get highest unacknowledged batch id","readonly",h=>c.Bs.getHighestUnacknowledgedBatchId(h))}(t.localStore);if(-1===r)return void e.resolve();const i=t.la.get(r)||[];i.push(e),t.la.set(r,i)}catch(r){const i=Pm(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),gS.apply(this,arguments)}function mS(n,e){(n.la.get(e)||[]).forEach(t=>{t.resolve()}),n.la.delete(e)}function _S(n,e,t){const r=tt(n);let i=r.ha[r.currentUser.toKey()];if(i){const u=i.get(e);u&&(t?u.reject(t):u.resolve(),i=i.remove(e)),r.ha[r.currentUser.toKey()]=i}}function Lm(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.ra.get(e))n.ia.delete(r),t&&n.sa.wa(r,t);n.ra.delete(e),n.isPrimaryClient&&n.ca.vi(e).forEach(r=>{n.ca.containsKey(r)||mR(n,r)})}function mR(n,e){n.oa.delete(e.path.canonicalString());const t=n.ua.get(e);null!==t&&(Mm(n.remoteStore,t),n.ua=n.ua.remove(e),n.aa.delete(t),vS(n))}function yS(n,e,t){for(const r of t)r instanceof dR?(n.ca.addReference(r.key,e),qP(n,r)):r instanceof hR?(Be("SyncEngine","Document no longer in limbo: "+r.key),n.ca.removeReference(r.key,e),n.ca.containsKey(r.key)||mR(n,r.key)):lt()}function qP(n,e){const t=e.key,r=t.path.canonicalString();n.ua.get(t)||n.oa.has(r)||(Be("SyncEngine","New document in limbo: "+t),n.oa.add(r),vS(n))}function vS(n){for(;n.oa.size>0&&n.ua.size<n.maxConcurrentLimboResolutions;){const e=n.oa.values().next().value;n.oa.delete(e);const t=new Je(sn.fromString(e)),r=n.fa.next();n.aa.set(r,new UP(t)),n.ua=n.ua.insert(t,r),gE(n.remoteStore,new el(Zs(qu(t.path)),r,2,Cs.A))}}function _c(n,e,t){return ES.apply(this,arguments)}function ES(){return ES=(0,me.Z)(function*(n,e,t){const r=tt(n),i=[],u=[],c=[];var h;r.ia.isEmpty()||(r.ia.forEach((h,_)=>{c.push(r._a(_,e,t).then(w=>{if(w){r.isPrimaryClient&&r.sharedClientState.updateQueryState(_.targetId,w.fromCache?"not-current":"current"),i.push(w);const D=tp.Ys(_.targetId,w);u.push(D)}}))}),yield Promise.all(c),r.sa.zo(i),yield(h=(0,me.Z)(function*(_,w){const D=tt(_);try{yield D.persistence.runTransaction("notifyLocalViewChanges","readwrite",S=>ge.forEach(w,P=>ge.forEach(P.Hs,B=>D.persistence.referenceDelegate.addReference(S,P.targetId,B)).next(()=>ge.forEach(P.Js,B=>D.persistence.referenceDelegate.removeReference(S,P.targetId,B)))))}catch(S){if(!oc(S))throw S;Be("LocalStore","Failed to update sequence numbers: "+S)}for(const S of w){const P=S.targetId;if(!S.fromCache){const B=D.ui.get(P),xe=B.withLastLimboFreeSnapshotVersion(B.snapshotVersion);D.ui=D.ui.insert(P,xe)}}}),function(_,w){return h.apply(this,arguments)})(r.localStore,u))}),ES.apply(this,arguments)}function KP(n,e){return wS.apply(this,arguments)}function wS(){return wS=(0,me.Z)(function*(n,e){const t=tt(n);if(!t.currentUser.isEqual(e)){Be("SyncEngine","User change. New user:",e.toKey());const r=yield tE(t.localStore,e);t.currentUser=e,(i=t).la.forEach(c=>{c.forEach(h=>{h.reject(new Le(pe.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.la.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield _c(t,r.di)}var i}),wS.apply(this,arguments)}function ZP(n,e){const t=tt(n),r=t.aa.get(e);if(r&&r.na)return mn().add(r.key);{let i=mn();const u=t.ra.get(e);if(!u)return i;for(const c of u){const h=t.ia.get(c);i=i.unionWith(h.view.ju)}return i}}function YP(n,e){return IS.apply(this,arguments)}function IS(){return IS=(0,me.Z)(function*(n,e){const t=tt(n),r=yield iE(t.localStore,e.query,!0),i=e.view.ta(r);return t.isPrimaryClient&&yS(t,e.targetId,i.Xu),i}),IS.apply(this,arguments)}function QP(n,e){return CS.apply(this,arguments)}function CS(){return CS=(0,me.Z)(function*(n,e){const t=tt(n);return jD(t.localStore,e).then(r=>_c(t,r))}),CS.apply(this,arguments)}function JP(n,e,t,r){return bS.apply(this,arguments)}function bS(){return bS=(0,me.Z)(function*(n,e,t,r){const i=tt(n),u=yield function(c,h){const _=tt(c),w=tt(_.Bs);return _.persistence.runTransaction("Lookup mutation documents","readonly",D=>w.fn(D,h).next(S=>S?_.fi.Ks(D,S):ge.resolve(null)))}(i.localStore,e);var h;null!==u?("pending"===t?yield ee(i.remoteStore):"acknowledged"===t||"rejected"===t?(_S(i,e,r||null),mS(i,e),h=e,tt(tt(i.localStore).Bs)._n(h)):lt(),yield _c(i,u)):Be("SyncEngine","Cannot apply mutation batch with id: "+e)}),bS.apply(this,arguments)}function TS(){return TS=(0,me.Z)(function*(n,e){const t=tt(n);if(xS(t),RS(t),!0===e&&!0!==t.da){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield _R(t,r.toArray());t.da=!0,yield up(t.remoteStore,!0);for(const u of i)gE(t.remoteStore,u)}else if(!1===e&&!1!==t.da){const r=[];let i=Promise.resolve();t.ra.forEach((u,c)=>{t.sharedClientState.isLocalQueryTarget(c)?r.push(c):i=i.then(()=>(Lm(t,c),eh(t.localStore,c,!0))),Mm(t.remoteStore,c)}),yield i,yield _R(t,r),function(u){const c=tt(u);c.aa.forEach((h,_)=>{Mm(c.remoteStore,_)}),c.ca.Si(),c.aa=new Map,c.ua=new cr(Je.comparator)}(t),t.da=!1,yield up(t.remoteStore,!1)}}),TS.apply(this,arguments)}function _R(n,e,t){return DS.apply(this,arguments)}function DS(){return DS=(0,me.Z)(function*(n,e,t){const r=tt(n),i=[],u=[];for(const c of e){let h;const _=r.ra.get(c);if(_&&0!==_.length){h=yield Xd(r.localStore,Zs(_[0]));for(const w of _){const D=r.ia.get(w),S=yield YP(r,D);S.snapshot&&u.push(S.snapshot)}}else{const w=yield BD(r.localStore,c);h=yield Xd(r.localStore,w),yield aS(r,yR(w),c,!1)}i.push(h)}return r.sa.zo(u),i}),DS.apply(this,arguments)}function yR(n){return lv(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function ek(n){const e=tt(n);return tt(tt(e.localStore).persistence).Fs()}function tk(n,e,t,r){return SS.apply(this,arguments)}function SS(){return SS=(0,me.Z)(function*(n,e,t,r){const i=tt(n);if(i.da)return void Be("SyncEngine","Ignoring unexpected query state notification.");const u=i.ra.get(e);if(u&&u.length>0)switch(t){case"current":case"not-current":{const c=yield jD(i.localStore,Of(u[0])),h=zd.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield _c(i,c,h);break}case"rejected":yield eh(i.localStore,e,!0),Lm(i,e,r);break;default:lt()}}),SS.apply(this,arguments)}function nk(n,e,t){return AS.apply(this,arguments)}function AS(){return AS=(0,me.Z)(function*(n,e,t){const r=xS(n);if(r.da){for(const i of e){if(r.ra.has(i)){Be("SyncEngine","Adding an already active target "+i);continue}const u=yield BD(r.localStore,i),c=yield Xd(r.localStore,u);yield aS(r,yR(u),c.targetId,!1),gE(r.remoteStore,c)}for(const i of t)r.ra.has(i)&&(yield eh(r.localStore,i,!1).then(()=>{Mm(r.remoteStore,i),Lm(r,i)}).catch(hc))}}),AS.apply(this,arguments)}function xS(n){const e=tt(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=pR.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=ZP.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=HP.bind(null,e),e.sa.zo=PP.bind(null,e.eventManager),e.sa.wa=kP.bind(null,e.eventManager),e}function RS(n){const e=tt(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=WP.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=zP.bind(null,e),e}class vR{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,me.Z)(function*(){t.M=rp(e.databaseInfo.databaseId),t.sharedClientState=t.ga(e),t.persistence=t.ya(e),yield t.persistence.start(),t.gcScheduler=t.pa(e),t.localStore=t.Ia(e)})()}pa(e){return null}Ia(e){return eE(this.persistence,new Xv,e.initialUser,this.M)}ya(e){return new bm(JI.Yi,this.M)}ga(e){return new cE}terminate(){var e=this;return(0,me.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class ER extends vR{constructor(e,t,r){super(),this.Ta=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,me.Z)(function*(){yield t().call(r,e),yield r.Ta.initialize(r,e),yield RS(r.Ta.syncEngine),yield ee(r.Ta.remoteStore),yield r.persistence.Ts(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()))})()}Ia(e){return eE(this.persistence,new Xv,e.initialUser,this.M)}pa(e){return new ND(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}ya(e){const t=Im(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Xi.withCacheSize(this.cacheSizeBytes):Xi.DEFAULT;return new Em(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,hE(),nh(),this.M,this.sharedClientState,!!this.forceOwnership)}ga(e){return new cE}}class ik extends ER{constructor(e,t){super(e,t,!1),this.Ta=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,me.Z)(function*(){yield t().call(r,e);const i=r.Ta.syncEngine;r.sharedClientState instanceof xm&&(r.sharedClientState.syncEngine={$r:JP.bind(null,i),Br:tk.bind(null,i),Lr:nk.bind(null,i),Fs:ek.bind(null,i),Fr:QP.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.Ts(function(){var u=(0,me.Z)(function*(c){yield function XP(n,e){return TS.apply(this,arguments)}(r.Ta.syncEngine,c),r.gcScheduler&&(c&&!r.gcScheduler.started?r.gcScheduler.start(r.localStore):c||r.gcScheduler.stop())});return function(c){return u.apply(this,arguments)}}())})()}ga(e){const t=hE();if(!xm.vt(t))throw new Le(pe.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=Im(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new xm(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class MS{initialize(e,t){var r=this;return(0,me.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>gR(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=KP.bind(null,r.syncEngine),yield up(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new NP}createDatastore(e){const t=rp(e.databaseInfo.databaseId),r=new iR(e.databaseInfo);return new QD(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,u=h=>gR(this.syncEngine,h,0),c=XI.vt()?new XI:new KD,new aR(t,r,i,u,c);var t,r,i,u,c}createSyncEngine(e,t){return function(r,i,u,c,h,_,w){const D=new VP(r,i,u,c,h,_);return w&&(D.da=!0),D}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,me.Z)(function*(t){const r=tt(t);Be("RemoteStore","RemoteStore shutting down."),r.wu.add(5),yield ip(r),r.gu.shutdown(),r.yu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function wR(n,e=10240){let t=0;return{read:()=>(0,me.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,me.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class rC{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ea(this.observer.next,e)}error(e){this.observer.error?this.Ea(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}Aa(){this.muted=!0}Ea(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class sk{constructor(e,t){this.Ra=e,this.M=t,this.metadata=new Qr,this.buffer=new Uint8Array,this.ba=new TextDecoder("utf-8"),this.Pa().then(r=>{r&&r.Mu()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==r?void 0:r.payload)}`))},r=>this.metadata.reject(r))}close(){return this.Ra.cancel()}getMetadata(){var e=this;return(0,me.Z)(function*(){return e.metadata.promise})()}ma(){var e=this;return(0,me.Z)(function*(){return yield e.getMetadata(),e.Pa()})()}Pa(){var e=this;return(0,me.Z)(function*(){const t=yield e.Va();if(null===t)return null;const r=e.ba.decode(t),i=Number(r);isNaN(i)&&e.va(`length string (${r}) is not valid number`);const u=yield e.Sa(i);return new OP(JSON.parse(u),t.length+i)})()}Da(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Va(){var e=this;return(0,me.Z)(function*(){for(;e.Da()<0&&!(yield e.Ca()););if(0===e.buffer.length)return null;const t=e.Da();t<0&&e.va("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Sa(e){var t=this;return(0,me.Z)(function*(){for(;t.buffer.length<e;)(yield t.Ca())&&t.va("Reached the end of bundle when more is expected.");const r=t.ba.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}va(e){throw this.Ra.cancel(),new Error(`Invalid bundle format: ${e}`)}Ca(){var e=this;return(0,me.Z)(function*(){const t=yield e.Ra.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class ok{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,me.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Le(pe.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,me.Z)(function*(u,c){const h=tt(u),_=qd(h.M)+"/documents",w={documents:c.map(B=>Qu(h.M,B))},D=yield h._o("BatchGetDocuments",_,w),S=new Map;D.forEach(B=>{const Y=function uD(n,e){return"found"in e?function(t,r){It(!!r.found);const i=bs(t,r.found.name),u=Jr(r.found.updateTime),c=new wi({mapValue:{fields:r.found.fields}});return Wn.newFoundDocument(i,u,c)}(n,e):"missing"in e?function(t,r){It(!!r.missing),It(!!r.readTime);const i=bs(t,r.missing),u=Jr(r.readTime);return Wn.newNoDocument(i,u)}(n,e):lt()}(h.M,B);S.set(Y.key.toString(),Y)});const P=[];return c.forEach(B=>{const Y=S.get(B.toString());It(!!Y),P.push(Y)}),P}),function(u,c){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new tm(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,me.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const u=Je.fromPath(i);e.mutations.push(new nm(u,e.precondition(u)))}),yield(r=(0,me.Z)(function*(i,u){const c=tt(i),h=qd(c.M)+"/documents",_={writes:u.map(w=>om(c.M,w))};yield c.co("Commit",h,_)}),function(i,u){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw lt();t=it.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Le(pe.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?dr.updateTime(t):dr.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(it.min()))throw new Le(pe.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return dr.updateTime(t)}return dr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class ak{constructor(e,t,r,i,u){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=u,this.xa=r.maxAttempts,this.No=new fE(this.asyncQueue,"transaction_retry")}run(){this.xa-=1,this.Na()}Na(){var e=this;this.No.Ro((0,me.Z)(function*(){const t=new ok(e.datastore),r=e.ka(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(u=>{e.Ma(u)}))}).catch(i=>{e.Ma(i)})}))}ka(e){try{const t=this.updateFunction(e);return!Df(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Ma(e){this.xa>0&&this.Oa(e)?(this.xa-=1,this.asyncQueue.enqueueAndForget(()=>(this.Na(),Promise.resolve()))):this.deferred.reject(e)}Oa(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!wI(t)}return!1}}class uk{constructor(e,t,r,i){var u=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=li.UNAUTHENTICATED,this.clientId=Qw.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var c=(0,me.Z)(function*(h){Be("FirestoreClient","Received user=",h.uid),yield u.authCredentialListener(h),u.user=h});return function(h){return c.apply(this,arguments)}}()),this.appCheckCredentials.start(r,c=>(Be("FirestoreClient","Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}getConfiguration(){var e=this;return(0,me.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Le(pe.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Qr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,me.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=Pm(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function IR(n,e){return NS.apply(this,arguments)}function NS(){return NS=(0,me.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Be("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,me.Z)(function*(u){r.isEqual(u)||(yield tE(e.localStore,u),r=u)});return function(u){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),NS.apply(this,arguments)}function CR(n,e){return PS.apply(this,arguments)}function PS(){return PS=(0,me.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield kS(n);Be("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>Nm(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,u)=>Nm(e.remoteStore,u)),n.onlineComponents=e}),PS.apply(this,arguments)}function kS(n){return OS.apply(this,arguments)}function OS(){return OS=(0,me.Z)(function*(n){return n.offlineComponents||(Be("FirestoreClient","Using default OfflineComponentProvider"),yield IR(n,new vR)),n.offlineComponents}),OS.apply(this,arguments)}function iC(n){return LS.apply(this,arguments)}function LS(){return LS=(0,me.Z)(function*(n){return n.onlineComponents||(Be("FirestoreClient","Using default OnlineComponentProvider"),yield CR(n,new MS)),n.onlineComponents}),LS.apply(this,arguments)}function bR(n){return kS(n).then(e=>e.persistence)}function FS(n){return kS(n).then(e=>e.localStore)}function TR(n){return iC(n).then(e=>e.remoteStore)}function US(n){return iC(n).then(e=>e.syncEngine)}function Fm(n){return VS.apply(this,arguments)}function VS(){return VS=(0,me.Z)(function*(n){const e=yield iC(n),t=e.eventManager;return t.onListen=BP.bind(null,e.syncEngine),t.onUnlisten=jP.bind(null,e.syncEngine),t}),VS.apply(this,arguments)}function DR(n,e,t={}){const r=new Qr;return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return function(i,u,c,h,_){const w=new rC({next:S=>{u.enqueueAndForget(()=>nS(i,D));const P=S.docs.has(c);!P&&S.fromCache?_.reject(new Le(pe.UNAVAILABLE,"Failed to get document because the client is offline.")):P&&S.fromCache&&h&&"server"===h.source?_.reject(new Le(pe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):_.resolve(S)},error:S=>_.reject(S)}),D=new sS(qu(c.path),w,{includeMetadataChanges:!0,ku:!0});return eS(i,D)}(yield Fm(n),n.asyncQueue,e,t,r)})),r.promise}function SR(n,e,t={}){const r=new Qr;return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return function(i,u,c,h,_){const w=new rC({next:S=>{u.enqueueAndForget(()=>nS(i,D)),S.fromCache&&"server"===h.source?_.reject(new Le(pe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):_.resolve(S)},error:S=>_.reject(S)}),D=new sS(c,w,{includeMetadataChanges:!0,ku:!0});return eS(i,D)}(yield Fm(n),n.asyncQueue,e,t,r)})),r.promise}const AR=new Map;function BS(n,e,t){if(!t)throw new Le(pe.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function xR(n,e,t,r){if(!0===e&&!0===r)throw new Le(pe.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function RR(n){if(!Je.isDocumentKey(n))throw new Le(pe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function MR(n){if(Je.isDocumentKey(n))throw new Le(pe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function sC(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":lt()}function cn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Le(pe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=sC(n);throw new Le(pe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function NR(n,e){if(e<=0)throw new Le(pe.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class PR{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Le(pe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Le(pe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,xR("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class _E{constructor(e,t,r){this._authCredentials=t,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new PR({}),this._settingsFrozen=!1,e instanceof ha?this._databaseId=e:(this._app=e,this._databaseId=function(i){if(!Object.prototype.hasOwnProperty.apply(i.options,["projectId"]))throw new Le(pe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ha(i.options.projectId)}(e))}get app(){if(!this._app)throw new Le(pe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Le(pe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new PR(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new Md;switch(t.type){case"gapi":const r=t.client;return It(!("object"!=typeof r||null===r||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new Yw(r,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new Le(pe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=AR.get(e);t&&(Be("ComponentProvider","Removing Datastore"),AR.delete(e),t.terminate())}(this),Promise.resolve()}}class sr{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new sl(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new sr(this.firestore,e,this._key)}}class es{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new es(this.firestore,e,this._query)}}class sl extends es{constructor(e,t,r){super(e,t,qu(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new sr(this.firestore,null,new Je(e))}withConverter(e){return new sl(this.firestore,e,this._path)}}function kR(n,e,...t){if(n=(0,Q.m9)(n),BS("collection","path",e),n instanceof _E){const r=sn.fromString(e,...t);return MR(r),new sl(n,null,r)}{if(!(n instanceof sr||n instanceof sl))throw new Le(pe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(sn.fromString(e,...t));return MR(r),new sl(n.firestore,null,r)}}function oC(n,e,...t){if(n=(0,Q.m9)(n),1===arguments.length&&(e=Qw.R()),BS("doc","path",e),n instanceof _E){const r=sn.fromString(e,...t);return RR(r),new sr(n,null,new Je(r))}{if(!(n instanceof sr||n instanceof sl))throw new Le(pe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(sn.fromString(e,...t));return RR(r),new sr(n.firestore,n instanceof sl?n.converter:null,new Je(r))}}function OR(n,e){return n=(0,Q.m9)(n),e=(0,Q.m9)(e),(n instanceof sr||n instanceof sl)&&(e instanceof sr||e instanceof sl)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function LR(n,e){return n=(0,Q.m9)(n),e=(0,Q.m9)(e),n instanceof es&&e instanceof es&&n.firestore===e.firestore&&kf(n._query,e._query)&&n.converter===e.converter}class vk{constructor(){this.Fa=Promise.resolve(),this.$a=[],this.Ba=!1,this.La=[],this.Ua=null,this.qa=!1,this.Ka=!1,this.Ga=[],this.No=new fE(this,"async_queue_retry"),this.Qa=()=>{const t=nh();t&&Be("AsyncQueue","Visibility state changed to "+t.visibilityState),this.No.Po()};const e=nh();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Qa)}get isShuttingDown(){return this.Ba}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ja(),this.Wa(e)}enterRestrictedMode(e){if(!this.Ba){this.Ba=!0,this.Ka=e||!1;const t=nh();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Qa)}}enqueue(e){if(this.ja(),this.Ba)return new Promise(()=>{});const t=new Qr;return this.Wa(()=>this.Ba&&this.Ka?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.$a.push(e),this.za()))}za(){var e=this;return(0,me.Z)(function*(){if(0!==e.$a.length){try{yield e.$a[0](),e.$a.shift(),e.No.reset()}catch(t){if(!oc(t))throw t;Be("AsyncQueue","Operation failed with retryable error: "+t)}e.$a.length>0&&e.No.Ro(()=>e.za())}})()}Wa(e){const t=this.Fa.then(()=>(this.qa=!0,e().catch(r=>{throw this.Ua=r,this.qa=!1,Cr("INTERNAL UNHANDLED ERROR: ",function(u){let c=u.message||"";return u.stack&&(c=u.stack.includes(u.message)?u.stack:u.message+"\n"+u.stack),c}(r)),r}).then(r=>(this.qa=!1,r))));return this.Fa=t,t}enqueueAfterDelay(e,t,r){this.ja(),this.Ga.indexOf(e)>-1&&(t=0);const i=XD.createAndSchedule(this,e,t,r,u=>this.Ha(u));return this.La.push(i),i}ja(){this.Ua&&lt()}verifyOperationInProgress(){}Ja(){var e=this;return(0,me.Z)(function*(){let t;do{t=e.Fa,yield t}while(t!==e.Fa)})()}Ya(e){for(const t of this.La)if(t.timerId===e)return!0;return!1}Xa(e){return this.Ja().then(()=>{this.La.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.La)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Ja()})}Za(e){this.Ga.push(e)}Ha(e){const t=this.La.indexOf(e);this.La.splice(t,1)}}function jS(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class Ek{constructor(){this._progressObserver={},this._taskCompletionResolver=new Qr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class hr extends _E{constructor(e,t,r){super(e,t,r),this.type="firestore",this._queue=new vk,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||FR(this),this._firestoreClient.terminate()}}function Ik(n=(0,Hn.getApp)()){return(0,Hn._getProvider)(n,"firestore").getImmediate()}function ei(n){return n._firestoreClient||FR(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function FR(n){var e;const t=n._freezeSettings(),r=(u=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new eI(n._databaseId,u,n._persistenceKey,(h=t).host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,h.useFetchStreams));var u,h;n._firestoreClient=new uk(n._authCredentials,n._appCheckCredentials,n._queue,r)}function UR(n,e,t){const r=new Qr;return n.asyncQueue.enqueue((0,me.Z)(function*(){try{yield IR(n,t),yield CR(n,e),r.resolve()}catch(i){if(!("FirebaseError"===(u=i).name?u.code===pe.FAILED_PRECONDITION||u.code===pe.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&u instanceof DOMException)||22===u.code||20===u.code||11===u.code))throw i;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+i),r.reject(i)}var u})).then(()=>r.promise)}function VR(n){if(n._initialized||n._terminated)throw new Le(pe.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class yc{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Le(pe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new xr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class ol{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ol(Br.fromBase64String(e))}catch(t){throw new Le(pe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new ol(Br.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class cp{constructor(e){this._methodName=e}}class aC{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Le(pe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Le(pe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return xt(this._lat,e._lat)||xt(this._long,e._long)}}const Mk=/^__.*__$/;class Nk{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Zu(e,this.data,this.fieldMask,t,this.fieldTransforms):new em(e,this.data,t,this.fieldTransforms)}}class BR{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Zu(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function jR(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw lt()}}class uC{constructor(e,t,r,i,u,c){this.settings=e,this.databaseId=t,this.M=r,this.ignoreUndefinedProperties=i,void 0===u&&this.tc(),this.fieldTransforms=u||[],this.fieldMask=c||[]}get path(){return this.settings.path}get ec(){return this.settings.ec}nc(e){return new uC(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}sc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.nc({path:r,ic:!1});return i.rc(e),i}oc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.nc({path:r,ic:!1});return i.tc(),i}uc(e){return this.nc({path:void 0,ic:!0})}ac(e){return dC(e,this.settings.methodName,this.settings.cc||!1,this.path,this.settings.hc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}tc(){if(this.path)for(let e=0;e<this.path.length;e++)this.rc(this.path.get(e))}rc(e){if(0===e.length)throw this.ac("Document fields must not be empty");if(jR(this.ec)&&Mk.test(e))throw this.ac('Document fields cannot begin and end with "__"')}}class Pk{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.M=r||rp(e)}lc(e,t,r,i=!1){return new uC({ec:e,methodName:t,hc:r,path:xr.emptyPath(),ic:!1,cc:i},this.databaseId,this.M,this.ignoreUndefinedProperties)}}function dp(n){const e=n._freezeSettings(),t=rp(n._databaseId);return new Pk(n._databaseId,!!e.ignoreUndefinedProperties,t)}function lC(n,e,t,r,i,u={}){const c=n.lc(u.merge||u.mergeFields?2:0,e,t,i);zS("Data must be an object, but it was:",c,r);const h=WR(r,c);let _,w;if(u.merge)_=new Jl(c.fieldMask),w=c.fieldTransforms;else if(u.mergeFields){const D=[];for(const S of u.mergeFields){const P=GS(e,S,t);if(!c.contains(P))throw new Le(pe.INVALID_ARGUMENT,`Field '${P}' is specified in your field mask but missing from your input data.`);GR(D,P)||D.push(P)}_=new Jl(D),w=c.fieldTransforms.filter(S=>_.covers(S.field))}else _=null,w=c.fieldTransforms;return new Nk(new wi(h),_,w)}class yE extends cp{_toFieldTransform(e){if(2!==e.ec)throw e.ac(1===e.ec?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof yE}}function $R(n,e,t){return new uC({ec:3,hc:e.settings.hc,methodName:n._methodName,ic:t},e.databaseId,e.M,e.ignoreUndefinedProperties)}class $S extends cp{_toFieldTransform(e){return new Hd(e.path,new $d)}isEqual(e){return e instanceof $S}}class kk extends cp{constructor(e,t){super(e),this.fc=t}_toFieldTransform(e){const t=$R(this,e,!0),r=this.fc.map(u=>hp(u,t)),i=new Ku(r);return new Hd(e.path,i)}isEqual(e){return this===e}}class Ok extends cp{constructor(e,t){super(e),this.fc=t}_toFieldTransform(e){const t=$R(this,e,!0),r=this.fc.map(u=>hp(u,t)),i=new iu(r);return new Hd(e.path,i)}isEqual(e){return this===e}}class Lk extends cp{constructor(e,t){super(e),this.dc=t}_toFieldTransform(e){const t=new fa(e.M,QT(e.M,this.dc));return new Hd(e.path,t)}isEqual(e){return this===e}}function HS(n,e,t,r){const i=n.lc(1,e,t);zS("Data must be an object, but it was:",i,r);const u=[],c=wi.empty();Hu(r,(_,w)=>{const D=cC(e,_,t);w=(0,Q.m9)(w);const S=i.oc(D);if(w instanceof yE)u.push(D);else{const P=hp(w,S);null!=P&&(u.push(D),c.set(D,P))}});const h=new Jl(u);return new BR(c,h,i.fieldTransforms)}function WS(n,e,t,r,i,u){const c=n.lc(1,e,t),h=[GS(e,r,t)],_=[i];if(u.length%2!=0)throw new Le(pe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let P=0;P<u.length;P+=2)h.push(GS(e,u[P])),_.push(u[P+1]);const w=[],D=wi.empty();for(let P=h.length-1;P>=0;--P)if(!GR(w,h[P])){const B=h[P];let Y=_[P];Y=(0,Q.m9)(Y);const xe=c.oc(B);if(Y instanceof yE)w.push(B);else{const Ke=hp(Y,xe);null!=Ke&&(w.push(B),D.set(B,Ke))}}const S=new Jl(w);return new BR(D,S,c.fieldTransforms)}function HR(n,e,t,r=!1){return hp(t,n.lc(r?4:3,e))}function hp(n,e){if(zR(n=(0,Q.m9)(n)))return zS("Unsupported field value:",e,n),WR(n,e);if(n instanceof cp)return function(t,r){if(!jR(r.ec))throw r.ac(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.ac(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.ic&&4!==e.ec)throw e.ac("Nested arrays are not supported");return function(t,r){const i=[];let u=0;for(const c of t){let h=hp(c,r.uc(u));null==h&&(h={nullValue:"NULL_VALUE"}),i.push(h),u++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,Q.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return QT(r.M,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=Qn.fromDate(t);return{timestampValue:$f(r.M,i)}}if(t instanceof Qn){const i=new Qn(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:$f(r.M,i)}}if(t instanceof aC)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof ol)return{bytesValue:im(r.M,t._byteString)};if(t instanceof sr){const i=r.databaseId,u=t.firestore._databaseId;if(!u.isEqual(i))throw r.ac(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:bv(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.ac(`Unsupported field value: ${sC(t)}`)}(n,e)}function WR(n,e){const t={};return Jw(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Hu(n,(r,i)=>{const u=hp(i,e.sc(r));null!=u&&(t[r]=u)}),{mapValue:{fields:t}}}function zR(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Qn||n instanceof aC||n instanceof ol||n instanceof sr||n instanceof cp)}function zS(n,e,t){if(!zR(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=sC(t);throw e.ac("an object"===r?n+" a custom object":n+" "+r)}var r}function GS(n,e,t){if((e=(0,Q.m9)(e))instanceof yc)return e._internalPath;if("string"==typeof e)return cC(n,e);throw dC("Field path arguments must be of type string or ",n,!1,void 0,t)}const Fk=new RegExp("[~\\*/\\[\\]]");function cC(n,e,t){if(e.search(Fk)>=0)throw dC(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new yc(...e.split("."))._internalPath}catch(r){throw dC(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function dC(n,e,t,r,i){const u=r&&!r.isEmpty(),c=void 0!==i;let h=`Function ${e}() called with invalid data`;t&&(h+=" (via `toFirestore()`)"),h+=". ";let _="";return(u||c)&&(_+=" (found",u&&(_+=` in field ${r}`),c&&(_+=` in document ${i}`),_+=")"),new Le(pe.INVALID_ARGUMENT,h+n+_)}function GR(n,e){return n.some(t=>t.isEqual(e))}class vE{constructor(e,t,r,i,u){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new sr(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Uk(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(hC("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Uk extends vE{data(){return super.data()}}function hC(n,e){return"string"==typeof e?cC(n,e):e instanceof yc?e._internalPath:e._delegate._internalPath}class fp{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class vc extends vE{constructor(e,t,r,i,u,c){super(e,t,r,i,c),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new EE(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(hC("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class EE extends vc{data(e={}){return super.data(e)}}class rh{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new fp(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new EE(this._firestore,this._userDataWriter,r.key,r,new fp(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Le(pe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map(c=>({type:"added",doc:new EE(r._firestore,r._userDataWriter,c.doc.key,c.doc,new fp(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:u++}))}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(c=>i||3!==c.type).map(c=>{const h=new EE(r._firestore,r._userDataWriter,c.doc.key,c.doc,new fp(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter);let _=-1,w=-1;return 0!==c.type&&(_=u.indexOf(c.doc.key),u=u.delete(c.doc.key)),1!==c.type&&(u=u.add(c.doc),w=u.indexOf(c.doc.key)),{type:Vk(c.type),doc:h,oldIndex:_,newIndex:w}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function Vk(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return lt()}}function qR(n,e){return n instanceof vc&&e instanceof vc?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof rh&&e instanceof rh&&n._firestore===e._firestore&&LR(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function KR(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Le(pe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class wE{}function ih(n,...e){for(const t of e)n=t._apply(n);return n}class Bk extends wE{constructor(e,t,r){super(),this._c=e,this.wc=t,this.mc=r,this.type="where"}_apply(e){const t=dp(e.firestore),r=function(i,u,c,h,_,w,D){let S;if(_.isKeyField()){if("array-contains"===w||"array-contains-any"===w)throw new Le(pe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${w}' queries on documentId().`);if("in"===w||"not-in"===w){eM(D,w);const B=[];for(const Y of D)B.push(XR(h,i,Y));S={arrayValue:{values:B}}}else S=XR(h,i,D)}else"in"!==w&&"not-in"!==w&&"array-contains-any"!==w||eM(D,w),S=HR(c,"where",D,"in"===w||"not-in"===w);const P=ci.create(_,w,S);return function(B,Y){if(Y.S()){const Ke=Pf(B);if(null!==Ke&&!Ke.isEqual(Y.field))throw new Le(pe.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${Ke.toString()}' and '${Y.field.toString()}'`);const Gt=cv(B);null!==Gt&&tM(0,Y.field,Gt)}const xe=function(Ke,Gt){for(const Wt of Ke.filters)if(Gt.indexOf(Wt.op)>=0)return Wt.op;return null}(B,function(Ke){switch(Ke){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(Y.op));if(null!==xe)throw new Le(pe.INVALID_ARGUMENT,xe===Y.op?`Invalid query. You cannot use more than one '${Y.op.toString()}' filter.`:`Invalid query. You cannot use '${Y.op.toString()}' filters with '${xe.toString()}' filters.`)}(i,P),P}(e._query,0,t,e.firestore._databaseId,this._c,this.wc,this.mc);return new es(e.firestore,e.converter,function(i,u){const c=i.filters.concat([u]);return new Mo(i.path,i.collectionGroup,i.explicitOrderBy.slice(),c,i.limit,i.limitType,i.startAt,i.endAt)}(e._query,r))}}class $k extends wE{constructor(e,t){super(),this._c=e,this.gc=t,this.type="orderBy"}_apply(e){const t=function(r,i,u){if(null!==r.startAt)throw new Le(pe.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Le(pe.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const c=new Ud(i,u);return function(h,_){if(null===cv(h)){const w=Pf(h);null!==w&&tM(0,w,_.field)}}(r,c),c}(e._query,this._c,this.gc);return new es(e.firestore,e.converter,function(r,i){const u=r.explicitOrderBy.concat([i]);return new Mo(r.path,r.collectionGroup,u,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class ZR extends wE{constructor(e,t,r){super(),this.type=e,this.yc=t,this.Ic=r}_apply(e){return new es(e.firestore,e.converter,hv(e._query,this.yc,this.Ic))}}class YR extends wE{constructor(e,t,r){super(),this.type=e,this.Tc=t,this.Ec=r}_apply(e){const t=JR(e,this.type,this.Tc,this.Ec);return new es(e.firestore,e.converter,(i=t,new Mo((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class QR extends wE{constructor(e,t,r){super(),this.type=e,this.Tc=t,this.Ec=r}_apply(e){const t=JR(e,this.type,this.Tc,this.Ec);return new es(e.firestore,e.converter,(i=t,new Mo((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function JR(n,e,t,r){if(t[0]=(0,Q.m9)(t[0]),t[0]instanceof vE)return function(i,u,c,h,_){if(!h)throw new Le(pe.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${c}().`);const w=[];for(const D of Vd(i))if(D.field.isKeyField())w.push(Fd(u,h.key));else{const S=h.data.field(D.field);if(tv(S))throw new Le(pe.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+D.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===S){const P=D.field.canonicalString();throw new Le(pe.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${P}' (used as the orderBy) does not exist.`)}w.push(S)}return new ru(w,_)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=dp(n.firestore);return function(u,c,h,_,w,D){const S=u.explicitOrderBy;if(w.length>S.length)throw new Le(pe.INVALID_ARGUMENT,`Too many arguments provided to ${_}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const P=[];for(let B=0;B<w.length;B++){const Y=w[B];if(S[B].field.isKeyField()){if("string"!=typeof Y)throw new Le(pe.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${_}(), but got a ${typeof Y}`);if(!dv(u)&&-1!==Y.indexOf("/"))throw new Le(pe.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${_}() must be a plain document ID, but '${Y}' contains a slash.`);const xe=u.path.child(sn.fromString(Y));if(!Je.isDocumentKey(xe))throw new Le(pe.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${_}() must result in a valid document path, but '${xe}' is not because it contains an odd number of segments.`);const Ke=new Je(xe);P.push(Fd(c,Ke))}else{const xe=HR(h,_,Y);P.push(xe)}}return new ru(P,D)}(n._query,n.firestore._databaseId,i,e,t,r)}}function XR(n,e,t){if("string"==typeof(t=(0,Q.m9)(t))){if(""===t)throw new Le(pe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!dv(e)&&-1!==t.indexOf("/"))throw new Le(pe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(sn.fromString(t));if(!Je.isDocumentKey(r))throw new Le(pe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Fd(n,new Je(r))}if(t instanceof sr)return Fd(n,t._key);throw new Le(pe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${sC(t)}.`)}function eM(n,e){if(!Array.isArray(n)||0===n.length)throw new Le(pe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Le(pe.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function tM(n,e,t){if(!t.isEqual(e))throw new Le(pe.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}const Yk={maxAttempts:5};class qS{convertValue(e,t="none"){switch(zu(e)){case 0:return null;case 1:return e.booleanValue;case 2:return lr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Xl(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw lt()}}convertObject(e,t){const r={};return Hu(e.fields,(i,u)=>{r[i]=this.convertValue(u,t)}),r}convertGeoPoint(e){return new aC(lr(e.latitude),lr(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Tf(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Pd(e));default:return null}}convertTimestamp(e){const t=qs(e);return new Qn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=sn.fromString(e);It(Rv(r));const i=new ha(r.get(1),r.get(3)),u=new Je(r.popFirst(5));return i.isEqual(t)||Cr(`Document ${u} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}function fC(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class Qk extends qS{constructor(e){super(),this.firestore=e}convertBytes(e){return new ol(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new sr(this.firestore,null,t)}}class nM{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=dp(e)}set(e,t,r){this._verifyNotCommitted();const i=sh(e,this._firestore),u=fC(i.converter,t,r),c=lC(this._dataReader,"WriteBatch.set",i._key,u,null!==i.converter,r);return this._mutations.push(c.toMutation(i._key,dr.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const u=sh(e,this._firestore);let c;return c="string"==typeof(t=(0,Q.m9)(t))||t instanceof yc?WS(this._dataReader,"WriteBatch.update",u._key,t,r,i):HS(this._dataReader,"WriteBatch.update",u._key,t),this._mutations.push(c.toMutation(u._key,dr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=sh(e,this._firestore);return this._mutations=this._mutations.concat(new tm(t._key,dr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Le(pe.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function sh(n,e){if((n=(0,Q.m9)(n)).firestore!==e)throw new Le(pe.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class pp extends qS{constructor(e){super(),this.firestore=e}convertBytes(e){return new ol(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new sr(this.firestore,null,t)}}function rM(n,e,t){n=cn(n,sr);const r=cn(n.firestore,hr),i=fC(n.converter,e,t);return Um(r,[lC(dp(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,dr.none())])}function iM(n,e,t,...r){n=cn(n,sr);const i=cn(n.firestore,hr),u=dp(i);let c;return c="string"==typeof(e=(0,Q.m9)(e))||e instanceof yc?WS(u,"updateDoc",n._key,e,t,r):HS(u,"updateDoc",n._key,e),Um(i,[c.toMutation(n._key,dr.exists(!0))])}function sM(n,...e){var t,r,i;n=(0,Q.m9)(n);let u={includeMetadataChanges:!1},c=0;"object"!=typeof e[c]||jS(e[c])||(u=e[c],c++);const h={includeMetadataChanges:u.includeMetadataChanges};if(jS(e[c])){const S=e[c];e[c]=null===(t=S.next)||void 0===t?void 0:t.bind(S),e[c+1]=null===(r=S.error)||void 0===r?void 0:r.bind(S),e[c+2]=null===(i=S.complete)||void 0===i?void 0:i.bind(S)}let _,w,D;if(n instanceof sr)w=cn(n.firestore,hr),D=qu(n._key.path),_={next:S=>{e[c]&&e[c](KS(w,n,S))},error:e[c+1],complete:e[c+2]};else{const S=cn(n,es);w=cn(S.firestore,hr),D=S._query;const P=new pp(w);_={next:B=>{e[c]&&e[c](new rh(w,P,S,B))},error:e[c+1],complete:e[c+2]},KR(n._query)}return function(S,P,B,Y){const xe=new rC(Y),Ke=new sS(P,xe,B);return S.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return eS(yield Fm(S),Ke)})),()=>{xe.Aa(),S.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return nS(yield Fm(S),Ke)}))}}(ei(w),D,h,_)}function Um(n,e){return function(t,r){const i=new Qr;return t.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return function $P(n,e,t){return cS.apply(this,arguments)}(yield US(t),r,i)})),i.promise}(ei(n),e)}function KS(n,e,t){const r=t.docs.get(e._key),i=new pp(n);return new vc(n,i,e._key,r,new fp(t.hasPendingWrites,t.fromCache),e.converter)}class a1 extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=dp(e)}get(e){const t=sh(e,this._firestore),r=new Qk(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return lt();const u=i[0];if(u.isFoundDocument())return new vE(this._firestore,r,u.key,u,t.converter);if(u.isNoDocument())return new vE(this._firestore,r,t._key,null,t.converter);throw lt()})}set(e,t,r){const i=sh(e,this._firestore),u=fC(i.converter,t,r),c=lC(this._dataReader,"Transaction.set",i._key,u,null!==i.converter,r);return this._transaction.set(i._key,c),this}update(e,t,r,...i){const u=sh(e,this._firestore);let c;return c="string"==typeof(t=(0,Q.m9)(t))||t instanceof yc?WS(this._dataReader,"Transaction.update",u._key,t,r,i):HS(this._dataReader,"Transaction.update",u._key,t),this._transaction.update(u._key,c),this}delete(e){const t=sh(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=sh(e,this._firestore),r=new pp(this._firestore);return super.get(e).then(i=>new vc(this._firestore,r,t._key,i._document,new fp(!1,!1),t.converter))}}function ZS(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Le("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function aM(){if("undefined"==typeof Uint8Array)throw new Le("unimplemented","Uint8Arrays are not available in this environment.")}function uM(){if(!function VT(){return"undefined"!=typeof atob}())throw new Le("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){xd=Hn.SDK_VERSION,(0,Hn._registerComponent)(new nd.wA("firestore",(t,{options:r})=>{const i=t.getProvider("app").getImmediate(),u=new hr(i,new Xy(t.getProvider("auth-internal")),new Zx(t.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:e},r),u._setSettings(r),u},"PUBLIC")),(0,Hn.registerVersion)(Gw,"3.4.9",n),(0,Hn.registerVersion)(Gw,"3.4.9","esm2017")}();class IE{constructor(e){this._delegate=e}static fromBase64String(e){return uM(),new IE(ol.fromBase64String(e))}static fromUint8Array(e){return aM(),new IE(ol.fromUint8Array(e))}toBase64(){return uM(),this._delegate.toBase64()}toUint8Array(){return aM(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function YS(n){return function m1(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class _1{enableIndexedDbPersistence(e,t){return function Ck(n,e){VR(n=cn(n,hr));const t=ei(n),r=n._freezeSettings(),i=new MS;return UR(t,i,new ER(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function bk(n){VR(n=cn(n,hr));const e=ei(n),t=n._freezeSettings(),r=new MS;return UR(e,r,new ik(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function Tk(n){if(n._initialized&&!n._terminated)throw new Le(pe.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Qr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,me.Z)(function*(){try{yield(t=(0,me.Z)(function*(r){if(!Ts.vt())return Promise.resolve();const i=r+"main";yield Ts.delete(i)}),function(r){return t.apply(this,arguments)})(Im(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class lM{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof ha||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Rd("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function _k(n,e,t,r={}){var i;const u=(n=cn(n,_E))._getSettings();if("firestore.googleapis.com"!==u.host&&u.host!==e&&Rd("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},u),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let c,h;if("string"==typeof r.mockUserToken)c=r.mockUserToken,h=li.MOCK_USER;else{c=(0,Q.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const _=r.mockUserToken.sub||r.mockUserToken.user_id;if(!_)throw new Le(pe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new li(_)}n._authCredentials=new qx(new Zw(c,h))}}(this._delegate,e,t,r)}enableNetwork(){return function Sk(n){return function lk(n){return n.asyncQueue.enqueue((0,me.Z)(function*(){const e=yield bR(n),t=yield TR(n);return e.setNetworkEnabled(!0),function(r){const i=tt(r);return i.wu.delete(0),Rm(i)}(t)}))}(ei(n=cn(n,hr)))}(this._delegate)}disableNetwork(){return function Ak(n){return function ck(n){return n.asyncQueue.enqueue((0,me.Z)(function*(){const e=yield bR(n),t=yield TR(n);return e.setNetworkEnabled(!1),(r=(0,me.Z)(function*(i){const u=tt(i);u.wu.add(0),yield ip(u),u.yu.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(ei(n=cn(n,hr)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,xR("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function Dk(n){return function(e){const t=new Qr;return e.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return function GP(n,e){return gS.apply(this,arguments)}(yield US(e),t)})),t.promise}(ei(n=cn(n,hr)))}(this._delegate)}onSnapshotsInSync(e){return function o1(n,e){return function fk(n,e){const t=new rC(e);return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return r=yield Fm(n),i=t,tt(r).bu.add(i),void i.next();var r,i})),()=>{t.Aa(),n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return r=yield Fm(n),i=t,void tt(r).bu.delete(i);var r,i}))}}(ei(n=cn(n,hr)),jS(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Le("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Vm(this,kR(this._delegate,e))}catch(t){throw Ds(t,"collection()","Firestore.collection()")}}doc(e){try{return new _a(this,oC(this._delegate,e))}catch(t){throw Ds(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Ss(this,function yk(n,e){if(n=cn(n,_E),BS("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Le(pe.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new es(n,null,(t=e,new Mo(sn.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Ds(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function u1(n,e,t){n=cn(n,hr);const r=Object.assign(Object.assign({},Yk),t);return function(i){if(i.maxAttempts<1)throw new Le(pe.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function pk(n,e,t){const r=new Qr;return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){const i=yield(u=n,iC(u).then(c=>c.datastore));var u;new ak(n.asyncQueue,i,t,e,r).run()})),r.promise}(ei(n),i=>e(new a1(n,i)),r)}(this._delegate,t=>e(new cM(this,t)))}batch(){return ei(this._delegate),new dM(new nM(this._delegate,e=>Um(this._delegate,e)))}loadBundle(e){return function xk(n,e){const t=ei(n=cn(n,hr)),r=new Ek;return function gk(n,e,t,r){const i=function(u,c){let h;return h="string"==typeof u?(new TextEncoder).encode(u):u,_=function(_,w){if(_ instanceof Uint8Array)return wR(_,w);if(_ instanceof ArrayBuffer)return wR(new Uint8Array(_),w);if(_ instanceof ReadableStream)return _.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(h),new sk(_,c);var _}(t,rp(e));n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){!function rk(n,e,t){const r=tt(n);var i;(i=(0,me.Z)(function*(u,c,h){try{const _=yield c.getMetadata();if(yield function(P,B){const Y=tt(P),xe=Jr(B.createTime);return Y.persistence.runTransaction("hasNewerBundle","readonly",Ke=>Y._s.getBundleMetadata(Ke,B.id)).then(Ke=>!!Ke&&Ke.createTime.compareTo(xe)>=0)}(u.localStore,_))return yield c.close(),h._completeWith({taskState:"Success",documentsLoaded:(P=_).totalDocuments,bytesLoaded:P.totalBytes,totalDocuments:P.totalDocuments,totalBytes:P.totalBytes}),Promise.resolve(new Set);h._updateProgress(cR(_));const w=new LP(_,u.localStore,c.M);let D=yield c.ma();for(;D;){const P=yield w.Fu(D);P&&h._updateProgress(P),D=yield c.ma()}const S=yield w.complete();return yield _c(u,S.Lu,void 0),yield function(P,B){const Y=tt(P);return Y.persistence.runTransaction("Save bundle","readwrite",xe=>Y._s.saveBundleMetadata(xe,B))}(u.localStore,_),h._completeWith(S.progress),Promise.resolve(S.Bu)}catch(_){return Rd("SyncEngine",`Loading bundle failed with ${_}`),h._failWith(_),Promise.resolve(new Set)}var P}),function(u,c,h){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield US(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function Rk(n,e){return function mk(n,e){return n.asyncQueue.enqueue((0,me.Z)(function*(){return function(t,r){const i=tt(t);return i.persistence.runTransaction("Get named query","readonly",u=>i._s.getNamedQuery(u,r))}(yield FS(n),e)}))}(ei(n=cn(n,hr)),e).then(t=>t?new es(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Ss(this,t):null)}}class pC extends qS{constructor(e){super(),this.firestore=e}convertBytes(e){return new IE(new ol(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return _a.forKey(t,this.firestore,null)}}class cM{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new pC(e)}get(e){const t=mp(e);return this._delegate.get(t).then(r=>new CE(this._firestore,new vc(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=mp(e);return r?(ZS("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const u=mp(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...i),this}delete(e){const t=mp(e);return this._delegate.delete(t),this}}class dM{constructor(e){this._delegate=e}set(e,t,r){const i=mp(e);return r?(ZS("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const u=mp(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...i),this}delete(e){const t=mp(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class gp{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new EE(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new bE(this._firestore,r),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=gp.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let u=i.get(t);return u||(u=new gp(e,new pC(e),t),i.set(t,u)),u}}gp.INSTANCES=new WeakMap;class _a{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new pC(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Le("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new _a(t,new sr(t._delegate,r,new Je(e)))}static forKey(e,t,r){return new _a(t,new sr(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Vm(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Vm(this.firestore,kR(this._delegate,e))}catch(t){throw Ds(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Q.m9)(e))instanceof sr&&OR(this._delegate,e)}set(e,t){t=ZS("DocumentReference.set",t);try{return t?rM(this._delegate,e,t):rM(this._delegate,e)}catch(r){throw Ds(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?iM(this._delegate,e):iM(this._delegate,e,t,...r)}catch(i){throw Ds(i,"updateDoc()","DocumentReference.update()")}}delete(){return function i1(n){return Um(cn(n.firestore,hr),[new tm(n._key,dr.none())])}(this._delegate)}onSnapshot(...e){const t=hM(e),r=fM(e,i=>new CE(this.firestore,new vc(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return sM(this._delegate,t,r)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function Xk(n){n=cn(n,sr);const e=cn(n.firestore,hr),t=ei(e),r=new pp(e);return function dk(n,e){const t=new Qr;return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return(r=(0,me.Z)(function*(i,u,c){try{const h=yield function(_,w){const D=tt(_);return D.persistence.runTransaction("read document","readonly",S=>D.fi.Ls(S,w))}(i,u);h.isFoundDocument()?c.resolve(h):h.isNoDocument()?c.resolve(null):c.reject(new Le(pe.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(h){const _=Pm(h,`Failed to get document '${u} from cache`);c.reject(_)}}),function(i,u,c){return r.apply(this,arguments)})(yield FS(n),e,t);var r})),t.promise}(t,n._key).then(i=>new vc(e,r,n._key,i,new fp(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function e1(n){n=cn(n,sr);const e=cn(n.firestore,hr);return DR(ei(e),n._key,{source:"server"}).then(t=>KS(e,n,t))}(this._delegate):function Jk(n){n=cn(n,sr);const e=cn(n.firestore,hr);return DR(ei(e),n._key).then(t=>KS(e,n,t))}(this._delegate),t.then(r=>new CE(this.firestore,new vc(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new _a(this.firestore,this._delegate.withConverter(e?gp.getInstance(this.firestore,e):null))}}function Ds(n,e,t){return n.message=n.message.replace(e,t),n}function hM(n){for(const e of n)if("object"==typeof e&&!YS(e))return e;return{}}function fM(n,e){var t,r;let i;return i=YS(n[0])?n[0]:YS(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:u=>{i.next&&i.next(e(u))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class CE{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new _a(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return qR(this._delegate,e._delegate)}}class bE extends CE{data(e){const t=this._delegate.data(e);return function Kw(n,e){n||lt()}(void 0!==t),t}}class Ss{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new pC(e)}where(e,t,r){try{return new Ss(this.firestore,ih(this._delegate,function jk(n,e,t){const r=e,i=hC("where",n);return new Bk(i,r,t)}(e,t,r)))}catch(i){throw Ds(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Ss(this.firestore,ih(this._delegate,function Hk(n,e="asc"){const t=e,r=hC("orderBy",n);return new $k(r,t)}(e,t)))}catch(r){throw Ds(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Ss(this.firestore,ih(this._delegate,function Wk(n){return NR("limit",n),new ZR("limit",n,"F")}(e)))}catch(t){throw Ds(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Ss(this.firestore,ih(this._delegate,function zk(n){return NR("limitToLast",n),new ZR("limitToLast",n,"L")}(e)))}catch(t){throw Ds(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Ss(this.firestore,ih(this._delegate,function Gk(...n){return new YR("startAt",n,!0)}(...e)))}catch(t){throw Ds(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Ss(this.firestore,ih(this._delegate,function qk(...n){return new YR("startAfter",n,!1)}(...e)))}catch(t){throw Ds(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Ss(this.firestore,ih(this._delegate,function Kk(...n){return new QR("endBefore",n,!1)}(...e)))}catch(t){throw Ds(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Ss(this.firestore,ih(this._delegate,function Zk(...n){return new QR("endAt",n,!0)}(...e)))}catch(t){throw Ds(t,"endAt()","Query.endAt()")}}isEqual(e){return LR(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function n1(n){n=cn(n,es);const e=cn(n.firestore,hr),t=ei(e),r=new pp(e);return function hk(n,e){const t=new Qr;return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return(r=(0,me.Z)(function*(i,u,c){try{const h=yield iE(i,u,!0),_=new fR(u,h._i),w=_.Wu(h.documents),D=_.applyChanges(w,!1);c.resolve(D.snapshot)}catch(h){const _=Pm(h,`Failed to execute query '${u} against cache`);c.reject(_)}}),function(i,u,c){return r.apply(this,arguments)})(yield FS(n),e,t);var r})),t.promise}(t,n._query).then(i=>new rh(e,r,n,i))}(this._delegate):"server"===(null==e?void 0:e.source)?function r1(n){n=cn(n,es);const e=cn(n.firestore,hr),t=ei(e),r=new pp(e);return SR(t,n._query,{source:"server"}).then(i=>new rh(e,r,n,i))}(this._delegate):function t1(n){n=cn(n,es);const e=cn(n.firestore,hr),t=ei(e),r=new pp(e);return KR(n._query),SR(t,n._query).then(i=>new rh(e,r,n,i))}(this._delegate),t.then(r=>new QS(this.firestore,new rh(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=hM(e),r=fM(e,i=>new QS(this.firestore,new rh(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return sM(this._delegate,t,r)}withConverter(e){return new Ss(this.firestore,this._delegate.withConverter(e?gp.getInstance(this.firestore,e):null))}}class v1{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new bE(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class QS{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Ss(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new bE(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new v1(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new bE(this._firestore,r))})}isEqual(e){return qR(this._delegate,e._delegate)}}class Vm extends Ss{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new _a(this.firestore,e):null}doc(e){try{return new _a(this.firestore,void 0===e?oC(this._delegate):oC(this._delegate,e))}catch(t){throw Ds(t,"doc()","CollectionReference.doc()")}}add(e){return function s1(n,e){const t=cn(n.firestore,hr),r=oC(n),i=fC(n.converter,e);return Um(t,[lC(dp(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,dr.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new _a(this.firestore,t))}isEqual(e){return OR(this._delegate,e._delegate)}withConverter(e){return new Vm(this.firestore,this._delegate.withConverter(e?gp.getInstance(this.firestore,e):null))}}function mp(n){return cn(n,sr)}class JS{constructor(...e){this._delegate=new yc(...e)}static documentId(){return new JS(xr.keyField().canonicalString())}isEqual(e){return(e=(0,Q.m9)(e))instanceof yc&&this._delegate._internalPath.isEqual(e._internalPath)}}class _p{constructor(e){this._delegate=e}static serverTimestamp(){const e=function c1(){return new $S("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new _p(e)}static delete(){const e=function l1(){return new yE("deleteField")}();return e._methodName="FieldValue.delete",new _p(e)}static arrayUnion(...e){const t=function d1(...n){return new kk("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new _p(t)}static arrayRemove(...e){const t=function h1(...n){return new Ok("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new _p(t)}static increment(e){const t=function f1(n){return new Lk("increment",n)}(e);return t._methodName="FieldValue.increment",new _p(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const E1={Firestore:lM,GeoPoint:aC,Timestamp:Qn,Blob:IE,Transaction:cM,WriteBatch:dM,DocumentReference:_a,DocumentSnapshot:CE,Query:Ss,QueryDocumentSnapshot:bE,QuerySnapshot:QS,CollectionReference:Vm,FieldPath:JS,FieldValue:_p,setLogLevel:function y1(n){!function qw(n){$u.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function pM(n,e){return function C1(n,e=Q0.z){return new Ri.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=r&&r()}})}(n,e)}function XS(n,e){return pM(n,e).pipe((0,Rt.U)(t=>({payload:t,type:"query"})))}function gC(n,e){return XS(n,e).pipe(zi(void 0),So(),(0,Rt.U)(([t,r])=>{const i=r.payload.docChanges(),u=i.map(c=>({type:c.type,payload:c}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((c,h)=>{const _=i.find(D=>D.doc.ref.isEqual(c.ref)),w=null==t?void 0:t.payload.docs.find(D=>D.ref.isEqual(c.ref));_&&JSON.stringify(_.doc.metadata)===JSON.stringify(c.metadata)||!_&&w&&JSON.stringify(w.metadata)===JSON.stringify(c.metadata)||u.push({type:"modified",payload:{oldIndex:h,newIndex:h,type:"modified",doc:c}})}),u}))}function gM(n,e,t){return gC(n,t).pipe(Gi((r,i)=>function T1(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function D1(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return eA(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return eA(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return eA(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(u=>u.payload),e),[]),function wg(n,e=ps.y){return n=null!=n?n:sT,(0,Dr.e)((t,r)=>{let i,u=!0;t.subscribe((0,xn.x)(r,c=>{const h=e(c);(u||!n(i,h))&&(u=!1,i=h,r.next(c))}))})}(),(0,Rt.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function eA(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function mM(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function I1(n){(function w1(n,e){n.INTERNAL.registerComponent(new nd.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},E1)))})(n,(e,t)=>new lM(e,t,new _1)),n.registerVersion("@firebase/firestore-compat","0.1.18")}(Wx.Z);class _M{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=gC(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,Rt.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(zi(void 0),So(),Ur(([r,i])=>i.length>0||!r),(0,Rt.U)(([r,i])=>i),tn.iC)}auditTrail(e){return this.stateChanges(e).pipe(Gi((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=mM(e);return gM(this.query,t,this.afs.schedulers.outsideAngular).pipe(tn.iC)}valueChanges(e={}){return XS(this.query,this.afs.schedulers.outsideAngular).pipe((0,Rt.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),tn.iC)}get(e){return(0,Zn.D)(this.query.get(e)).pipe(tn.iC)}add(e){return this.ref.add(e)}doc(e){return new yM(this.ref.doc(e),this.afs)}}class yM{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:u}=wM(r,t);return new _M(i,u,this.afs)}snapshotChanges(){return function b1(n,e){return pM(n,e).pipe(zi(void 0),So(),(0,Rt.U)(([t,r])=>r.exists?(null==t?void 0:t.exists)?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(tn.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,Rt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,Zn.D)(this.ref.get(e)).pipe(tn.iC)}}class S1{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?gC(this.query,this.afs.schedulers.outsideAngular).pipe((0,Rt.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),Ur(t=>t.length>0),tn.iC):gC(this.query,this.afs.schedulers.outsideAngular).pipe(tn.iC)}auditTrail(e){return this.stateChanges(e).pipe(Gi((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=mM(e);return gM(this.query,t,this.afs.schedulers.outsideAngular).pipe(tn.iC)}valueChanges(e={}){return XS(this.query,this.afs.schedulers.outsideAngular).pipe((0,Rt.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),tn.iC)}get(e){return(0,Zn.D)(this.query.get(e)).pipe(tn.iC)}}const vM=new g.OlP("angularfire2.enableFirestorePersistence"),EM=new g.OlP("angularfire2.firestore.persistenceSettings"),A1=new g.OlP("angularfire2.firestore.settings"),x1=new g.OlP("angularfire2.firestore.use-emulator");function wM(n,e=(t=>t)){return{query:e(n),ref:n}}let IM=(()=>{class n{constructor(t,r,i,u,c,h,_,w,D,S,P,B,Y,xe,Ke,Gt,Wt){this.schedulers=_;const Kt=(0,Hs.on)(t,h,r),Ot=D;S&&ay(Kt,h,P,Y,xe,Ke,B,Gt),[this.firestore,this.persistenceEnabled$]=(0,Hs.cc)(`${Kt.name}.firestore`,"AngularFirestore",Kt.name,()=>{const rn=h.runOutsideAngular(()=>Kt.firestore());if(u&&rn.settings(u),Ot&&rn.useEmulator(...Ot),i&&!Lr(c)){const In=()=>{try{return(0,Zn.D)(rn.enablePersistence(w||void 0).then(()=>!0,()=>!1))}catch(ns){return"undefined"!=typeof console&&console.warn(ns),at(!1)}};return[rn,h.runOutsideAngular(In)]}return[rn,at(!1)]},[u,Ot,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:u,query:c}=wM(i,r),h=this.schedulers.ngZone.run(()=>u);return new _M(h,c,this)}collectionGroup(t,r){const i=r||(c=>c),u=this.firestore.collectionGroup(t);return new S1(i(u),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new yM(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(Hs.Dh),g.LFG(Hs.xv,8),g.LFG(vM,8),g.LFG(A1,8),g.LFG(g.Lbi),g.LFG(g.R0b),g.LFG(tn.HU),g.LFG(EM,8),g.LFG(x1,8),g.LFG(Eg,8),g.LFG(K0,8),g.LFG(Z0,8),g.LFG(vg,8),g.LFG(rT,8),g.LFG(Y0,8),g.LFG(oy,8),g.LFG(Oi,8))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),R1=(()=>{class n{constructor(){sy.Z.registerVersion("angularfire",tn.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:vM,useValue:!0},{provide:EM,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({providers:[IM]}),n})(),TE=(()=>{class n{constructor(t,r,i){this.firebaseAuth=t,this.db=r,this.route=i,this.emmitLoginStatus=new g.vpe,this.emmitEmail=new g.vpe,this.loggedEmail="",this.isLoggedIn=!1}checkLogin(){var t=this;return(0,me.Z)(function*(){0==t.isLoggedIn&&t.route.navigate(["/"])})()}login(t,r,i){var u=this;return(0,me.Z)(function*(){(yield u.getAllUsers()).forEach(c=>{c.email==t&&c.senha==r&&(u.emmitLoginStatus.emit(!0),u.isLoggedIn=!0,u.emmitEmail.emit(t),u.loggedEmail=t,u.route.navigate(["/home"]))})})()}register(t,r,i){var u=this;return(0,me.Z)(function*(){return u.db.collection("/user").add({nome:i,email:t,senha:r,saldo:0,root:!1}),!0})()}editUser(t,r,i,u,c,h){var _=this;return(0,me.Z)(function*(){_.db.doc("user").update({email:r,senha:i,nome:u,saldo:c,root:h})})()}deleteUser(t){var r=this;return(0,me.Z)(function*(){r.db.collection("/user").doc(t).delete()})()}logout(){var t=this;return(0,me.Z)(function*(){t.emmitLoginStatus.emit("False")})()}getAllUsers(){return new Promise(t=>{this.db.collection("user").valueChanges({idField:"id"}).subscribe(r=>t(r))})}isRoot(){return this.db.collection("user"),new Promise(r=>{this.db.collection("user",i=>i.where("email","==",this.loggedEmail)).valueChanges({idField:"id"}).subscribe(i=>r(i))})}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(Eg),g.LFG(IM),g.LFG(Pi))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function M1(n,e){if(1&n&&(g.TgZ(0,"select",null,15)(2,"option",16),g._uU(3),g.qZA(),g.TgZ(4,"option",17),g._uU(5,"False"),g.qZA()()),2&n){const t=g.oxw(2).$implicit;g.xp6(3),g.Oqu(t.root)}}function N1(n,e){if(1&n&&(g.TgZ(0,"select",null,15)(2,"option",17),g._uU(3),g.qZA(),g.TgZ(4,"option",16),g._uU(5,"True"),g.qZA()()),2&n){const t=g.oxw(2).$implicit;g.xp6(3),g.Oqu(t.root)}}function P1(n,e){if(1&n){const t=g.EpF();g.TgZ(0,"div"),g._UZ(1,"br"),g.TgZ(2,"div")(3,"label"),g._uU(4,"Nome:"),g.qZA(),g._UZ(5,"input",8,9),g.qZA(),g.TgZ(7,"div")(8,"label"),g._uU(9,"Email:"),g.qZA(),g._UZ(10,"input",8,10),g.qZA(),g.TgZ(12,"div")(13,"label"),g._uU(14,"Saldo:"),g.qZA(),g._UZ(15,"input",8,11),g.qZA(),g.TgZ(17,"div")(18,"label"),g._uU(19,"Senha:"),g.qZA(),g._UZ(20,"input",8,12),g.qZA(),g.TgZ(22,"div")(23,"label"),g._uU(24,"Root:"),g.qZA(),g.YNc(25,M1,6,1,"select",13),g.YNc(26,N1,6,1,"ng-template",null,14,g.W1O),g.qZA(),g.TgZ(28,"div")(29,"button",7),g.NdJ("click",function(){g.CHM(t);const i=g.MAs(11),u=g.MAs(21),c=g.MAs(6),h=g.MAs(16),_=g.oxw().$implicit,w=g.oxw(2);return w.editUser(_.id,i.value,u.value,c.value,h.value,w.root)}),g._uU(30,"Editar"),g.qZA()()()}if(2&n){const t=g.MAs(27),r=g.oxw().$implicit;g.xp6(5),g.s9C("value",r.nome),g.xp6(5),g.s9C("value",r.email),g.xp6(5),g.s9C("value",r.saldo),g.xp6(5),g.s9C("value",r.senha),g.xp6(5),g.Q6J("ngIf",r.root)("ngIfElse",t)}}function k1(n,e){if(1&n){const t=g.EpF();g.TgZ(0,"div")(1,"p"),g._uU(2),g.qZA(),g.TgZ(3,"p"),g._uU(4),g.qZA(),g.TgZ(5,"p"),g._uU(6),g.qZA(),g.TgZ(7,"p"),g._uU(8),g.qZA(),g.TgZ(9,"p"),g._uU(10),g.qZA(),g.TgZ(11,"p"),g._uU(12),g.qZA(),g.TgZ(13,"button",7),g.NdJ("click",function(){const u=g.CHM(t).$implicit;return g.oxw(2).deleteUser(u.id)}),g._uU(14,"Delete"),g.qZA(),g._uU(15," \xa0 "),g.TgZ(16,"button",7),g.NdJ("click",function(){return g.CHM(t),g.oxw(2).openEditForm()}),g._uU(17,"Edit"),g.qZA(),g.YNc(18,P1,31,6,"div",5),g._UZ(19,"hr"),g.qZA()}if(2&n){const t=e.$implicit,r=g.oxw(2);g.xp6(2),g.hij("Nome: ",t.nome,""),g.xp6(2),g.hij("Saldo: ",t.saldo,""),g.xp6(2),g.hij("Email: ",t.email,""),g.xp6(2),g.hij("Senha: ",t.senha,""),g.xp6(2),g.hij("Root?: ",t.root,""),g.xp6(2),g.hij("Id: ",t.id,""),g.xp6(6),g.Q6J("ngIf",1==r.editForm)}}function O1(n,e){if(1&n){const t=g.EpF();g.TgZ(0,"div")(1,"h1"),g._uU(2,"Users"),g.qZA(),g.YNc(3,k1,20,7,"div",6),g.TgZ(4,"button",7),g.NdJ("click",function(){return g.CHM(t),g.oxw().getUsers()}),g._uU(5,"Get"),g.qZA()()}if(2&n){const t=g.oxw();g.xp6(3),g.Q6J("ngForOf",t.users)}}let L1=(()=>{class n{constructor(t,r){this.firebaseService=t,this.route=r,this.root=!1,this.editForm=!1,this.users=[],this.account=[]}ngOnInit(){this.isRoot(),this.checkLogin()}getUsers(){var t=this;return(0,me.Z)(function*(){t.users=yield t.firebaseService.getAllUsers(),console.log(t.users)})()}deleteUser(t){var r=this;return(0,me.Z)(function*(){r.firebaseService.deleteUser(t),r.users=yield r.firebaseService.getAllUsers()})()}isRoot(){var t=this;return(0,me.Z)(function*(){t.account=yield t.firebaseService.isRoot(),t.root=1==t.account[0].root})()}checkLogin(){var t=this;return(0,me.Z)(function*(){t.firebaseService.checkLogin()})()}openEditForm(){var t=this;return(0,me.Z)(function*(){t.editForm=!0})()}editUser(t,r,i,u,c,h){var _=this;return(0,me.Z)(function*(){_.firebaseService.editUser(t,r,i,u,c,h)})()}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(TE),g.Y36(Pi))},n.\u0275cmp=g.Xpm({type:n,selectors:[["app-home"]],decls:7,vars:1,consts:[[1,"font-color"],[1,"center"],[1,"title"],[1,"content","center"],[1,"text"],[4,"ngIf"],[4,"ngFor","ngForOf"],[3,"click"],["type","text",3,"value"],["name",""],["email",""],["balance",""],["password",""],[4,"ngIf","ngIfElse"],["noRoot",""],["root",""],["value","true"],["value","false"]],template:function(t,r){1&t&&(g.TgZ(0,"div",0)(1,"div",1)(2,"b",2),g._uU(3,"Bem vindo!!"),g.qZA()(),g.TgZ(4,"div",3)(5,"div",4),g.YNc(6,O1,6,1,"div",5),g.qZA()()()),2&t&&(g.xp6(6),g.Q6J("ngIf",r.root))},directives:[Tr,tr],styles:[".center[_ngcontent-%COMP%]{display:grid;place-items:center}th[_ngcontent-%COMP%]{text-align:center}.font-color[_ngcontent-%COMP%]{color:#fff}.content[_ngcontent-%COMP%]{background-color:#967259;margin:0rem 1.5rem 1.5rem}.text[_ngcontent-%COMP%]{padding:1em}.title[_ngcontent-%COMP%]{font-size:2em}"]}),n})(),F1=(()=>{class n{constructor(t){this.firebaseService=t}ngOnInit(){}login(t,r){var i=this;return(0,me.Z)(function*(){i.firebaseService.login(t,r,[])})()}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(TE))},n.\u0275cmp=g.Xpm({type:n,selectors:[["app-login"]],decls:24,vars:0,consts:[[1,"font-color"],[1,"center"],[1,"title"],[1,"login"],[1,"inputs"],["type","text"],["email",""],["type","password"],["password",""],[2,"margin-top","0.6em",3,"click"],["routerLink","register"]],template:function(t,r){if(1&t){const i=g.EpF();g.TgZ(0,"div",0)(1,"div",1)(2,"b",2),g._uU(3,"Login:"),g.qZA()(),g.TgZ(4,"div",3)(5,"div",4)(6,"div")(7,"label"),g._uU(8,"Email:"),g.qZA(),g._UZ(9,"br")(10,"input",5,6),g.qZA(),g.TgZ(12,"div")(13,"label"),g._uU(14,"Senha:"),g.qZA(),g._UZ(15,"br")(16,"input",7,8),g.qZA(),g.TgZ(18,"div")(19,"button",9),g.NdJ("click",function(){g.CHM(i);const c=g.MAs(11),h=g.MAs(17);return r.login(c.value,h.value)}),g._uU(20,"Login"),g.qZA()(),g.TgZ(21,"div")(22,"a",10),g._uU(23,"Cadastre-se"),g.qZA()()()()()}},directives:[Xc],styles:[".center[_ngcontent-%COMP%]{display:grid;place-items:center}.font-color[_ngcontent-%COMP%]{color:#fff}.login[_ngcontent-%COMP%]{background-color:#967259;margin:0rem 1.5rem 1.5rem}.inputs[_ngcontent-%COMP%]{padding:1em}.title[_ngcontent-%COMP%]{font-size:2em}"]}),n})();function U1(n,e){1&n&&(g.TgZ(0,"div")(1,"p"),g._uU(2,"Registro concluido!"),g.qZA()())}const V1=[{path:"",component:F1},{path:"register",component:(()=>{class n{constructor(t){this.firebaseService=t,this.registerSucess=!1}ngOnInit(){}register(t,r,i){var u=this;return(0,me.Z)(function*(){(yield u.firebaseService.register(t,r,i))?u.registerSucess=!0:alert("Falha no registro")})()}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(TE))},n.\u0275cmp=g.Xpm({type:n,selectors:[["app-register"]],decls:31,vars:1,consts:[[1,"font-color"],[1,"center"],[1,"title"],[1,"login"],[1,"inputs"],["type","text"],["name",""],["email",""],["type","password"],["password",""],[2,"margin-top","0.6em",3,"click"],[4,"ngIf"],["routerLink",""]],template:function(t,r){if(1&t){const i=g.EpF();g.TgZ(0,"div",0)(1,"div",1)(2,"b",2),g._uU(3,"Registrar:"),g.qZA()(),g.TgZ(4,"div",3)(5,"div",4)(6,"div")(7,"label"),g._uU(8,"Nome:"),g.qZA(),g._UZ(9,"br")(10,"input",5,6),g.qZA(),g.TgZ(12,"div")(13,"label"),g._uU(14,"Email:"),g.qZA(),g._UZ(15,"br")(16,"input",5,7),g.qZA(),g.TgZ(18,"div")(19,"label"),g._uU(20,"Senha:"),g.qZA(),g._UZ(21,"br")(22,"input",8,9),g.qZA(),g.TgZ(24,"div")(25,"button",10),g.NdJ("click",function(){g.CHM(i);const c=g.MAs(17),h=g.MAs(23),_=g.MAs(11);return r.register(c.value,h.value,_.value)}),g._uU(26,"Registrar"),g.qZA()(),g.YNc(27,U1,3,0,"div",11),g.TgZ(28,"div")(29,"a",12),g._uU(30,"Voltar"),g.qZA()()()()()}2&t&&(g.xp6(27),g.Q6J("ngIf",r.registerSucess))},directives:[Tr,Xc],styles:[".center[_ngcontent-%COMP%]{display:grid;place-items:center}.font-color[_ngcontent-%COMP%]{color:#fff}.login[_ngcontent-%COMP%]{background-color:#967259;margin:0rem 1.5rem 1.5rem}.inputs[_ngcontent-%COMP%]{padding:1em}.title[_ngcontent-%COMP%]{font-size:2em}"]}),n})()},{path:"home",component:L1}];let B1=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({imports:[[Wh.forRoot(V1)],Wh]}),n})();function j1(n,e){if(1&n){const t=g.EpF();g.TgZ(0,"div")(1,"span"),g._uU(2),g.TgZ(3,"a",7),g.NdJ("click",function(){return g.CHM(t),g.oxw().logout()}),g._uU(4,"(Logout)"),g.qZA()()()}if(2&n){const t=g.oxw();g.xp6(2),g.hij("Ol\xe1, ",t.email," ")}}function $1(n,e){1&n&&g._UZ(0,"span")}let H1=(()=>{class n{constructor(t){this.firebaseService=t,this.isLoggedIn="",this.email="",this.title="SiteSorteios"}ngOnInit(){this.firebaseService.emmitLoginStatus.subscribe(t=>this.isLoggedIn=t),this.firebaseService.emmitEmail.subscribe(t=>this.email=t)}logout(){this.firebaseService.logout()}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(TE))},n.\u0275cmp=g.Xpm({type:n,selectors:[["app-root"]],decls:10,vars:2,consts:[[1,"header"],[1,"headerContent"],["routerLink","",1,"headerTitle"],[4,"ngIf","ngIfElse"],["notLoggedIn",""],[1,"bodyContent"],[1,"complete"],["href","#",3,"click"]],template:function(t,r){if(1&t&&(g.TgZ(0,"div",0)(1,"div",1)(2,"a",2),g._uU(3,"Sorteios"),g.qZA()(),g.YNc(4,j1,5,1,"div",3),g.YNc(5,$1,1,0,"ng-template",null,4,g.W1O),g.qZA(),g.TgZ(7,"div",5),g._UZ(8,"router-outlet"),g.qZA(),g._UZ(9,"div",6)),2&t){const i=g.MAs(6);g.xp6(4),g.Q6J("ngIf",r.isLoggedIn)("ngIfElse",i)}},directives:[Xc,Tr,Pl],styles:[".header[_ngcontent-%COMP%]{position:absolute;top:0;left:0;right:0;height:60px;display:flex;align-items:center;background-color:#38220f;color:#fff;font-weight:600}.headerContent[_ngcontent-%COMP%]{margin:1em}.bodyContent[_ngcontent-%COMP%]{display:flex;margin:60px 30% 0;flex-direction:column;background-color:#634832}.headerTitle[_ngcontent-%COMP%]{font-size:1.5em;text-decoration:inherit}.complete[_ngcontent-%COMP%]{background-color:#634832e1;height:50em;margin:0 30%}"]}),n})();const tA_firebase={projectId:"angularproject-157",appId:"1:772516128790:web:696fa39810754439876d37",databaseURL:"https://angularproject-157-default-rtdb.firebaseio.com",storageBucket:"angularproject-157.appspot.com",locationId:"southamerica-east1",apiKey:"AIzaSyCF295zm0MgJ1JiMY6GqllbkZjfnSpjzYY",authDomain:"angularproject-157.firebaseapp.com",messagingSenderId:"772516128790",measurementId:"G-TMZEPFE2E9"};var W1=k(198);class nA{constructor(e){return e}}class rA{constructor(){return(0,tn.vb)("auth")}}const iA=new g.OlP("angularfire2.auth-instances");function G1(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new nA(r)}}const q1={provide:rA,deps:[[new g.FiY,iA]]},K1={provide:nA,useFactory:function z1(n,e){const t=(0,tn.JM)("auth",n,e);return t&&new nA(t)},deps:[[new g.FiY,iA],Vl]};let Z1=(()=>{class n{constructor(){(0,Qa.KN)("angularfire",tn.q4.full,"auth")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({providers:[K1,q1]}),n})();function Y1(n,...e){return{ngModule:Z1,providers:[{provide:iA,useFactory:G1(n),multi:!0,deps:[g.R0b,g.zs3,tn.HU,Ki,[new g.FiY,Oi],...e]}]}}const Q1=(0,tn.u3)(W1.n,!0),bM="@firebase/database";let sA="";class X1{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,Q.Pz)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,Q.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class eO{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,Q.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const DM=function(n){try{if("undefined"!=typeof window&&void 0!==window[n]){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new X1(e)}}catch(e){}return new eO},yp=DM("localStorage"),oA=DM("sessionStorage"),Bm=new Ws.Yd("@firebase/database"),SM=function(){let n=1;return function(){return n++}}(),AM=function(n){const e=(0,Q.dS)(n),t=new Q.gQ;t.update(e);const r=t.digest();return Q.US.encodeByteArray(r)},DE=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=DE.apply(null,r):e+="object"==typeof r?(0,Q.Pz)(r):r,e+=" "}return e};let vp=null,xM=!0;const Ci=function(...n){if(!0===xM&&(xM=!1,null===vp&&!0===oA.get("logging_enabled")&&function(n,e){(0,Q.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(Bm.logLevel=Ws.in.VERBOSE,vp=Bm.log.bind(Bm),e&&oA.set("logging_enabled",!0)):"function"==typeof n?vp=n:(vp=null,oA.remove("logging_enabled"))}(!0)),vp){const e=DE.apply(null,n);vp(e)}},SE=function(n){return function(...e){Ci(n,...e)}},aA=function(...n){const e="FIREBASE INTERNAL ERROR: "+DE(...n);Bm.error(e)},al=function(...n){const e=`FIREBASE FATAL ERROR: ${DE(...n)}`;throw Bm.error(e),new Error(e)},ts=function(...n){const e="FIREBASE WARNING: "+DE(...n);Bm.warn(e)},mC=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},Ec="[MIN_NAME]",ul="[MAX_NAME]",Ep=function(n,e){if(n===e)return 0;if(n===Ec||e===ul)return-1;if(e===Ec||n===ul)return 1;{const t=_C(n),r=_C(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},rO=function(n,e){return n===e?0:n<e?-1:1},AE=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,Q.Pz)(e))},uA=function(n){if("object"!=typeof n||null===n)return(0,Q.Pz)(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=(0,Q.Pz)(e[r]),t+=":",t+=uA(n[e[r]]);return t+="}",t},MM=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let i=0;i<t;i+=e)r.push(n.substring(i,i+e>t?t:i+e));return r};function bi(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const NM=function(n){(0,Q.hu)(!mC(n),"Invalid JSON number");const r=1023;let i,u,c,h,_;0===n?(u=0,c=0,i=1/n==-1/0?1:0):(i=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(h=Math.min(Math.floor(Math.log(n)/Math.LN2),r),u=h+r,c=Math.round(n*Math.pow(2,52-h)-Math.pow(2,52))):(u=0,c=Math.round(n/Math.pow(2,-1074))));const w=[];for(_=52;_;_-=1)w.push(c%2?1:0),c=Math.floor(c/2);for(_=11;_;_-=1)w.push(u%2?1:0),u=Math.floor(u/2);w.push(i?1:0),w.reverse();const D=w.join("");let S="";for(_=0;_<64;_+=8){let P=parseInt(D.substr(_,8),2).toString(16);1===P.length&&(P="0"+P),S+=P}return S.toLowerCase()},aO=new RegExp("^-?(0*)\\d{1,10}$"),_C=function(n){if(aO.test(n)){const e=Number(n);if(e>=-2147483648&&e<=2147483647)return e}return null},jm=function(n){try{n()}catch(e){setTimeout(()=>{throw ts("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},xE=function(n,e){const t=setTimeout(n,e);return"object"==typeof t&&t.unref&&t.unref(),t};class lO{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=null==t?void 0:t.getImmediate({optional:!0}),this.appCheck||null==t||t.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){ts(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class cO{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(Ci("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',ts(e)}}let RE=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const UM=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,jM="websocket",$M="long_polling";class dA{constructor(e,t,r,i,u=!1,c="",h=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=u,this.persistenceKey=c,this.includeNamespaceInQueryParams=h,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=yp.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&yp.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function HM(n,e,t){let r;if((0,Q.hu)("string"==typeof e,"typeof type must == string"),(0,Q.hu)("object"==typeof t,"typeof params must == object"),e===jM)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==$M)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function dO(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const i=[];return bi(t,(u,c)=>{i.push(u+"="+c)}),r+i.join("&")}class hO{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,Q.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,Q.p$)(this.counters_)}}const hA={},fA={};function pA(n){const e=n.toString();return hA[e]||(hA[e]=new hO),hA[e]}class pO{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&jm(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class oh{constructor(e,t,r,i,u,c,h){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=u,this.transportSessionId=c,this.lastSessionId=h,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=SE(e),this.stats_=pA(t),this.urlFn=_=>(this.appCheckToken&&(_.ac=this.appCheckToken),HM(t,$M,_))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new pO(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,Q.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new gA((...u)=>{const[c,h,_,w,D]=u;if(this.incrementIncomingBytes_(u),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===c)this.id=h,this.password=_;else{if("close"!==c)throw new Error("Unrecognized command received: "+c);h?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(h,()=>{this.onClosed_()})):this.onClosed_()}},(...u)=>{const[c,h]=u;this.incrementIncomingBytes_(u),this.myPacketOrderer.handleResponse(c,h)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&UM.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){oh.forceAllow_=!0}static forceDisallow(){oh.forceDisallow_=!0}static isAvailable(){return!((0,Q.Yr)()||!oh.forceAllow_&&(oh.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,Q.Pz)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=(0,Q.h$)(t),i=MM(r,1840);for(let u=0;u<i.length;u++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[u]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,Q.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,Q.Pz)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class gA{constructor(e,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,Q.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=SM(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=gA.createIFrame_();let u="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(u='<script>document.domain="'+document.domain+'";<\/script>');const c="<html><body>"+u+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(c),this.myIFrame.doc.close()}catch(h){Ci("frame writing exception"),h.stack&&Ci(h.stack),Ci(h)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Ci("No IE domain setting required")}catch(t){const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const c=this.pendingSegs.shift();r=r+"&seg"+i+"="+c.seg+"&ts"+i+"="+c.ts+"&d"+i+"="+c.d,i++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),r()})}addTag(e,t){(0,Q.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{Ci("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch(r){}},Math.floor(1))}}let vC=null;"undefined"!=typeof MozWebSocket?vC=MozWebSocket:"undefined"!=typeof WebSocket&&(vC=WebSocket);let $m=(()=>{class n{constructor(t,r,i,u,c,h,_){this.connId=t,this.applicationId=i,this.appCheckToken=u,this.authToken=c,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=SE(this.connId),this.stats_=pA(r),this.connURL=n.connectionURL_(r,h,_,u,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,u,c){const h={v:"5"};return!(0,Q.Yr)()&&"undefined"!=typeof location&&location.hostname&&UM.test(location.hostname)&&(h.r="f"),r&&(h.s=r),i&&(h.ls=i),u&&(h.ac=u),c&&(h.p=c),HM(t,jM,h)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,yp.set("previous_websocket_failure",!0);try{let i;if((0,Q.Yr)()){const c={headers:{"User-Agent":`Firebase/5/${sA}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}};this.authToken&&(c.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(c.headers["X-Firebase-AppCheck"]=this.appCheckToken);const h=process.env,_=0===this.connURL.indexOf("wss://")?h.HTTPS_PROXY||h.https_proxy:h.HTTP_PROXY||h.http_proxy;_&&(c.proxy={origin:_})}this.mySock=new vC(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const u=i.message||i.data;return u&&this.log_(u),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const u=i.message||i.data;u&&this.log_(u),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if("undefined"!=typeof navigator&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&null!==vC&&!n.forceDisallow_}static previouslyFailed(){return yp.isInMemoryStorage||!0===yp.get("previous_websocket_failure")}markConnectionHealthy(){yp.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=(0,Q.cI)(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,Q.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();const r=(0,Q.Pz)(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=MM(r,16384);i.length>1&&this.sendString_(String(i.length));for(let u=0;u<i.length;u++)this.sendString_(i[u])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),YM=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[oh,$m]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const r=$m&&$m.isAvailable();let i=r&&!$m.previouslyFailed();if(t.webSocketOnly&&(r||ts("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[$m];else{const u=this.transports_=[];for(const c of n.ALL_TRANSPORTS)c&&c.isAvailable()&&u.push(c);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class rN{constructor(e,t,r,i,u,c,h,_,w,D){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=u,this.onMessage_=c,this.onReady_=h,this.onDisconnect_=_,this.onKill_=w,this.lastSessionId=D,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=SE("c:"+this.id+":"),this.transportManager_=new YM(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=xE(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=AE("t",e),r=AE("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=AE("t",e),r=AE("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=AE("t",e);if("d"in e){const r=e.d;if("h"===t)this.onHandshake_(r);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?aA("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):aA("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&ts("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),xE(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):xE(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(yp.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class iN{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class sN{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,Q.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let u=0;u<i.length;u++)if(i[u].callback===t&&(!r||r===i[u].context))return void i.splice(u,1)}validateEventType_(e){(0,Q.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class EC extends sN{constructor(){super(["online"]),this.online_=!0,"undefined"!=typeof window&&void 0!==window.addEventListener&&!(0,Q.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new EC}getInitialEvent(e){return(0,Q.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class Dn{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function En(){return new Dn("")}function Qt(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function ah(n){return n.pieces_.length-n.pieceNum_}function zn(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new Dn(n.pieces_,e)}function _A(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function ME(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function uN(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new Dn(e,0)}function fr(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof Dn)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new Dn(t,0)}function Jt(n){return n.pieceNum_>=n.pieces_.length}function As(n,e){const t=Qt(n),r=Qt(e);if(null===t)return e;if(t===r)return As(zn(n),zn(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function yA(n,e){if(ah(n)!==ah(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function ya(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(ah(n)>ah(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class FO{constructor(e,t){this.errorPrefix_=t,this.parts_=ME(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,Q.ug)(this.parts_[r]);lN(this)}}function lN(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+wp(n))}function wp(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class vA extends sN{constructor(){let e,t;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(t="visibilitychange",e="hidden"):void 0!==document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(t="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new vA}getInitialEvent(e){return(0,Q.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const NE=1e3;let IC,Ip=(()=>{class n extends iN{constructor(t,r,i,u,c,h,_,w){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=u,this.onServerInfoUpdate_=c,this.authTokenProvider_=h,this.appCheckTokenProvider_=_,this.authOverride_=w,this.id=n.nextPersistentConnectionId_++,this.log_=SE("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=NE,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,w&&!(0,Q.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");vA.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&EC.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){const u=++this.requestNumber_,c={r:u,a:t,b:r};this.log_((0,Q.Pz)(c)),(0,Q.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(c),i&&(this.requestCBHash_[u]=i)}get(t){this.initConnection_();const r=new Q.BH,i={p:t._path.toString(),q:t._queryObject},u={action:"g",request:i,onComplete:h=>{const _=h.d;"ok"===h.s?(this.onDataUpdate_(i.p,_,!1,null),r.resolve(_)):r.reject(_)}};this.outstandingGets_.push(u),this.outstandingGetCount_++;const c=this.outstandingGets_.length-1;return this.connected_||setTimeout(()=>{const h=this.outstandingGets_[c];void 0===h||u!==h||(delete this.outstandingGets_[c],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),this.log_("get "+c+" timed out on connection"),r.reject(new Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_(c),r.promise}listen(t,r,i,u){this.initConnection_();const c=t._queryIdentifier,h=t._path.toString();this.log_("Listen called for "+h+" "+c),this.listens.has(h)||this.listens.set(h,new Map),(0,Q.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,Q.hu)(!this.listens.get(h).has(c),"listen() called twice for same path/queryId.");const _={onComplete:u,hashFn:r,query:t,tag:i};this.listens.get(h).set(c,_),this.connected_&&this.sendListen_(_)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){const r=t.query,i=r._path.toString(),u=r._queryIdentifier;this.log_("Listen on "+i+" for "+u);const c={p:i};t.tag&&(c.q=r._queryObject,c.t=t.tag),c.h=t.hashFn(),this.sendRequest("q",c,_=>{const w=_.d,D=_.s;n.warnOnListenWarnings_(w,r),(this.listens.get(i)&&this.listens.get(i).get(u))===t&&(this.log_("listen response",_),"ok"!==D&&this.removeListen_(i,u),t.onComplete&&t.onComplete(D,w))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&(0,Q.r3)(t,"w")){const i=(0,Q.DV)(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const u='".indexOn": "'+r._queryParams.getIndex().toString()+'"',c=r._path.toString();ts(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${u} at ${c} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,Q.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=(0,Q.w9)(t)?"auth":"gauth",i={cred:t};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,u=>{const c=u.s,h=u.d||"error";this.authToken_===t&&("ok"===c?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(c,h))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,i=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){const i=t._path.toString(),u=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+u),(0,Q.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,u)&&this.connected_&&this.sendUnlisten_(i,u,t._queryObject,r)}sendUnlisten_(t,r,i,u){this.log_("Unlisten on "+t+" for "+r);const c={p:t};u&&(c.q=i,c.t=u),this.sendRequest("n",c)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,u){const c={p:r,d:i};this.log_("onDisconnect "+t,c),this.sendRequest(t,c,h=>{u&&setTimeout(()=>{u(h.s,h.d)},Math.floor(0))})}put(t,r,i,u){this.putInternal("p",t,r,i,u)}merge(t,r,i,u){this.putInternal("m",t,r,i,u)}putInternal(t,r,i,u,c){this.initConnection_();const h={p:r,d:i};void 0!==c&&(h.h=c),this.outstandingPuts_.push({action:t,request:h,onComplete:u}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,u=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,c=>{this.log_(r+" response",c),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),u&&u(c.s,c.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,Q.Pz)(t));const r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):aA("Unrecognized action received from server: "+(0,Q.Pz)(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,Q.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=NE,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=NE,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=NE),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,me.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),i=t.onReady_.bind(t),u=t.onRealtimeDisconnect_.bind(t),c=t.id+":"+n.nextConnectionId_++,h=t.lastSessionId;let _=!1,w=null;const D=function(){w?w.close():(_=!0,u())};t.realtime_={close:D,sendRequest:function(B){(0,Q.hu)(w,"sendRequest call when we're not connected not allowed."),w.sendRequest(B)}};const P=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[B,Y]=yield Promise.all([t.authTokenProvider_.getToken(P),t.appCheckTokenProvider_.getToken(P)]);_?Ci("getToken() completed but was canceled"):(Ci("getToken() completed. Creating connection."),t.authToken_=B&&B.accessToken,t.appCheckToken_=Y&&Y.token,w=new rN(c,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,i,u,xe=>{ts(xe+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},h))}catch(B){t.log_("Failed to get token: "+B),_||(t.repoInfo_.nodeAdmin&&ts(B),D())}}})()}interrupt(t){Ci("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){Ci("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,Q.xb)(this.interruptReasons_)&&(this.reconnectDelay_=NE,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;i=r?r.map(c=>uA(c)).join("$"):"default";const u=this.removeListen_(t,i);u&&u.onComplete&&u.onComplete("permission_denied")}removeListen_(t,r){const i=new Dn(t).toString();let u;if(this.listens.has(i)){const c=this.listens.get(i);u=c.get(r),c.delete(r),0===c.size&&this.listens.delete(i)}else u=void 0;return u}onAuthRevoked_(t,r){Ci("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){Ci("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";(0,Q.Yr)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+r+"."+sA.replace(/\./g,"-")]=1,(0,Q.uI)()?t["framework.cordova"]=1:(0,Q.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=EC.getInstance().currentlyOnline();return(0,Q.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class nn{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new nn(e,t)}}class wC{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new nn(Ec,e),i=new nn(Ec,t);return 0!==this.compare(r,i)}minPost(){return nn.MIN}}class hN extends wC{static get __EMPTY_NODE(){return IC}static set __EMPTY_NODE(e){IC=e}compare(e,t){return Ep(e.name,t.name)}isDefinedOn(e){throw(0,Q.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return nn.MIN}maxPost(){return new nn(ul,IC)}makePost(e,t){return(0,Q.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new nn(e,IC)}toString(){return".key"}}const ll=new hN;class CC{constructor(e,t,r,i,u=null){this.isReverse_=i,this.resultGenerator_=u,this.nodeStack_=[];let c=1;for(;!e.isEmpty();)if(e=e,c=t?r(e.key,t):1,i&&(c*=-1),c<0)e=this.isReverse_?e.left:e.right;else{if(0===c){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let wA,ou=(()=>{class n{constructor(t,r,i,u,c){this.key=t,this.value=r,this.color=null!=i?i:n.RED,this.left=null!=u?u:Qs.EMPTY_NODE,this.right=null!=c?c:Qs.EMPTY_NODE}copy(t,r,i,u,c){return new n(null!=t?t:this.key,null!=r?r:this.value,null!=i?i:this.color,null!=u?u:this.left,null!=c?c:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let u=this;const c=i(t,u.key);return u=c<0?u.copy(null,null,null,u.left.insert(t,r,i),null):0===c?u.copy(null,r,null,null,null):u.copy(null,null,null,null,u.right.insert(t,r,i)),u.fixUp_()}removeMin_(){if(this.left.isEmpty())return Qs.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,u;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(t,i.key)){if(i.right.isEmpty())return Qs.EMPTY_NODE;u=i.right.min_(),i=i.copy(u.key,u.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class Qs{constructor(e,t=Qs.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new Qs(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,ou.BLACK,null,null))}remove(e){return new Qs(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,ou.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new CC(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new CC(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new CC(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new CC(this.root_,null,this.comparator_,!0,e)}}function GO(n,e){return Ep(n.name,e.name)}function EA(n,e){return Ep(n,e)}Qs.EMPTY_NODE=new class zO{copy(e,t,r,i,u){return this}insert(e,t,r){return new ou(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const fN=function(n){return"number"==typeof n?"number:"+NM(n):"string:"+n},pN=function(n){if(n.isLeafNode()){const e=n.val();(0,Q.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,Q.r3)(e,".sv"),"Priority must be a string or number.")}else(0,Q.hu)(n===wA||n.isEmpty(),"priority of unexpected type.");(0,Q.hu)(n===wA||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let gN,mN,_N,Hm=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,(0,Q.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),pN(this.priorityNode_)}static set __childrenNodeConstructor(t){gN=t}static get __childrenNodeConstructor(){return gN}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return Jt(t)?this:".priority"===Qt(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const i=Qt(t);return null===i?r:r.isEmpty()&&".priority"!==i?this:((0,Q.hu)(".priority"!==i||1===ah(t),".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(zn(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+fN(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?NM(this.value_):this.value_,this.lazyHash_=AM(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,Q.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,i=typeof this.value_,u=n.VALUE_TYPE_ORDER.indexOf(r),c=n.VALUE_TYPE_ORDER.indexOf(i);return(0,Q.hu)(u>=0,"Unknown leaf type: "+r),(0,Q.hu)(c>=0,"Unknown leaf type: "+i),u===c?"object"===i?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:c-u}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const r=t;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}return!1}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const Jn=new class YO extends wC{compare(e,t){const r=e.node.getPriority(),i=t.node.getPriority(),u=r.compareTo(i);return 0===u?Ep(e.name,t.name):u}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return nn.MIN}maxPost(){return new nn(ul,new Hm("[PRIORITY-POST]",_N))}makePost(e,t){const r=mN(e);return new nn(t,new Hm("[PRIORITY-POST]",r))}toString(){return".priority"}},QO=Math.log(2);class JO{constructor(e){this.count=parseInt(Math.log(e+1)/QO,10),this.current_=this.count-1;const i=(u=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const bC=function(n,e,t,r){n.sort(e);const i=function(_,w){const D=w-_;let S,P;if(0===D)return null;if(1===D)return S=n[_],P=t?t(S):S,new ou(P,S.node,ou.BLACK,null,null);{const B=parseInt(D/2,10)+_,Y=i(_,B),xe=i(B+1,w);return S=n[B],P=t?t(S):S,new ou(P,S.node,ou.BLACK,Y,xe)}},h=function(_){let w=null,D=null,S=n.length;const P=function(Y,xe){const Ke=S-Y,Gt=S;S-=Y;const Wt=i(Ke+1,Gt),Kt=n[Ke],Ot=t?t(Kt):Kt;B(new ou(Ot,Kt.node,xe,null,Wt))},B=function(Y){w?(w.left=Y,w=Y):(D=Y,w=Y)};for(let Y=0;Y<_.count;++Y){const xe=_.nextBitIsOne(),Ke=Math.pow(2,_.count-(Y+1));xe?P(Ke,ou.BLACK):(P(Ke,ou.BLACK),P(Ke,ou.RED))}return D}(new JO(n.length));return new Qs(r||e,h)};let IA;const Wm={};class wc{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,Q.hu)(Wm&&Jn,"ChildrenNode.ts has not been loaded"),IA=IA||new wc({".priority":Wm},{".priority":Jn}),IA}get(e){const t=(0,Q.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof Qs?t:null}hasIndex(e){return(0,Q.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,Q.hu)(e!==ll,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const u=t.getIterator(nn.Wrap);let h,c=u.getNext();for(;c;)i=i||e.isDefinedOn(c.node),r.push(c),c=u.getNext();h=i?bC(r,e.getCompare()):Wm;const _=e.toString(),w=Object.assign({},this.indexSet_);w[_]=e;const D=Object.assign({},this.indexes_);return D[_]=h,new wc(D,w)}addToIndexes(e,t){const r=(0,Q.UI)(this.indexes_,(i,u)=>{const c=(0,Q.DV)(this.indexSet_,u);if((0,Q.hu)(c,"Missing index implementation for "+u),i===Wm){if(c.isDefinedOn(e.node)){const h=[],_=t.getIterator(nn.Wrap);let w=_.getNext();for(;w;)w.name!==e.name&&h.push(w),w=_.getNext();return h.push(e),bC(h,c.getCompare())}return Wm}{const h=t.get(e.name);let _=i;return h&&(_=_.remove(new nn(e.name,h))),_.insert(e,e.node)}});return new wc(r,this.indexSet_)}removeFromIndexes(e,t){const r=(0,Q.UI)(this.indexes_,i=>{if(i===Wm)return i;{const u=t.get(e.name);return u?i.remove(new nn(e.name,u)):i}});return new wc(r,this.indexSet_)}}let PE,Ht=(()=>{class n{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&pN(this.priorityNode_),this.children_.isEmpty()&&(0,Q.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return PE||(PE=new n(new Qs(EA),null,wc.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||PE}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?PE:r}}getChild(t){const r=Qt(t);return null===r?this:this.getImmediateChild(r).getChild(zn(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if((0,Q.hu)(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const i=new nn(t,r);let u,c;r.isEmpty()?(u=this.children_.remove(t),c=this.indexMap_.removeFromIndexes(i,this.children_)):(u=this.children_.insert(t,r),c=this.indexMap_.addToIndexes(i,this.children_));const h=u.isEmpty()?PE:this.priorityNode_;return new n(u,h,c)}}updateChild(t,r){const i=Qt(t);if(null===i)return r;{(0,Q.hu)(".priority"!==Qt(t)||1===ah(t),".priority must be the last token in a path");const u=this.getImmediateChild(i).updateChild(zn(t),r);return this.updateImmediateChild(i,u)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let i=0,u=0,c=!0;if(this.forEachChild(Jn,(h,_)=>{r[h]=_.val(t),i++,c&&n.INTEGER_REGEXP_.test(h)?u=Math.max(u,Number(h)):c=!1}),!t&&c&&u<2*i){const h=[];for(const _ in r)h[_]=r[_];return h}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+fN(this.getPriority().val())+":"),this.forEachChild(Jn,(r,i)=>{const u=i.hash();""!==u&&(t+=":"+r+":"+u)}),this.lazyHash_=""===t?"":AM(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){const u=this.resolveIndex_(i);if(u){const c=u.getPredecessorKey(new nn(t,r));return c?c.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new nn(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new nn(r,this.children_.get(r)):null}forEachChild(t,r){const i=this.resolveIndex_(t);return i?i.inorderTraversal(u=>r(u.name,u.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,u=>u);{const u=this.children_.getIteratorFrom(t.name,nn.Wrap);let c=u.peek();for(;null!=c&&r.compare(c,t)<0;)u.getNext(),c=u.peek();return u}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,u=>u);{const u=this.children_.getReverseIteratorFrom(t.name,nn.Wrap);let c=u.peek();for(;null!=c&&r.compare(c,t)>0;)u.getNext(),c=u.peek();return u}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===kE?-1:0}withIndex(t){if(t===ll||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===ll||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(Jn),u=r.getIterator(Jn);let c=i.getNext(),h=u.getNext();for(;c&&h;){if(c.name!==h.name||!c.node.equals(h.node))return!1;c=i.getNext(),h=u.getNext()}return null===c&&null===h}return!1}return!1}}resolveIndex_(t){return t===ll?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const kE=new class XO extends Ht{constructor(){super(new Qs(EA),Ht.EMPTY_NODE,wc.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Ht.EMPTY_NODE}isEmpty(){return!1}};function br(n,e=null){if(null===n)return Ht.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,Q.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new Hm(n,br(e));if(n instanceof Array){let t=Ht.EMPTY_NODE;return bi(n,(r,i)=>{if((0,Q.r3)(n,r)&&"."!==r.substring(0,1)){const u=br(i);(u.isLeafNode()||!u.isEmpty())&&(t=t.updateImmediateChild(r,u))}}),t.updatePriority(br(e))}{const t=[];let r=!1;if(bi(n,(c,h)=>{if("."!==c.substring(0,1)){const _=br(h);_.isEmpty()||(r=r||!_.getPriority().isEmpty(),t.push(new nn(c,_)))}}),0===t.length)return Ht.EMPTY_NODE;const u=bC(t,GO,c=>c.name,EA);if(r){const c=bC(t,Jn.getCompare());return new Ht(u,br(e),new wc({".priority":c},{".priority":Jn}))}return new Ht(u,br(e),wc.Default)}}Object.defineProperties(nn,{MIN:{value:new nn(Ec,Ht.EMPTY_NODE)},MAX:{value:new nn(ul,kE)}}),hN.__EMPTY_NODE=Ht.EMPTY_NODE,Hm.__childrenNodeConstructor=Ht,function qO(n){wA=n}(kE),function ZO(n){_N=n}(kE),function KO(n){mN=n}(br);class CA extends wC{constructor(e){super(),this.indexPath_=e,(0,Q.hu)(!Jt(e)&&".priority"!==Qt(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),i=this.extractChild(t.node),u=r.compareTo(i);return 0===u?Ep(e.name,t.name):u}makePost(e,t){const r=br(e),i=Ht.EMPTY_NODE.updateChild(this.indexPath_,r);return new nn(t,i)}maxPost(){const e=Ht.EMPTY_NODE.updateChild(this.indexPath_,kE);return new nn(ul,e)}toString(){return ME(this.indexPath_,0).join("/")}}const bA=new class tL extends wC{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?Ep(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return nn.MIN}maxPost(){return nn.MAX}makePost(e,t){const r=br(e);return new nn(t,r)}toString(){return".value"}};function LE(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class SA{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Jn}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,Q.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,Q.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Ec}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,Q.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,Q.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:ul}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,Q.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Jn}copy(){const e=new SA;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function CN(n){const e={};if(n.isDefault())return e;let t;return n.index_===Jn?t="$priority":n.index_===bA?t="$value":n.index_===ll?t="$key":((0,Q.hu)(n.index_ instanceof CA,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,Q.Pz)(t),n.startSet_&&(e.startAt=(0,Q.Pz)(n.indexStartValue_),n.startNameSet_&&(e.startAt+=","+(0,Q.Pz)(n.indexStartName_))),n.endSet_&&(e.endAt=(0,Q.Pz)(n.indexEndValue_),n.endNameSet_&&(e.endAt+=","+(0,Q.Pz)(n.indexEndName_))),n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function bN(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_)),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_)),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==Jn&&(e.i=n.index_.toString()),e}class DC extends iN{constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=SE("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,Q.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){const u=e._path.toString();this.log_("Listen called for "+u+" "+e._queryIdentifier);const c=DC.getListenId_(e,r),h={};this.listens_[c]=h;const _=CN(e._queryParams);this.restRequest_(u+".json",_,(w,D)=>{let S=D;if(404===w&&(S=null,w=null),null===w&&this.onDataUpdate_(u,S,!1,r),(0,Q.DV)(this.listens_,c)===h){let P;P=w?401===w?"permission_denied":"rest_error:"+w:"ok",i(P,null)}})}unlisten(e,t){const r=DC.getListenId_(e,t);delete this.listens_[r]}get(e){const t=CN(e._queryParams),r=e._path.toString(),i=new Q.BH;return this.restRequest_(r+".json",t,(u,c)=>{let h=c;404===u&&(h=null,u=null),null===u?(this.onDataUpdate_(r,h,!1,null),i.resolve(h)):i.reject(new Error(h))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,u])=>{i&&i.accessToken&&(t.auth=i.accessToken),u&&u.token&&(t.ac=u.token);const c=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,Q.xO)(t);this.log_("Sending REST request for "+c);const h=new XMLHttpRequest;h.onreadystatechange=()=>{if(r&&4===h.readyState){this.log_("REST Response for "+c+" received. status:",h.status,"response:",h.responseText);let _=null;if(h.status>=200&&h.status<300){try{_=(0,Q.cI)(h.responseText)}catch(w){ts("Failed to parse JSON response for "+c+": "+h.responseText)}r(null,_)}else 401!==h.status&&404!==h.status&&ts("Got unsuccessful REST response for "+c+" Status: "+h.status),r(h.status);r=null}},h.open("GET",c,!0),h.send()})}}class cL{constructor(){this.rootNode_=Ht.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function SC(){return{value:null,children:new Map}}function qm(n,e,t){if(Jt(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=Qt(e);n.children.has(r)||n.children.set(r,SC()),qm(n.children.get(r),e=zn(e),t)}}function MA(n,e,t){null!==n.value?t(e,n.value):function dL(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,i)=>{MA(i,new Dn(e.toString()+"/"+r),t)})}class hL{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&bi(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}}class gL{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new hL(e);const r=1e4+2e4*Math.random();xE(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;bi(e,(i,u)=>{u>0&&(0,Q.r3)(this.statsToReport_,i)&&(t[i]=u,r=!0)}),r&&this.server_.reportStats(t),xE(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var va=(()=>(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(va||(va={})),va))();function kA(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class AC{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=va.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(Jt(this.path)){if(null!=this.affectedTree.value)return(0,Q.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new Dn(e));return new AC(En(),t,this.revert)}}return(0,Q.hu)(Qt(this.path)===e,"operationForChild called for unrelated child."),new AC(zn(this.path),this.affectedTree,this.revert)}}class Cp{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=va.OVERWRITE}operationForChild(e){return Jt(this.path)?new Cp(this.source,En(),this.snap.getImmediateChild(e)):new Cp(this.source,zn(this.path),this.snap)}}class Km{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=va.MERGE}operationForChild(e){if(Jt(this.path)){const t=this.children.subtree(new Dn(e));return t.isEmpty()?null:t.value?new Cp(this.source,En(),t.value):new Km(this.source,En(),t)}return(0,Q.hu)(Qt(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Km(this.source,zn(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class uh{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Jt(e))return this.isFullyInitialized()&&!this.filtered_;const t=Qt(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}function VE(n,e,t,r,i,u){const c=r.filter(h=>h.type===t);c.sort((h,_)=>function vL(n,e,t){if(null==e.childName||null==t.childName)throw(0,Q.g5)("Should only compare child_ events.");const r=new nn(e.childName,e.snapshotNode),i=new nn(t.childName,t.snapshotNode);return n.index_.compare(r,i)}(n,h,_)),c.forEach(h=>{const _=function yL(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,h,u);i.forEach(w=>{w.respondsTo(h.type)&&e.push(w.createEvent(_,n.query_))})})}function xC(n,e){return{eventCache:n,serverCache:e}}function BE(n,e,t,r){return xC(new uh(e,t,r),n.serverCache)}function DN(n,e,t,r){return xC(n.eventCache,new uh(e,t,r))}function RC(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function bp(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let OA;class Xn{constructor(e,t=(()=>(OA||(OA=new Qs(rO)),OA))()){this.value=e,this.children=t}static fromObject(e){let t=new Xn(null);return bi(e,(r,i)=>{t=t.set(new Dn(r),i)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:En(),value:this.value};if(Jt(e))return null;{const r=Qt(e),i=this.children.get(r);if(null!==i){const u=i.findRootMostMatchingPathAndValue(zn(e),t);return null!=u?{path:fr(new Dn(r),u.path),value:u.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Jt(e))return this;{const t=Qt(e),r=this.children.get(t);return null!==r?r.subtree(zn(e)):new Xn(null)}}set(e,t){if(Jt(e))return new Xn(t,this.children);{const r=Qt(e),u=(this.children.get(r)||new Xn(null)).set(zn(e),t),c=this.children.insert(r,u);return new Xn(this.value,c)}}remove(e){if(Jt(e))return this.children.isEmpty()?new Xn(null):new Xn(null,this.children);{const t=Qt(e),r=this.children.get(t);if(r){const i=r.remove(zn(e));let u;return u=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&u.isEmpty()?new Xn(null):new Xn(this.value,u)}return this}}get(e){if(Jt(e))return this.value;{const t=Qt(e),r=this.children.get(t);return r?r.get(zn(e)):null}}setTree(e,t){if(Jt(e))return t;{const r=Qt(e),u=(this.children.get(r)||new Xn(null)).setTree(zn(e),t);let c;return c=u.isEmpty()?this.children.remove(r):this.children.insert(r,u),new Xn(this.value,c)}}fold(e){return this.fold_(En(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((i,u)=>{r[i]=u.fold_(fr(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,En(),t)}findOnPath_(e,t,r){const i=!!this.value&&r(t,this.value);if(i)return i;if(Jt(e))return null;{const u=Qt(e),c=this.children.get(u);return c?c.findOnPath_(zn(e),fr(t,u),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,En(),t)}foreachOnPath_(e,t,r){if(Jt(e))return this;{this.value&&r(t,this.value);const i=Qt(e),u=this.children.get(i);return u?u.foreachOnPath_(zn(e),fr(t,i),r):new Xn(null)}}foreach(e){this.foreach_(En(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(fr(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class au{constructor(e){this.writeTree_=e}static empty(){return new au(new Xn(null))}}function jE(n,e,t){if(Jt(e))return new au(new Xn(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let u=r.value;const c=As(i,e);return u=u.updateChild(c,t),new au(n.writeTree_.set(i,u))}{const i=new Xn(t),u=n.writeTree_.setTree(e,i);return new au(u)}}}function LA(n,e,t){let r=n;return bi(t,(i,u)=>{r=jE(r,fr(e,i),u)}),r}function SN(n,e){if(Jt(e))return au.empty();{const t=n.writeTree_.setTree(e,new Xn(null));return new au(t)}}function FA(n,e){return null!=Tp(n,e)}function Tp(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(As(t.path,e)):null}function AN(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(Jn,(r,i)=>{e.push(new nn(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&e.push(new nn(r,i.value))}),e}function lh(n,e){if(Jt(e))return n;{const t=Tp(n,e);return new au(null!=t?new Xn(t):n.writeTree_.subtree(e))}}function UA(n){return n.writeTree_.isEmpty()}function Zm(n,e){return xN(En(),n.writeTree_,e)}function xN(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,u)=>{".priority"===i?((0,Q.hu)(null!==u.value,"Priority writes must always be leaf nodes"),r=u.value):t=xN(fr(n,i),u,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(fr(n,".priority"),r)),t}}function MC(n,e){return kN(e,n)}function TL(n,e){if(n.snap)return ya(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&ya(fr(n.path,t),e))return!0;return!1}function SL(n){return n.visible}function RN(n,e,t){let r=au.empty();for(let i=0;i<n.length;++i){const u=n[i];if(e(u)){const c=u.path;let h;if(u.snap)ya(t,c)?(h=As(t,c),r=jE(r,h,u.snap)):ya(c,t)&&(h=As(c,t),r=jE(r,En(),u.snap.getChild(h)));else{if(!u.children)throw(0,Q.g5)("WriteRecord should have .snap or .children");if(ya(t,c))h=As(t,c),r=LA(r,h,u.children);else if(ya(c,t))if(h=As(c,t),Jt(h))r=LA(r,En(),u.children);else{const _=(0,Q.DV)(u.children,Qt(h));if(_){const w=_.getChild(zn(h));r=jE(r,En(),w)}}}}}return r}function MN(n,e,t,r,i){if(r||i){const u=lh(n.visibleWrites,e);return!i&&UA(u)?t:i||null!=t||FA(u,En())?Zm(RN(n.allWrites,function(w){return(w.visible||i)&&(!r||!~r.indexOf(w.writeId))&&(ya(w.path,e)||ya(e,w.path))},e),t||Ht.EMPTY_NODE):null}{const u=Tp(n.visibleWrites,e);if(null!=u)return u;{const c=lh(n.visibleWrites,e);return UA(c)?t:null!=t||FA(c,En())?Zm(c,t||Ht.EMPTY_NODE):null}}}function NC(n,e,t,r){return MN(n.writeTree,n.treePath,e,t,r)}function VA(n,e){return function AL(n,e,t){let r=Ht.EMPTY_NODE;const i=Tp(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(Jn,(u,c)=>{r=r.updateImmediateChild(u,c)}),r;if(t){const u=lh(n.visibleWrites,e);return t.forEachChild(Jn,(c,h)=>{const _=Zm(lh(u,new Dn(c)),h);r=r.updateImmediateChild(c,_)}),AN(u).forEach(c=>{r=r.updateImmediateChild(c.name,c.node)}),r}return AN(lh(n.visibleWrites,e)).forEach(c=>{r=r.updateImmediateChild(c.name,c.node)}),r}(n.writeTree,n.treePath,e)}function NN(n,e,t,r){return function xL(n,e,t,r,i){(0,Q.hu)(r||i,"Either existingEventSnap or existingServerSnap must exist");const u=fr(e,t);if(FA(n.visibleWrites,u))return null;{const c=lh(n.visibleWrites,u);return UA(c)?i.getChild(t):Zm(c,i.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function PC(n,e){return function ML(n,e){return Tp(n.visibleWrites,e)}(n.writeTree,fr(n.treePath,e))}function BA(n,e,t){return function RL(n,e,t,r){const i=fr(e,t),u=Tp(n.visibleWrites,i);return null!=u?u:r.isCompleteForChild(t)?Zm(lh(n.visibleWrites,i),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function PN(n,e){return kN(fr(n.treePath,e),n.writeTree)}function kN(n,e){return{treePath:n,writeTree:e}}class OL{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;(0,Q.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,Q.hu)(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const u=i.type;if("child_added"===t&&"child_removed"===u)this.changeMap.set(r,LE(r,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===u)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===u)this.changeMap.set(r,function OE(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}(r,i.oldSnap));else if("child_changed"===t&&"child_added"===u)this.changeMap.set(r,function Gm(n,e){return{type:"child_added",snapshotNode:e,childName:n}}(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==u)throw(0,Q.g5)("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(r,LE(r,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const ON=new class LL{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class jA{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new uh(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return BA(this.writes_,e,r)}}getChildAfterChild(e,t,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:bp(this.viewCache_),u=function kL(n,e,t,r,i,u){return function NL(n,e,t,r,i,u,c){let h;const _=lh(n.visibleWrites,e),w=Tp(_,En());if(null!=w)h=w;else{if(null==t)return[];h=Zm(_,t)}if(h=h.withIndex(c),h.isEmpty()||h.isLeafNode())return[];{const D=[],S=c.getCompare(),P=u?h.getReverseIteratorFrom(r,c):h.getIteratorFrom(r,c);let B=P.getNext();for(;B&&D.length<i;)0!==S(B,r)&&D.push(B),B=P.getNext();return D}}(n.writeTree,n.treePath,e,t,r,i,u)}(this.writes_,i,t,1,r,e);return 0===u.length?null:u[0]}}function LN(n,e,t,r,i,u){const c=e.eventCache;if(null!=PC(r,t))return e;{let h,_;if(Jt(t))if((0,Q.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const w=bp(e),S=VA(r,w instanceof Ht?w:Ht.EMPTY_NODE);h=n.filter.updateFullNode(e.eventCache.getNode(),S,u)}else{const w=NC(r,bp(e));h=n.filter.updateFullNode(e.eventCache.getNode(),w,u)}else{const w=Qt(t);if(".priority"===w){(0,Q.hu)(1===ah(t),"Can't have a priority with additional path components");const D=c.getNode();_=e.serverCache.getNode();const S=NN(r,t,D,_);h=null!=S?n.filter.updatePriority(D,S):c.getNode()}else{const D=zn(t);let S;if(c.isCompleteForChild(w)){_=e.serverCache.getNode();const P=NN(r,t,c.getNode(),_);S=null!=P?c.getNode().getImmediateChild(w).updateChild(D,P):c.getNode().getImmediateChild(w)}else S=BA(r,w,e.serverCache);h=null!=S?n.filter.updateChild(c.getNode(),w,S,D,i,u):c.getNode()}}return BE(e,h,c.isFullyInitialized()||Jt(t),n.filter.filtersNodes())}}function kC(n,e,t,r,i,u,c,h){const _=e.serverCache;let w;const D=c?n.filter:n.filter.getIndexedFilter();if(Jt(t))w=D.updateFullNode(_.getNode(),r,null);else if(D.filtersNodes()&&!_.isFiltered()){const B=_.getNode().updateChild(t,r);w=D.updateFullNode(_.getNode(),B,null)}else{const B=Qt(t);if(!_.isCompleteForPath(t)&&ah(t)>1)return e;const Y=zn(t),Ke=_.getNode().getImmediateChild(B).updateChild(Y,r);w=".priority"===B?D.updatePriority(_.getNode(),Ke):D.updateChild(_.getNode(),B,Ke,Y,ON,null)}const S=DN(e,w,_.isFullyInitialized()||Jt(t),D.filtersNodes());return LN(n,S,t,i,new jA(i,S,u),h)}function $A(n,e,t,r,i,u,c){const h=e.eventCache;let _,w;const D=new jA(i,e,u);if(Jt(t))w=n.filter.updateFullNode(e.eventCache.getNode(),r,c),_=BE(e,w,!0,n.filter.filtersNodes());else{const S=Qt(t);if(".priority"===S)w=n.filter.updatePriority(e.eventCache.getNode(),r),_=BE(e,w,h.isFullyInitialized(),h.isFiltered());else{const P=zn(t),B=h.getNode().getImmediateChild(S);let Y;if(Jt(P))Y=r;else{const xe=D.getCompleteChild(S);Y=null!=xe?".priority"===_A(P)&&xe.getChild(uN(P)).isEmpty()?xe:xe.updateChild(P,r):Ht.EMPTY_NODE}_=B.equals(Y)?e:BE(e,n.filter.updateChild(h.getNode(),S,Y,P,D,c),h.isFullyInitialized(),n.filter.filtersNodes())}}return _}function FN(n,e){return n.eventCache.isCompleteForChild(e)}function UN(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function HA(n,e,t,r,i,u,c,h){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let w,_=e;w=Jt(t)?r:new Xn(null).setTree(t,r);const D=e.serverCache.getNode();return w.children.inorderTraversal((S,P)=>{if(D.hasChild(S)){const Y=UN(0,e.serverCache.getNode().getImmediateChild(S),P);_=kC(n,_,new Dn(S),Y,i,u,c,h)}}),w.children.inorderTraversal((S,P)=>{const B=!e.serverCache.isCompleteForChild(S)&&void 0===P.value;if(!D.hasChild(S)&&!B){const xe=UN(0,e.serverCache.getNode().getImmediateChild(S),P);_=kC(n,_,new Dn(S),xe,i,u,c,h)}}),_}function KL(n,e){const t=bp(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!Jt(e)&&!t.getImmediateChild(Qt(e)).isEmpty())?t.getChild(e):null}function jN(n,e,t,r){e.type===va.MERGE&&null!==e.source.queryId&&((0,Q.hu)(bp(n.viewCache_),"We should always have a full cache before handling merges"),(0,Q.hu)(RC(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,u=function VL(n,e,t,r,i){const u=new OL;let c,h;if(t.type===va.OVERWRITE){const w=t;w.source.fromUser?c=$A(n,e,w.path,w.snap,r,i,u):((0,Q.hu)(w.source.fromServer,"Unknown source."),h=w.source.tagged||e.serverCache.isFiltered()&&!Jt(w.path),c=kC(n,e,w.path,w.snap,r,i,h,u))}else if(t.type===va.MERGE){const w=t;w.source.fromUser?c=function jL(n,e,t,r,i,u,c){let h=e;return r.foreach((_,w)=>{const D=fr(t,_);FN(e,Qt(D))&&(h=$A(n,h,D,w,i,u,c))}),r.foreach((_,w)=>{const D=fr(t,_);FN(e,Qt(D))||(h=$A(n,h,D,w,i,u,c))}),h}(n,e,w.path,w.children,r,i,u):((0,Q.hu)(w.source.fromServer,"Unknown source."),h=w.source.tagged||e.serverCache.isFiltered(),c=HA(n,e,w.path,w.children,r,i,h,u))}else if(t.type===va.ACK_USER_WRITE){const w=t;c=w.revert?function WL(n,e,t,r,i,u){let c;if(null!=PC(r,t))return e;{const h=new jA(r,e,i),_=e.eventCache.getNode();let w;if(Jt(t)||".priority"===Qt(t)){let D;if(e.serverCache.isFullyInitialized())D=NC(r,bp(e));else{const S=e.serverCache.getNode();(0,Q.hu)(S instanceof Ht,"serverChildren would be complete if leaf node"),D=VA(r,S)}D=D,w=n.filter.updateFullNode(_,D,u)}else{const D=Qt(t);let S=BA(r,D,e.serverCache);null==S&&e.serverCache.isCompleteForChild(D)&&(S=_.getImmediateChild(D)),w=null!=S?n.filter.updateChild(_,D,S,zn(t),h,u):e.eventCache.getNode().hasChild(D)?n.filter.updateChild(_,D,Ht.EMPTY_NODE,zn(t),h,u):_,w.isEmpty()&&e.serverCache.isFullyInitialized()&&(c=NC(r,bp(e)),c.isLeafNode()&&(w=n.filter.updateFullNode(w,c,u)))}return c=e.serverCache.isFullyInitialized()||null!=PC(r,En()),BE(e,w,c,n.filter.filtersNodes())}}(n,e,w.path,r,i,u):function $L(n,e,t,r,i,u,c){if(null!=PC(i,t))return e;const h=e.serverCache.isFiltered(),_=e.serverCache;if(null!=r.value){if(Jt(t)&&_.isFullyInitialized()||_.isCompleteForPath(t))return kC(n,e,t,_.getNode().getChild(t),i,u,h,c);if(Jt(t)){let w=new Xn(null);return _.getNode().forEachChild(ll,(D,S)=>{w=w.set(new Dn(D),S)}),HA(n,e,t,w,i,u,h,c)}return e}{let w=new Xn(null);return r.foreach((D,S)=>{const P=fr(t,D);_.isCompleteForPath(P)&&(w=w.set(D,_.getNode().getChild(P)))}),HA(n,e,t,w,i,u,h,c)}}(n,e,w.path,w.affectedTree,r,i,u)}else{if(t.type!==va.LISTEN_COMPLETE)throw(0,Q.g5)("Unknown operation type: "+t.type);c=function HL(n,e,t,r,i){const u=e.serverCache;return LN(n,DN(e,u.getNode(),u.isFullyInitialized()||Jt(t),u.isFiltered()),t,r,ON,i)}(n,e,t.path,r,u)}const _=u.getChanges();return function BL(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),u=RC(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(u)||!r.getNode().getPriority().equals(u.getPriority()))&&t.push(function IN(n){return{type:"value",snapshotNode:n}}(RC(e)))}}(e,c,_),{viewCache:c,changes:_}}(n.processor_,i,e,t,r);return function UL(n,e){(0,Q.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,Q.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,u.viewCache),(0,Q.hu)(u.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=u.viewCache,function $N(n,e,t,r){return function _L(n,e,t,r){const i=[],u=[];return e.forEach(c=>{"child_changed"===c.type&&n.index_.indexedValueChanged(c.oldSnap,c.snapshotNode)&&u.push(function rL(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(c.childName,c.snapshotNode))}),VE(n,i,"child_removed",e,r,t),VE(n,i,"child_added",e,r,t),VE(n,i,"child_moved",u,r,t),VE(n,i,"child_changed",e,r,t),VE(n,i,"value",e,r,t),i}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}(n,u.changes,u.viewCache.eventCache.getNode(),null)}let OC,FC;function WA(n,e,t,r){const i=e.source.queryId;if(null!==i){const u=n.views.get(i);return(0,Q.hu)(null!=u,"SyncTree gave us an op for an invalid query."),jN(u,e,t,r)}{let u=[];for(const c of n.views.values())u=u.concat(jN(c,e,t,r));return u}}function ch(n,e){let t=null;for(const r of n.views.values())t=t||KL(r,e);return t}class KN{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Xn(null),this.pendingWriteTree_=function PL(){return{visibleWrites:au.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function zA(n,e,t,r,i){return function wL(n,e,t,r,i){(0,Q.hu)(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=jE(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,i),i?Ym(n,new Cp({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function hh(n,e,t=!1){const r=function CL(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function bL(n,e){const t=n.allWrites.findIndex(h=>h.writeId===e);(0,Q.hu)(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,u=!1,c=n.allWrites.length-1;for(;i&&c>=0;){const h=n.allWrites[c];h.visible&&(c>=t&&TL(h,r.path)?i=!1:ya(r.path,h.path)&&(u=!0)),c--}return!!i&&(u?(function DL(n){n.visibleWrites=RN(n.allWrites,SL,En()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=SN(n.visibleWrites,r.path):bi(r.children,_=>{n.visibleWrites=SN(n.visibleWrites,fr(r.path,_))}),!0))}(n.pendingWriteTree_,e)){let u=new Xn(null);return null!=r.snap?u=u.set(En(),!0):bi(r.children,c=>{u=u.set(new Dn(c),!0)}),Ym(n,new AC(r.path,u,t))}return[]}function $E(n,e,t){return Ym(n,new Cp({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function UC(n,e,t){const i=n.pendingWriteTree_,u=n.syncPointTree_.findOnPath(e,(c,h)=>{const w=ch(h,As(c,e));if(w)return w});return MN(i,e,u,t,!0)}function Ym(n,e){return YN(e,n.syncPointTree_,null,MC(n.pendingWriteTree_,En()))}function YN(n,e,t,r){if(Jt(n.path))return QN(n,e,t,r);{const i=e.get(En());null==t&&null!=i&&(t=ch(i,En()));let u=[];const c=Qt(n.path),h=n.operationForChild(c),_=e.children.get(c);if(_&&h){const w=t?t.getImmediateChild(c):null,D=PN(r,c);u=u.concat(YN(h,_,w,D))}return i&&(u=u.concat(WA(i,n,r,t))),u}}function QN(n,e,t,r){const i=e.get(En());null==t&&null!=i&&(t=ch(i,En()));let u=[];return e.children.inorderTraversal((c,h)=>{const _=t?t.getImmediateChild(c):null,w=PN(r,c),D=n.operationForChild(c);D&&(u=u.concat(QN(D,h,_,w)))}),i&&(u=u.concat(WA(i,n,r,t))),u}function qA(n,e){return n.tagToQueryMap.get(e)}function KA(n){const e=n.indexOf("$");return(0,Q.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new Dn(n.substr(0,e))}}function ZA(n,e,t){const r=n.syncPointTree_.get(e);return(0,Q.hu)(r,"Missing sync point for query tag that we're tracking"),WA(r,t,MC(n.pendingWriteTree_,e),null)}class YA{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new YA(t)}node(){return this.node_}}class QA{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=fr(this.path_,e);return new QA(this.syncTree_,t)}node(){return UC(this.syncTree_,this.path_)}}const XN=function(n,e,t){return n&&"object"==typeof n?((0,Q.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?_F(n[".sv"],e,t):"object"==typeof n[".sv"]?yF(n[".sv"],e):void(0,Q.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},_F=function(n,e,t){if("timestamp"===n)return t.timestamp;(0,Q.hu)(!1,"Unexpected server value: "+n)},yF=function(n,e,t){n.hasOwnProperty("increment")||(0,Q.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&(0,Q.hu)(!1,"Unexpected increment value: "+r);const i=e.node();if((0,Q.hu)(null!=i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const c=i.getValue();return"number"!=typeof c?r:c+r},JA=function(n,e,t){return XA(n,new YA(e),t)};function XA(n,e,t){const r=n.getPriority().val(),i=XN(r,e.getImmediateChild(".priority"),t);let u;if(n.isLeafNode()){const c=n,h=XN(c.getValue(),e,t);return h!==c.getValue()||i!==c.getPriority().val()?new Hm(h,br(i)):n}{const c=n;return u=c,i!==c.getPriority().val()&&(u=u.updatePriority(new Hm(i))),c.forEachChild(Jn,(h,_)=>{const w=XA(_,e.getImmediateChild(h),t);w!==_&&(u=u.updateImmediateChild(h,w))}),u}}class ex{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function jC(n,e){let t=e instanceof Dn?e:new Dn(e),r=n,i=Qt(t);for(;null!==i;){const u=(0,Q.DV)(r.node.children,i)||{children:{},childCount:0};r=new ex(i,r,u),t=zn(t),i=Qt(t)}return r}function Dp(n){return n.node.value}function tx(n,e){n.node.value=e,nx(n)}function tP(n){return n.node.childCount>0}function $C(n,e){bi(n.node.children,(t,r)=>{e(new ex(t,n,r))})}function nP(n,e,t,r){t&&!r&&e(n),$C(n,i=>{nP(i,e,!0,r)}),t&&r&&e(n)}function WE(n){return new Dn(null===n.parent?n.name:WE(n.parent)+"/"+n.name)}function nx(n){null!==n.parent&&function wF(n,e,t){const r=function vF(n){return void 0===Dp(n)&&!tP(n)}(t),i=(0,Q.r3)(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,nx(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,nx(n))}(n.parent,n.name,n)}const IF=/[\[\].#$\/\u0000-\u001F\u007F]/,CF=/[\[\].#$\u0000-\u001F\u007F]/,rx=10485760,HC=function(n){return"string"==typeof n&&0!==n.length&&!IF.test(n)},GE=function(n,e,t){const r=t instanceof Dn?new FO(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+wp(r));if("function"==typeof e)throw new Error(n+"contains a function "+wp(r)+" with contents = "+e.toString());if(mC(e))throw new Error(n+"contains "+e.toString()+" "+wp(r));if("string"==typeof e&&e.length>rx/3&&(0,Q.ug)(e)>rx)throw new Error(n+"contains a string greater than "+rx+" utf8 bytes "+wp(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let i=!1,u=!1;if(bi(e,(c,h)=>{if(".value"===c)i=!0;else if(".priority"!==c&&".sv"!==c&&(u=!0,!HC(c)))throw new Error(n+" contains an invalid key ("+c+") "+wp(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function UO(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,Q.ug)(e),lN(n)})(r,c),GE(n,h,r),function VO(n){const e=n.parts_.pop();n.byteLength_-=(0,Q.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),i&&u)throw new Error(n+' contains ".value" child '+wp(r)+" in addition to actual children.")}},sP=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!HC(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),function(n){return"string"==typeof n&&0!==n.length&&!CF.test(n)}(n)}(t))throw new Error((0,Q.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class SF{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Ea(n,e,t){(function WC(n,e){let t=null;for(let r=0;r<e.length;r++){const i=e[r],u=i.getPath();null!==t&&!yA(u,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:u}),t.events.push(i)}t&&n.eventLists_.push(t)})(n,t),function oP(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];i&&(e(i.path)?(AF(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}(n,r=>ya(r,e)||ya(e,r))}function AF(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();vp&&Ci("event: "+t.toString()),jm(r)}}}class RF{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new SF,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=SC(),this.transactionQueueTree_=new ex,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function uP(n){const t=n.infoData_.getNode(new Dn(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function KE(n){return function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n}({timestamp:uP(n)})}function lP(n,e,t,r,i){n.dataUpdateCount++;const u=new Dn(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let c=[];if(i)if(r){const _=(0,Q.UI)(t,w=>br(w));c=function cF(n,e,t,r){const i=qA(n,r);if(i){const u=KA(i),c=u.path,h=u.queryId,_=As(c,e),w=Xn.fromObject(t);return ZA(n,c,new Km(kA(h),_,w))}return[]}(n.serverSyncTree_,u,_,i)}else{const _=br(t);c=function lF(n,e,t,r){const i=qA(n,r);if(null!=i){const u=KA(i),c=u.path,h=u.queryId,_=As(c,e);return ZA(n,c,new Cp(kA(h),_,t))}return[]}(n.serverSyncTree_,u,_,i)}else if(r){const _=(0,Q.UI)(t,w=>br(w));c=function oF(n,e,t){const r=Xn.fromObject(t);return Ym(n,new Km({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,u,_)}else{const _=br(t);c=$E(n.serverSyncTree_,u,_)}let h=u;c.length>0&&(h=Jm(n,u)),Ea(n.eventQueue_,h,c)}function cP(n,e){ax(n,"connected",e),!1===e&&function OF(n){Qm(n,"onDisconnectEvents");const e=KE(n),t=SC();MA(n.onDisconnect_,En(),(i,u)=>{const c=function(n,e,t,r){return XA(e,new QA(t,n),r)}(i,u,n.serverSyncTree_,e);qm(t,i,c)});let r=[];MA(t,En(),(i,u)=>{r=r.concat($E(n.serverSyncTree_,i,u));const c=function dx(n,e){const t=WE(fP(n,e)),r=jC(n.transactionQueueTree_,e);return function EF(n,e,t){let r=t?n:n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,i=>{hx(n,i)}),hx(n,r),nP(r,i=>{hx(n,i)}),t}(n,i);Jm(n,c)}),n.onDisconnect_=SC(),Ea(n.eventQueue_,En(),r)}(n)}function ax(n,e,t){const r=new Dn("/.info/"+e),i=br(t);n.infoData_.updateSnapshot(r,i);const u=$E(n.infoSyncTree_,r,i);Ea(n.eventQueue_,r,u)}function zC(n){return n.nextWriteId_++}function Qm(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),Ci(t,...e)}function cx(n,e,t){return UC(n.serverSyncTree_,e,t)||Ht.EMPTY_NODE}function GC(n,e=n.transactionQueueTree_){if(e||qC(n,e),Dp(e)){const t=pP(n,e);(0,Q.hu)(t.length>0,"Sending zero length transaction queue"),t.every(i=>0===i.status)&&function $F(n,e,t){const r=t.map(w=>w.currentWriteId),i=cx(n,e,r);let u=i;const c=i.hash();for(let w=0;w<t.length;w++){const D=t[w];(0,Q.hu)(0===D.status,"tryToSendTransactionQueue_: items in queue should all be run."),D.status=1,D.retryCount++;const S=As(e,D.path);u=u.updateChild(S,D.currentOutputSnapshotRaw)}const h=u.val(!0),_=e;n.server_.put(_.toString(),h,w=>{Qm(n,"transaction put response",{path:_.toString(),status:w});let D=[];if("ok"===w){const S=[];for(let P=0;P<t.length;P++)t[P].status=2,D=D.concat(hh(n.serverSyncTree_,t[P].currentWriteId)),t[P].onComplete&&S.push(()=>t[P].onComplete(null,!0,t[P].currentOutputSnapshotResolved)),t[P].unwatcher();qC(n,jC(n.transactionQueueTree_,e)),GC(n,n.transactionQueueTree_),Ea(n.eventQueue_,e,D);for(let P=0;P<S.length;P++)jm(S[P])}else{if("datastale"===w)for(let S=0;S<t.length;S++)t[S].status=3===t[S].status?4:0;else{ts("transaction at "+_.toString()+" failed: "+w);for(let S=0;S<t.length;S++)t[S].status=4,t[S].abortReason=w}Jm(n,e)}},c)}(n,WE(e),t)}else tP(e)&&$C(e,t=>{GC(n,t)})}function Jm(n,e){const t=fP(n,e),r=WE(t);return function HF(n,e,t){if(0===e.length)return;const r=[];let i=[];const c=e.filter(h=>0===h.status).map(h=>h.currentWriteId);for(let h=0;h<e.length;h++){const _=e[h],w=As(t,_.path);let S,D=!1;if((0,Q.hu)(null!==w,"rerunTransactionsUnderNode_: relativePath should not be null."),4===_.status)D=!0,S=_.abortReason,i=i.concat(hh(n.serverSyncTree_,_.currentWriteId,!0));else if(0===_.status)if(_.retryCount>=25)D=!0,S="maxretry",i=i.concat(hh(n.serverSyncTree_,_.currentWriteId,!0));else{const P=cx(n,_.path,c);_.currentInputSnapshot=P;const B=e[h].update(P.val());if(void 0!==B){GE("transaction failed: Data returned ",B,_.path);let Y=br(B);"object"==typeof B&&null!=B&&(0,Q.r3)(B,".priority")||(Y=Y.updatePriority(P.getPriority()));const Ke=_.currentWriteId,Gt=KE(n),Wt=JA(Y,P,Gt);_.currentOutputSnapshotRaw=Y,_.currentOutputSnapshotResolved=Wt,_.currentWriteId=zC(n),c.splice(c.indexOf(Ke),1),i=i.concat(zA(n.serverSyncTree_,_.path,Wt,_.currentWriteId,_.applyLocally)),i=i.concat(hh(n.serverSyncTree_,Ke,!0))}else D=!0,S="nodata",i=i.concat(hh(n.serverSyncTree_,_.currentWriteId,!0))}Ea(n.eventQueue_,t,i),i=[],D&&(e[h].status=2,setTimeout(e[h].unwatcher,Math.floor(0)),e[h].onComplete&&r.push("nodata"===S?()=>e[h].onComplete(null,!1,e[h].currentInputSnapshot):()=>e[h].onComplete(new Error(S),!1,null)))}qC(n,n.transactionQueueTree_);for(let h=0;h<r.length;h++)jm(r[h]);GC(n,n.transactionQueueTree_)}(n,pP(n,t),r),r}function fP(n,e){let t,r=n.transactionQueueTree_;for(t=Qt(e);null!==t&&void 0===Dp(r);)r=jC(r,t),t=Qt(e=zn(e));return r}function pP(n,e){const t=[];return gP(n,e,t),t.sort((r,i)=>r.order-i.order),t}function gP(n,e,t){const r=Dp(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);$C(e,i=>{gP(n,i,t)})}function qC(n,e){const t=Dp(e);if(t){let r=0;for(let i=0;i<t.length;i++)2!==t[i].status&&(t[r]=t[i],r++);t.length=r,tx(e,t.length>0?t:void 0)}$C(e,r=>{qC(n,r)})}function hx(n,e){const t=Dp(e);if(t){const r=[];let i=[],u=-1;for(let c=0;c<t.length;c++)3===t[c].status||(1===t[c].status?((0,Q.hu)(u===c-1,"All SENT items should be at beginning of queue."),u=c,t[c].status=3,t[c].abortReason="set"):((0,Q.hu)(0===t[c].status,"Unexpected transaction status in abort"),t[c].unwatcher(),i=i.concat(hh(n.serverSyncTree_,t[c].currentWriteId,!0)),t[c].onComplete&&r.push(t[c].onComplete.bind(null,new Error("set"),!1,null))));-1===u?tx(e,void 0):t.length=u+1,Ea(n.eventQueue_,WE(e),i);for(let c=0;c<r.length;c++)jm(r[c])}}const fx=function(n,e){const t=GF(n),r=t.namespace;return"firebase.com"===t.domain&&al(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&al("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&ts("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new dA(t.host,t.secure,r,"ws"===t.scheme||"wss"===t.scheme,e,"",r!==t.subdomain),path:new Dn(t.pathString)}},GF=function(n){let e="",t="",r="",i="",u="",c=!0,h="https",_=443;if("string"==typeof n){let w=n.indexOf("//");w>=0&&(h=n.substring(0,w-1),n=n.substring(w+2));let D=n.indexOf("/");-1===D&&(D=n.length);let S=n.indexOf("?");-1===S&&(S=n.length),e=n.substring(0,Math.min(D,S)),D<S&&(i=function WF(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(u){}e+="/"+i}return e}(n.substring(D,S)));const P=function zF(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):ts(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,S)));w=e.indexOf(":"),w>=0?(c="https"===h||"wss"===h,_=parseInt(e.substring(w+1),10)):w=e.length;const B=e.slice(0,w);if("localhost"===B.toLowerCase())t="localhost";else if(B.split(".").length<=2)t=B;else{const Y=e.indexOf(".");r=e.substring(0,Y).toLowerCase(),t=e.substring(Y+1),u=r}"ns"in P&&(u=P.ns)}return{host:e,port:_,domain:t,subdomain:r,secure:c,scheme:h,pathString:i,namespace:u}};class No{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return Jt(this._path)?null:_A(this._path)}get ref(){return new uu(this._repo,this._path)}get _queryIdentifier(){const e=bN(this._queryParams),t=uA(e);return"{}"===t?"default":t}get _queryObject(){return bN(this._queryParams)}isEqual(e){if(!((e=(0,Q.m9)(e))instanceof No))return!1;const t=this._repo===e._repo,r=yA(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function OO(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}class uu extends No{constructor(e,t){super(e,t,new SA,!1)}get parent(){const e=uN(this._path);return null===e?null:new uu(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}(function QL(n){(0,Q.hu)(!OC,"__referenceConstructor has already been defined"),OC=n})(uu),function nF(n){(0,Q.hu)(!FC,"__referenceConstructor has already been defined"),FC=n}(uu);const px={};class dU{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function MF(n,e,t){if(n.stats_=pA(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new DC(n.repoInfo_,(r,i,u,c)=>{lP(n,r,i,u,c)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>cP(n,!0),0);else{if(null!=t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,Q.Pz)(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new Ip(n.repoInfo_,e,(r,i,u,c)=>{lP(n,r,i,u,c)},r=>{cP(n,r)},r=>{!function NF(n,e){bi(e,(t,r)=>{ax(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function fO(n,e){const t=n.toString();return fA[t]||(fA[t]=e()),fA[t]}(n.repoInfo_,()=>new gL(n.stats_,n.server_)),n.infoData_=new cL,n.infoSyncTree_=new KN({startListening:(r,i,u,c)=>{let h=[];const _=n.infoData_.getNode(r._path);return _.isEmpty()||(h=$E(n.infoSyncTree_,r._path,_),setTimeout(()=>{c("ok")},0)),h},stopListening:()=>{}}),ax(n,"connected",!1),n.serverSyncTree_=new KN({startListening:(r,i,u,c)=>(n.server_.listen(r,u,i,(h,_)=>{const w=c(h,_);Ea(n.eventQueue_,r._path,w)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new uu(this._repo,En())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function uU(n,e){const t=px[e];(!t||t[n.key]!==n)&&al(`Database ${e}(${n.repoInfo_}) has already been deleted.`),function hP(n){n.persistentConnection_&&n.persistentConnection_.interrupt("repo_interrupt")}(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&al("Cannot call "+e+" on a deleted database.")}}function hU(n=(0,Hn.getApp)(),e){return(0,Hn._getProvider)(n,"database").getImmediate({identifier:e})}Ip.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},Ip.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function fU(n){(function J1(n){sA=n})(Hn.SDK_VERSION),(0,Hn._registerComponent)(new nd.wA("database",(e,{instanceIdentifier:t})=>function aU(n,e,t,r,i){let u=r||n.options.databaseURL;void 0===u&&(n.options.projectId||al("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Ci("Using default host for project ",n.options.projectId),u=`${n.options.projectId}-default-rtdb.firebaseio.com`);let _,w,c=fx(u,i),h=c.repoInfo;"undefined"!=typeof process&&process.env&&(w=process.env.FIREBASE_DATABASE_EMULATOR_HOST),w?(_=!0,u=`http://${w}?ns=${h.namespace}`,c=fx(u,i),h=c.repoInfo):_=!c.repoInfo.secure;const D=i&&_?new RE(RE.OWNER):new cO(n.name,n.options,e);sP("Invalid Firebase Database URL",c),Jt(c.path)||al("Database URL must point to the root of a Firebase Database (not including a child path).");const S=function lU(n,e,t,r){let i=px[e.name];i||(i={},px[e.name]=i);let u=i[n.toURLString()];return u&&al("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),u=new RF(n,!1,t,r),i[n.toURLString()]=u,u}(h,n,D,new lO(n.name,t));return new dU(S,n)}(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,Hn.registerVersion)(bM,"0.13.0",n),(0,Hn.registerVersion)(bM,"0.13.0","esm2017")}();class gx{constructor(e){return e}}const bP="database",mx=new g.OlP("angularfire2.database-instances");function yU(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new gx(r)}}const vU={provide:class mU{constructor(){return(0,tn.vb)(bP)}},deps:[[new g.FiY,mx]]},EU={provide:gx,useFactory:function _U(n,e){const t=(0,tn.JM)(bP,n,e);return t&&new gx(t)},deps:[[new g.FiY,mx],Vl]};let wU=(()=>{class n{constructor(){(0,Qa.KN)("angularfire",tn.q4.full,"rtdb")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({providers:[EU,vU]}),n})();function IU(n,...e){return{ngModule:wU,providers:[{provide:mx,useFactory:yU(n),multi:!0,deps:[g.R0b,g.zs3,tn.HU,Ki,[new g.FiY,rA],[new g.FiY,Oi],...e]}]}}const CU=(0,tn.u3)(hU,!0);class _x{constructor(e){return e}}const TP="firestore",yx=new g.OlP("angularfire2.firestore-instances");function DU(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new _x(r)}}const SU={provide:class bU{constructor(){return(0,tn.vb)(TP)}},deps:[[new g.FiY,yx]]},AU={provide:_x,useFactory:function TU(n,e){const t=(0,tn.JM)(TP,n,e);return t&&new _x(t)},deps:[[new g.FiY,yx],Vl]};let DP=(()=>{class n{constructor(){(0,Qa.KN)("angularfire",tn.q4.full,"fst")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({providers:[AU,SU]}),n})();function xU(n,...e){return{ngModule:DP,providers:[{provide:yx,useFactory:DU(n),multi:!0,deps:[g.R0b,g.zs3,tn.HU,Ki,[new g.FiY,rA],[new g.FiY,Oi],...e]}]}}const RU=(0,tn.u3)(Ik,!0);let MU=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n,bootstrap:[H1]}),n.\u0275inj=g.cJS({providers:[TE],imports:[[vl,B1,Hs.hO.initializeApp(tA_firebase),DP,R1,kb(()=>A0(tA_firebase)),IU(()=>CU()),Y1(()=>Q1()),xU(()=>RU())]]}),n})();(0,g.G48)(),Fc().bootstrapModule(MU).catch(n=>console.error(n))},5867:(nt,Te,k)=>{k.d(Te,{C6:()=>g.getApps,KN:()=>g.registerVersion,Mq:()=>g.getApp,ZF:()=>g.initializeApp});var g=k(9681);(0,g.registerVersion)("firebase","9.8.1","app")},127:(nt,Te,k)=>{k.d(Te,{Z:()=>g.Z});var g=k(3942);g.Z.registerVersion("firebase","9.8.1","app-compat")},5881:(nt,Te,k)=>{k.r(Te);var g=k(5861),U=k(3942),N=k(198),ae=k(2090),fe=(k(9681),k(1877),k(4859));function le(){return window}function j(){return(j=(0,g.Z)(function*(ce,K,G){var Se;const{BuildInfo:Ze}=le();(0,N.aq)(K.sessionId,"AuthEvent did not contain a session ID");const ct=yield De(K.sessionId),Tt={};return(0,N.ar)()?Tt.ibi=Ze.packageName:(0,N.as)()?Tt.apn=Ze.packageName:(0,N.at)(ce,"operation-not-supported-in-this-environment"),Ze.displayName&&(Tt.appDisplayName=Ze.displayName),Tt.sessionId=ct,(0,N.au)(ce,G,K.type,void 0,null!==(Se=K.eventId)&&void 0!==Se?Se:void 0,Tt)})).apply(this,arguments)}function Ge(){return(Ge=(0,g.Z)(function*(ce){const{BuildInfo:K}=le(),G={};(0,N.ar)()?G.iosBundleId=K.packageName:(0,N.as)()?G.androidPackageName=K.packageName:(0,N.at)(ce,"operation-not-supported-in-this-environment"),yield(0,N.av)(ce,G)})).apply(this,arguments)}function He(){return(He=(0,g.Z)(function*(ce,K,G){const{cordova:Se}=le();let Ze=()=>{};try{yield new Promise((ct,Tt)=>{let zt=null;function Ft(){var Ut;ct();const kr=null===(Ut=Se.plugins.browsertab)||void 0===Ut?void 0:Ut.close;"function"==typeof kr&&kr(),"function"==typeof(null==G?void 0:G.close)&&G.close()}function qn(){zt||(zt=window.setTimeout(()=>{Tt((0,N.aw)(ce,"redirect-cancelled-by-user"))},2e3))}function ti(){"visible"===(null==document?void 0:document.visibilityState)&&qn()}K.addPassiveListener(Ft),document.addEventListener("resume",qn,!1),(0,N.as)()&&document.addEventListener("visibilitychange",ti,!1),Ze=()=>{K.removePassiveListener(Ft),document.removeEventListener("resume",qn,!1),document.removeEventListener("visibilitychange",ti,!1),zt&&window.clearTimeout(zt)}})}finally{Ze()}})).apply(this,arguments)}function De(ce){return ze.apply(this,arguments)}function ze(){return(ze=(0,g.Z)(function*(ce){const K=We(ce),G=yield crypto.subtle.digest("SHA-256",K);return Array.from(new Uint8Array(G)).map(Ze=>Ze.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function We(ce){if((0,N.aq)(/[0-9a-zA-Z]+/.test(ce),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(ce);const K=new ArrayBuffer(ce.length),G=new Uint8Array(K);for(let Se=0;Se<ce.length;Se++)G[Se]=ce.charCodeAt(Se);return G}class ke extends N.aA{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(K=>{this.resolveInialized=K})}addPassiveListener(K){this.passiveListeners.add(K)}removePassiveListener(K){this.passiveListeners.delete(K)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(K){return this.resolveInialized(),this.passiveListeners.forEach(G=>G(K)),super.onEvent(K)}initialized(){var K=this;return(0,g.Z)(function*(){yield K.initPromise})()}}function ne(ce){return he.apply(this,arguments)}function he(){return(he=(0,g.Z)(function*(ce){const K=yield re()._get(oe(ce));return K&&(yield re()._remove(oe(ce))),K})).apply(this,arguments)}function Z(){const ce=[],K="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let G=0;G<20;G++){const Se=Math.floor(Math.random()*K.length);ce.push(K.charAt(Se))}return ce.join("")}function re(){return(0,N.ay)(N.b)}function oe(ce){return(0,N.az)("authEvent",ce.config.apiKey,ce.name)}function Ve(ce){if(!(null==ce?void 0:ce.includes("?")))return{};const[K,...G]=ce.split("?");return(0,ae.zd)(G.join("?"))}function Ye(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,N.aw)("no-auth-event")}}function Vt(){var ce;return(null===(ce=null==self?void 0:self.location)||void 0===ce?void 0:ce.protocol)||null}function Cn(ce=(0,ae.z$)()){return!("file:"!==Vt()&&"ionic:"!==Vt()||!ce.toLowerCase().match(/iphone|ipad|ipod|android/))}function di(){try{const ce=self.localStorage,K=N.aI();if(ce)return ce.setItem(K,"1"),ce.removeItem(K),!function Ui(ce=(0,ae.z$)()){return function Nr(){return(0,ae.w1)()&&11===(null==document?void 0:document.documentMode)}()||function Sn(ce=(0,ae.z$)()){return/Edge\/\d+/.test(ce)}(ce)}()||(0,ae.hl)()}catch(ce){return Di()&&(0,ae.hl)()}return!1}function Di(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function Gn(){return(function Yt(){return"http:"===Vt()||"https:"===Vt()}()||(0,ae.ru)()||Cn())&&!function Ti(){return(0,ae.b$)()||(0,ae.UG)()}()&&di()&&!Di()}function Vi(){return Cn()&&"undefined"!=typeof document}function Hr(){return(Hr=(0,g.Z)(function*(){return!!Vi()&&new Promise(ce=>{const K=setTimeout(()=>{ce(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(K),ce(!0)})})})).apply(this,arguments)}const en={LOCAL:"local",NONE:"none",SESSION:"session"},Pr=N.ax,or="persistence";function bn(ce){return pr.apply(this,arguments)}function pr(){return(pr=(0,g.Z)(function*(ce){yield ce._initializationPromise;const K=Bt(),G=N.az(or,ce.config.apiKey,ce.name);K&&K.setItem(G,ce._getPersistence())})).apply(this,arguments)}function Bt(){var ce;try{return(null===(ce=function wn(){return"undefined"!=typeof window?window:null}())||void 0===ce?void 0:ce.sessionStorage)||null}catch(K){return null}}const dt=N.ax;class st{constructor(){this.browserResolver=N.ay(N.k),this.cordovaResolver=N.ay(class Zt{constructor(){this._redirectPersistence=N.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=N.aB,this._overrideRedirectResult=N.aC}_initialize(K){var G=this;return(0,g.Z)(function*(){const Se=K._key();let Ze=G.eventManagers.get(Se);return Ze||(Ze=new ke(K),G.eventManagers.set(Se,Ze),G.attachCallbackListeners(K,Ze)),Ze})()}_openPopup(K){(0,N.at)(K,"operation-not-supported-in-this-environment")}_openRedirect(K,G,Se,Ze){var ct=this;return(0,g.Z)(function*(){!function _e(ce){var K,G,Se,Ze,ct,Tt,zt,Ft,qn,ti;const Ut=le();(0,N.ax)("function"==typeof(null===(K=null==Ut?void 0:Ut.universalLinks)||void 0===K?void 0:K.subscribe),ce,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,N.ax)(void 0!==(null===(G=null==Ut?void 0:Ut.BuildInfo)||void 0===G?void 0:G.packageName),ce,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,N.ax)("function"==typeof(null===(ct=null===(Ze=null===(Se=null==Ut?void 0:Ut.cordova)||void 0===Se?void 0:Se.plugins)||void 0===Ze?void 0:Ze.browsertab)||void 0===ct?void 0:ct.openUrl),ce,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,N.ax)("function"==typeof(null===(Ft=null===(zt=null===(Tt=null==Ut?void 0:Ut.cordova)||void 0===Tt?void 0:Tt.plugins)||void 0===zt?void 0:zt.browsertab)||void 0===Ft?void 0:Ft.isAvailable),ce,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,N.ax)("function"==typeof(null===(ti=null===(qn=null==Ut?void 0:Ut.cordova)||void 0===qn?void 0:qn.InAppBrowser)||void 0===ti?void 0:ti.open),ce,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(K);const Tt=yield ct._initialize(K);yield Tt.initialized(),Tt.resetRedirect(),(0,N.aD)(),yield ct._originValidation(K);const zt=function Ce(ce,K,G=null){return{type:K,eventId:G,urlResponse:null,sessionId:Z(),postBody:null,tenantId:ce.tenantId,error:(0,N.aw)(ce,"no-auth-event")}}(K,Se,Ze);yield function qe(ce,K){return re()._set(oe(ce),K)}(K,zt);const Ft=yield function W(ce,K,G){return j.apply(this,arguments)}(K,zt,G),qn=yield function Ne(ce){const{cordova:K}=le();return new Promise(G=>{K.plugins.browsertab.isAvailable(Se=>{let Ze=null;Se?K.plugins.browsertab.openUrl(ce):Ze=K.InAppBrowser.open(ce,(0,N.ap)()?"_blank":"_system","location=yes"),G(Ze)})})}(Ft);return function Ue(ce,K,G){return He.apply(this,arguments)}(K,Tt,qn)})()}_isIframeWebStorageSupported(K,G){throw new Error("Method not implemented.")}_originValidation(K){const G=K._key();return this.originValidationPromises[G]||(this.originValidationPromises[G]=function se(ce){return Ge.apply(this,arguments)}(K)),this.originValidationPromises[G]}attachCallbackListeners(K,G){const{universalLinks:Se,handleOpenURL:Ze,BuildInfo:ct}=le(),Tt=setTimeout((0,g.Z)(function*(){yield ne(K),G.onEvent(Ye())}),500),zt=function(){var ti=(0,g.Z)(function*(Ut){clearTimeout(Tt);const kr=yield ne(K);let ji=null;kr&&(null==Ut?void 0:Ut.url)&&(ji=function be(ce,K){var G,Se;const Ze=function de(ce){const K=Ve(ce),G=K.link?decodeURIComponent(K.link):void 0,Se=Ve(G).link,Ze=K.deep_link_id?decodeURIComponent(K.deep_link_id):void 0;return Ve(Ze).link||Ze||Se||G||ce}(K);if(Ze.includes("/__/auth/callback")){const ct=Ve(Ze),Tt=ct.firebaseError?function Ee(ce){try{return JSON.parse(ce)}catch(K){return null}}(decodeURIComponent(ct.firebaseError)):null,zt=null===(Se=null===(G=null==Tt?void 0:Tt.code)||void 0===G?void 0:G.split("auth/"))||void 0===Se?void 0:Se[1],Ft=zt?(0,N.aw)(zt):null;return Ft?{type:ce.type,eventId:ce.eventId,tenantId:ce.tenantId,error:Ft,urlResponse:null,sessionId:null,postBody:null}:{type:ce.type,eventId:ce.eventId,tenantId:ce.tenantId,sessionId:ce.sessionId,urlResponse:Ze,postBody:null}}return null}(kr,Ut.url)),G.onEvent(ji||Ye())});return function(kr){return ti.apply(this,arguments)}}();void 0!==Se&&"function"==typeof Se.subscribe&&Se.subscribe(null,zt);const Ft=Ze,qn=`${ct.packageName.toLowerCase()}://`;le().handleOpenURL=function(){var ti=(0,g.Z)(function*(Ut){if(Ut.toLowerCase().startsWith(qn)&&zt({url:Ut}),"function"==typeof Ft)try{Ft(Ut)}catch(kr){console.error(kr)}});return function(Ut){return ti.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=N.a,this._completeRedirectFn=N.aB,this._overrideRedirectResult=N.aC}_initialize(K){var G=this;return(0,g.Z)(function*(){return yield G.selectUnderlyingResolver(),G.assertedUnderlyingResolver._initialize(K)})()}_openPopup(K,G,Se,Ze){var ct=this;return(0,g.Z)(function*(){return yield ct.selectUnderlyingResolver(),ct.assertedUnderlyingResolver._openPopup(K,G,Se,Ze)})()}_openRedirect(K,G,Se,Ze){var ct=this;return(0,g.Z)(function*(){return yield ct.selectUnderlyingResolver(),ct.assertedUnderlyingResolver._openRedirect(K,G,Se,Ze)})()}_isIframeWebStorageSupported(K,G){this.assertedUnderlyingResolver._isIframeWebStorageSupported(K,G)}_originValidation(K){return this.assertedUnderlyingResolver._originValidation(K)}get _shouldInitProactively(){return Vi()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return dt(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var K=this;return(0,g.Z)(function*(){if(K.underlyingResolver)return;const G=yield function pt(){return Hr.apply(this,arguments)}();K.underlyingResolver=G?K.cordovaResolver:K.browserResolver})()}}function hi(ce){return ce.unwrap()}function jt(ce){return Ln(ce)}function Ln(ce){const{_tokenResponse:K}=ce instanceof ae.ZR?ce.customData:ce;if(!K)return null;if(!(ce instanceof ae.ZR)&&"temporaryProof"in K&&"phoneNumber"in K)return N.P.credentialFromResult(ce);const G=K.providerId;if(!G||G===N.o.PASSWORD)return null;let Se;switch(G){case N.o.GOOGLE:Se=N.Q;break;case N.o.FACEBOOK:Se=N.N;break;case N.o.GITHUB:Se=N.T;break;case N.o.TWITTER:Se=N.W;break;default:const{oauthIdToken:Ze,oauthAccessToken:ct,oauthTokenSecret:Tt,pendingToken:zt,nonce:Ft}=K;return ct||Tt||Ze||zt?zt?G.startsWith("saml.")?N.aL._create(G,zt):N.J._fromParams({providerId:G,signInMethod:G,pendingToken:zt,idToken:Ze,accessToken:ct}):new N.U(G).credential({idToken:Ze,accessToken:ct,rawNonce:Ft}):null}return ce instanceof ae.ZR?Se.credentialFromError(ce):Se.credentialFromResult(ce)}function fn(ce,K){return K.catch(G=>{throw G instanceof ae.ZR&&function Bi(ce,K){var G;const Se=null===(G=K.customData)||void 0===G?void 0:G._tokenResponse;if("auth/multi-factor-auth-required"===K.code)K.resolver=new q(ce,N.an(ce,K));else if(Se){const Ze=Ln(K),ct=K;Ze&&(ct.credential=Ze,ct.tenantId=Se.tenantId||void 0,ct.email=Se.email||void 0,ct.phoneNumber=Se.phoneNumber||void 0)}}(ce,G),G}).then(G=>{const Ze=G.user;return{operationType:G.operationType,credential:jt(G),additionalUserInfo:N.al(G),user:we.getOrCreate(Ze)}})}function V(ce,K){return z.apply(this,arguments)}function z(){return(z=(0,g.Z)(function*(ce,K){const G=yield K;return{verificationId:G.verificationId,confirm:Se=>fn(ce,G.confirm(Se))}})).apply(this,arguments)}class q{constructor(K,G){this.resolver=G,this.auth=function fi(ce){return ce.wrapped()}(K)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(K){return fn(hi(this.auth),this.resolver.resolveSignIn(K))}}class we{constructor(K){this._delegate=K,this.multiFactor=N.ao(K)}static getOrCreate(K){return we.USER_MAP.has(K)||we.USER_MAP.set(K,new we(K)),we.USER_MAP.get(K)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(K){return this._delegate.getIdTokenResult(K)}getIdToken(K){return this._delegate.getIdToken(K)}linkAndRetrieveDataWithCredential(K){return this.linkWithCredential(K)}linkWithCredential(K){var G=this;return(0,g.Z)(function*(){return fn(G.auth,N.Z(G._delegate,K))})()}linkWithPhoneNumber(K,G){var Se=this;return(0,g.Z)(function*(){return V(Se.auth,N.l(Se._delegate,K,G))})()}linkWithPopup(K){var G=this;return(0,g.Z)(function*(){return fn(G.auth,N.d(G._delegate,K,st))})()}linkWithRedirect(K){var G=this;return(0,g.Z)(function*(){return yield bn(N.aE(G.auth)),N.g(G._delegate,K,st)})()}reauthenticateAndRetrieveDataWithCredential(K){return this.reauthenticateWithCredential(K)}reauthenticateWithCredential(K){var G=this;return(0,g.Z)(function*(){return fn(G.auth,N._(G._delegate,K))})()}reauthenticateWithPhoneNumber(K,G){return V(this.auth,N.r(this._delegate,K,G))}reauthenticateWithPopup(K){return fn(this.auth,N.e(this._delegate,K,st))}reauthenticateWithRedirect(K){var G=this;return(0,g.Z)(function*(){return yield bn(N.aE(G.auth)),N.h(G._delegate,K,st)})()}sendEmailVerification(K){return N.ab(this._delegate,K)}unlink(K){var G=this;return(0,g.Z)(function*(){return yield N.ak(G._delegate,K),G})()}updateEmail(K){return N.ag(this._delegate,K)}updatePassword(K){return N.ah(this._delegate,K)}updatePhoneNumber(K){return N.u(this._delegate,K)}updateProfile(K){return N.af(this._delegate,K)}verifyBeforeUpdateEmail(K,G){return N.ac(this._delegate,K,G)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}we.USER_MAP=new WeakMap;const $=N.ax;let te=(()=>{class ce{constructor(G,Se){if(this.app=G,Se.isInitialized())return this._delegate=Se.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:Ze}=G.options;$(Ze,"invalid-api-key",{appName:G.name}),$(Ze,"invalid-api-key",{appName:G.name});const ct="undefined"!=typeof window?st:void 0;this._delegate=Se.initialize({options:{persistence:Xe(Ze,G.name),popupRedirectResolver:ct}}),this._delegate._updateErrorMap(N.B),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?we.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(G){this._delegate.languageCode=G}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(G){this._delegate.tenantId=G}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(G,Se){N.G(this._delegate,G,Se)}applyActionCode(G){return N.a2(this._delegate,G)}checkActionCode(G){return N.a3(this._delegate,G)}confirmPasswordReset(G,Se){return N.a1(this._delegate,G,Se)}createUserWithEmailAndPassword(G,Se){var Ze=this;return(0,g.Z)(function*(){return fn(Ze._delegate,N.a5(Ze._delegate,G,Se))})()}fetchProvidersForEmail(G){return this.fetchSignInMethodsForEmail(G)}fetchSignInMethodsForEmail(G){return N.aa(this._delegate,G)}isSignInWithEmailLink(G){return N.a8(this._delegate,G)}getRedirectResult(){var G=this;return(0,g.Z)(function*(){$(Gn(),G._delegate,"operation-not-supported-in-this-environment");const Se=yield N.j(G._delegate,st);return Se?fn(G._delegate,Promise.resolve(Se)):{credential:null,user:null}})()}addFrameworkForLogging(G){!function dn(ce,K){(0,N.aE)(ce)._logFramework(K)}(this._delegate,G)}onAuthStateChanged(G,Se,Ze){const{next:ct,error:Tt,complete:zt}=Fe(G,Se,Ze);return this._delegate.onAuthStateChanged(ct,Tt,zt)}onIdTokenChanged(G,Se,Ze){const{next:ct,error:Tt,complete:zt}=Fe(G,Se,Ze);return this._delegate.onIdTokenChanged(ct,Tt,zt)}sendSignInLinkToEmail(G,Se){return N.a7(this._delegate,G,Se)}sendPasswordResetEmail(G,Se){return N.a0(this._delegate,G,Se||void 0)}setPersistence(G){var Se=this;return(0,g.Z)(function*(){let Ze;switch(function Wr(ce,K){Pr(Object.values(en).includes(K),ce,"invalid-persistence-type"),(0,ae.b$)()?Pr(K!==en.SESSION,ce,"unsupported-persistence-type"):(0,ae.UG)()?Pr(K===en.NONE,ce,"unsupported-persistence-type"):Di()?Pr(K===en.NONE||K===en.LOCAL&&(0,ae.hl)(),ce,"unsupported-persistence-type"):Pr(K===en.NONE||di(),ce,"unsupported-persistence-type")}(Se._delegate,G),G){case en.SESSION:Ze=N.a;break;case en.LOCAL:Ze=(yield N.ay(N.i)._isAvailable())?N.i:N.b;break;case en.NONE:Ze=N.L;break;default:return N.at("argument-error",{appName:Se._delegate.name})}return Se._delegate.setPersistence(Ze)})()}signInAndRetrieveDataWithCredential(G){return this.signInWithCredential(G)}signInAnonymously(){return fn(this._delegate,N.X(this._delegate))}signInWithCredential(G){return fn(this._delegate,N.Y(this._delegate,G))}signInWithCustomToken(G){return fn(this._delegate,N.$(this._delegate,G))}signInWithEmailAndPassword(G,Se){return fn(this._delegate,N.a6(this._delegate,G,Se))}signInWithEmailLink(G,Se){return fn(this._delegate,N.a9(this._delegate,G,Se))}signInWithPhoneNumber(G,Se){return V(this._delegate,N.s(this._delegate,G,Se))}signInWithPopup(G){var Se=this;return(0,g.Z)(function*(){return $(Gn(),Se._delegate,"operation-not-supported-in-this-environment"),fn(Se._delegate,N.c(Se._delegate,G,st))})()}signInWithRedirect(G){var Se=this;return(0,g.Z)(function*(){return $(Gn(),Se._delegate,"operation-not-supported-in-this-environment"),yield bn(Se._delegate),N.f(Se._delegate,G,st)})()}updateCurrentUser(G){return this._delegate.updateCurrentUser(G)}verifyPasswordResetCode(G){return N.a4(this._delegate,G)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return ce.Persistence=en,ce})();function Fe(ce,K,G){let Se=ce;"function"!=typeof ce&&({next:Se,error:K,complete:G}=ce);const Ze=Se;return{next:Tt=>Ze(Tt&&we.getOrCreate(Tt)),error:K,complete:G}}function Xe(ce,K){const G=function rs(ce,K){const G=Bt();if(!G)return[];const Se=N.az(or,ce,K);switch(G.getItem(Se)){case en.NONE:return[N.L];case en.LOCAL:return[N.i,N.a];case en.SESSION:return[N.a];default:return[]}}(ce,K);if("undefined"!=typeof self&&!G.includes(N.i)&&G.push(N.i),"undefined"!=typeof window)for(const Se of[N.b,N.a])G.includes(Se)||G.push(Se);return G.includes(N.L)||G.push(N.L),G}class ft{constructor(){this.providerId="phone",this._delegate=new N.P(hi(U.Z.auth()))}static credential(K,G){return N.P.credential(K,G)}verifyPhoneNumber(K,G){return this._delegate.verifyPhoneNumber(K,G)}unwrap(){return this._delegate}}ft.PHONE_SIGN_IN_METHOD=N.P.PHONE_SIGN_IN_METHOD,ft.PROVIDER_ID=N.P.PROVIDER_ID;const Dt=N.ax;class an{constructor(K,G,Se=U.Z.app()){var Ze;Dt(null===(Ze=Se.options)||void 0===Ze?void 0:Ze.apiKey,"invalid-api-key",{appName:Se.name}),this._delegate=new N.R(K,G,Se.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function er(ce){ce.INTERNAL.registerComponent(new fe.wA("auth-compat",K=>{const G=K.getProvider("app-compat").getImmediate(),Se=K.getProvider("auth");return new te(G,Se)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:N.A.EMAIL_SIGNIN,PASSWORD_RESET:N.A.PASSWORD_RESET,RECOVER_EMAIL:N.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:N.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:N.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:N.A.VERIFY_EMAIL}},EmailAuthProvider:N.M,FacebookAuthProvider:N.N,GithubAuthProvider:N.T,GoogleAuthProvider:N.Q,OAuthProvider:N.U,SAMLAuthProvider:N.V,PhoneAuthProvider:ft,PhoneMultiFactorGenerator:N.m,RecaptchaVerifier:an,TwitterAuthProvider:N.W,Auth:te,AuthCredential:N.H,Error:ae.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),ce.registerVersion("@firebase/auth-compat","0.2.14")}(U.Z)},8306:(nt,Te,k)=>{k.d(Te,{y:()=>W});var g=k(2961),U=k(727),N=k(8822),ae=k(4671);var fe=k(2416),le=k(576),ve=k(2806);let W=(()=>{class Ne{constructor(He){He&&(this._subscribe=He)}lift(He){const _e=new Ne;return _e.source=this,_e.operator=He,_e}subscribe(He,_e,De){const ze=function Ge(Ne){return Ne&&Ne instanceof g.Lv||function se(Ne){return Ne&&(0,le.m)(Ne.next)&&(0,le.m)(Ne.error)&&(0,le.m)(Ne.complete)}(Ne)&&(0,U.Nn)(Ne)}(He)?He:new g.Hp(He,_e,De);return(0,ve.x)(()=>{const{operator:We,source:Pe}=this;ze.add(We?We.call(ze,Pe):Pe?this._subscribe(ze):this._trySubscribe(ze))}),ze}_trySubscribe(He){try{return this._subscribe(He)}catch(_e){He.error(_e)}}forEach(He,_e){return new(_e=j(_e))((De,ze)=>{const We=new g.Hp({next:Pe=>{try{He(Pe)}catch(ke){ze(ke),We.unsubscribe()}},error:ze,complete:De});this.subscribe(We)})}_subscribe(He){var _e;return null===(_e=this.source)||void 0===_e?void 0:_e.subscribe(He)}[N.L](){return this}pipe(...He){return function ye(Ne){return 0===Ne.length?ae.y:1===Ne.length?Ne[0]:function(He){return Ne.reduce((_e,De)=>De(_e),He)}}(He)(this)}toPromise(He){return new(He=j(He))((_e,De)=>{let ze;this.subscribe(We=>ze=We,We=>De(We),()=>_e(ze))})}}return Ne.create=Ue=>new Ne(Ue),Ne})();function j(Ne){var Ue;return null!==(Ue=null!=Ne?Ne:fe.v.Promise)&&void 0!==Ue?Ue:Promise}},7579:(nt,Te,k)=>{k.d(Te,{x:()=>fe});var g=k(8306),U=k(727);const ae=(0,k(3888).d)(ve=>function(){ve(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ue=k(8737),ye=k(2806);let fe=(()=>{class ve extends g.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(j){const se=new le(this,this);return se.operator=j,se}_throwIfClosed(){if(this.closed)throw new ae}next(j){(0,ye.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const se of this.currentObservers)se.next(j)}})}error(j){(0,ye.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=j;const{observers:se}=this;for(;se.length;)se.shift().error(j)}})}complete(){(0,ye.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:j}=this;for(;j.length;)j.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var j;return(null===(j=this.observers)||void 0===j?void 0:j.length)>0}_trySubscribe(j){return this._throwIfClosed(),super._trySubscribe(j)}_subscribe(j){return this._throwIfClosed(),this._checkFinalizedStatuses(j),this._innerSubscribe(j)}_innerSubscribe(j){const{hasError:se,isStopped:Ge,observers:Ne}=this;return se||Ge?U.Lc:(this.currentObservers=null,Ne.push(j),new U.w0(()=>{this.currentObservers=null,(0,ue.P)(Ne,j)}))}_checkFinalizedStatuses(j){const{hasError:se,thrownError:Ge,isStopped:Ne}=this;se?j.error(Ge):Ne&&j.complete()}asObservable(){const j=new g.y;return j.source=this,j}}return ve.create=(W,j)=>new le(W,j),ve})();class le extends fe{constructor(W,j){super(),this.destination=W,this.source=j}next(W){var j,se;null===(se=null===(j=this.destination)||void 0===j?void 0:j.next)||void 0===se||se.call(j,W)}error(W){var j,se;null===(se=null===(j=this.destination)||void 0===j?void 0:j.error)||void 0===se||se.call(j,W)}complete(){var W,j;null===(j=null===(W=this.destination)||void 0===W?void 0:W.complete)||void 0===j||j.call(W)}_subscribe(W){var j,se;return null!==(se=null===(j=this.source)||void 0===j?void 0:j.subscribe(W))&&void 0!==se?se:U.Lc}}},2961:(nt,Te,k)=>{k.d(Te,{Hp:()=>He,Lv:()=>se});var g=k(576),U=k(727),N=k(2416),ae=k(7849);function ue(){}const ye=ve("C",void 0,void 0);function ve(Pe,ke,Ce){return{kind:Pe,value:ke,error:Ce}}var W=k(3410),j=k(2806);class se extends U.w0{constructor(ke){super(),this.isStopped=!1,ke?(this.destination=ke,(0,U.Nn)(ke)&&ke.add(this)):this.destination=We}static create(ke,Ce,qe){return new He(ke,Ce,qe)}next(ke){this.isStopped?ze(function le(Pe){return ve("N",Pe,void 0)}(ke),this):this._next(ke)}error(ke){this.isStopped?ze(function fe(Pe){return ve("E",void 0,Pe)}(ke),this):(this.isStopped=!0,this._error(ke))}complete(){this.isStopped?ze(ye,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(ke){this.destination.next(ke)}_error(ke){try{this.destination.error(ke)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Ge=Function.prototype.bind;function Ne(Pe,ke){return Ge.call(Pe,ke)}class Ue{constructor(ke){this.partialObserver=ke}next(ke){const{partialObserver:Ce}=this;if(Ce.next)try{Ce.next(ke)}catch(qe){_e(qe)}}error(ke){const{partialObserver:Ce}=this;if(Ce.error)try{Ce.error(ke)}catch(qe){_e(qe)}else _e(ke)}complete(){const{partialObserver:ke}=this;if(ke.complete)try{ke.complete()}catch(Ce){_e(Ce)}}}class He extends se{constructor(ke,Ce,qe){let ne;if(super(),(0,g.m)(ke)||!ke)ne={next:null!=ke?ke:void 0,error:null!=Ce?Ce:void 0,complete:null!=qe?qe:void 0};else{let he;this&&N.v.useDeprecatedNextContext?(he=Object.create(ke),he.unsubscribe=()=>this.unsubscribe(),ne={next:ke.next&&Ne(ke.next,he),error:ke.error&&Ne(ke.error,he),complete:ke.complete&&Ne(ke.complete,he)}):ne=ke}this.destination=new Ue(ne)}}function _e(Pe){N.v.useDeprecatedSynchronousErrorHandling?(0,j.O)(Pe):(0,ae.h)(Pe)}function ze(Pe,ke){const{onStoppedNotification:Ce}=N.v;Ce&&W.z.setTimeout(()=>Ce(Pe,ke))}const We={closed:!0,next:ue,error:function De(Pe){throw Pe},complete:ue}},727:(nt,Te,k)=>{k.d(Te,{Lc:()=>ye,w0:()=>ue,Nn:()=>fe});var g=k(576);const N=(0,k(3888).d)(ve=>function(j){ve(this),this.message=j?`${j.length} errors occurred during unsubscription:\n${j.map((se,Ge)=>`${Ge+1}) ${se.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=j});var ae=k(8737);class ue{constructor(W){this.initialTeardown=W,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let W;if(!this.closed){this.closed=!0;const{_parentage:j}=this;if(j)if(this._parentage=null,Array.isArray(j))for(const Ne of j)Ne.remove(this);else j.remove(this);const{initialTeardown:se}=this;if((0,g.m)(se))try{se()}catch(Ne){W=Ne instanceof N?Ne.errors:[Ne]}const{_finalizers:Ge}=this;if(Ge){this._finalizers=null;for(const Ne of Ge)try{le(Ne)}catch(Ue){W=null!=W?W:[],Ue instanceof N?W=[...W,...Ue.errors]:W.push(Ue)}}if(W)throw new N(W)}}add(W){var j;if(W&&W!==this)if(this.closed)le(W);else{if(W instanceof ue){if(W.closed||W._hasParent(this))return;W._addParent(this)}(this._finalizers=null!==(j=this._finalizers)&&void 0!==j?j:[]).push(W)}}_hasParent(W){const{_parentage:j}=this;return j===W||Array.isArray(j)&&j.includes(W)}_addParent(W){const{_parentage:j}=this;this._parentage=Array.isArray(j)?(j.push(W),j):j?[j,W]:W}_removeParent(W){const{_parentage:j}=this;j===W?this._parentage=null:Array.isArray(j)&&(0,ae.P)(j,W)}remove(W){const{_finalizers:j}=this;j&&(0,ae.P)(j,W),W instanceof ue&&W._removeParent(this)}}ue.EMPTY=(()=>{const ve=new ue;return ve.closed=!0,ve})();const ye=ue.EMPTY;function fe(ve){return ve instanceof ue||ve&&"closed"in ve&&(0,g.m)(ve.remove)&&(0,g.m)(ve.add)&&(0,g.m)(ve.unsubscribe)}function le(ve){(0,g.m)(ve)?ve():ve.unsubscribe()}},2416:(nt,Te,k)=>{k.d(Te,{v:()=>g});const g={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(nt,Te,k)=>{k.d(Te,{E:()=>U});const U=new(k(8306).y)(ue=>ue.complete())},8996:(nt,Te,k)=>{k.d(Te,{D:()=>ke});var g=k(8421),U=k(5363),N=k(9468),ye=k(8306),le=k(2202),ve=k(576),W=k(9672);function se(Ce,qe){if(!Ce)throw new Error("Iterable cannot be null");return new ye.y(ne=>{(0,W.f)(ne,qe,()=>{const he=Ce[Symbol.asyncIterator]();(0,W.f)(ne,qe,()=>{he.next().then(be=>{be.done?ne.complete():ne.next(be.value)})},0,!0)})})}var Ge=k(3670),Ne=k(8239),Ue=k(1144),He=k(6495),_e=k(2206),De=k(4532),ze=k(3260);function ke(Ce,qe){return qe?function Pe(Ce,qe){if(null!=Ce){if((0,Ge.c)(Ce))return function ae(Ce,qe){return(0,g.Xf)(Ce).pipe((0,N.R)(qe),(0,U.Q)(qe))}(Ce,qe);if((0,Ue.z)(Ce))return function fe(Ce,qe){return new ye.y(ne=>{let he=0;return qe.schedule(function(){he===Ce.length?ne.complete():(ne.next(Ce[he++]),ne.closed||this.schedule())})})}(Ce,qe);if((0,Ne.t)(Ce))return function ue(Ce,qe){return(0,g.Xf)(Ce).pipe((0,N.R)(qe),(0,U.Q)(qe))}(Ce,qe);if((0,_e.D)(Ce))return se(Ce,qe);if((0,He.T)(Ce))return function j(Ce,qe){return new ye.y(ne=>{let he;return(0,W.f)(ne,qe,()=>{he=Ce[le.h](),(0,W.f)(ne,qe,()=>{let be,Z;try{({value:be,done:Z}=he.next())}catch(re){return void ne.error(re)}Z?ne.complete():ne.next(be)},0,!0)}),()=>(0,ve.m)(null==he?void 0:he.return)&&he.return()})}(Ce,qe);if((0,ze.L)(Ce))return function We(Ce,qe){return se((0,ze.Q)(Ce),qe)}(Ce,qe)}throw(0,De.z)(Ce)}(Ce,qe):(0,g.Xf)(Ce)}},8421:(nt,Te,k)=>{k.d(Te,{Xf:()=>Ge});var g=k(655),U=k(1144),N=k(8239),ae=k(8306),ue=k(3670),ye=k(2206),fe=k(4532),le=k(6495),ve=k(3260),W=k(576),j=k(7849),se=k(8822);function Ge(Pe){if(Pe instanceof ae.y)return Pe;if(null!=Pe){if((0,ue.c)(Pe))return function Ne(Pe){return new ae.y(ke=>{const Ce=Pe[se.L]();if((0,W.m)(Ce.subscribe))return Ce.subscribe(ke);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Pe);if((0,U.z)(Pe))return function Ue(Pe){return new ae.y(ke=>{for(let Ce=0;Ce<Pe.length&&!ke.closed;Ce++)ke.next(Pe[Ce]);ke.complete()})}(Pe);if((0,N.t)(Pe))return function He(Pe){return new ae.y(ke=>{Pe.then(Ce=>{ke.closed||(ke.next(Ce),ke.complete())},Ce=>ke.error(Ce)).then(null,j.h)})}(Pe);if((0,ye.D)(Pe))return De(Pe);if((0,le.T)(Pe))return function _e(Pe){return new ae.y(ke=>{for(const Ce of Pe)if(ke.next(Ce),ke.closed)return;ke.complete()})}(Pe);if((0,ve.L)(Pe))return function ze(Pe){return De((0,ve.Q)(Pe))}(Pe)}throw(0,fe.z)(Pe)}function De(Pe){return new ae.y(ke=>{(function We(Pe,ke){var Ce,qe,ne,he;return(0,g.mG)(this,void 0,void 0,function*(){try{for(Ce=(0,g.KL)(Pe);!(qe=yield Ce.next()).done;)if(ke.next(qe.value),ke.closed)return}catch(be){ne={error:be}}finally{try{qe&&!qe.done&&(he=Ce.return)&&(yield he.call(Ce))}finally{if(ne)throw ne.error}}ke.complete()})})(Pe,ke).catch(Ce=>ke.error(Ce))})}},6451:(nt,Te,k)=>{k.d(Te,{T:()=>ye});var g=k(8189),U=k(8421),N=k(515),ae=k(7669),ue=k(8996);function ye(...fe){const le=(0,ae.yG)(fe),ve=(0,ae._6)(fe,1/0),W=fe;return W.length?1===W.length?(0,U.Xf)(W[0]):(0,g.J)(ve)((0,ue.D)(W,le)):N.E}},5403:(nt,Te,k)=>{k.d(Te,{x:()=>U});var g=k(2961);function U(ae,ue,ye,fe,le){return new N(ae,ue,ye,fe,le)}class N extends g.Lv{constructor(ue,ye,fe,le,ve,W){super(ue),this.onFinalize=ve,this.shouldUnsubscribe=W,this._next=ye?function(j){try{ye(j)}catch(se){ue.error(se)}}:super._next,this._error=le?function(j){try{le(j)}catch(se){ue.error(se)}finally{this.unsubscribe()}}:super._error,this._complete=fe?function(){try{fe()}catch(j){ue.error(j)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var ue;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:ye}=this;super.unsubscribe(),!ye&&(null===(ue=this.onFinalize)||void 0===ue||ue.call(this))}}}},4004:(nt,Te,k)=>{k.d(Te,{U:()=>N});var g=k(4482),U=k(5403);function N(ae,ue){return(0,g.e)((ye,fe)=>{let le=0;ye.subscribe((0,U.x)(fe,ve=>{fe.next(ae.call(ue,ve,le++))}))})}},8189:(nt,Te,k)=>{k.d(Te,{J:()=>N});var g=k(5577),U=k(4671);function N(ae=1/0){return(0,g.z)(U.y,ae)}},5577:(nt,Te,k)=>{k.d(Te,{z:()=>le});var g=k(4004),U=k(8421),N=k(4482),ae=k(9672),ue=k(5403),fe=k(576);function le(ve,W,j=1/0){return(0,fe.m)(W)?le((se,Ge)=>(0,g.U)((Ne,Ue)=>W(se,Ne,Ge,Ue))((0,U.Xf)(ve(se,Ge))),j):("number"==typeof W&&(j=W),(0,N.e)((se,Ge)=>function ye(ve,W,j,se,Ge,Ne,Ue,He){const _e=[];let De=0,ze=0,We=!1;const Pe=()=>{We&&!_e.length&&!De&&W.complete()},ke=qe=>De<se?Ce(qe):_e.push(qe),Ce=qe=>{Ne&&W.next(qe),De++;let ne=!1;(0,U.Xf)(j(qe,ze++)).subscribe((0,ue.x)(W,he=>{null==Ge||Ge(he),Ne?ke(he):W.next(he)},()=>{ne=!0},void 0,()=>{if(ne)try{for(De--;_e.length&&De<se;){const he=_e.shift();Ue?(0,ae.f)(W,Ue,()=>Ce(he)):Ce(he)}Pe()}catch(he){W.error(he)}}))};return ve.subscribe((0,ue.x)(W,ke,()=>{We=!0,Pe()})),()=>{null==He||He()}}(se,Ge,ve,j)))}},5363:(nt,Te,k)=>{k.d(Te,{Q:()=>ae});var g=k(9672),U=k(4482),N=k(5403);function ae(ue,ye=0){return(0,U.e)((fe,le)=>{fe.subscribe((0,N.x)(le,ve=>(0,g.f)(le,ue,()=>le.next(ve),ye),()=>(0,g.f)(le,ue,()=>le.complete(),ye),ve=>(0,g.f)(le,ue,()=>le.error(ve),ye)))})}},3099:(nt,Te,k)=>{k.d(Te,{B:()=>ye});var g=k(8996),U=k(5698),N=k(7579),ae=k(2961),ue=k(4482);function ye(le={}){const{connector:ve=(()=>new N.x),resetOnError:W=!0,resetOnComplete:j=!0,resetOnRefCountZero:se=!0}=le;return Ge=>{let Ne=null,Ue=null,He=null,_e=0,De=!1,ze=!1;const We=()=>{null==Ue||Ue.unsubscribe(),Ue=null},Pe=()=>{We(),Ne=He=null,De=ze=!1},ke=()=>{const Ce=Ne;Pe(),null==Ce||Ce.unsubscribe()};return(0,ue.e)((Ce,qe)=>{_e++,!ze&&!De&&We();const ne=He=null!=He?He:ve();qe.add(()=>{_e--,0===_e&&!ze&&!De&&(Ue=fe(ke,se))}),ne.subscribe(qe),Ne||(Ne=new ae.Hp({next:he=>ne.next(he),error:he=>{ze=!0,We(),Ue=fe(Pe,W,he),ne.error(he)},complete:()=>{De=!0,We(),Ue=fe(Pe,j),ne.complete()}}),(0,g.D)(Ce).subscribe(Ne))})(Ge)}}function fe(le,ve,...W){return!0===ve?(le(),null):!1===ve?null:ve(...W).pipe((0,U.q)(1)).subscribe(()=>le())}},9468:(nt,Te,k)=>{k.d(Te,{R:()=>U});var g=k(4482);function U(N,ae=0){return(0,g.e)((ue,ye)=>{ye.add(N.schedule(()=>ue.subscribe(ye),ae))})}},5698:(nt,Te,k)=>{k.d(Te,{q:()=>ae});var g=k(515),U=k(4482),N=k(5403);function ae(ue){return ue<=0?()=>g.E:(0,U.e)((ye,fe)=>{let le=0;ye.subscribe((0,N.x)(fe,ve=>{++le<=ue&&(fe.next(ve),ue<=le&&fe.complete())}))})}},8505:(nt,Te,k)=>{k.d(Te,{b:()=>ue});var g=k(576),U=k(4482),N=k(5403),ae=k(4671);function ue(ye,fe,le){const ve=(0,g.m)(ye)||fe||le?{next:ye,error:fe,complete:le}:ye;return ve?(0,U.e)((W,j)=>{var se;null===(se=ve.subscribe)||void 0===se||se.call(ve);let Ge=!0;W.subscribe((0,N.x)(j,Ne=>{var Ue;null===(Ue=ve.next)||void 0===Ue||Ue.call(ve,Ne),j.next(Ne)},()=>{var Ne;Ge=!1,null===(Ne=ve.complete)||void 0===Ne||Ne.call(ve),j.complete()},Ne=>{var Ue;Ge=!1,null===(Ue=ve.error)||void 0===Ue||Ue.call(ve,Ne),j.error(Ne)},()=>{var Ne,Ue;Ge&&(null===(Ne=ve.unsubscribe)||void 0===Ne||Ne.call(ve)),null===(Ue=ve.finalize)||void 0===Ue||Ue.call(ve)}))}):ae.y}},4408:(nt,Te,k)=>{k.d(Te,{o:()=>ue});var g=k(727);class U extends g.w0{constructor(fe,le){super()}schedule(fe,le=0){return this}}const N={setInterval(ye,fe,...le){const{delegate:ve}=N;return(null==ve?void 0:ve.setInterval)?ve.setInterval(ye,fe,...le):setInterval(ye,fe,...le)},clearInterval(ye){const{delegate:fe}=N;return((null==fe?void 0:fe.clearInterval)||clearInterval)(ye)},delegate:void 0};var ae=k(8737);class ue extends U{constructor(fe,le){super(fe,le),this.scheduler=fe,this.work=le,this.pending=!1}schedule(fe,le=0){if(this.closed)return this;this.state=fe;const ve=this.id,W=this.scheduler;return null!=ve&&(this.id=this.recycleAsyncId(W,ve,le)),this.pending=!0,this.delay=le,this.id=this.id||this.requestAsyncId(W,this.id,le),this}requestAsyncId(fe,le,ve=0){return N.setInterval(fe.flush.bind(fe,this),ve)}recycleAsyncId(fe,le,ve=0){if(null!=ve&&this.delay===ve&&!1===this.pending)return le;N.clearInterval(le)}execute(fe,le){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const ve=this._execute(fe,le);if(ve)return ve;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(fe,le){let W,ve=!1;try{this.work(fe)}catch(j){ve=!0,W=j||new Error("Scheduled action threw falsy error")}if(ve)return this.unsubscribe(),W}unsubscribe(){if(!this.closed){const{id:fe,scheduler:le}=this,{actions:ve}=le;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ae.P)(ve,this),null!=fe&&(this.id=this.recycleAsyncId(le,fe,null)),this.delay=null,super.unsubscribe()}}}},7565:(nt,Te,k)=>{k.d(Te,{v:()=>N});var g=k(6063);class U{constructor(ue,ye=U.now){this.schedulerActionCtor=ue,this.now=ye}schedule(ue,ye=0,fe){return new this.schedulerActionCtor(this,ue).schedule(fe,ye)}}U.now=g.l.now;class N extends U{constructor(ue,ye=U.now){super(ue,ye),this.actions=[],this._active=!1,this._scheduled=void 0}flush(ue){const{actions:ye}=this;if(this._active)return void ye.push(ue);let fe;this._active=!0;do{if(fe=ue.execute(ue.state,ue.delay))break}while(ue=ye.shift());if(this._active=!1,fe){for(;ue=ye.shift();)ue.unsubscribe();throw fe}}}},4986:(nt,Te,k)=>{k.d(Te,{z:()=>N});var g=k(4408);const N=new(k(7565).v)(g.o)},6063:(nt,Te,k)=>{k.d(Te,{l:()=>g});const g={now:()=>(g.delegate||Date).now(),delegate:void 0}},3410:(nt,Te,k)=>{k.d(Te,{z:()=>g});const g={setTimeout(U,N,...ae){const{delegate:ue}=g;return(null==ue?void 0:ue.setTimeout)?ue.setTimeout(U,N,...ae):setTimeout(U,N,...ae)},clearTimeout(U){const{delegate:N}=g;return((null==N?void 0:N.clearTimeout)||clearTimeout)(U)},delegate:void 0}},2202:(nt,Te,k)=>{k.d(Te,{h:()=>U});const U=function g(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(nt,Te,k)=>{k.d(Te,{L:()=>g});const g="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(nt,Te,k)=>{k.d(Te,{_6:()=>ye,jO:()=>ae,yG:()=>ue});var g=k(576);function N(fe){return fe[fe.length-1]}function ae(fe){return(0,g.m)(N(fe))?fe.pop():void 0}function ue(fe){return function U(fe){return fe&&(0,g.m)(fe.schedule)}(N(fe))?fe.pop():void 0}function ye(fe,le){return"number"==typeof N(fe)?fe.pop():le}},8737:(nt,Te,k)=>{function g(U,N){if(U){const ae=U.indexOf(N);0<=ae&&U.splice(ae,1)}}k.d(Te,{P:()=>g})},3888:(nt,Te,k)=>{function g(U){const ae=U(ue=>{Error.call(ue),ue.stack=(new Error).stack});return ae.prototype=Object.create(Error.prototype),ae.prototype.constructor=ae,ae}k.d(Te,{d:()=>g})},2806:(nt,Te,k)=>{k.d(Te,{O:()=>ae,x:()=>N});var g=k(2416);let U=null;function N(ue){if(g.v.useDeprecatedSynchronousErrorHandling){const ye=!U;if(ye&&(U={errorThrown:!1,error:null}),ue(),ye){const{errorThrown:fe,error:le}=U;if(U=null,fe)throw le}}else ue()}function ae(ue){g.v.useDeprecatedSynchronousErrorHandling&&U&&(U.errorThrown=!0,U.error=ue)}},9672:(nt,Te,k)=>{function g(U,N,ae,ue=0,ye=!1){const fe=N.schedule(function(){ae(),ye?U.add(this.schedule(null,ue)):this.unsubscribe()},ue);if(U.add(fe),!ye)return fe}k.d(Te,{f:()=>g})},4671:(nt,Te,k)=>{function g(U){return U}k.d(Te,{y:()=>g})},1144:(nt,Te,k)=>{k.d(Te,{z:()=>g});const g=U=>U&&"number"==typeof U.length&&"function"!=typeof U},2206:(nt,Te,k)=>{k.d(Te,{D:()=>U});var g=k(576);function U(N){return Symbol.asyncIterator&&(0,g.m)(null==N?void 0:N[Symbol.asyncIterator])}},576:(nt,Te,k)=>{function g(U){return"function"==typeof U}k.d(Te,{m:()=>g})},3670:(nt,Te,k)=>{k.d(Te,{c:()=>N});var g=k(8822),U=k(576);function N(ae){return(0,U.m)(ae[g.L])}},6495:(nt,Te,k)=>{k.d(Te,{T:()=>N});var g=k(2202),U=k(576);function N(ae){return(0,U.m)(null==ae?void 0:ae[g.h])}},8239:(nt,Te,k)=>{k.d(Te,{t:()=>U});var g=k(576);function U(N){return(0,g.m)(null==N?void 0:N.then)}},3260:(nt,Te,k)=>{k.d(Te,{L:()=>ae,Q:()=>N});var g=k(655),U=k(576);function N(ue){return(0,g.FC)(this,arguments,function*(){const fe=ue.getReader();try{for(;;){const{value:le,done:ve}=yield(0,g.qq)(fe.read());if(ve)return yield(0,g.qq)(void 0);yield yield(0,g.qq)(le)}}finally{fe.releaseLock()}})}function ae(ue){return(0,U.m)(null==ue?void 0:ue.getReader)}},4482:(nt,Te,k)=>{k.d(Te,{A:()=>U,e:()=>N});var g=k(576);function U(ae){return(0,g.m)(null==ae?void 0:ae.lift)}function N(ae){return ue=>{if(U(ue))return ue.lift(function(ye){try{return ae(ye,this)}catch(fe){this.error(fe)}});throw new TypeError("Unable to lift unknown Observable type")}}},7849:(nt,Te,k)=>{k.d(Te,{h:()=>N});var g=k(2416),U=k(3410);function N(ae){U.z.setTimeout(()=>{const{onUnhandledError:ue}=g.v;if(!ue)throw ae;ue(ae)})}},4532:(nt,Te,k)=>{function g(U){return new TypeError(`You provided ${null!==U&&"object"==typeof U?"an invalid object":`'${U}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}k.d(Te,{z:()=>g})},655:(nt,Te,k)=>{function ae(Z,re){var oe={};for(var Ee in Z)Object.prototype.hasOwnProperty.call(Z,Ee)&&re.indexOf(Ee)<0&&(oe[Ee]=Z[Ee]);if(null!=Z&&"function"==typeof Object.getOwnPropertySymbols){var de=0;for(Ee=Object.getOwnPropertySymbols(Z);de<Ee.length;de++)re.indexOf(Ee[de])<0&&Object.prototype.propertyIsEnumerable.call(Z,Ee[de])&&(oe[Ee[de]]=Z[Ee[de]])}return oe}function le(Z,re,oe,Ee){return new(oe||(oe=Promise))(function(Ve,ht){function Zt(dn){try{Ye(Ee.next(dn))}catch(On){ht(On)}}function Lt(dn){try{Ye(Ee.throw(dn))}catch(On){ht(On)}}function Ye(dn){dn.done?Ve(dn.value):function de(Ve){return Ve instanceof oe?Ve:new oe(function(ht){ht(Ve)})}(dn.value).then(Zt,Lt)}Ye((Ee=Ee.apply(Z,re||[])).next())})}function _e(Z){return this instanceof _e?(this.v=Z,this):new _e(Z)}function De(Z,re,oe){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var de,Ee=oe.apply(Z,re||[]),Ve=[];return de={},ht("next"),ht("throw"),ht("return"),de[Symbol.asyncIterator]=function(){return this},de;function ht(hn){Ee[hn]&&(de[hn]=function(Xt){return new Promise(function(Vt,Yt){Ve.push([hn,Xt,Vt,Yt])>1||Zt(hn,Xt)})})}function Zt(hn,Xt){try{!function Lt(hn){hn.value instanceof _e?Promise.resolve(hn.value.v).then(Ye,dn):On(Ve[0][2],hn)}(Ee[hn](Xt))}catch(Vt){On(Ve[0][3],Vt)}}function Ye(hn){Zt("next",hn)}function dn(hn){Zt("throw",hn)}function On(hn,Xt){hn(Xt),Ve.shift(),Ve.length&&Zt(Ve[0][0],Ve[0][1])}}function We(Z){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var oe,re=Z[Symbol.asyncIterator];return re?re.call(Z):(Z=function se(Z){var re="function"==typeof Symbol&&Symbol.iterator,oe=re&&Z[re],Ee=0;if(oe)return oe.call(Z);if(Z&&"number"==typeof Z.length)return{next:function(){return Z&&Ee>=Z.length&&(Z=void 0),{value:Z&&Z[Ee++],done:!Z}}};throw new TypeError(re?"Object is not iterable.":"Symbol.iterator is not defined.")}(Z),oe={},Ee("next"),Ee("throw"),Ee("return"),oe[Symbol.asyncIterator]=function(){return this},oe);function Ee(Ve){oe[Ve]=Z[Ve]&&function(ht){return new Promise(function(Zt,Lt){!function de(Ve,ht,Zt,Lt){Promise.resolve(Lt).then(function(Ye){Ve({value:Ye,done:Zt})},ht)}(Zt,Lt,(ht=Z[Ve](ht)).done,ht.value)})}}}k.d(Te,{FC:()=>De,KL:()=>We,_T:()=>ae,mG:()=>le,qq:()=>_e})},5e3:(nt,Te,k)=>{k.d(Te,{$8M:()=>Us,$Z:()=>Tw,AFp:()=>HI,AaK:()=>le,CHM:()=>Na,CRH:()=>Rv,CZH:()=>pm,CqO:()=>Dw,EJc:()=>SD,EpF:()=>Ry,F4k:()=>cf,FYo:()=>Lf,FiY:()=>ys,G48:()=>FD,GfV:()=>Ku,JOm:()=>ra,LFG:()=>Ae,LSH:()=>Qc,Lbi:()=>cc,MAs:()=>Ey,NdJ:()=>My,OlP:()=>Rn,Oqu:()=>Ef,PXZ:()=>pc,Q6J:()=>af,QGY:()=>Pn,Qsj:()=>JT,R0b:()=>Xr,RDi:()=>hl,Rgc:()=>Hf,SBq:()=>jd,Sil:()=>zI,Suo:()=>PI,TTD:()=>ba,TgZ:()=>ua,VLi:()=>ND,W1O:()=>zf,X6Q:()=>nE,XFs:()=>pt,Xpm:()=>ft,Y36:()=>Zl,YKP:()=>vv,YNc:()=>_w,Yjl:()=>Ze,Yz7:()=>Xt,ZZ4:()=>dE,_UZ:()=>xy,_Vd:()=>Of,_c5:()=>YD,_uU:()=>Hg,aQg:()=>nh,c2e:()=>DD,cJS:()=>Yt,cg1:()=>Xy,dDg:()=>vm,deG:()=>Up,dqk:()=>jt,eFA:()=>Qv,g9A:()=>nl,h0i:()=>Wd,hGG:()=>QD,hij:()=>wf,iGM:()=>NI,ifc:()=>Bt,ip1:()=>$I,kL8:()=>Yw,lG2:()=>Se,oAB:()=>ce,oxw:()=>Aw,q4F:()=>gv,qLn:()=>Xp,qZA:()=>uf,s9C:()=>la,sBO:()=>VD,sIi:()=>dd,s_b:()=>bs,soG:()=>Qd,tBr:()=>oi,tb:()=>zv,tp0:()=>Ni,uIk:()=>Xh,vHH:()=>Ue,vpe:()=>pa,wAp:()=>wt,xp6:()=>A0,z2F:()=>Jv,zSh:()=>ot,zs3:()=>zs});var g=k(7579),U=k(727),N=k(8306),ae=k(6451),ue=k(3099);function ye(s){for(let o in s)if(s[o]===ye)return o;throw Error("Could not find renamed property on target object.")}function le(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(le).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const o=s.toString();if(null==o)return""+o;const a=o.indexOf("\n");return-1===a?o:o.substring(0,a)}function ve(s,o){return null==s||""===s?null===o?"":o:null==o||""===o?s:s+" "+o}const W=ye({__forward_ref__:ye});function j(s){return s.__forward_ref__=j,s.toString=function(){return le(this())},s}function se(s){return function Ge(s){return"function"==typeof s&&s.hasOwnProperty(W)&&s.__forward_ref__===j}(s)?s():s}class Ue extends Error{constructor(o,a){super(function He(s,o){return`NG0${Math.abs(s)}${o?": "+o:""}`}(o,a)),this.code=o}}function _e(s){return"string"==typeof s?s:null==s?"":String(s)}function De(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():_e(s)}function ke(s,o){const a=o?` in ${o}`:"";throw new Ue(-201,`No provider for ${De(s)} found${a}`)}function Lt(s,o){null==s&&function Ye(s,o,a,l){throw new Error(`ASSERTION ERROR: ${s}`+(null==l?"":` [Expected=> ${a} ${l} ${o} <=Actual]`))}(o,s,null,"!=")}function Xt(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function Yt(s){return{providers:s.providers||[],imports:s.imports||[]}}function Cn(s){return Ti(s,di)||Ti(s,Gn)}function Ti(s,o){return s.hasOwnProperty(o)?s[o]:null}function Ui(s){return s&&(s.hasOwnProperty(Di)||s.hasOwnProperty(Vi))?s[Di]:null}const di=ye({\u0275prov:ye}),Di=ye({\u0275inj:ye}),Gn=ye({ngInjectableDef:ye}),Vi=ye({ngInjectorDef:ye});var pt=(()=>((pt=pt||{})[pt.Default=0]="Default",pt[pt.Host=1]="Host",pt[pt.Self=2]="Self",pt[pt.SkipSelf=4]="SkipSelf",pt[pt.Optional=8]="Optional",pt))();let Hr;function en(s){const o=Hr;return Hr=s,o}function Pr(s,o,a){const l=Cn(s);return l&&"root"==l.providedIn?void 0===l.value?l.value=l.factory():l.value:a&pt.Optional?null:void 0!==o?o:void ke(le(s),"Injector")}function Wr(s){return{toString:s}.toString()}var bn=(()=>((bn=bn||{})[bn.OnPush=0]="OnPush",bn[bn.Default=1]="Default",bn))(),Bt=(()=>{return(s=Bt||(Bt={}))[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",Bt;var s})();const dt="undefined"!=typeof globalThis&&globalThis,st="undefined"!=typeof window&&window,hi="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,jt=dt||"undefined"!=typeof global&&global||st||hi,fn={},V=[],z=ye({\u0275cmp:ye}),q=ye({\u0275dir:ye}),we=ye({\u0275pipe:ye}),$=ye({\u0275mod:ye}),te=ye({\u0275fac:ye}),Fe=ye({__NG_ELEMENT_ID__:ye});let Xe=0;function ft(s){return Wr(()=>{const a={},l={type:s.type,providersResolver:null,decls:s.decls,vars:s.vars,factory:null,template:s.template||null,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:a,inputs:null,outputs:null,exportAs:s.exportAs||null,onPush:s.changeDetection===bn.OnPush,directiveDefs:null,pipeDefs:null,selectors:s.selectors||V,viewQuery:s.viewQuery||null,features:s.features||null,data:s.data||{},encapsulation:s.encapsulation||Bt.Emulated,id:"c",styles:s.styles||V,_:null,setInput:null,schemas:s.schemas||null,tView:null},d=s.directives,f=s.features,y=s.pipes;return l.id+=Xe++,l.inputs=G(s.inputs,a),l.outputs=G(s.outputs),f&&f.forEach(E=>E(l)),l.directiveDefs=d?()=>("function"==typeof d?d():d).map(an):null,l.pipeDefs=y?()=>("function"==typeof y?y():y).map(vt):null,l})}function an(s){return ct(s)||function Tt(s){return s[q]||null}(s)}function vt(s){return function zt(s){return s[we]||null}(s)}const er={};function ce(s){return Wr(()=>{const o={type:s.type,bootstrap:s.bootstrap||V,declarations:s.declarations||V,imports:s.imports||V,exports:s.exports||V,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null};return null!=s.id&&(er[s.id]=s.type),o})}function G(s,o){if(null==s)return fn;const a={};for(const l in s)if(s.hasOwnProperty(l)){let d=s[l],f=d;Array.isArray(d)&&(f=d[1],d=d[0]),a[d]=l,o&&(o[d]=f)}return a}const Se=ft;function Ze(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,onDestroy:s.type.prototype.ngOnDestroy||null}}function ct(s){return s[z]||null}function Ft(s,o){const a=s[$]||null;if(!a&&!0===o)throw new Error(`Type ${le(s)} does not have '\u0275mod' property.`);return a}function Si(s){return Array.isArray(s)&&"object"==typeof s[1]}function pi(s){return Array.isArray(s)&&!0===s[1]}function Cc(s){return 0!=(8&s.flags)}function lu(s){return 2==(2&s.flags)}function Rs(s){return 1==(1&s.flags)}function gi(s){return null!==s.template}function gh(s){return 0!=(512&s[2])}function mi(s,o){return s.hasOwnProperty(te)?s[te]:null}class Vo{constructor(o,a,l){this.previousValue=o,this.currentValue=a,this.firstChange=l}isFirstChange(){return this.firstChange}}function ba(){return Ta}function Ta(s){return s.type.prototype.ngOnChanges&&(s.setInput=kp),_h}function _h(){const s=xc(this),o=null==s?void 0:s.current;if(o){const a=s.previous;if(a===fn)s.previous=o;else for(let l in o)a[l]=o[l];s.current=null,this.ngOnChanges(o)}}function kp(s,o,a,l){const d=xc(s)||function us(s,o){return s[to]=o}(s,{previous:fn,current:null}),f=d.current||(d.current={}),y=d.previous,E=this.declaredInputs[a],C=y[E];f[E]=new Vo(C&&C.currentValue,o,y===fn),s[l]=o}ba.ngInherit=!0;const to="__ngSimpleChanges__";function xc(s){return s[to]||null}let fu;function hl(s){fu=s}function yn(s){return!!s.listen}const Da={createRenderer:(s,o)=>function ls(){return void 0!==fu?fu:"undefined"!=typeof document?document:void 0}()};function gn(s){for(;Array.isArray(s);)s=s[0];return s}function mr(s,o){return gn(o[s.index])}function Un(s,o){return s.data[o]}function _r(s,o){const a=o[s];return Si(a)?a:a[0]}function Bo(s){return 4==(4&s[2])}function $i(s){return 128==(128&s[2])}function ri(s,o){return null==o?null:s[o]}function Ps(s){s[18]=0}function ks(s,o){s[5]+=o;let a=s,l=s[3];for(;null!==l&&(1===o&&1===a[5]||-1===o&&0===a[5]);)l[5]+=o,a=l,l=l[3]}const gt={lFrame:so(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function gl(){return gt.bindingsEnabled}function Re(){return gt.lFrame.lView}function $t(){return gt.lFrame.tView}function Na(s){return gt.lFrame.contextLView=s,s[8]}function Vn(){let s=Os();for(;null!==s&&64===s.type;)s=s.parent;return s}function Os(){return gt.lFrame.currentTNode}function Gr(s,o){const a=gt.lFrame;a.currentTNode=s,a.isParent=o}function ml(){return gt.lFrame.isParent}function ka(){return gt.isInCheckNoChangesMode}function jo(s){gt.isInCheckNoChangesMode=s}function Hi(){return gt.lFrame.bindingIndex++}function La(s,o){const a=gt.lFrame;a.bindingIndex=a.bindingRootIndex=s,ro(o)}function ro(s){gt.lFrame.currentDirectiveIndex=s}function Fa(){return gt.lFrame.currentQueryIndex}function El(s){gt.lFrame.currentQueryIndex=s}function Op(s){const o=s[1];return 2===o.type?o.declTNode:1===o.type?s[6]:null}function mu(s,o,a){if(a&pt.SkipSelf){let d=o,f=s;for(;!(d=d.parent,null!==d||a&pt.Host||(d=Op(f),null===d||(f=f[15],10&d.type))););if(null===d)return!1;o=d,s=f}const l=gt.lFrame=wl();return l.currentTNode=o,l.lView=s,!0}function io(s){const o=wl(),a=s[1];gt.lFrame=o,o.currentTNode=a.firstChild,o.lView=s,o.tView=a,o.contextLView=s,o.bindingIndex=a.bindingStartIndex,o.inI18n=!1}function wl(){const s=gt.lFrame,o=null===s?null:s.child;return null===o?so(s):o}function so(s){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=o),o}function Uc(){const s=gt.lFrame;return gt.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const vh=Uc;function $o(){const s=Uc();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function yr(){return gt.lFrame.selectedIndex}function hs(s){gt.lFrame.selectedIndex=s}function Bn(){const s=gt.lFrame;return Un(s.tView,s.selectedIndex)}function Ua(s,o){for(let a=o.directiveStart,l=o.directiveEnd;a<l;a++){const f=s.data[a].type.prototype,{ngAfterContentInit:y,ngAfterContentChecked:E,ngAfterViewInit:C,ngAfterViewChecked:A,ngOnDestroy:R}=f;y&&(s.contentHooks||(s.contentHooks=[])).push(-a,y),E&&((s.contentHooks||(s.contentHooks=[])).push(a,E),(s.contentCheckHooks||(s.contentCheckHooks=[])).push(a,E)),C&&(s.viewHooks||(s.viewHooks=[])).push(-a,C),A&&((s.viewHooks||(s.viewHooks=[])).push(a,A),(s.viewCheckHooks||(s.viewCheckHooks=[])).push(a,A)),null!=R&&(s.destroyHooks||(s.destroyHooks=[])).push(a,R)}}function fs(s,o,a){vr(s,o,3,a)}function Va(s,o,a,l){(3&s[2])===a&&vr(s,o,a,l)}function _u(s,o){let a=s[2];(3&a)===o&&(a&=2047,a+=1,s[2]=a)}function vr(s,o,a,l){const f=null!=l?l:-1,y=o.length-1;let E=0;for(let C=void 0!==l?65535&s[18]:0;C<y;C++)if("number"==typeof o[C+1]){if(E=o[C],null!=l&&E>=l)break}else o[C]<0&&(s[18]+=65536),(E<f||-1==f)&&(Ih(s,a,o,C),s[18]=(4294901760&s[18])+C+2),C++}function Ih(s,o,a,l){const d=a[l]<0,f=a[l+1],E=s[d?-a[l]:a[l]];if(d){if(s[2]>>11<s[18]>>16&&(3&s[2])===o){s[2]+=2048;try{f.call(E)}finally{}}}else try{f.call(E)}finally{}}class Ho{constructor(o,a,l){this.factory=o,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=l}}function at(s,o,a){const l=yn(s);let d=0;for(;d<a.length;){const f=a[d];if("number"==typeof f){if(0!==f)break;d++;const y=a[d++],E=a[d++],C=a[d++];l?s.setAttribute(o,E,C,y):o.setAttributeNS(y,E,C)}else{const y=f,E=a[++d];Fr(y)?l&&s.setProperty(o,y,E):l?s.setAttribute(o,y,E):o.setAttribute(y,E),d++}}return d}function Ls(s){return 3===s||4===s||6===s}function Fr(s){return 64===s.charCodeAt(0)}function Ri(s,o){if(null!==o&&0!==o.length)if(null===s||0===s.length)s=o.slice();else{let a=-1;for(let l=0;l<o.length;l++){const d=o[l];"number"==typeof d?a=d:0===a||Cl(s,a,d,null,-1===a||2===a?o[++l]:null)}}return s}function Cl(s,o,a,l,d){let f=0,y=s.length;if(-1===o)y=-1;else for(;f<s.length;){const E=s[f++];if("number"==typeof E){if(E===o){y=-1;break}if(E>o){y=f-1;break}}}for(;f<s.length;){const E=s[f];if("number"==typeof E)break;if(E===a){if(null===l)return void(null!==d&&(s[f+1]=d));if(l===s[f+1])return void(s[f+2]=d)}f++,null!==l&&f++,null!==d&&f++}-1!==y&&(s.splice(y,0,o),f=y+1),s.splice(f++,0,a),null!==l&&s.splice(f++,0,l),null!==d&&s.splice(f++,0,d)}function Wo(s){return-1!==s}function zo(s){return 32767&s}function Go(s,o){let a=function jn(s){return s>>16}(s),l=o;for(;a>0;)l=l[15],a--;return l}let uo=!0;function ps(s){const o=uo;return uo=s,o}let Wc=0;function xn(s,o){const a=gs(s,o);if(-1!==a)return a;const l=o[1];l.firstCreatePass&&(s.injectorIndex=o.length,yu(l.data,s),yu(o,null),yu(l.blueprint,null));const d=lo(s,o),f=s.injectorIndex;if(Wo(d)){const y=zo(d),E=Go(d,o),C=E[1].data;for(let A=0;A<8;A++)o[f+A]=E[y+A]|C[y+A]}return o[f+8]=d,f}function yu(s,o){s.push(0,0,0,0,0,0,0,0,o)}function gs(s,o){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===o[s.injectorIndex+8]?-1:s.injectorIndex}function lo(s,o){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let a=0,l=null,d=o;for(;null!==d;){const f=d[1],y=f.type;if(l=2===y?f.declTNode:1===y?d[6]:null,null===l)return-1;if(a++,d=d[15],-1!==l.injectorIndex)return l.injectorIndex|a<<16}return-1}function ii(s,o,a){!function bh(s,o,a){let l;"string"==typeof a?l=a.charCodeAt(0)||0:a.hasOwnProperty(Fe)&&(l=a[Fe]),null==l&&(l=a[Fe]=Wc++);const d=255&l;o.data[s+(d>>5)]|=1<<d}(s,o,a)}function co(s,o,a){if(a&pt.Optional)return s;ke(o,"NodeInjector")}function ho(s,o,a,l){if(a&pt.Optional&&void 0===l&&(l=null),0==(a&(pt.Self|pt.Host))){const d=s[9],f=en(void 0);try{return d?d.get(o,l,a&pt.Optional):Pr(o,l,a&pt.Optional)}finally{en(f)}}return co(l,o,a)}function Ko(s,o,a,l=pt.Default,d){if(null!==s){const f=function fo(s){if("string"==typeof s)return s.charCodeAt(0)||0;const o=s.hasOwnProperty(Fe)?s[Fe]:void 0;return"number"==typeof o?o>=0?255&o:Zo:o}(a);if("function"==typeof f){if(!mu(o,s,l))return l&pt.Host?co(d,a,l):ho(o,a,l,d);try{const y=f(l);if(null!=y||l&pt.Optional)return y;ke(a)}finally{vh()}}else if("number"==typeof f){let y=null,E=gs(s,o),C=-1,A=l&pt.Host?o[16][6]:null;for((-1===E||l&pt.SkipSelf)&&(C=-1===E?lo(s,o):o[E+8],-1!==C&&Dr(l,!1)?(y=o[1],E=zo(C),o=Go(C,o)):E=-1);-1!==E;){const R=o[1];if(bl(f,E,R.data)){const L=ja(E,o,a,y,l,A);if(L!==Fs)return L}C=o[E+8],-1!==C&&Dr(l,o[1].data[E+8]===A)&&bl(f,E,o)?(y=R,E=zo(C),o=Go(C,o)):E=-1}}}return ho(o,a,l,d)}const Fs={};function Zo(){return new po(Vn(),Re())}function ja(s,o,a,l,d,f){const y=o[1],E=y.data[s+8],R=$a(E,y,a,null==l?lu(E)&&uo:l!=y&&0!=(3&E.type),d&pt.Host&&f===E);return null!==R?Ha(o,y,R,E):Fs}function $a(s,o,a,l,d){const f=s.providerIndexes,y=o.data,E=1048575&f,C=s.directiveStart,R=f>>20,H=d?E+R:s.directiveEnd;for(let ee=l?E:E+R;ee<H;ee++){const Ie=y[ee];if(ee<C&&a===Ie||ee>=C&&Ie.type===a)return ee}if(d){const ee=y[C];if(ee&&gi(ee)&&ee.type===a)return C}return null}function Ha(s,o,a,l){let d=s[a];const f=o.data;if(function Bc(s){return s instanceof Ho}(d)){const y=d;y.resolving&&function ze(s,o){const a=o?`. Dependency path: ${o.join(" > ")} > ${s}`:"";throw new Ue(-200,`Circular dependency in DI detected for ${s}${a}`)}(De(f[a]));const E=ps(y.canSeeViewProviders);y.resolving=!0;const C=y.injectImpl?en(y.injectImpl):null;mu(s,l,pt.Default);try{d=s[a]=y.factory(void 0,f,s,l),o.firstCreatePass&&a>=l.directiveStart&&function Lp(s,o,a){const{ngOnChanges:l,ngOnInit:d,ngDoCheck:f}=o.type.prototype;if(l){const y=Ta(o);(a.preOrderHooks||(a.preOrderHooks=[])).push(s,y),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(s,y)}d&&(a.preOrderHooks||(a.preOrderHooks=[])).push(0-s,d),f&&((a.preOrderHooks||(a.preOrderHooks=[])).push(s,f),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(s,f))}(a,f[a],o)}finally{null!==C&&en(C),ps(E),y.resolving=!1,vh()}}return d}function bl(s,o,a){return!!(a[o+(s>>5)]&1<<s)}function Dr(s,o){return!(s&pt.Self||s&pt.Host&&o)}class po{constructor(o,a){this._tNode=o,this._lView=a}get(o,a,l){return Ko(this._tNode,this._lView,o,l,a)}}function Us(s){return function qo(s,o){if("class"===o)return s.classes;if("style"===o)return s.styles;const a=s.attrs;if(a){const l=a.length;let d=0;for(;d<l;){const f=a[d];if(Ls(f))break;if(0===f)d+=2;else if("number"==typeof f)for(d++;d<l&&"string"==typeof a[d];)d++;else{if(f===o)return a[d+1];d+=2}}}return null}(Vn(),s)}const Vs="__parameters__";function $n(s,o,a){return Wr(()=>{const l=function ms(s){return function(...a){if(s){const l=s(...a);for(const d in l)this[d]=l[d]}}}(o);function d(...f){if(this instanceof d)return l.apply(this,f),this;const y=new d(...f);return E.annotation=y,E;function E(C,A,R){const L=C.hasOwnProperty(Vs)?C[Vs]:Object.defineProperty(C,Vs,{value:[]})[Vs];for(;L.length<=R;)L.push(null);return(L[R]=L[R]||[]).push(y),C}}return a&&(d.prototype=Object.create(a.prototype)),d.prototype.ngMetadataName=s,d.annotationCls=d,d})}class Rn{constructor(o,a){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=Xt({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Up=new Rn("AnalyzeForEntryComponents");function Vr(s,o){void 0===o&&(o=s);for(let a=0;a<s.length;a++){let l=s[a];Array.isArray(l)?(o===s&&(o=s.slice(0,a)),Vr(l,o)):o!==s&&o.push(l)}return o}function si(s,o){s.forEach(a=>Array.isArray(a)?si(a,o):o(a))}function Jo(s,o,a){o>=s.length?s.push(a):s.splice(o,0,a)}function Xo(s,o){return o>=s.length-1?s.pop():s.splice(o,1)[0]}const ea={},Eo="__NG_DI_FLAG__",wo="ngTempTokenPath",Sl=/\n/gm,T="__source",M=ye({provide:String,useValue:ye});let F;function J(s){const o=F;return F=s,o}function X(s,o=pt.Default){if(void 0===F)throw new Ue(203,"");return null===F?Pr(s,void 0,o):F.get(s,o&pt.Optional?null:void 0,o)}function Ae(s,o=pt.Default){return(function wn(){return Hr}()||X)(se(s),o)}const _t=Ae;function Et(s){const o=[];for(let a=0;a<s.length;a++){const l=se(s[a]);if(Array.isArray(l)){if(0===l.length)throw new Ue(900,"");let d,f=pt.Default;for(let y=0;y<l.length;y++){const E=l[y],C=Ct(E);"number"==typeof C?-1===C?d=E.token:f|=C:d=E}o.push(Ae(d,f))}else o.push(Ae(l))}return o}function Pt(s,o){return s[Eo]=o,s.prototype[Eo]=o,s}function Ct(s){return s[Eo]}const oi=Pt($n("Inject",s=>({token:s})),-1),ys=Pt($n("Optional"),8),Ni=Pt($n("SkipSelf"),4);class qc{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}const Zc=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,v=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;var ln=(()=>((ln=ln||{})[ln.NONE=0]="NONE",ln[ln.HTML=1]="HTML",ln[ln.STYLE=2]="STYLE",ln[ln.SCRIPT=3]="SCRIPT",ln[ln.URL=4]="URL",ln[ln.RESOURCE_URL=5]="RESOURCE_URL",ln))();function Qc(s){const o=function Mu(){const s=Re();return s&&s[12]}();return o?o.sanitize(ln.URL,s)||"":function ta(s,o){const a=function Za(s){return s instanceof qc&&s.getTypeName()||null}(s);if(null!=a&&a!==o){if("ResourceURL"===a&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${a} (see https://g.co/ng/security#xss)`)}return a===o}(s,"URL")?function js(s){return s instanceof qc?s.changingThisBreaksApplicationSecurity:s}(s):function p(s){return(s=String(s)).match(Zc)||s.match(v)?s:"unsafe:"+s}(_e(s))}const r0="__ngContext__";function yi(s,o){s[r0]=o}function g_(s){const o=function Bh(s){return s[r0]||null}(s);return o?Array.isArray(o)?o:o.lView:null}function Fl(s){return s.ngOriginalError}function cb(s,...o){s.error(...o)}class Xp{constructor(){this._console=console}handleError(o){const a=this._findOriginalError(o),l=function lb(s){return s&&s.ngErrorLogger||cb}(o);l(this._console,"ERROR",o),a&&l(this._console,"ORIGINAL ERROR",a)}_findOriginalError(o){let a=o&&Fl(o);for(;a&&Fl(a);)a=Fl(a);return a||null}}const vb=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(jt))();function Do(s){return s instanceof Function?s():s}var ra=(()=>((ra=ra||{})[ra.Important=1]="Important",ra[ra.DashCase=2]="DashCase",ra))();function eg(s,o){return undefined(s,o)}function $h(s){const o=s[3];return pi(o)?o[3]:o}function Hh(s){return p0(s[13])}function ng(s){return p0(s[4])}function p0(s){for(;null!==s&&!pi(s);)s=s[4];return s}function Jc(s,o,a,l,d){if(null!=l){let f,y=!1;pi(l)?f=l:Si(l)&&(y=!0,l=l[0]);const E=gn(l);0===s&&null!==a?null==d?T_(o,a,E):Es(o,a,E,d||null,!0):1===s&&null!==a?Es(o,a,E,d||null,!0):2===s?function x_(s,o,a){const l=Wh(s,o);l&&function Sb(s,o,a,l){yn(s)?s.removeChild(o,a,l):o.removeChild(a)}(s,l,o,a)}(o,E,y):3===s&&o.destroyNode(E),null!=f&&function og(s,o,a,l,d){const f=a[7];f!==gn(a)&&Jc(o,s,l,f,d);for(let E=10;E<a.length;E++){const C=a[E];sg(C[1],C,s,o,l,f)}}(o,s,f,a,d)}}function E_(s,o,a){if(yn(s))return s.createElement(o,a);{const l=null!==a?function hu(s){const o=s.toLowerCase();return"svg"===o?"http://www.w3.org/2000/svg":"math"===o?"http://www.w3.org/1998/MathML/":null}(a):null;return null===l?s.createElement(o):s.createElementNS(l,o)}}function m0(s,o){const a=s[9],l=a.indexOf(o),d=o[3];1024&o[2]&&(o[2]&=-1025,ks(d,-1)),a.splice(l,1)}function I_(s,o){if(s.length<=10)return;const a=10+o,l=s[a];if(l){const d=l[17];null!==d&&d!==s&&m0(d,l),o>0&&(s[a-1][4]=l[4]);const f=Xo(s,10+o);!function Pi(s,o){sg(s,o,o[11],2,null,null),o[0]=null,o[6]=null}(l[1],l);const y=f[19];null!==y&&y.detachView(f[1]),l[3]=null,l[4]=null,l[2]&=-129}return l}function C_(s,o){if(!(256&o[2])){const a=o[11];yn(a)&&a.destroyNode&&sg(s,o,a,3,null,null),function w_(s){let o=s[13];if(!o)return b_(s[1],s);for(;o;){let a=null;if(Si(o))a=o[13];else{const l=o[10];l&&(a=l)}if(!a){for(;o&&!o[4]&&o!==s;)Si(o)&&b_(o[1],o),o=o[3];null===o&&(o=s),Si(o)&&b_(o[1],o),a=o&&o[4]}o=a}}(o)}}function b_(s,o){if(!(256&o[2])){o[2]&=-129,o[2]|=256,function y0(s,o){let a;if(null!=s&&null!=(a=s.destroyHooks))for(let l=0;l<a.length;l+=2){const d=o[a[l]];if(!(d instanceof Ho)){const f=a[l+1];if(Array.isArray(f))for(let y=0;y<f.length;y+=2){const E=d[f[y]],C=f[y+1];try{C.call(E)}finally{}}else try{f.call(d)}finally{}}}}(s,o),function _0(s,o){const a=s.cleanup,l=o[7];let d=-1;if(null!==a)for(let f=0;f<a.length-1;f+=2)if("string"==typeof a[f]){const y=a[f+1],E="function"==typeof y?y(o):gn(o[y]),C=l[d=a[f+2]],A=a[f+3];"boolean"==typeof A?E.removeEventListener(a[f],C,A):A>=0?l[d=A]():l[d=-A].unsubscribe(),f+=2}else{const y=l[d=a[f+1]];a[f].call(y)}if(null!==l){for(let f=d+1;f<l.length;f++)l[f]();o[7]=null}}(s,o),1===o[1].type&&yn(o[11])&&o[11].destroy();const a=o[17];if(null!==a&&pi(o[3])){a!==o[3]&&m0(a,o);const l=o[19];null!==l&&l.detachView(s)}}}function rg(s,o,a){return function Db(s,o,a){let l=o;for(;null!==l&&40&l.type;)l=(o=l).parent;if(null===l)return a[0];if(2&l.flags){const d=s.data[l.directiveStart].encapsulation;if(d===Bt.None||d===Bt.Emulated)return null}return mr(l,a)}(s,o.parent,a)}function Es(s,o,a,l,d){yn(s)?s.insertBefore(o,a,l,d):o.insertBefore(a,l,d)}function T_(s,o,a){yn(s)?s.appendChild(o,a):o.appendChild(a)}function v0(s,o,a,l,d){null!==l?Es(s,o,a,l,d):T_(s,o,a)}function Wh(s,o){return yn(s)?s.parentNode(o):o.parentNode}let D_=function w0(s,o,a){return 40&s.type?mr(s,a):null};function ig(s,o,a,l){const d=rg(s,l,o),f=o[11],E=function E0(s,o,a){return D_(s,o,a)}(l.parent||o[6],l,o);if(null!=d)if(Array.isArray(a))for(let C=0;C<a.length;C++)v0(f,d,a[C],E,!1);else v0(f,d,a,E,!1)}function td(s,o){if(null!==o){const a=o.type;if(3&a)return mr(o,s);if(4&a)return A_(-1,s[o.index]);if(8&a){const l=o.child;if(null!==l)return td(s,l);{const d=s[o.index];return pi(d)?A_(-1,d):gn(d)}}if(32&a)return eg(o,s)()||gn(s[o.index]);{const l=C0(s,o);return null!==l?Array.isArray(l)?l[0]:td($h(s[16]),l):td(s,o.next)}}return null}function C0(s,o){return null!==o?s[16][6].projection[o.projection]:null}function A_(s,o){const a=10+s+1;if(a<o.length){const l=o[a],d=l[1].firstChild;if(null!==d)return td(l,d)}return o[7]}function R_(s,o,a,l,d,f,y){for(;null!=a;){const E=l[a.index],C=a.type;if(y&&0===o&&(E&&yi(gn(E),l),a.flags|=4),64!=(64&a.flags))if(8&C)R_(s,o,a.child,l,d,f,!1),Jc(o,s,d,E,f);else if(32&C){const A=eg(a,l);let R;for(;R=A();)Jc(o,s,d,R,f);Jc(o,s,d,E,f)}else 16&C?b0(s,o,l,a,d,f):Jc(o,s,d,E,f);a=y?a.projectionNext:a.next}}function sg(s,o,a,l,d,f){R_(a,l,s.firstChild,o,d,f,!1)}function b0(s,o,a,l,d,f){const y=a[16],C=y[6].projection[l.projection];if(Array.isArray(C))for(let A=0;A<C.length;A++)Jc(o,s,d,C[A],f);else R_(s,o,C,y[3],d,f,!0)}function T0(s,o,a){yn(s)?s.setAttribute(o,"style",a):o.style.cssText=a}function M_(s,o,a){yn(s)?""===a?s.removeAttribute(o,"class"):s.setAttribute(o,"class",a):o.className=a}function N_(s,o,a){let l=s.length;for(;;){const d=s.indexOf(o,a);if(-1===d)return d;if(0===d||s.charCodeAt(d-1)<=32){const f=o.length;if(d+f===l||s.charCodeAt(d+f)<=32)return d}a=d+1}}const ag="ng-template";function tn(s,o,a){let l=0;for(;l<s.length;){let d=s[l++];if(a&&"class"===d){if(d=s[l],-1!==N_(d.toLowerCase(),o,0))return!0}else if(1===d){for(;l<s.length&&"string"==typeof(d=s[l++]);)if(d.toLowerCase()===o)return!0;return!1}}return!1}function Hs(s){return 4===s.type&&s.value!==ag}function Qa(s,o,a){return o===(4!==s.type||a?s.value:ag)}function Vl(s,o,a){let l=4;const d=s.attrs||[],f=function Mb(s){for(let o=0;o<s.length;o++)if(Ls(s[o]))return o;return s.length}(d);let y=!1;for(let E=0;E<o.length;E++){const C=o[E];if("number"!=typeof C){if(!y)if(4&l){if(l=2|1&l,""!==C&&!Qa(s,C,a)||""===C&&1===o.length){if(Ki(l))return!1;y=!0}}else{const A=8&l?C:o[++E];if(8&l&&null!==s.attrs){if(!tn(s.attrs,A,a)){if(Ki(l))return!1;y=!0}continue}const L=Ix(8&l?"class":C,d,Hs(s),a);if(-1===L){if(Ki(l))return!1;y=!0;continue}if(""!==A){let H;H=L>f?"":d[L+1].toLowerCase();const ee=8&l?H:null;if(ee&&-1!==N_(ee,A,0)||2&l&&A!==H){if(Ki(l))return!1;y=!0}}}}else{if(!y&&!Ki(l)&&!Ki(C))return!1;if(y&&Ki(C))continue;y=!1,l=C|1&l}}return Ki(l)||y}function Ki(s){return 0==(1&s)}function Ix(s,o,a,l){if(null===o)return-1;let d=0;if(l||!a){let f=!1;for(;d<o.length;){const y=o[d];if(y===s)return d;if(3===y||6===y)f=!0;else{if(1===y||2===y){let E=o[++d];for(;"string"==typeof E;)E=o[++d];continue}if(4===y)break;if(0===y){d+=4;continue}}d+=f?1:2}return-1}return function Nb(s,o){let a=s.indexOf(4);if(a>-1)for(a++;a<s.length;){const l=s[a];if("number"==typeof l)return-1;if(l===o)return a;a++}return-1}(o,s)}function D0(s,o,a=!1){for(let l=0;l<o.length;l++)if(Vl(s,o[l],a))return!0;return!1}function S0(s,o){return s?":not("+o.trim()+")":o}function kb(s){let o=s[0],a=1,l=2,d="",f=!1;for(;a<s.length;){let y=s[a];if("string"==typeof y)if(2&l){const E=s[++a];d+="["+y+(E.length>0?'="'+E+'"':"")+"]"}else 8&l?d+="."+y:4&l&&(d+=" "+y);else""!==d&&!Ki(y)&&(o+=S0(f,d),d=""),l=y,f=f||!Ki(l);a++}return""!==d&&(o+=S0(f,d)),o}const kt={};function A0(s){Ob($t(),Re(),yr()+s,ka())}function Ob(s,o,a,l){if(!l)if(3==(3&o[2])){const f=s.preOrderCheckHooks;null!==f&&fs(o,f,a)}else{const f=s.preOrderHooks;null!==f&&Va(o,f,0,a)}hs(a)}function q_(s,o){const a=s.contentQueries;if(null!==a)for(let l=0;l<a.length;l+=2){const d=a[l],f=a[l+1];if(-1!==f){const y=s.data[f];El(d),y.contentQueries(2,o[f],f)}}}function Kh(s,o,a,l,d,f,y,E,C,A){const R=o.blueprint.slice();return R[0]=d,R[2]=140|l,Ps(R),R[3]=R[15]=s,R[8]=a,R[10]=y||s&&s[10],R[11]=E||s&&s[11],R[12]=C||s&&s[12]||null,R[9]=A||s&&s[9]||null,R[6]=f,R[16]=2==o.type?s[16]:R,R}function rd(s,o,a,l,d){let f=s.data[o];if(null===f)f=function id(s,o,a,l,d){const f=Os(),y=ml(),C=s.data[o]=function Gb(s,o,a,l,d,f){return{type:a,index:l,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:d,attrs:f,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,y?f:f&&f.parent,a,o,l,d);return null===s.firstChild&&(s.firstChild=C),null!==f&&(y?null==f.child&&null!==C.parent&&(f.child=C):null===f.next&&(f.next=C)),C}(s,o,a,l,d),function Oa(){return gt.lFrame.inI18n}()&&(f.flags|=64);else if(64&f.type){f.type=a,f.value=l,f.attrs=d;const y=function Pa(){const s=gt.lFrame,o=s.currentTNode;return s.isParent?o:o.parent}();f.injectorIndex=null===y?-1:y.injectorIndex}return Gr(f,!0),f}function Pu(s,o,a,l){if(0===a)return-1;const d=o.length;for(let f=0;f<a;f++)o.push(l),s.blueprint.push(l),s.data.push(null);return d}function jl(s,o,a){io(o);try{const l=s.viewQuery;null!==l&&vg(1,l,a);const d=s.template;null!==d&&P0(s,o,d,1,a),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&q_(s,o),s.staticViewQueries&&vg(2,s.viewQuery,a);const f=s.components;null!==f&&function Wb(s,o){for(let a=0;a<o.length;a++)nT(s,o[a])}(o,f)}catch(l){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),l}finally{o[2]&=-5,$o()}}function ku(s,o,a,l){const d=o[2];if(256==(256&d))return;io(o);const f=ka();try{Ps(o),function yl(s){return gt.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==a&&P0(s,o,a,2,l);const y=3==(3&d);if(!f)if(y){const A=s.preOrderCheckHooks;null!==A&&fs(o,A,null)}else{const A=s.preOrderHooks;null!==A&&Va(o,A,0,null),_u(o,0)}if(function tT(s){for(let o=Hh(s);null!==o;o=ng(o)){if(!o[2])continue;const a=o[9];for(let l=0;l<a.length;l++){const d=a[l],f=d[3];0==(1024&d[2])&&ks(f,1),d[2]|=1024}}}(o),function eT(s){for(let o=Hh(s);null!==o;o=ng(o))for(let a=10;a<o.length;a++){const l=o[a],d=l[1];$i(l)&&ku(d,l,d.template,l[8])}}(o),null!==s.contentQueries&&q_(s,o),!f)if(y){const A=s.contentCheckHooks;null!==A&&fs(o,A)}else{const A=s.contentHooks;null!==A&&Va(o,A,1),_u(o,1)}!function M0(s,o){const a=s.hostBindingOpCodes;if(null!==a)try{for(let l=0;l<a.length;l++){const d=a[l];if(d<0)hs(~d);else{const f=d,y=a[++l],E=a[++l];La(y,f),E(2,o[f])}}}finally{hs(-1)}}(s,o);const E=s.components;null!==E&&function K_(s,o){for(let a=0;a<o.length;a++)Bx(s,o[a])}(o,E);const C=s.viewQuery;if(null!==C&&vg(2,C,l),!f)if(y){const A=s.viewCheckHooks;null!==A&&fs(o,A)}else{const A=s.viewHooks;null!==A&&Va(o,A,2),_u(o,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),f||(o[2]&=-73),1024&o[2]&&(o[2]&=-1025,ks(o[3],-1))}finally{$o()}}function N0(s,o,a,l){const d=o[10],f=!ka(),y=Bo(o);try{f&&!y&&d.begin&&d.begin(),y&&jl(s,o,l),ku(s,o,a,l)}finally{f&&!y&&d.end&&d.end()}}function P0(s,o,a,l,d){const f=yr(),y=2&l;try{hs(-1),y&&o.length>20&&Ob(s,o,20,ka()),a(l,d)}finally{hs(f)}}function sd(s,o,a){!gl()||(function Zb(s,o,a,l){const d=a.directiveStart,f=a.directiveEnd;s.firstCreatePass||xn(a,o),yi(l,o);const y=a.initialInputs;for(let E=d;E<f;E++){const C=s.data[E],A=gi(C);A&&ny(o,a,C);const R=Ha(o,s,E,a);yi(R,o),null!==y&&ry(0,E-d,R,C,0,y),A&&(_r(a.index,o)[8]=R)}}(s,o,a,mr(a,o)),128==(128&a.flags)&&function Fx(s,o,a){const l=a.directiveStart,d=a.directiveEnd,y=a.index,E=function Fc(){return gt.lFrame.currentDirectiveIndex}();try{hs(y);for(let C=l;C<d;C++){const A=s.data[C],R=o[C];ro(C),(null!==A.hostBindings||0!==A.hostVars||null!==A.hostAttrs)&&Yb(A,R)}}finally{hs(-1),ro(E)}}(s,o,a))}function Y_(s,o,a=mr){const l=o.localNames;if(null!==l){let d=o.index+1;for(let f=0;f<l.length;f+=2){const y=l[f+1],E=-1===y?a(o,s):s[y];s[d++]=E}}}function k0(s){const o=s.tView;return null===o||o.incompleteFirstPass?s.tView=mg(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts):o}function mg(s,o,a,l,d,f,y,E,C,A){const R=20+l,L=R+d,H=function zb(s,o){const a=[];for(let l=0;l<o;l++)a.push(l<s?null:kt);return a}(R,L),ee="function"==typeof A?A():A;return H[1]={type:s,blueprint:H,template:a,queries:null,viewQuery:E,declTNode:o,data:H.slice().fill(null,R),bindingStartIndex:R,expandoStartIndex:L,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof f?f():f,pipeRegistry:"function"==typeof y?y():y,firstChild:null,schemas:C,consts:ee,incompleteFirstPass:!1}}function F0(s,o,a,l){const d=oy(o);null===a?d.push(l):(d.push(a),s.firstCreatePass&&ay(s).push(l,d.length-1))}function U0(s,o,a){for(let l in s)if(s.hasOwnProperty(l)){const d=s[l];(a=null===a?{}:a).hasOwnProperty(l)?a[l].push(o,d):a[l]=[o,d]}return a}function Zi(s,o,a,l,d,f,y,E){const C=mr(o,a);let R,A=o.inputs;!E&&null!=A&&(R=A[l])?(Q0(s,a,R,l,d),lu(o)&&function Q_(s,o){const a=_r(o,s);16&a[2]||(a[2]|=64)}(a,o.index)):3&o.type&&(l=function V0(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(l),d=null!=y?y(d,o.value||"",l):d,yn(f)?f.setProperty(C,l,d):Fr(l)||(C.setProperty?C.setProperty(l,d):C[l]=d))}function yg(s,o,a,l){let d=!1;if(gl()){const f=function ey(s,o,a){const l=s.directiveRegistry;let d=null;if(l)for(let f=0;f<l.length;f++){const y=l[f];D0(a,y.selectors,!1)&&(d||(d=[]),ii(xn(a,o),s,y.type),gi(y)?(Qb(s,a),d.unshift(y)):d.push(y))}return d}(s,o,a),y=null===l?null:{"":-1};if(null!==f){d=!0,$0(a,s.data.length,f.length);for(let R=0;R<f.length;R++){const L=f[R];L.providersResolver&&L.providersResolver(L)}let E=!1,C=!1,A=Pu(s,o,f.length,null);for(let R=0;R<f.length;R++){const L=f[R];a.mergedAttrs=Ri(a.mergedAttrs,L.hostAttrs),ty(s,a,o,A,L),j0(A,L,y),null!==L.contentQueries&&(a.flags|=8),(null!==L.hostBindings||null!==L.hostAttrs||0!==L.hostVars)&&(a.flags|=128);const H=L.type.prototype;!E&&(H.ngOnChanges||H.ngOnInit||H.ngDoCheck)&&((s.preOrderHooks||(s.preOrderHooks=[])).push(a.index),E=!0),!C&&(H.ngOnChanges||H.ngDoCheck)&&((s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(a.index),C=!0),A++}!function _g(s,o){const l=o.directiveEnd,d=s.data,f=o.attrs,y=[];let E=null,C=null;for(let A=o.directiveStart;A<l;A++){const R=d[A],L=R.inputs,H=null===f||Hs(o)?null:Ux(L,f);y.push(H),E=U0(L,A,E),C=U0(R.outputs,A,C)}null!==E&&(E.hasOwnProperty("class")&&(o.flags|=16),E.hasOwnProperty("style")&&(o.flags|=32)),o.initialInputs=y,o.inputs=E,o.outputs=C}(s,a)}y&&function Jb(s,o,a){if(o){const l=s.localNames=[];for(let d=0;d<o.length;d+=2){const f=a[o[d+1]];if(null==f)throw new Ue(-301,!1);l.push(o[d],f)}}}(a,l,y)}return a.mergedAttrs=Ri(a.mergedAttrs,a.attrs),d}function X_(s,o,a,l,d,f){const y=f.hostBindings;if(y){let E=s.hostBindingOpCodes;null===E&&(E=s.hostBindingOpCodes=[]);const C=~o.index;(function Lx(s){let o=s.length;for(;o>0;){const a=s[--o];if("number"==typeof a&&a<0)return a}return 0})(E)!=C&&E.push(C),E.push(l,d,y)}}function Yb(s,o){null!==s.hostBindings&&s.hostBindings(1,o)}function Qb(s,o){o.flags|=2,(s.components||(s.components=[])).push(o.index)}function j0(s,o,a){if(a){if(o.exportAs)for(let l=0;l<o.exportAs.length;l++)a[o.exportAs[l]]=s;gi(o)&&(a[""]=s)}}function $0(s,o,a){s.flags|=1,s.directiveStart=o,s.directiveEnd=o+a,s.providerIndexes=o}function ty(s,o,a,l,d){s.data[l]=d;const f=d.factory||(d.factory=mi(d.type)),y=new Ho(f,gi(d),null);s.blueprint[l]=y,a[l]=y,X_(s,o,0,l,Pu(s,a,d.hostVars,kt),d)}function ny(s,o,a){const l=mr(o,s),d=k0(a),f=s[10],y=iy(s,Kh(s,d,null,a.onPush?64:16,l,o,f,f.createRenderer(l,a),null,null));s[o.index]=y}function Oi(s,o,a,l,d,f){const y=mr(s,o);!function H0(s,o,a,l,d,f,y){if(null==f)yn(s)?s.removeAttribute(o,d,a):o.removeAttribute(d);else{const E=null==y?_e(f):y(f,l||"",d);yn(s)?s.setAttribute(o,d,E,a):a?o.setAttributeNS(a,d,E):o.setAttribute(d,E)}}(o[11],y,f,s.value,a,l,d)}function ry(s,o,a,l,d,f){const y=f[o];if(null!==y){const E=l.setInput;for(let C=0;C<y.length;){const A=y[C++],R=y[C++],L=y[C++];null!==E?l.setInput(a,L,A,R):a[R]=L}}}function Ux(s,o){let a=null,l=0;for(;l<o.length;){const d=o[l];if(0!==d)if(5!==d){if("number"==typeof d)break;s.hasOwnProperty(d)&&(null===a&&(a=[]),a.push(d,s[d],o[l+1])),l+=2}else l+=2;else l+=4}return a}function Xb(s,o,a,l){return new Array(s,!0,!1,o,null,0,l,a,null,null)}function Bx(s,o){const a=_r(o,s);if($i(a)){const l=a[1];80&a[2]?ku(l,a,l.template,a[8]):a[5]>0&&W0(a)}}function W0(s){for(let l=Hh(s);null!==l;l=ng(l))for(let d=10;d<l.length;d++){const f=l[d];if(1024&f[2]){const y=f[1];ku(y,f,y.template,f[8])}else f[5]>0&&W0(f)}const a=s[1].components;if(null!==a)for(let l=0;l<a.length;l++){const d=_r(a[l],s);$i(d)&&d[5]>0&&W0(d)}}function nT(s,o){const a=_r(o,s),l=a[1];(function jx(s,o){for(let a=o.length;a<s.blueprint.length;a++)o.push(s.blueprint[a])})(l,a),jl(l,a,a[8])}function iy(s,o){return s[13]?s[14][4]=o:s[13]=o,s[14]=o,o}function z0(s){for(;s;){s[2]|=64;const o=$h(s);if(gh(s)&&!o)return s;s=o}return null}function sy(s,o,a){const l=o[10];l.begin&&l.begin();try{ku(s,o,s.template,a)}catch(d){throw iT(o,d),d}finally{l.end&&l.end()}}function q0(s){!function G0(s){for(let o=0;o<s.components.length;o++){const a=s.components[o],l=g_(a),d=l[1];N0(d,l,d.template,a)}}(s[8])}function vg(s,o,a){El(0),o(s,a)}const Y0=(()=>Promise.resolve(null))();function oy(s){return s[7]||(s[7]=[])}function ay(s){return s.cleanup||(s.cleanup=[])}function iT(s,o){const a=s[9],l=a?a.get(Xp,null):null;l&&l.handleError(o)}function Q0(s,o,a,l,d){for(let f=0;f<a.length;){const y=a[f++],E=a[f++],C=o[y],A=s.data[y];null!==A.setInput?A.setInput(C,d,l,E):C[E]=d}}function So(s,o,a){const l=function no(s,o){return gn(o[s])}(o,s);!function v_(s,o,a){yn(s)?s.setValue(o,a):o.textContent=a}(s[11],l,a)}function wg(s,o,a){let l=a?s.styles:null,d=a?s.classes:null,f=0;if(null!==o)for(let y=0;y<o.length;y++){const E=o[y];"number"==typeof E?f=E:1==f?d=ve(d,E):2==f&&(l=ve(l,E+": "+o[++y]+";"))}a?s.styles=l:s.stylesWithoutHost=l,a?s.classes=d:s.classesWithoutHost=d}const uy=new Rn("INJECTOR",-1);class aa{get(o,a=ea){if(a===ea){const l=new Error(`NullInjectorError: No provider for ${le(o)}!`);throw l.name="NullInjectorError",l}return a}}const ot=new Rn("Set Injector scope."),$l={},At={};let od;function Ig(){return void 0===od&&(od=new aa),od}function ad(s,o=null,a=null,l){const d=J0(s,o,a,l);return d._resolveInjectorDefTypes(),d}function J0(s,o=null,a=null,l){return new ly(s,a,o||Ig(),l)}class ly{constructor(o,a,l,d=null){this.parent=l,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const f=[];a&&si(a,E=>this.processProvider(E,o,a)),si([o],E=>this.processInjectorType(E,[],f)),this.records.set(uy,Ja(void 0,this));const y=this.records.get(ot);this.scope=null!=y?y.value:null,this.source=d||("object"==typeof o?null:le(o))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(o=>o.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(o,a=ea,l=pt.Default){this.assertNotDestroyed();const d=J(this),f=en(void 0);try{if(!(l&pt.SkipSelf)){let E=this.records.get(o);if(void 0===E){const C=function tw(s){return"function"==typeof s||"object"==typeof s&&s instanceof Rn}(o)&&Cn(o);E=C&&this.injectableDefInScope(C)?Ja(cy(o),$l):null,this.records.set(o,E)}if(null!=E)return this.hydrate(o,E)}return(l&pt.Self?Ig():this.parent).get(o,a=l&pt.Optional&&a===ea?null:a)}catch(y){if("NullInjectorError"===y.name){if((y[wo]=y[wo]||[]).unshift(le(o)),d)throw y;return function Kr(s,o,a,l){const d=s[wo];throw o[T]&&d.unshift(o[T]),s.message=function Nn(s,o,a,l=null){s=s&&"\n"===s.charAt(0)&&"\u0275"==s.charAt(1)?s.substr(2):s;let d=le(o);if(Array.isArray(o))d=o.map(le).join(" -> ");else if("object"==typeof o){let f=[];for(let y in o)if(o.hasOwnProperty(y)){let E=o[y];f.push(y+":"+("string"==typeof E?JSON.stringify(E):le(E)))}d=`{${f.join(", ")}}`}return`${a}${l?"("+l+")":""}[${d}]: ${s.replace(Sl,"\n  ")}`}("\n"+s.message,d,a,l),s.ngTokenPath=d,s[wo]=null,s}(y,o,"R3InjectorError",this.source)}throw y}finally{en(f),J(d)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(o=>this.get(o))}toString(){const o=[];return this.records.forEach((l,d)=>o.push(le(d))),`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Ue(205,!1)}processInjectorType(o,a,l){if(!(o=se(o)))return!1;let d=Ui(o);const f=null==d&&o.ngModule||void 0,y=void 0===f?o:f,E=-1!==l.indexOf(y);if(void 0!==f&&(d=Ui(f)),null==d)return!1;if(null!=d.imports&&!E){let R;l.push(y);try{si(d.imports,L=>{this.processInjectorType(L,a,l)&&(void 0===R&&(R=[]),R.push(L))})}finally{}if(void 0!==R)for(let L=0;L<R.length;L++){const{ngModule:H,providers:ee}=R[L];si(ee,Ie=>this.processProvider(Ie,H,ee||V))}}this.injectorDefTypes.add(y);const C=mi(y)||(()=>new y);this.records.set(y,Ja(C,$l));const A=d.providers;if(null!=A&&!E){const R=o;si(A,L=>this.processProvider(L,R,A))}return void 0!==f&&void 0!==o.providers}processProvider(o,a,l){let d=ud(o=se(o))?o:se(o&&o.provide);const f=function aT(s,o,a){return Yr(s)?Ja(void 0,s.useValue):Ja(function Zr(s,o,a){let l;if(ud(s)){const d=se(s);return mi(d)||cy(d)}if(Yr(s))l=()=>se(s.useValue);else if(function uT(s){return!(!s||!s.useFactory)}(s))l=()=>s.useFactory(...Et(s.deps||[]));else if(function Ou(s){return!(!s||!s.useExisting)}(s))l=()=>Ae(se(s.useExisting));else{const d=se(s&&(s.useClass||s.provide));if(!function ew(s){return!!s.deps}(s))return mi(d)||cy(d);l=()=>new d(...Et(s.deps))}return l}(s),$l)}(o);if(ud(o)||!0!==o.multi)this.records.get(d);else{let y=this.records.get(d);y||(y=Ja(void 0,$l,!0),y.factory=()=>Et(y.multi),this.records.set(d,y)),d=o,y.multi.push(o)}this.records.set(d,f)}hydrate(o,a){return a.value===$l&&(a.value=At,a.value=a.factory()),"object"==typeof a.value&&a.value&&function lT(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(a.value)&&this.onDestroy.add(a.value),a.value}injectableDefInScope(o){if(!o.providedIn)return!1;const a=se(o.providedIn);return"string"==typeof a?"any"===a||a===this.scope:this.injectorDefTypes.has(a)}}function cy(s){const o=Cn(s),a=null!==o?o.factory:mi(s);if(null!==a)return a;if(s instanceof Rn)throw new Ue(204,!1);if(s instanceof Function)return function oT(s){const o=s.length;if(o>0)throw function _o(s,o){const a=[];for(let l=0;l<s;l++)a.push(o);return a}(o,"?"),new Ue(204,!1);const a=function Nr(s){const o=s&&(s[di]||s[Gn]);if(o){const a=function Sn(s){if(s.hasOwnProperty("name"))return s.name;const o=(""+s).match(/^function\s*([^\s(]+)/);return null===o?"":o[1]}(s);return console.warn(`DEPRECATED: DI is instantiating a token "${a}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${a}" class.`),o}return null}(s);return null!==a?()=>a.factory(s):()=>new s}(s);throw new Ue(204,!1)}function Ja(s,o,a=!1){return{factory:s,value:o,multi:a?[]:void 0}}function Yr(s){return null!==s&&"object"==typeof s&&M in s}function ud(s){return"function"==typeof s}let zs=(()=>{class s{static create(a,l){var d;if(Array.isArray(a))return ad({name:""},l,a,"");{const f=null!==(d=a.name)&&void 0!==d?d:"";return ad({name:f},a.parent,a.providers,f)}}}return s.THROW_IF_NOT_FOUND=ea,s.NULL=new aa,s.\u0275prov=Xt({token:s,providedIn:"any",factory:()=>Ae(uy)}),s.__NG_ELEMENT_ID__=-1,s})();function dw(s,o){Ua(g_(s)[1],Vn())}let cd=null;function Lu(){if(!cd){const s=jt.Symbol;if(s&&s.iterator)cd=s.iterator;else{const o=Object.getOwnPropertyNames(Map.prototype);for(let a=0;a<o.length;++a){const l=o[a];"entries"!==l&&"size"!==l&&Map.prototype[l]===Map.prototype.entries&&(cd=l)}}}return cd}function dd(s){return!!Ag(s)&&(Array.isArray(s)||!(s instanceof Map)&&Lu()in s)}function Ag(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function ui(s,o,a){return!Object.is(s[o],a)&&(s[o]=a,!0)}function Xh(s,o,a,l){const d=Re();return ui(d,Hi(),o)&&($t(),Oi(Bn(),d,s,o,a,l)),Xh}function ur(s,o,a,l){return ui(s,Hi(),a)?o+_e(a)+l:kt}function _w(s,o,a,l,d,f,y,E){const C=Re(),A=$t(),R=s+20,L=A.firstCreatePass?function mw(s,o,a,l,d,f,y,E,C){const A=o.consts,R=rd(o,s,4,y||null,ri(A,E));yg(o,a,R,ri(A,C)),Ua(o,R);const L=R.tViews=mg(2,R,l,d,f,o.directiveRegistry,o.pipeRegistry,null,o.schemas,A);return null!==o.queries&&(o.queries.template(o,R),L.queries=o.queries.embeddedTView(R)),R}(R,A,C,o,a,l,d,f,y):A.data[R];Gr(L,!1);const H=C[11].createComment("");ig(A,C,H,L),yi(H,C),iy(C,C[R]=Xb(H,C,H,L)),Rs(L)&&sd(A,C,L),null!=y&&Y_(C,L,E)}function Ey(s){return function cs(s,o){return s[o]}(function Oc(){return gt.lFrame.contextLView}(),20+s)}function Zl(s,o=pt.Default){const a=Re();return null===a?Ae(s,o):Ko(Vn(),a,se(s),o)}function Tw(){throw new Error("invalid")}function af(s,o,a){const l=Re();return ui(l,Hi(),o)&&Zi($t(),Bn(),l,s,o,l[11],a,!1),af}function Uu(s,o,a,l,d){const y=d?"class":"style";Q0(s,a,o.inputs[y],y,l)}function ua(s,o,a,l){const d=Re(),f=$t(),y=20+s,E=d[11],C=d[y]=E_(E,o,function Vc(){return gt.lFrame.currentNamespace}()),A=f.firstCreatePass?function Ay(s,o,a,l,d,f,y){const E=o.consts,A=rd(o,s,2,d,ri(E,f));return yg(o,a,A,ri(E,y)),null!==A.attrs&&wg(A,A.attrs,!1),null!==A.mergedAttrs&&wg(A,A.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,A),A}(y,f,d,0,o,a,l):f.data[y];Gr(A,!0);const R=A.mergedAttrs;null!==R&&at(E,C,R);const L=A.classes;null!==L&&M_(E,C,L);const H=A.styles;return null!==H&&T0(E,C,H),64!=(64&A.flags)&&ig(f,d,C,A),0===function xa(){return gt.lFrame.elementDepthCount}()&&yi(C,d),function Pc(){gt.lFrame.elementDepthCount++}(),Rs(A)&&(sd(f,d,A),function Z_(s,o,a){if(Cc(o)){const d=o.directiveEnd;for(let f=o.directiveStart;f<d;f++){const y=s.data[f];y.contentQueries&&y.contentQueries(1,a[f],f)}}}(f,A,d)),null!==l&&Y_(d,A),ua}function uf(){let s=Vn();ml()?function _l(){gt.lFrame.isParent=!1}():(s=s.parent,Gr(s,!1));const o=s;!function Ra(){gt.lFrame.elementDepthCount--}();const a=$t();return a.firstCreatePass&&(Ua(a,s),Cc(s)&&a.queries.elementEnd(s)),null!=o.classesWithoutHost&&function Ch(s){return 0!=(16&s.flags)}(o)&&Uu(a,o,Re(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function Fp(s){return 0!=(32&s.flags)}(o)&&Uu(a,o,Re(),o.stylesWithoutHost,!1),uf}function xy(s,o,a,l){return ua(s,o,a,l),uf(),xy}function Ry(){return Re()}function Pn(s){return!!s&&"function"==typeof s.then}function cf(s){return!!s&&"function"==typeof s.subscribe}const Dw=cf;function My(s,o,a,l){const d=Re(),f=$t(),y=Vn();return function Sw(s,o,a,l,d,f,y,E){const C=Rs(l),R=s.firstCreatePass&&ay(s),L=o[8],H=oy(o);let ee=!0;if(3&l.type||E){const Qe=mr(l,o),ut=E?E(Qe):Qe,Me=H.length,yt=E?qt=>E(gn(qt[l.index])):l.index;if(yn(a)){let qt=null;if(!E&&C&&(qt=function df(s,o,a,l){const d=s.cleanup;if(null!=d)for(let f=0;f<d.length-1;f+=2){const y=d[f];if(y===a&&d[f+1]===l){const E=o[7],C=d[f+2];return E.length>C?E[C]:null}"string"==typeof y&&(f+=2)}return null}(s,o,d,l.index)),null!==qt)(qt.__ngLastListenerFn__||qt).__ngNextListenerFn__=f,qt.__ngLastListenerFn__=f,ee=!1;else{f=Py(l,o,L,f,!1);const vn=a.listen(ut,d,f);H.push(f,vn),R&&R.push(d,yt,Me,Me+1)}}else f=Py(l,o,L,f,!0),ut.addEventListener(d,f,y),H.push(f),R&&R.push(d,yt,Me,y)}else f=Py(l,o,L,f,!1);const Ie=l.outputs;let $e;if(ee&&null!==Ie&&($e=Ie[d])){const Qe=$e.length;if(Qe)for(let ut=0;ut<Qe;ut+=2){const Fi=o[$e[ut]][$e[ut+1]].subscribe(f),mc=H.length;H.push(f,Fi),R&&R.push(d,l.index,mc,-(mc+1))}}}(f,d,d[11],y,s,o,!!a,l),My}function Ny(s,o,a,l){try{return!1!==a(l)}catch(d){return iT(s,d),!1}}function Py(s,o,a,l,d){return function f(y){if(y===Function)return l;const E=2&s.flags?_r(s.index,o):o;0==(32&o[2])&&z0(E);let C=Ny(o,0,l,y),A=f.__ngNextListenerFn__;for(;A;)C=Ny(o,0,A,y)&&C,A=A.__ngNextListenerFn__;return d&&!1===C&&(y.preventDefault(),y.returnValue=!1),C}}function Aw(s=1){return function Wi(s){return(gt.lFrame.contextLView=function Eh(s,o){for(;s>0;)o=o[15],s--;return o}(s,gt.lFrame.contextLView))[8]}(s)}function la(s,o,a){return Vg(s,"",o,"",a),la}function Vg(s,o,a,l,d){const f=Re(),y=ur(f,o,a,l);return y!==kt&&Zi($t(),Bn(),f,s,y,f[11],d,!1),Vg}function Hg(s,o=""){const a=Re(),l=$t(),d=s+20,f=l.firstCreatePass?rd(l,d,1,o,null):l.data[d],y=a[d]=function y_(s,o){return yn(s)?s.createText(o):s.createTextNode(o)}(a[11],o);ig(l,a,y,f),Gr(f,!1)}function Ef(s){return wf("",s,""),Ef}function wf(s,o,a){const l=Re(),d=ur(l,s,o,a);return d!==kt&&So(l,yr(),d),wf}const Le=void 0;var Zw=["en",[["a","p"],["AM","PM"],Le],[["AM","PM"],Le,Le],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Le,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Le,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Le,"{1} 'at' {0}",Le],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function Qr(s){const a=Math.floor(Math.abs(s)),l=s.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===l?1:5}];let Md={};function Xy(s){const o=function Cs(s){return s.toLowerCase().replace(/_/g,"-")}(s);let a=ev(o);if(a)return a;const l=o.split("-")[0];if(a=ev(l),a)return a;if("en"===l)return Zw;throw new Error(`Missing locale data for the locale "${s}".`)}function Yw(s){return Xy(s)[wt.PluralCase]}function ev(s){return s in Md||(Md[s]=jt.ng&&jt.ng.common&&jt.ng.common.locales&&jt.ng.common.locales[s]),Md[s]}var wt=(()=>((wt=wt||{})[wt.LocaleId=0]="LocaleId",wt[wt.DayPeriodsFormat=1]="DayPeriodsFormat",wt[wt.DayPeriodsStandalone=2]="DayPeriodsStandalone",wt[wt.DaysFormat=3]="DaysFormat",wt[wt.DaysStandalone=4]="DaysStandalone",wt[wt.MonthsFormat=5]="MonthsFormat",wt[wt.MonthsStandalone=6]="MonthsStandalone",wt[wt.Eras=7]="Eras",wt[wt.FirstDayOfWeek=8]="FirstDayOfWeek",wt[wt.WeekendRange=9]="WeekendRange",wt[wt.DateFormat=10]="DateFormat",wt[wt.TimeFormat=11]="TimeFormat",wt[wt.DateTimeFormat=12]="DateTimeFormat",wt[wt.NumberSymbols=13]="NumberSymbols",wt[wt.NumberFormats=14]="NumberFormats",wt[wt.CurrencyCode=15]="CurrencyCode",wt[wt.CurrencySymbol=16]="CurrencySymbol",wt[wt.CurrencyName=17]="CurrencyName",wt[wt.Currencies=18]="Currencies",wt[wt.Directionality=19]="Directionality",wt[wt.PluralCase=20]="PluralCase",wt[wt.ExtraData=21]="ExtraData",wt))();const xt="en-US";let Hu=xt;class hv{}class pv{resolveComponentFactory(o){throw function kf(s){const o=Error(`No component factory found for ${le(s)}. Did you add it to @NgModule.entryComponents?`);return o.ngComponent=s,o}(o)}}let Of=(()=>{class s{}return s.NULL=new pv,s})();function mI(){return Bd(Vn(),Re())}function Bd(s,o){return new jd(mr(s,o))}let jd=(()=>{class s{constructor(a){this.nativeElement=a}}return s.__NG_ELEMENT_ID__=mI,s})();function _I(s){return s instanceof jd?s.nativeElement:s}class Lf{}let JT=(()=>{class s{}return s.__NG_ELEMENT_ID__=()=>function yI(){const s=Re(),a=_r(Vn().index,s);return function XT(s){return s[11]}(Si(a)?a:s)}(),s})(),$d=(()=>{class s{}return s.\u0275prov=Xt({token:s,providedIn:"root",factory:()=>null}),s})();class Ku{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const gv=new Ku("13.3.6"),iu={};function Ff(s,o,a,l,d=!1){for(;null!==a;){const f=o[a.index];if(null!==f&&l.push(gn(f)),pi(f))for(let E=10;E<f.length;E++){const C=f[E],A=C[1].firstChild;null!==A&&Ff(C[1],C,A,l)}const y=a.type;if(8&y)Ff(s,o,a.child,l);else if(32&y){const E=eg(a,o);let C;for(;C=E();)l.push(C)}else if(16&y){const E=C0(o,a);if(Array.isArray(E))l.push(...E);else{const C=$h(o[16]);Ff(C[1],C,E,l,!0)}}a=d?a.projectionNext:a.next}return l}class fa{constructor(o,a){this._lView=o,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const o=this._lView,a=o[1];return Ff(a,o,a.firstChild,[])}get context(){return this._lView[8]}set context(o){this._lView[8]=o}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[3];if(pi(o)){const a=o[8],l=a?a.indexOf(this):-1;l>-1&&(I_(o,l),Xo(a,l))}this._attachedToViewContainer=!1}C_(this._lView[1],this._lView)}onDestroy(o){F0(this._lView[1],this._lView,null,o)}markForCheck(){z0(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){sy(this._lView[1],this._lView,this.context)}checkNoChanges(){!function K0(s,o,a){jo(!0);try{sy(s,o,a)}finally{jo(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Ue(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function g0(s,o){sg(s,o,o[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new Ue(902,"");this._appRef=o}}class vI extends fa{constructor(o){super(o),this._view=o}detectChanges(){q0(this._view)}checkNoChanges(){!function Z0(s){jo(!0);try{q0(s)}finally{jo(!1)}}(this._view)}get context(){return null}}class mv extends Of{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const a=ct(o);return new dr(a,this.ngModule)}}function Hd(s){const o=[];for(let a in s)s.hasOwnProperty(a)&&o.push({propName:s[a],templateName:a});return o}class dr extends hv{constructor(o,a){super(),this.componentDef=o,this.ngModule=a,this.componentType=o.type,this.selector=function Cx(s){return s.map(kb).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!a}get inputs(){return Hd(this.componentDef.inputs)}get outputs(){return Hd(this.componentDef.outputs)}create(o,a,l,d){const f=(d=d||this.ngModule)?function tD(s,o){return{get:(a,l,d)=>{const f=s.get(a,iu,d);return f!==iu||l===iu?f:o.get(a,l,d)}}}(o,d.injector):o,y=f.get(Lf,Da),E=f.get($d,null),C=y.createRenderer(null,this.componentDef),A=this.componentDef.selectors[0][0]||"div",R=l?function L0(s,o,a){if(yn(s))return s.selectRootElement(o,a===Bt.ShadowDom);let l="string"==typeof o?s.querySelector(o):o;return l.textContent="",l}(C,l,this.componentDef.encapsulation):E_(y.createRenderer(null,this.componentDef),A,function eD(s){const o=s.toLowerCase();return"svg"===o?"svg":"math"===o?"math":null}(A)),L=this.componentDef.onPush?576:528,H=function Tg(s,o){return{components:[],scheduler:s||vb,clean:Y0,playerHandler:o||null,flags:0}}(),ee=mg(0,null,null,1,0,null,null,null,null,null),Ie=Kh(null,ee,H,L,null,null,y,C,E,f);let $e,Qe;io(Ie);try{const ut=function lw(s,o,a,l,d,f){const y=a[1];a[20]=s;const C=rd(y,20,2,"#host",null),A=C.mergedAttrs=o.hostAttrs;null!==A&&(wg(C,A,!0),null!==s&&(at(d,s,A),null!==C.classes&&M_(d,s,C.classes),null!==C.styles&&T0(d,s,C.styles)));const R=l.createRenderer(s,o),L=Kh(a,k0(o),null,o.onPush?64:16,a[20],C,l,R,f||null,null);return y.firstCreatePass&&(ii(xn(C,a),y,o.type),Qb(y,C),$0(C,a.length,1)),iy(a,L),a[20]=L}(R,this.componentDef,Ie,y,C);if(R)if(l)at(C,R,["ng-version",gv.full]);else{const{attrs:Me,classes:yt}=function bx(s){const o=[],a=[];let l=1,d=2;for(;l<s.length;){let f=s[l];if("string"==typeof f)2===d?""!==f&&o.push(f,s[++l]):8===d&&a.push(f);else{if(!Ki(d))break;d=f}l++}return{attrs:o,classes:a}}(this.componentDef.selectors[0]);Me&&at(C,R,Me),yt&&yt.length>0&&M_(C,R,yt.join(" "))}if(Qe=Un(ee,20),void 0!==a){const Me=Qe.projection=[];for(let yt=0;yt<this.ngContentSelectors.length;yt++){const qt=a[yt];Me.push(null!=qt?Array.from(qt):null)}}$e=function cw(s,o,a,l,d){const f=a[1],y=function B0(s,o,a){const l=Vn();s.firstCreatePass&&(a.providersResolver&&a.providersResolver(a),ty(s,l,o,Pu(s,o,1,null),a));const d=Ha(o,s,l.directiveStart,l);yi(d,o);const f=mr(l,o);return f&&yi(f,o),d}(f,a,o);if(l.components.push(y),s[8]=y,d&&d.forEach(C=>C(y,o)),o.contentQueries){const C=Vn();o.contentQueries(1,y,C.directiveStart)}const E=Vn();return!f.firstCreatePass||null===o.hostBindings&&null===o.hostAttrs||(hs(E.index),X_(a[1],E,0,E.directiveStart,E.directiveEnd,o),Yb(o,y)),y}(ut,this.componentDef,Ie,H,[dw]),jl(ee,Ie,null)}finally{$o()}return new nD(this.componentType,$e,Bd(Qe,Ie),Ie,Qe)}}class nD extends class Zs{}{constructor(o,a,l,d,f){super(),this.location=l,this._rootLView=d,this._tNode=f,this.instance=a,this.hostView=this.changeDetectorRef=new vI(d),this.componentType=o}get injector(){return new po(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}class Wd{}class vv{}const ic=new Map;class nm extends Wd{constructor(o,a){super(),this._parent=a,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new mv(this);const l=Ft(o);this._bootstrapComponents=Do(l.bootstrap),this._r3Injector=J0(o,a,[{provide:Wd,useValue:this},{provide:Of,useValue:this.componentFactoryResolver}],le(o)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(o)}get(o,a=zs.THROW_IF_NOT_FOUND,l=pt.Default){return o===zs||o===Wd||o===uy?this:this._r3Injector.get(o,a,l)}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class wv extends vv{constructor(o){super(),this.moduleType=o,null!==Ft(o)&&function EI(s){const o=new Set;!function a(l){const d=Ft(l,!0),f=d.id;null!==f&&(function Zu(s,o,a){if(o&&o!==a)throw new Error(`Duplicate module registered for ${s} - ${le(o)} vs ${le(o.name)}`)}(f,ic.get(f),l),ic.set(f,l));const y=Do(d.imports);for(const E of y)o.has(E)||(o.add(E),a(E))}(s)}(o)}create(o){return new nm(this.moduleType,o)}}function Cv(s){return o=>{setTimeout(s,void 0,o)}}const pa=class aD extends g.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,a,l){var d,f,y;let E=o,C=a||(()=>null),A=l;if(o&&"object"==typeof o){const L=o;E=null===(d=L.next)||void 0===d?void 0:d.bind(L),C=null===(f=L.error)||void 0===f?void 0:f.bind(L),A=null===(y=L.complete)||void 0===y?void 0:y.bind(L)}this.__isAsync&&(C=Cv(C),E&&(E=Cv(E)),A&&(A=Cv(A)));const R=super.subscribe({next:E,error:C,complete:A});return o instanceof U.w0&&o.add(R),R}};function $f(){return this._results[Lu()]()}class im{constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=Lu(),l=im.prototype;l[a]||(l[a]=$f)}get changes(){return this._changes||(this._changes=new pa)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,a){return this._results.reduce(o,a)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,a){const l=this;l.dirty=!1;const d=Vr(o);(this._changesDetected=!function Sh(s,o,a){if(s.length!==o.length)return!1;for(let l=0;l<s.length;l++){let d=s[l],f=o[l];if(a&&(d=a(d),f=a(f)),f!==d)return!1}return!0}(l._results,d,a))&&(l._results=d,l.length=d.length,l.last=d[this.length-1],l.first=d[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let Hf=(()=>{class s{}return s.__NG_ELEMENT_ID__=xI,s})();const Jr=Hf,bv=class extends Jr{constructor(o,a,l){super(),this._declarationLView=o,this._declarationTContainer=a,this.elementRef=l}createEmbeddedView(o){const a=this._declarationTContainer.tViews,l=Kh(this._declarationLView,a,o,16,null,a.declTNode,null,null,null,null);l[17]=this._declarationLView[this._declarationTContainer.index];const f=this._declarationLView[19];return null!==f&&(l[19]=f.createEmbeddedView(a)),jl(a,l,o),new fa(l)}};function xI(){return Qu(Vn(),Re())}function Qu(s,o){return 4&s.type?new bv(o,s,Bd(s,o)):null}let bs=(()=>{class s{}return s.__NG_ELEMENT_ID__=Tv,s})();function Tv(){return Sv(Vn(),Re())}const RI=bs,qd=class extends RI{constructor(o,a,l){super(),this._lContainer=o,this._hostTNode=a,this._hostLView=l}get element(){return Bd(this._hostTNode,this._hostLView)}get injector(){return new po(this._hostTNode,this._hostLView)}get parentInjector(){const o=lo(this._hostTNode,this._hostLView);if(Wo(o)){const a=Go(o,this._hostLView),l=zo(o);return new po(a[1].data[l+8],a)}return new po(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const a=Dv(this._lContainer);return null!==a&&a[o]||null}get length(){return this._lContainer.length-10}createEmbeddedView(o,a,l){const d=o.createEmbeddedView(a||{});return this.insert(d,l),d}createComponent(o,a,l,d,f){const y=o&&!function Ga(s){return"function"==typeof s}(o);let E;if(y)E=a;else{const L=a||{};E=L.index,l=L.injector,d=L.projectableNodes,f=L.ngModuleRef}const C=y?o:new dr(ct(o)),A=l||this.parentInjector;if(!f&&null==C.ngModule){const H=(y?A:this.parentInjector).get(Wd,null);H&&(f=H)}const R=C.create(A,d,void 0,f);return this.insert(R.hostView,E),R}insert(o,a){const l=o._lView,d=l[1];if(function pl(s){return pi(s[3])}(l)){const R=this.indexOf(o);if(-1!==R)this.detach(R);else{const L=l[3],H=new qd(L,L[6],L[3]);H.detach(H.indexOf(o))}}const f=this._adjustIndex(a),y=this._lContainer;!function Xc(s,o,a,l){const d=10+l,f=a.length;l>0&&(a[d-1][4]=o),l<f-10?(o[4]=a[d],Jo(a,10+l,o)):(a.push(o),o[4]=null),o[3]=a;const y=o[17];null!==y&&a!==y&&function ed(s,o){const a=s[9];o[16]!==o[3][3][16]&&(s[2]=!0),null===a?s[9]=[o]:a.push(o)}(y,o);const E=o[19];null!==E&&E.insertView(s),o[2]|=128}(d,l,y,f);const E=A_(f,y),C=l[11],A=Wh(C,y[7]);return null!==A&&function Tb(s,o,a,l,d,f){l[0]=d,l[6]=o,sg(s,l,a,1,d,f)}(d,y[6],C,l,A,E),o.attachToViewContainerRef(),Jo(sm(y),f,o),o}move(o,a){return this.insert(o,a)}indexOf(o){const a=Dv(this._lContainer);return null!==a?a.indexOf(o):-1}remove(o){const a=this._adjustIndex(o,-1),l=I_(this._lContainer,a);l&&(Xo(sm(this._lContainer),a),C_(l[1],l))}detach(o){const a=this._adjustIndex(o,-1),l=I_(this._lContainer,a);return l&&null!=Xo(sm(this._lContainer),a)?new fa(l):null}_adjustIndex(o,a=0){return null==o?this.length+a:o}};function Dv(s){return s[8]}function sm(s){return s[8]||(s[8]=[])}function Sv(s,o){let a;const l=o[s.index];if(pi(l))a=l;else{let d;if(8&s.type)d=gn(l);else{const f=o[11];d=f.createComment("");const y=mr(s,o);Es(f,Wh(f,y),d,function Ab(s,o){return yn(s)?s.nextSibling(o):o.nextSibling}(f,y),!1)}o[s.index]=a=Xb(l,o,d,s),iy(o,a)}return new qd(a,s,o)}class Wf{constructor(o){this.queryList=o,this.matches=null}clone(){return new Wf(this.queryList)}setDirty(){this.queryList.setDirty()}}class Av{constructor(o=[]){this.queries=o}createEmbeddedView(o){const a=o.queries;if(null!==a){const l=null!==o.contentQueries?o.contentQueries[0]:a.length,d=[];for(let f=0;f<l;f++){const y=a.getByIndex(f);d.push(this.queries[y.indexInDeclarationView].clone())}return new Av(d)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let a=0;a<this.queries.length;a++)null!==Nv(o,a).matches&&this.queries[a].setDirty()}}class xv{constructor(o,a,l=null){this.predicate=o,this.flags=a,this.read=l}}class am{constructor(o=[]){this.queries=o}elementStart(o,a){for(let l=0;l<this.queries.length;l++)this.queries[l].elementStart(o,a)}elementEnd(o){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(o)}embeddedTView(o){let a=null;for(let l=0;l<this.length;l++){const d=null!==a?a.length:0,f=this.getByIndex(l).embeddedTView(o,d);f&&(f.indexInDeclarationView=l,null!==a?a.push(f):a=[f])}return null!==a?new am(a):null}template(o,a){for(let l=0;l<this.queries.length;l++)this.queries[l].template(o,a)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class um{constructor(o,a=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(o,a){this.isApplyingToNode(a)&&this.matchTNode(o,a)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,a){this.elementStart(o,a)}embeddedTView(o,a){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,a),new um(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let l=o.parent;for(;null!==l&&8&l.type&&l.index!==a;)l=l.parent;return a===(null!==l?l.index:-1)}return this._appliesToNextNode}matchTNode(o,a){const l=this.metadata.predicate;if(Array.isArray(l))for(let d=0;d<l.length;d++){const f=l[d];this.matchTNodeWithReadOption(o,a,cD(a,f)),this.matchTNodeWithReadOption(o,a,$a(a,o,f,!1,!1))}else l===Hf?4&a.type&&this.matchTNodeWithReadOption(o,a,-1):this.matchTNodeWithReadOption(o,a,$a(a,o,l,!1,!1))}matchTNodeWithReadOption(o,a,l){if(null!==l){const d=this.metadata.read;if(null!==d)if(d===jd||d===bs||d===Hf&&4&a.type)this.addMatch(a.index,-2);else{const f=$a(a,o,d,!1,!1);null!==f&&this.addMatch(a.index,f)}else this.addMatch(a.index,l)}}addMatch(o,a){null===this.matches?this.matches=[o,a]:this.matches.push(o,a)}}function cD(s,o){const a=s.localNames;if(null!==a)for(let l=0;l<a.length;l+=2)if(a[l]===o)return a[l+1];return null}function dD(s,o,a,l){return-1===a?function MI(s,o){return 11&s.type?Bd(s,o):4&s.type?Qu(s,o):null}(o,s):-2===a?function hD(s,o,a){return a===jd?Bd(o,s):a===Hf?Qu(o,s):a===bs?Sv(o,s):void 0}(s,o,l):Ha(s,s[1],a,o)}function sc(s,o,a,l){const d=o[19].queries[l];if(null===d.matches){const f=s.data,y=a.matches,E=[];for(let C=0;C<y.length;C+=2){const A=y[C];E.push(A<0?null:dD(o,f[A],y[C+1],a.metadata.read))}d.matches=E}return d.matches}function Ju(s,o,a,l){const d=s.queries.getByIndex(a),f=d.matches;if(null!==f){const y=sc(s,o,d,a);for(let E=0;E<f.length;E+=2){const C=f[E];if(C>0)l.push(y[E/2]);else{const A=f[E+1],R=o[-C];for(let L=10;L<R.length;L++){const H=R[L];H[17]===H[3]&&Ju(H[1],H,A,l)}if(null!==R[9]){const L=R[9];for(let H=0;H<L.length;H++){const ee=L[H];Ju(ee[1],ee,A,l)}}}}}return l}function NI(s){const o=Re(),a=$t(),l=Fa();El(l+1);const d=Nv(a,l);if(s.dirty&&Bo(o)===(2==(2&d.metadata.flags))){if(null===d.matches)s.reset([]);else{const f=d.crossesNgTemplate?Ju(a,o,l,[]):sc(a,o,d,l);s.reset(f,_I),s.notifyOnChanges()}return!0}return!1}function PI(s,o,a,l){const d=$t();if(d.firstCreatePass){const f=Vn();(function Mv(s,o,a){null===s.queries&&(s.queries=new am),s.queries.track(new um(o,a))})(d,new xv(o,a,l),f.index),function ga(s,o){const a=s.contentQueries||(s.contentQueries=[]);o!==(a.length?a[a.length-1]:-1)&&a.push(s.queries.length-1,o)}(d,s),2==(2&a)&&(d.staticContentQueries=!0)}!function kI(s,o,a){const l=new im(4==(4&a));F0(s,o,l,l.destroy),null===o[19]&&(o[19]=new Av),o[19].queries.push(new Wf(l))}(d,Re(),a)}function Rv(){return function Li(s,o){return s[19].queries[o].queryList}(Re(),Fa())}function Nv(s,o){return s.queries.getByIndex(o)}function zf(s,o){return Qu(s,o)}function tl(...s){}const $I=new Rn("Application Initializer");let pm=(()=>{class s{constructor(a){this.appInits=a,this.resolve=tl,this.reject=tl,this.initialized=!1,this.done=!1,this.donePromise=new Promise((l,d)=>{this.resolve=l,this.reject=d})}runInitializers(){if(this.initialized)return;const a=[],l=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let d=0;d<this.appInits.length;d++){const f=this.appInits[d]();if(Pn(f))a.push(f);else if(Dw(f)){const y=new Promise((E,C)=>{f.subscribe({complete:E,error:C})});a.push(y)}}Promise.all(a).then(()=>{l()}).catch(d=>{this.reject(d)}),0===a.length&&l(),this.initialized=!0}}return s.\u0275fac=function(a){return new(a||s)(Ae($I,8))},s.\u0275prov=Xt({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const HI=new Rn("AppId",{providedIn:"root",factory:function WI(){return`${lc()}${lc()}${lc()}`}});function lc(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const nl=new Rn("Platform Initializer"),cc=new Rn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),zv=new Rn("appBootstrapListener");let DD=(()=>{class s{log(a){console.log(a)}warn(a){console.warn(a)}}return s.\u0275fac=function(a){return new(a||s)},s.\u0275prov=Xt({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();const Qd=new Rn("LocaleId",{providedIn:"root",factory:()=>_t(Qd,pt.Optional|pt.SkipSelf)||function Gv(){return"undefined"!=typeof $localize&&$localize.locale||xt}()}),SD=new Rn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class mm{constructor(o,a){this.ngModuleFactory=o,this.componentFactories=a}}let zI=(()=>{class s{compileModuleSync(a){return new wv(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const l=this.compileModuleSync(a),f=Do(Ft(a).declarations).reduce((y,E)=>{const C=ct(E);return C&&y.push(new dr(C)),y},[]);return new mm(l,f)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return s.\u0275fac=function(a){return new(a||s)},s.\u0275prov=Xt({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const _m=(()=>Promise.resolve(0))();function Yf(s){"undefined"==typeof Zone?_m.then(()=>{s&&s.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",s)}class Xr{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:l=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new pa(!1),this.onMicrotaskEmpty=new pa(!1),this.onStable=new pa(!1),this.onError=new pa(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const d=this;d._nesting=0,d._outer=d._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!l&&a,d.shouldCoalesceRunChangeDetection=l,d.lastRequestAnimationFrameId=-1,d.nativeRequestAnimationFrame=function GI(){let s=jt.requestAnimationFrame,o=jt.cancelAnimationFrame;if("undefined"!=typeof Zone&&s&&o){const a=s[Zone.__symbol__("OriginalDelegate")];a&&(s=a);const l=o[Zone.__symbol__("OriginalDelegate")];l&&(o=l)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function RD(s){const o=()=>{!function dc(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(jt,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,rl(s),s.isCheckStableRunning=!0,ym(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),rl(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,l,d,f,y,E)=>{try{return Kv(s),a.invokeTask(d,f,y,E)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===f.type||s.shouldCoalesceRunChangeDetection)&&o(),su(s)}},onInvoke:(a,l,d,f,y,E,C)=>{try{return Kv(s),a.invoke(d,f,y,E,C)}finally{s.shouldCoalesceRunChangeDetection&&o(),su(s)}},onHasTask:(a,l,d,f)=>{a.hasTask(d,f),l===d&&("microTask"==f.change?(s._hasPendingMicrotasks=f.microTask,rl(s),ym(s)):"macroTask"==f.change&&(s.hasPendingMacrotasks=f.macroTask))},onHandleError:(a,l,d,f)=>(a.handleError(d,f),s.runOutsideAngular(()=>s.onError.emit(f)),!1)})}(d)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Xr.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Xr.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(o,a,l){return this._inner.run(o,a,l)}runTask(o,a,l,d){const f=this._inner,y=f.scheduleEventTask("NgZoneEvent: "+d,o,Jd,tl,tl);try{return f.runTask(y,a,l)}finally{f.cancelTask(y)}}runGuarded(o,a,l){return this._inner.runGuarded(o,a,l)}runOutsideAngular(o){return this._outer.run(o)}}const Jd={};function ym(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function rl(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function Kv(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function su(s){s._nesting--,ym(s)}class hc{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new pa,this.onMicrotaskEmpty=new pa,this.onStable=new pa,this.onError=new pa}run(o,a,l){return o.apply(a,l)}runGuarded(o,a,l){return o.apply(a,l)}runOutsideAngular(o){return o()}runTask(o,a,l,d){return o.apply(a,l)}}let vm=(()=>{class s{constructor(a){this._ngZone=a,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Xr.assertNotInAngularZone(),Yf(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Yf(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(l=>!l.updateCb||!l.updateCb(a)||(clearTimeout(l.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,l,d){let f=-1;l&&l>0&&(f=setTimeout(()=>{this._callbacks=this._callbacks.filter(y=>y.timeoutId!==f),a(this._didWork,this.getPendingTasks())},l)),this._callbacks.push({doneCb:a,timeoutId:f,updateCb:d})}whenStable(a,l,d){if(d&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,l,d),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(a,l,d){return[]}}return s.\u0275fac=function(a){return new(a||s)(Ae(Xr))},s.\u0275prov=Xt({token:s,factory:s.\u0275fac}),s})(),qI=(()=>{class s{constructor(){this._applications=new Map,Zv.addToWindow(this)}registerApplication(a,l){this._applications.set(a,l)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,l=!0){return Zv.findTestabilityInTree(this,a,l)}}return s.\u0275fac=function(a){return new(a||s)},s.\u0275prov=Xt({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();class MD{addToWindow(o){}findTestabilityInTree(o,a,l){return null}}function ND(s){Zv=s}let Zv=new MD,fc=null;const Qf=new Rn("AllowMultipleToken"),Yv=new Rn("PlatformOnDestroy");class pc{constructor(o,a){this.name=o,this.token=a}}function Qv(s,o,a=[]){const l=`Platform: ${o}`,d=new Rn(l);return(f=[])=>{let y=Xf();if(!y||y.injector.get(Qf,!1)){const E=[...a,...f,{provide:d,useValue:!0}];s?s(E):function Jf(s){if(fc&&!fc.get(Qf,!1))throw new Ue(400,"");fc=s;const o=s.get(Em),a=s.get(nl,null);a&&a.forEach(l=>l())}(function kD(s=[],o){return zs.create({name:o,providers:[{provide:ot,useValue:"platform"},{provide:Yv,useValue:()=>fc=null},...s]})}(E,l))}return function ZI(s){const o=Xf();if(!o)throw new Ue(401,"");return o}()}}function Xf(){var s;return null!==(s=null==fc?void 0:fc.get(Em))&&void 0!==s?s:null}let Em=(()=>{class s{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,l){const E=function ep(s,o){let a;return a="noop"===s?new hc:("zone.js"===s?void 0:s)||new Xr({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==o?void 0:o.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==o?void 0:o.ngZoneRunCoalescing)}),a}(l?l.ngZone:void 0,{ngZoneEventCoalescing:l&&l.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:l&&l.ngZoneRunCoalescing||!1}),C=[{provide:Xr,useValue:E}];return E.run(()=>{const A=zs.create({providers:C,parent:this.injector,name:a.moduleType.name}),R=a.create(A),L=R.injector.get(Xp,null);if(!L)throw new Ue(402,"");return E.runOutsideAngular(()=>{const H=E.onError.subscribe({next:ee=>{L.handleError(ee)}});R.onDestroy(()=>{tp(this._modules,R),H.unsubscribe()})}),function wm(s,o,a){try{const l=a();return Pn(l)?l.catch(d=>{throw o.runOutsideAngular(()=>s.handleError(d)),d}):l}catch(l){throw o.runOutsideAngular(()=>s.handleError(l)),l}}(L,E,()=>{const H=R.injector.get(pm);return H.runInitializers(),H.donePromise.then(()=>(function Jw(s){Lt(s,"Expected localeId to be defined"),"string"==typeof s&&(Hu=s.toLowerCase().replace(/_/g,"-"))}(R.injector.get(Qd,xt)||xt),this._moduleDoBootstrap(R),R))})})}bootstrapModule(a,l=[]){const d=Im({},l);return function PD(s,o,a){const l=new wv(a);return Promise.resolve(l)}(0,0,a).then(f=>this.bootstrapModuleFactory(f,d))}_moduleDoBootstrap(a){const l=a.injector.get(Jv);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(d=>l.bootstrap(d));else{if(!a.instance.ngDoBootstrap)throw new Ue(403,"");a.instance.ngDoBootstrap(l)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Ue(404,"");this._modules.slice().forEach(l=>l.destroy()),this._destroyListeners.forEach(l=>l());const a=this._injector.get(Yv,null);null==a||a(),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(a){return new(a||s)(Ae(zs))},s.\u0275prov=Xt({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();function Im(s,o){return Array.isArray(o)?o.reduce(Im,s):Object.assign(Object.assign({},s),o)}let Jv=(()=>{class s{constructor(a,l,d,f){this._zone=a,this._injector=l,this._exceptionHandler=d,this._initStatus=f,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const y=new N.y(C=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{C.next(this._stable),C.complete()})}),E=new N.y(C=>{let A;this._zone.runOutsideAngular(()=>{A=this._zone.onStable.subscribe(()=>{Xr.assertNotInAngularZone(),Yf(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,C.next(!0))})})});const R=this._zone.onUnstable.subscribe(()=>{Xr.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{C.next(!1)}))});return()=>{A.unsubscribe(),R.unsubscribe()}});this.isStable=(0,ae.T)(y,E.pipe((0,ue.B)()))}bootstrap(a,l){if(!this._initStatus.done)throw new Ue(405,"");let d;d=a instanceof hv?a:this._injector.get(Of).resolveComponentFactory(a),this.componentTypes.push(d.componentType);const f=function KI(s){return s.isBoundToModule}(d)?void 0:this._injector.get(Wd),E=d.create(zs.NULL,[],l||d.selector,f),C=E.location.nativeElement,A=E.injector.get(vm,null),R=A&&E.injector.get(qI);return A&&R&&R.registerApplication(C,A),E.onDestroy(()=>{this.detachView(E.hostView),tp(this.components,E),R&&R.unregisterApplication(C)}),this._loadComponent(E),E}tick(){if(this._runningTick)throw new Ue(101,"");try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(a))}finally{this._runningTick=!1}}attachView(a){const l=a;this._views.push(l),l.attachToAppRef(this)}detachView(a){const l=a;tp(this._views,l),l.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a),this._injector.get(zv,[]).concat(this._bootstrapListeners).forEach(d=>d(a))}ngOnDestroy(){this._views.slice().forEach(a=>a.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return s.\u0275fac=function(a){return new(a||s)(Ae(Xr),Ae(zs),Ae(Xp),Ae(pm))},s.\u0275prov=Xt({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function tp(s,o){const a=s.indexOf(o);a>-1&&s.splice(a,1)}let eE=!0,tE=!1;function nE(){return tE=!0,eE}function FD(){if(tE)throw new Error("Cannot enable prod mode after platform setup.");eE=!1}let VD=(()=>{class s{}return s.__NG_ELEMENT_ID__=Xd,s})();function Xd(s){return function eh(s,o,a){if(lu(s)&&!a){const l=_r(s.index,o);return new fa(l,l)}return 47&s.type?new fa(o[16],o):null}(Vn(),Re(),16==(16&s))}class Tm{constructor(){}supports(o){return dd(o)}create(o){return new np(o)}}const Dm=(s,o)=>o;class np{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||Dm}forEachItem(o){let a;for(a=this._itHead;null!==a;a=a._next)o(a)}forEachOperation(o){let a=this._itHead,l=this._removalsHead,d=0,f=null;for(;a||l;){const y=!l||a&&a.currentIndex<xm(l,d,f)?a:l,E=xm(y,d,f),C=y.currentIndex;if(y===l)d--,l=l._nextRemoved;else if(a=a._next,null==y.previousIndex)d++;else{f||(f=[]);const A=E-d,R=C-d;if(A!=R){for(let H=0;H<A;H++){const ee=H<f.length?f[H]:f[H]=0,Ie=ee+H;R<=Ie&&Ie<A&&(f[H]=ee+1)}f[y.previousIndex]=R-A}}E!==C&&o(y,E,C)}}forEachPreviousItem(o){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachMovedItem(o){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}forEachIdentityChange(o){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)o(a)}diff(o){if(null==o&&(o=[]),!dd(o))throw new Ue(900,"");return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let d,f,y,a=this._itHead,l=!1;if(Array.isArray(o)){this.length=o.length;for(let E=0;E<this.length;E++)f=o[E],y=this._trackByFn(E,f),null!==a&&Object.is(a.trackById,y)?(l&&(a=this._verifyReinsertion(a,f,y,E)),Object.is(a.item,f)||this._addIdentityChange(a,f)):(a=this._mismatch(a,f,y,E),l=!0),a=a._next}else d=0,function mT(s,o){if(Array.isArray(s))for(let a=0;a<s.length;a++)o(s[a]);else{const a=s[Lu()]();let l;for(;!(l=a.next()).done;)o(l.value)}}(o,E=>{y=this._trackByFn(d,E),null!==a&&Object.is(a.trackById,y)?(l&&(a=this._verifyReinsertion(a,E,y,d)),Object.is(a.item,E)||this._addIdentityChange(a,E)):(a=this._mismatch(a,E,y,d),l=!0),a=a._next,d++}),this.length=d;return this._truncate(a),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,a,l,d){let f;return null===o?f=this._itTail:(f=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._reinsertAfter(o,f,d)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(l,d))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._moveAfter(o,f,d)):o=this._addAfter(new Sm(a,l),f,d),o}_verifyReinsertion(o,a,l,d){let f=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null);return null!==f?o=this._reinsertAfter(f,o._prev,d):o.currentIndex!=d&&(o.currentIndex=d,this._addToMoves(o,d)),o}_truncate(o){for(;null!==o;){const a=o._next;this._addToRemovals(this._unlink(o)),o=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,a,l){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const d=o._prevRemoved,f=o._nextRemoved;return null===d?this._removalsHead=f:d._nextRemoved=f,null===f?this._removalsTail=d:f._prevRemoved=d,this._insertAfter(o,a,l),this._addToMoves(o,l),o}_moveAfter(o,a,l){return this._unlink(o),this._insertAfter(o,a,l),this._addToMoves(o,l),o}_addAfter(o,a,l){return this._insertAfter(o,a,l),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,a,l){const d=null===a?this._itHead:a._next;return o._next=d,o._prev=a,null===d?this._itTail=o:d._prev=o,null===a?this._itHead=o:a._next=o,null===this._linkedRecords&&(this._linkedRecords=new Am),this._linkedRecords.put(o),o.currentIndex=l,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const a=o._prev,l=o._next;return null===a?this._itHead=l:a._next=l,null===l?this._itTail=a:l._prev=a,o}_addToMoves(o,a){return o.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Am),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,a){return o.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class Sm{constructor(o,a){this.item=o,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class lE{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,a){let l;for(l=this._head;null!==l;l=l._nextDup)if((null===a||a<=l.currentIndex)&&Object.is(l.trackById,o))return l;return null}remove(o){const a=o._prevDup,l=o._nextDup;return null===a?this._head=l:a._nextDup=l,null===l?this._tail=a:l._prevDup=a,null===this._head}}class Am{constructor(){this.map=new Map}put(o){const a=o.trackById;let l=this.map.get(a);l||(l=new lE,this.map.set(a,l)),l.add(o)}get(o,a){const d=this.map.get(o);return d?d.get(o,a):null}remove(o){const a=o.trackById;return this.map.get(a).remove(o)&&this.map.delete(a),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function xm(s,o,a){const l=s.previousIndex;if(null===l)return l;let d=0;return a&&l<a.length&&(d=a[l]),l+o+d}class cE{constructor(){}supports(o){return o instanceof Map||Ag(o)}create(){return new KD}}class KD{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let a;for(a=this._mapHead;null!==a;a=a._next)o(a)}forEachPreviousItem(o){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)o(a)}forEachChangedItem(o){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}diff(o){if(o){if(!(o instanceof Map||Ag(o)))throw new Ue(900,"")}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(o,(l,d)=>{if(a&&a.key===d)this._maybeAddToChanges(a,l),this._appendAfter=a,a=a._next;else{const f=this._getOrCreateRecordForKey(d,l);a=this._insertBeforeOrAppend(a,f)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let l=a;null!==l;l=l._nextRemoved)l===this._mapHead&&(this._mapHead=null),this._records.delete(l.key),l._nextRemoved=l._next,l.previousValue=l.currentValue,l.currentValue=null,l._prev=null,l._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,a){if(o){const l=o._prev;return a._next=o,a._prev=l,o._prev=a,l&&(l._next=a),o===this._mapHead&&(this._mapHead=a),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(o,a){if(this._records.has(o)){const d=this._records.get(o);this._maybeAddToChanges(d,a);const f=d._prev,y=d._next;return f&&(f._next=y),y&&(y._prev=f),d._next=null,d._prev=null,d}const l=new XI(o);return this._records.set(o,l),l.currentValue=a,this._addToAdditions(l),l}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,a){Object.is(a,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=a,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,a){o instanceof Map?o.forEach(a):Object.keys(o).forEach(l=>a(o[l],l))}}class XI{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function eC(){return new dE([new Tm])}let dE=(()=>{class s{constructor(a){this.factories=a}static create(a,l){if(null!=l){const d=l.factories.slice();a=a.concat(d)}return new s(a)}static extend(a){return{provide:s,useFactory:l=>s.create(a,l||eC()),deps:[[s,new Ni,new ys]]}}find(a){const l=this.factories.find(d=>d.supports(a));if(null!=l)return l;throw new Ue(901,"")}}return s.\u0275prov=Xt({token:s,providedIn:"root",factory:eC}),s})();function hE(){return new nh([new cE])}let nh=(()=>{class s{constructor(a){this.factories=a}static create(a,l){if(l){const d=l.factories.slice();a=a.concat(d)}return new s(a)}static extend(a){return{provide:s,useFactory:l=>s.create(a,l||hE()),deps:[[s,new Ni,new ys]]}}find(a){const l=this.factories.find(f=>f.supports(a));if(l)return l;throw new Ue(901,"")}}return s.\u0275prov=Xt({token:s,providedIn:"root",factory:hE}),s})();const YD=Qv(null,"core",[]);let QD=(()=>{class s{constructor(a){}}return s.\u0275fac=function(a){return new(a||s)(Ae(Jv))},s.\u0275mod=ce({type:s}),s.\u0275inj=Yt({}),s})()},3942:(nt,Te,k)=>{k.d(Te,{Z:()=>Ue});var g=k(2090),U=k(4859),N=k(9681),ae=k(1877);class ue{constructor(_e,De){this._delegate=_e,this.firebase=De,(0,N._addComponent)(_e,new U.wA("app-compat",()=>this,"PUBLIC")),this.container=_e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(_e){this._delegate.automaticDataCollectionEnabled=_e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(_e=>{this._delegate.checkDestroyed(),_e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,N.deleteApp)(this._delegate)))}_getService(_e,De=N._DEFAULT_ENTRY_NAME){var ze;this._delegate.checkDestroyed();const We=this._delegate.container.getProvider(_e);return!We.isInitialized()&&"EXPLICIT"===(null===(ze=We.getComponent())||void 0===ze?void 0:ze.instantiationMode)&&We.initialize(),We.getImmediate({identifier:De})}_removeServiceInstance(_e,De=N._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(_e).clearInstance(De)}_addComponent(_e){(0,N._addComponent)(this._delegate,_e)}_addOrOverwriteComponent(_e){(0,N._addOrOverwriteComponent)(this._delegate,_e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const fe=new g.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),W=function ve(){const He=function le(He){const _e={},De={__esModule:!0,initializeApp:function Pe(ne,he={}){const be=N.initializeApp(ne,he);if((0,g.r3)(_e,be.name))return _e[be.name];const Z=new He(be,De);return _e[be.name]=Z,Z},app:We,registerVersion:N.registerVersion,setLogLevel:N.setLogLevel,onLog:N.onLog,apps:null,SDK_VERSION:N.SDK_VERSION,INTERNAL:{registerComponent:function Ce(ne){const he=ne.name,be=he.replace("-compat","");if(N._registerComponent(ne)&&"PUBLIC"===ne.type){const Z=(re=We())=>{if("function"!=typeof re[be])throw fe.create("invalid-app-argument",{appName:he});return re[be]()};void 0!==ne.serviceProps&&(0,g.ZB)(Z,ne.serviceProps),De[be]=Z,He.prototype[be]=function(...re){return this._getService.bind(this,he).apply(this,ne.multipleInstances?re:[])}}return"PUBLIC"===ne.type?De[be]:null},removeApp:function ze(ne){delete _e[ne]},useAsService:function qe(ne,he){return"serverAuth"===he?null:he},modularAPIs:N}};function We(ne){if(!(0,g.r3)(_e,ne=ne||N._DEFAULT_ENTRY_NAME))throw fe.create("no-app",{appName:ne});return _e[ne]}return De.default=De,Object.defineProperty(De,"apps",{get:function ke(){return Object.keys(_e).map(ne=>_e[ne])}}),We.App=He,De}(ue);return He.INTERNAL=Object.assign(Object.assign({},He.INTERNAL),{createFirebaseNamespace:ve,extendNamespace:function _e(De){(0,g.ZB)(He,De)},createSubscribe:g.ne,ErrorFactory:g.LL,deepExtend:g.ZB}),He}(),j=new ae.Yd("@firebase/app-compat");if((0,g.jU)()&&void 0!==self.firebase){j.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const He=self.firebase.SDK_VERSION;He&&He.indexOf("LITE")>=0&&j.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Ue=W;!function Ne(He){(0,N.registerVersion)("@firebase/app-compat","0.1.25",He)}()},9681:(nt,Te,k)=>{k.r(Te),k.d(Te,{FirebaseError:()=>ae.ZR,SDK_VERSION:()=>di,_DEFAULT_ENTRY_NAME:()=>Lt,_addComponent:()=>hn,_addOrOverwriteComponent:()=>Xt,_apps:()=>dn,_clearComponents:()=>Ti,_components:()=>On,_getProvider:()=>Yt,_registerComponent:()=>Vt,_removeServiceInstance:()=>Cn,deleteApp:()=>pt,getApp:()=>Gn,getApps:()=>Vi,initializeApp:()=>Di,onLog:()=>en,registerVersion:()=>wn,setLogLevel:()=>Pr});var g=k(5861),U=k(4859),N=k(1877),ae=k(2090),ue=k(8766);class ye{constructor(te){this.container=te}getPlatformInfoString(){return this.container.getProviders().map(Fe=>{if(function fe($){const te=$.getComponent();return"VERSION"===(null==te?void 0:te.type)}(Fe)){const Xe=Fe.getImmediate();return`${Xe.library}/${Xe.version}`}return null}).filter(Fe=>Fe).join(" ")}}const le="@firebase/app",W=new N.Yd("@firebase/app"),Lt="[DEFAULT]",Ye={[le]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},dn=new Map,On=new Map;function hn($,te){try{$.container.addComponent(te)}catch(Fe){W.debug(`Component ${te.name} failed to register with FirebaseApp ${$.name}`,Fe)}}function Xt($,te){$.container.addOrOverwriteComponent(te)}function Vt($){const te=$.name;if(On.has(te))return W.debug(`There were multiple attempts to register component ${te}.`),!1;On.set(te,$);for(const Fe of dn.values())hn(Fe,$);return!0}function Yt($,te){const Fe=$.container.getProvider("heartbeat").getImmediate({optional:!0});return Fe&&Fe.triggerHeartbeat(),$.container.getProvider(te)}function Cn($,te,Fe=Lt){Yt($,te).clearInstance(Fe)}function Ti(){On.clear()}const Sn=new ae.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class Ui{constructor(te,Fe,Xe){this._isDeleted=!1,this._options=Object.assign({},te),this._config=Object.assign({},Fe),this._name=Fe.name,this._automaticDataCollectionEnabled=Fe.automaticDataCollectionEnabled,this._container=Xe,this.container.addComponent(new U.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(te){this.checkDestroyed(),this._automaticDataCollectionEnabled=te}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(te){this._isDeleted=te}checkDestroyed(){if(this.isDeleted)throw Sn.create("app-deleted",{appName:this._name})}}const di="9.8.1";function Di($,te={}){"object"!=typeof te&&(te={name:te});const Fe=Object.assign({name:Lt,automaticDataCollectionEnabled:!1},te),Xe=Fe.name;if("string"!=typeof Xe||!Xe)throw Sn.create("bad-app-name",{appName:String(Xe)});const ft=dn.get(Xe);if(ft){if((0,ae.vZ)($,ft.options)&&(0,ae.vZ)(Fe,ft.config))return ft;throw Sn.create("duplicate-app",{appName:Xe})}const Dt=new U.H0(Xe);for(const vt of On.values())Dt.addComponent(vt);const an=new Ui($,Fe,Dt);return dn.set(Xe,an),an}function Gn($=Lt){const te=dn.get($);if(!te)throw Sn.create("no-app",{appName:$});return te}function Vi(){return Array.from(dn.values())}function pt($){return Hr.apply(this,arguments)}function Hr(){return(Hr=(0,g.Z)(function*($){const te=$.name;dn.has(te)&&(dn.delete(te),yield Promise.all($.container.getProviders().map(Fe=>Fe.delete())),$.isDeleted=!0)})).apply(this,arguments)}function wn($,te,Fe){var Xe;let ft=null!==(Xe=Ye[$])&&void 0!==Xe?Xe:$;Fe&&(ft+=`-${Fe}`);const Dt=ft.match(/\s|\//),an=te.match(/\s|\//);if(Dt||an){const vt=[`Unable to register library "${ft}" with version "${te}":`];return Dt&&vt.push(`library name "${ft}" contains illegal characters (whitespace or "/")`),Dt&&an&&vt.push("and"),an&&vt.push(`version name "${te}" contains illegal characters (whitespace or "/")`),void W.warn(vt.join(" "))}Vt(new U.wA(`${ft}-version`,()=>({library:ft,version:te}),"VERSION"))}function en($,te){if(null!==$&&"function"!=typeof $)throw Sn.create("invalid-log-argument");(0,N.Am)($,te)}function Pr($){(0,N.Ub)($)}const bn="firebase-heartbeat-store";let pr=null;function rs(){return pr||(pr=(0,ue.X3)("firebase-heartbeat-database",1,{upgrade:($,te)=>{0===te&&$.createObjectStore(bn)}}).catch($=>{throw Sn.create("storage-open",{originalErrorMessage:$.message})})),pr}function dt(){return(dt=(0,g.Z)(function*($){try{return(yield rs()).transaction(bn).objectStore(bn).get(fi($))}catch(te){throw Sn.create("storage-get",{originalErrorMessage:te.message})}})).apply(this,arguments)}function st($,te){return hi.apply(this,arguments)}function hi(){return(hi=(0,g.Z)(function*($,te){try{const Xe=(yield rs()).transaction(bn,"readwrite");return yield Xe.objectStore(bn).put(te,fi($)),Xe.done}catch(Fe){throw Sn.create("storage-set",{originalErrorMessage:Fe.message})}})).apply(this,arguments)}function fi($){return`${$.name}!${$.options.appId}`}class Ln{constructor(te){this.container=te,this._heartbeatsCache=null;const Fe=this.container.getProvider("app").getImmediate();this._storage=new z(Fe),this._heartbeatsCachePromise=this._storage.read().then(Xe=>(this._heartbeatsCache=Xe,Xe))}triggerHeartbeat(){var te=this;return(0,g.Z)(function*(){const Xe=te.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),ft=fn();if(null===te._heartbeatsCache&&(te._heartbeatsCache=yield te._heartbeatsCachePromise),te._heartbeatsCache.lastSentHeartbeatDate!==ft&&!te._heartbeatsCache.heartbeats.some(Dt=>Dt.date===ft))return te._heartbeatsCache.heartbeats.push({date:ft,agent:Xe}),te._heartbeatsCache.heartbeats=te._heartbeatsCache.heartbeats.filter(Dt=>{const an=new Date(Dt.date).valueOf();return Date.now()-an<=2592e6}),te._storage.overwrite(te._heartbeatsCache)})()}getHeartbeatsHeader(){var te=this;return(0,g.Z)(function*(){if(null===te._heartbeatsCache&&(yield te._heartbeatsCachePromise),null===te._heartbeatsCache||0===te._heartbeatsCache.heartbeats.length)return"";const Fe=fn(),{heartbeatsToSend:Xe,unsentEntries:ft}=function V($,te=1024){const Fe=[];let Xe=$.slice();for(const ft of $){const Dt=Fe.find(an=>an.agent===ft.agent);if(Dt){if(Dt.dates.push(ft.date),q(Fe)>te){Dt.dates.pop();break}}else if(Fe.push({agent:ft.agent,dates:[ft.date]}),q(Fe)>te){Fe.pop();break}Xe=Xe.slice(1)}return{heartbeatsToSend:Fe,unsentEntries:Xe}}(te._heartbeatsCache.heartbeats),Dt=(0,ae.L)(JSON.stringify({version:2,heartbeats:Xe}));return te._heartbeatsCache.lastSentHeartbeatDate=Fe,ft.length>0?(te._heartbeatsCache.heartbeats=ft,yield te._storage.overwrite(te._heartbeatsCache)):(te._heartbeatsCache.heartbeats=[],te._storage.overwrite(te._heartbeatsCache)),Dt})()}}function fn(){return(new Date).toISOString().substring(0,10)}class z{constructor(te){this.app=te,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,g.Z)(function*(){return!!(0,ae.hl)()&&(0,ae.eu)().then(()=>!0).catch(()=>!1)})()}read(){var te=this;return(0,g.Z)(function*(){return(yield te._canUseIndexedDBPromise)&&(yield function Bt($){return dt.apply(this,arguments)}(te.app))||{heartbeats:[]}})()}overwrite(te){var Fe=this;return(0,g.Z)(function*(){var Xe;if(yield Fe._canUseIndexedDBPromise){const Dt=yield Fe.read();return st(Fe.app,{lastSentHeartbeatDate:null!==(Xe=te.lastSentHeartbeatDate)&&void 0!==Xe?Xe:Dt.lastSentHeartbeatDate,heartbeats:te.heartbeats})}})()}add(te){var Fe=this;return(0,g.Z)(function*(){var Xe;if(yield Fe._canUseIndexedDBPromise){const Dt=yield Fe.read();return st(Fe.app,{lastSentHeartbeatDate:null!==(Xe=te.lastSentHeartbeatDate)&&void 0!==Xe?Xe:Dt.lastSentHeartbeatDate,heartbeats:[...Dt.heartbeats,...te.heartbeats]})}})()}}function q($){return(0,ae.L)(JSON.stringify({version:2,heartbeats:$})).length}!function we($){Vt(new U.wA("platform-logger",te=>new ye(te),"PRIVATE")),Vt(new U.wA("heartbeat",te=>new Ln(te),"PRIVATE")),wn(le,"0.7.24",$),wn(le,"0.7.24","esm2017"),wn("fire-js","")}("")},4859:(nt,Te,k)=>{k.d(Te,{H0:()=>le,wA:()=>N});var g=k(5861),U=k(2090);class N{constructor(W,j,se){this.name=W,this.instanceFactory=j,this.type=se,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(W){return this.instantiationMode=W,this}setMultipleInstances(W){return this.multipleInstances=W,this}setServiceProps(W){return this.serviceProps=W,this}setInstanceCreatedCallback(W){return this.onInstanceCreated=W,this}}const ae="[DEFAULT]";class ue{constructor(W,j){this.name=W,this.container=j,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(W){const j=this.normalizeInstanceIdentifier(W);if(!this.instancesDeferred.has(j)){const se=new U.BH;if(this.instancesDeferred.set(j,se),this.isInitialized(j)||this.shouldAutoInitialize())try{const Ge=this.getOrInitializeService({instanceIdentifier:j});Ge&&se.resolve(Ge)}catch(Ge){}}return this.instancesDeferred.get(j).promise}getImmediate(W){var j;const se=this.normalizeInstanceIdentifier(null==W?void 0:W.identifier),Ge=null!==(j=null==W?void 0:W.optional)&&void 0!==j&&j;if(!this.isInitialized(se)&&!this.shouldAutoInitialize()){if(Ge)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:se})}catch(Ne){if(Ge)return null;throw Ne}}getComponent(){return this.component}setComponent(W){if(W.name!==this.name)throw Error(`Mismatching Component ${W.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=W,this.shouldAutoInitialize()){if(function fe(ve){return"EAGER"===ve.instantiationMode}(W))try{this.getOrInitializeService({instanceIdentifier:ae})}catch(j){}for(const[j,se]of this.instancesDeferred.entries()){const Ge=this.normalizeInstanceIdentifier(j);try{const Ne=this.getOrInitializeService({instanceIdentifier:Ge});se.resolve(Ne)}catch(Ne){}}}}clearInstance(W=ae){this.instancesDeferred.delete(W),this.instancesOptions.delete(W),this.instances.delete(W)}delete(){var W=this;return(0,g.Z)(function*(){const j=Array.from(W.instances.values());yield Promise.all([...j.filter(se=>"INTERNAL"in se).map(se=>se.INTERNAL.delete()),...j.filter(se=>"_delete"in se).map(se=>se._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(W=ae){return this.instances.has(W)}getOptions(W=ae){return this.instancesOptions.get(W)||{}}initialize(W={}){const{options:j={}}=W,se=this.normalizeInstanceIdentifier(W.instanceIdentifier);if(this.isInitialized(se))throw Error(`${this.name}(${se}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Ge=this.getOrInitializeService({instanceIdentifier:se,options:j});for(const[Ne,Ue]of this.instancesDeferred.entries())se===this.normalizeInstanceIdentifier(Ne)&&Ue.resolve(Ge);return Ge}onInit(W,j){var se;const Ge=this.normalizeInstanceIdentifier(j),Ne=null!==(se=this.onInitCallbacks.get(Ge))&&void 0!==se?se:new Set;Ne.add(W),this.onInitCallbacks.set(Ge,Ne);const Ue=this.instances.get(Ge);return Ue&&W(Ue,Ge),()=>{Ne.delete(W)}}invokeOnInitCallbacks(W,j){const se=this.onInitCallbacks.get(j);if(se)for(const Ge of se)try{Ge(W,j)}catch(Ne){}}getOrInitializeService({instanceIdentifier:W,options:j={}}){let se=this.instances.get(W);if(!se&&this.component&&(se=this.component.instanceFactory(this.container,{instanceIdentifier:(ve=W,ve===ae?void 0:ve),options:j}),this.instances.set(W,se),this.instancesOptions.set(W,j),this.invokeOnInitCallbacks(se,W),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,W,se)}catch(Ge){}var ve;return se||null}normalizeInstanceIdentifier(W=ae){return this.component?this.component.multipleInstances?W:ae:W}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class le{constructor(W){this.name=W,this.providers=new Map}addComponent(W){const j=this.getProvider(W.name);if(j.isComponentSet())throw new Error(`Component ${W.name} has already been registered with ${this.name}`);j.setComponent(W)}addOrOverwriteComponent(W){this.getProvider(W.name).isComponentSet()&&this.providers.delete(W.name),this.addComponent(W)}getProvider(W){if(this.providers.has(W))return this.providers.get(W);const j=new ue(W,this);return this.providers.set(W,j),j}getProviders(){return Array.from(this.providers.values())}}},1877:(nt,Te,k)=>{k.d(Te,{Am:()=>ve,Ub:()=>le,Yd:()=>fe,in:()=>U});const g=[];var U=(()=>{return(W=U||(U={}))[W.DEBUG=0]="DEBUG",W[W.VERBOSE=1]="VERBOSE",W[W.INFO=2]="INFO",W[W.WARN=3]="WARN",W[W.ERROR=4]="ERROR",W[W.SILENT=5]="SILENT",U;var W})();const N={debug:U.DEBUG,verbose:U.VERBOSE,info:U.INFO,warn:U.WARN,error:U.ERROR,silent:U.SILENT},ae=U.INFO,ue={[U.DEBUG]:"log",[U.VERBOSE]:"log",[U.INFO]:"info",[U.WARN]:"warn",[U.ERROR]:"error"},ye=(W,j,...se)=>{if(j<W.logLevel)return;const Ge=(new Date).toISOString(),Ne=ue[j];if(!Ne)throw new Error(`Attempted to log a message with an invalid logType (value: ${j})`);console[Ne](`[${Ge}]  ${W.name}:`,...se)};class fe{constructor(j){this.name=j,this._logLevel=ae,this._logHandler=ye,this._userLogHandler=null,g.push(this)}get logLevel(){return this._logLevel}set logLevel(j){if(!(j in U))throw new TypeError(`Invalid value "${j}" assigned to \`logLevel\``);this._logLevel=j}setLogLevel(j){this._logLevel="string"==typeof j?N[j]:j}get logHandler(){return this._logHandler}set logHandler(j){if("function"!=typeof j)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=j}get userLogHandler(){return this._userLogHandler}set userLogHandler(j){this._userLogHandler=j}debug(...j){this._userLogHandler&&this._userLogHandler(this,U.DEBUG,...j),this._logHandler(this,U.DEBUG,...j)}log(...j){this._userLogHandler&&this._userLogHandler(this,U.VERBOSE,...j),this._logHandler(this,U.VERBOSE,...j)}info(...j){this._userLogHandler&&this._userLogHandler(this,U.INFO,...j),this._logHandler(this,U.INFO,...j)}warn(...j){this._userLogHandler&&this._userLogHandler(this,U.WARN,...j),this._logHandler(this,U.WARN,...j)}error(...j){this._userLogHandler&&this._userLogHandler(this,U.ERROR,...j),this._logHandler(this,U.ERROR,...j)}}function le(W){g.forEach(j=>{j.setLogLevel(W)})}function ve(W,j){for(const se of g){let Ge=null;j&&j.level&&(Ge=N[j.level]),se.userLogHandler=null===W?null:(Ne,Ue,...He)=>{const _e=He.map(De=>{if(null==De)return null;if("string"==typeof De)return De;if("number"==typeof De||"boolean"==typeof De)return De.toString();if(De instanceof Error)return De.message;try{return JSON.stringify(De)}catch(ze){return null}}).filter(De=>De).join(" ");Ue>=(null!=Ge?Ge:Ne.logLevel)&&W({level:U[Ue].toLowerCase(),message:_e,args:He,type:Ne.name})}}}},8766:(nt,Te,k)=>{k.d(Te,{Lj:()=>Pe,X3:()=>We});var g=k(5861);let N,ae;const fe=new WeakMap,le=new WeakMap,ve=new WeakMap,W=new WeakMap,j=new WeakMap;let Ne={get(he,be,Z){if(he instanceof IDBTransaction){if("done"===be)return le.get(he);if("objectStoreNames"===be)return he.objectStoreNames||ve.get(he);if("store"===be)return Z.objectStoreNames[1]?void 0:Z.objectStore(Z.objectStoreNames[0])}return De(he[be])},set:(he,be,Z)=>(he[be]=Z,!0),has:(he,be)=>he instanceof IDBTransaction&&("done"===be||"store"===be)||be in he};function _e(he){return"function"==typeof he?function He(he){return he!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function ye(){return ae||(ae=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(he)?function(...be){return he.apply(ze(this),be),De(fe.get(this))}:function(...be){return De(he.apply(ze(this),be))}:function(be,...Z){const re=he.call(ze(this),be,...Z);return ve.set(re,be.sort?be.sort():[be]),De(re)}}(he):(he instanceof IDBTransaction&&function Ge(he){if(le.has(he))return;const be=new Promise((Z,re)=>{const oe=()=>{he.removeEventListener("complete",Ee),he.removeEventListener("error",de),he.removeEventListener("abort",de)},Ee=()=>{Z(),oe()},de=()=>{re(he.error||new DOMException("AbortError","AbortError")),oe()};he.addEventListener("complete",Ee),he.addEventListener("error",de),he.addEventListener("abort",de)});le.set(he,be)}(he),((he,be)=>be.some(Z=>he instanceof Z))(he,function ue(){return N||(N=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(he,Ne):he)}function De(he){if(he instanceof IDBRequest)return function se(he){const be=new Promise((Z,re)=>{const oe=()=>{he.removeEventListener("success",Ee),he.removeEventListener("error",de)},Ee=()=>{Z(De(he.result)),oe()},de=()=>{re(he.error),oe()};he.addEventListener("success",Ee),he.addEventListener("error",de)});return be.then(Z=>{Z instanceof IDBCursor&&fe.set(Z,he)}).catch(()=>{}),j.set(be,he),be}(he);if(W.has(he))return W.get(he);const be=_e(he);return be!==he&&(W.set(he,be),j.set(be,he)),be}const ze=he=>j.get(he);function We(he,be,{blocked:Z,upgrade:re,blocking:oe,terminated:Ee}={}){const de=indexedDB.open(he,be),Ve=De(de);return re&&de.addEventListener("upgradeneeded",ht=>{re(De(de.result),ht.oldVersion,ht.newVersion,De(de.transaction))}),Z&&de.addEventListener("blocked",()=>Z()),Ve.then(ht=>{Ee&&ht.addEventListener("close",()=>Ee()),oe&&ht.addEventListener("versionchange",()=>oe())}).catch(()=>{}),Ve}function Pe(he,{blocked:be}={}){const Z=indexedDB.deleteDatabase(he);return be&&Z.addEventListener("blocked",()=>be()),De(Z).then(()=>{})}const ke=["get","getKey","getAll","getAllKeys","count"],Ce=["put","add","delete","clear"],qe=new Map;function ne(he,be){if(!(he instanceof IDBDatabase)||be in he||"string"!=typeof be)return;if(qe.get(be))return qe.get(be);const Z=be.replace(/FromIndex$/,""),re=be!==Z,oe=Ce.includes(Z);if(!(Z in(re?IDBIndex:IDBObjectStore).prototype)||!oe&&!ke.includes(Z))return;const Ee=function(){var de=(0,g.Z)(function*(Ve,...ht){const Zt=this.transaction(Ve,oe?"readwrite":"readonly");let Lt=Zt.store;return re&&(Lt=Lt.index(ht.shift())),(yield Promise.all([Lt[Z](...ht),oe&&Zt.done]))[0]});return function(ht){return de.apply(this,arguments)}}();return qe.set(be,Ee),Ee}!function Ue(he){Ne=he(Ne)}(he=>RP(xP({},he),{get:(be,Z,re)=>ne(be,Z)||he.get(be,Z,re),has:(be,Z)=>!!ne(be,Z)||he.has(be,Z)}))},5861:(nt,Te,k)=>{function g(N,ae,ue,ye,fe,le,ve){try{var W=N[le](ve),j=W.value}catch(se){return void ue(se)}W.done?ae(j):Promise.resolve(j).then(ye,fe)}function U(N){return function(){var ae=this,ue=arguments;return new Promise(function(ye,fe){var le=N.apply(ae,ue);function ve(j){g(le,ye,fe,ve,W,"next",j)}function W(j){g(le,ye,fe,ve,W,"throw",j)}ve(void 0)})}}k.d(Te,{Z:()=>U})}},nt=>{nt(nt.s=8190)}]);