"use strict";var EU=Object.defineProperty,wU=Object.defineProperties,IU=Object.getOwnPropertyDescriptors,rP=Object.getOwnPropertySymbols,bU=Object.prototype.hasOwnProperty,CU=Object.prototype.propertyIsEnumerable,iP=(nt,De,k)=>De in nt?EU(nt,De,{enumerable:!0,configurable:!0,writable:!0,value:k}):nt[De]=k,sP=(nt,De)=>{for(var k in De||(De={}))bU.call(De,k)&&iP(nt,k,De[k]);if(rP)for(var k of rP(De))CU.call(De,k)&&iP(nt,k,De[k]);return nt},oP=(nt,De)=>wU(nt,IU(De));(self.webpackChunkAngularProject=self.webpackChunkAngularProject||[]).push([[179],{2011:(nt,De,k)=>{k.d(De,{Dh:()=>le,GT:()=>ye,cc:()=>Ne,hO:()=>Ge,on:()=>W,pX:()=>ue,xv:()=>ve});var g=k(5e3),U=k(127),N=k(5813);nt=k.hmd(nt);const ae=["ngOnDestroy"],ue=(Se,ze,We,Pe={})=>new Proxy(Se,{get:(ke,be)=>We.runOutsideAngular(()=>{var qe;if(Se[be])return(null===(qe=null==Pe?void 0:Pe.spy)||void 0===qe?void 0:qe.get)&&Pe.spy.get(be,Se[be]),Se[be];if(ae.indexOf(be)>-1)return()=>{};const ne=ze.toPromise().then(fe=>{const Ce=fe&&fe[be];return"function"==typeof Ce?Ce.bind(fe):Ce&&Ce.then?Ce.then(K=>We.run(()=>K)):We.run(()=>Ce)});return new Proxy(()=>{},{get:(fe,Ce)=>ne[Ce],apply:(fe,Ce,K)=>ne.then(re=>{var oe;const we=re&&re(...K);return(null===(oe=null==Pe?void 0:Pe.spy)||void 0===oe?void 0:oe.apply)&&Pe.spy.apply(be,K,we),we})})})}),ye=(Se,ze)=>{ze.forEach(We=>{Object.getOwnPropertyNames(We.prototype||We).forEach(Pe=>{Object.defineProperty(Se.prototype,Pe,Object.getOwnPropertyDescriptor(We.prototype||We,Pe))})})};class pe{constructor(ze){return ze}}const le=new g.OlP("angularfire2.app.options"),ve=new g.OlP("angularfire2.app.name");function W(Se,ze,We){const ke="object"==typeof We&&We||{};ke.name=ke.name||"string"==typeof We&&We||"[DEFAULT]";const qe=U.Z.apps.filter(ne=>ne&&ne.name===ke.name)[0]||ze.runOutsideAngular(()=>U.Z.initializeApp(Se,ke));try{JSON.stringify(Se)!==JSON.stringify(qe.options)&&j("error",`${qe.name} Firebase App already initialized with different options${nt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(ne){}return new pe(qe)}const j=(Se,...ze)=>{(0,g.X6Q)()&&"undefined"!=typeof console&&console[Se](...ze)},se={provide:pe,useFactory:W,deps:[le,g.R0b,[new g.FiY,ve]]};let Ge=(()=>{class Se{constructor(We){U.Z.registerVersion("angularfire",N.q4.full,"core"),U.Z.registerVersion("angularfire",N.q4.full,"app-compat"),U.Z.registerVersion("angular",g.q4F.full,We.toString())}static initializeApp(We,Pe){return{ngModule:Se,providers:[{provide:le,useValue:We},{provide:ve,useValue:Pe}]}}}return Se.\u0275fac=function(We){return new(We||Se)(g.LFG(g.Lbi))},Se.\u0275mod=g.oAB({type:Se}),Se.\u0275inj=g.cJS({providers:[se]}),Se})();function Ne(Se,ze,We,Pe,ke){const[,be,qe]=globalThis.\u0275AngularfireInstanceCache.find(ne=>ne[0]===Se)||[];if(be)return function Ue(Se,ze){try{return Se.toString()===ze.toString()}catch(We){return Se===ze}}(ke,qe)||(_e("error",`${ze} was already initialized on the ${We} Firebase App with different settings.${He?" You may need to reload as Firebase is not HMR aware.":""}`),_e("warn",{is:ke,was:qe})),be;{const ne=Pe();return globalThis.\u0275AngularfireInstanceCache.push([Se,ne,ke]),ne}}const He=!!nt.hot,_e=(Se,...ze)=>{(0,g.X6Q)()&&"undefined"!=typeof console&&console[Se](...ze)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(nt,De,k)=>{k.d(De,{q4:()=>co,iC:()=>po,HU:()=>Du,vb:()=>kh,JM:()=>Cu,u3:()=>xl});var g=k(5e3),U=k(5867),N=k(5861),ae=k(9681),ue=k(2090),ye=k(4859),pe=k(1877),le=k(8766);const ve="@firebase/installations",W="0.5.9",se=`w:${W}`,Ge="FIS_v2",ze=new ue.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function We(C){return C instanceof ue.ZR&&C.code.includes("request-failed")}function Pe({projectId:C}){return`https://firebaseinstallations.googleapis.com/v1/projects/${C}/installations`}function ke(C){return{token:C.token,requestStatus:2,expiresIn:re(C.expiresIn),creationTime:Date.now()}}function be(C,T){return qe.apply(this,arguments)}function qe(){return(qe=(0,N.Z)(function*(C,T){const L=(yield T.json()).error;return ze.create("request-failed",{requestName:C,serverCode:L.code,serverMessage:L.message,serverStatus:L.status})})).apply(this,arguments)}function ne({apiKey:C}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":C})}function fe(C,{refreshToken:T}){const M=ne(C);return M.append("Authorization",function oe(C){return`${Ge} ${C}`}(T)),M}function Ce(C){return K.apply(this,arguments)}function K(){return(K=(0,N.Z)(function*(C){const T=yield C();return T.status>=500&&T.status<600?C():T})).apply(this,arguments)}function re(C){return Number(C.replace("s","000"))}function we(C,T){return de.apply(this,arguments)}function de(){return(de=(0,N.Z)(function*({appConfig:C,heartbeatServiceProvider:T},{fid:M}){const L=Pe(C),J=ne(C),X=T.getImmediate({optional:!0});if(X){const Et=yield X.getHeartbeatsHeader();Et&&J.append("x-firebase-client",Et)}const rt={method:"POST",headers:J,body:JSON.stringify({fid:M,authVersion:Ge,appId:C.appId,sdkVersion:se})},mt=yield Ce(()=>fetch(L,rt));if(mt.ok){const Et=yield mt.json();return{fid:Et.fid||M,registrationStatus:2,refreshToken:Et.refreshToken,authToken:ke(Et.authToken)}}throw yield be("Create Installation",mt)})).apply(this,arguments)}function Ve(C){return new Promise(T=>{setTimeout(T,C)})}const Kt=/^[cdef][\w-]{21}$/;function Ye(){try{const C=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(C),C[0]=112+C[0]%16;const M=function dn(C){return function dt(C){return btoa(String.fromCharCode(...C)).replace(/\+/g,"-").replace(/\//g,"_")}(C).substr(0,22)}(C);return Kt.test(M)?M:""}catch(C){return""}}function kn(C){return`${C.appName}!${C.appId}`}const hn=new Map;function en(C,T){const M=kn(C);In(M,T),function yi(C,T){const M=function Dn(){return!Ar&&"BroadcastChannel"in self&&(Ar=new BroadcastChannel("[Firebase] FID Change"),Ar.onmessage=C=>{In(C.data.key,C.data.fid)}),Ar}();M&&M.postMessage({key:C,fid:T}),function Fi(){0===hn.size&&Ar&&(Ar.close(),Ar=null)}()}(M,T)}function In(C,T){const M=hn.get(C);if(M)for(const L of M)L(T)}let Ar=null;const qn="firebase-installations-store";let Li=null;function ft(){return Li||(Li=(0,le.X3)("firebase-installations-database",1,{upgrade:(C,T)=>{0===T&&C.createObjectStore(qn)}})),Li}function Vr(C,T){return En.apply(this,arguments)}function En(){return(En=(0,N.Z)(function*(C,T){const M=kn(C),J=(yield ft()).transaction(qn,"readwrite"),X=J.objectStore(qn),xe=yield X.get(M);return yield X.put(T,M),yield J.done,(!xe||xe.fid!==T.fid)&&en(C,T.fid),T})).apply(this,arguments)}function tn(C){return xr.apply(this,arguments)}function xr(){return(xr=(0,N.Z)(function*(C){const T=kn(C),L=(yield ft()).transaction(qn,"readwrite");yield L.objectStore(qn).delete(T),yield L.done})).apply(this,arguments)}function ir(C,T){return Br.apply(this,arguments)}function Br(){return(Br=(0,N.Z)(function*(C,T){const M=kn(C),J=(yield ft()).transaction(qn,"readwrite"),X=J.objectStore(qn),xe=yield X.get(M),rt=T(xe);return void 0===rt?yield X.delete(M):yield X.put(rt,M),yield J.done,rt&&(!xe||xe.fid!==rt.fid)&&en(C,rt.fid),rt})).apply(this,arguments)}function bn(C){return cr.apply(this,arguments)}function cr(){return(cr=(0,N.Z)(function*(C){let T;const M=yield ir(C.appConfig,L=>{const J=ts(L),X=jt(C,J);return T=X.registrationPromise,X.installationEntry});return""===M.fid?{installationEntry:yield T}:{installationEntry:M,registrationPromise:T}})).apply(this,arguments)}function ts(C){return Ui(C||{fid:Ye(),registrationStatus:0})}function jt(C,T){if(0===T.registrationStatus){if(!navigator.onLine)return{installationEntry:T,registrationPromise:Promise.reject(ze.create("app-offline"))};const M={fid:T.fid,registrationStatus:1,registrationTime:Date.now()},L=function ct(C,T){return it.apply(this,arguments)}(C,M);return{installationEntry:M,registrationPromise:L}}return 1===T.registrationStatus?{installationEntry:T,registrationPromise:ui(C)}:{installationEntry:T}}function it(){return(it=(0,N.Z)(function*(C,T){try{const M=yield we(C,T);return Vr(C.appConfig,M)}catch(M){throw We(M)&&409===M.customData.serverCode?yield tn(C.appConfig):yield Vr(C.appConfig,{fid:T.fid,registrationStatus:0}),M}})).apply(this,arguments)}function ui(C){return li.apply(this,arguments)}function li(){return(li=(0,N.Z)(function*(C){let T=yield $t(C.appConfig);for(;1===T.registrationStatus;)yield Ve(100),T=yield $t(C.appConfig);if(0===T.registrationStatus){const{installationEntry:M,registrationPromise:L}=yield bn(C);return L||M}return T})).apply(this,arguments)}function $t(C){return ir(C,T=>{if(!T)throw ze.create("installation-not-found");return Ui(T)})}function Ui(C){return function On(C){return 1===C.registrationStatus&&C.registrationTime+1e4<Date.now()}(C)?{fid:C.fid,registrationStatus:0}:C}function fn(C,T){return V.apply(this,arguments)}function V(){return(V=(0,N.Z)(function*({appConfig:C,heartbeatServiceProvider:T},M){const L=z(C,M),J=fe(C,M),X=T.getImmediate({optional:!0});if(X){const Et=yield X.getHeartbeatsHeader();Et&&J.append("x-firebase-client",Et)}const rt={method:"POST",headers:J,body:JSON.stringify({installation:{sdkVersion:se,appId:C.appId}})},mt=yield Ce(()=>fetch(L,rt));if(mt.ok)return ke(yield mt.json());throw yield be("Generate Auth Token",mt)})).apply(this,arguments)}function z(C,{fid:T}){return`${Pe(C)}/${T}/authTokens:generate`}function q(C){return Ie.apply(this,arguments)}function Ie(){return(Ie=(0,N.Z)(function*(C,T=!1){let M;const L=yield ir(C.appConfig,X=>{if(!St(X))throw ze.create("not-registered");const xe=X.authToken;if(!T&&an(xe))return X;if(1===xe.requestStatus)return M=$(C,T),X;{if(!navigator.onLine)throw ze.create("app-offline");const rt=er(X);return M=Xe(C,rt),rt}});return M?yield M:L.authToken})).apply(this,arguments)}function $(C,T){return ee.apply(this,arguments)}function ee(){return(ee=(0,N.Z)(function*(C,T){let M=yield Fe(C.appConfig);for(;1===M.authToken.requestStatus;)yield Ve(100),M=yield Fe(C.appConfig);const L=M.authToken;return 0===L.requestStatus?q(C,T):L})).apply(this,arguments)}function Fe(C){return ir(C,T=>{if(!St(T))throw ze.create("not-registered");return function ce(C){return 1===C.requestStatus&&C.requestTime+1e4<Date.now()}(T.authToken)?Object.assign(Object.assign({},T),{authToken:{requestStatus:0}}):T})}function Xe(C,T){return ht.apply(this,arguments)}function ht(){return(ht=(0,N.Z)(function*(C,T){try{const M=yield fn(C,T),L=Object.assign(Object.assign({},T),{authToken:M});return yield Vr(C.appConfig,L),M}catch(M){if(!We(M)||401!==M.customData.serverCode&&404!==M.customData.serverCode){const L=Object.assign(Object.assign({},T),{authToken:{requestStatus:0}});yield Vr(C.appConfig,L)}else yield tn(C.appConfig);throw M}})).apply(this,arguments)}function St(C){return void 0!==C&&2===C.registrationStatus}function an(C){return 2===C.requestStatus&&!function vt(C){const T=Date.now();return T<C.creationTime||C.creationTime+C.expiresIn<T+36e5}(C)}function er(C){const T={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},C),{authToken:T})}function G(){return(G=(0,N.Z)(function*(C){const T=C,{installationEntry:M,registrationPromise:L}=yield bn(T);return L?L.catch(console.error):q(T).catch(console.error),M.fid})).apply(this,arguments)}function Ke(){return(Ke=(0,N.Z)(function*(C,T=!1){const M=C;return yield lt(M),(yield q(M,T)).token})).apply(this,arguments)}function lt(C){return Dt.apply(this,arguments)}function Dt(){return(Dt=(0,N.Z)(function*(C){const{registrationPromise:T}=yield bn(C);T&&(yield T)})).apply(this,arguments)}function ma(C){return ze.create("missing-app-config-values",{valueName:C})}const Xr="installations",Nt=C=>{const T=C.getProvider("app").getImmediate(),M=function dr(C){if(!C||!C.options)throw ma("App Configuration");if(!C.name)throw ma("App Name");const T=["projectId","apiKey","appId"];for(const M of T)if(!C.options[M])throw ma(M);return{appName:C.name,projectId:C.options.projectId,apiKey:C.options.apiKey,appId:C.options.appId}}(T);return{app:T,appConfig:M,heartbeatServiceProvider:(0,ae._getProvider)(T,"heartbeat"),_delete:()=>Promise.resolve()}},_n=C=>{const T=C.getProvider("app").getImmediate(),M=(0,ae._getProvider)(T,Xr).getImmediate();return{getId:()=>function Z(C){return G.apply(this,arguments)}(M),getToken:J=>function Ae(C){return Ke.apply(this,arguments)}(M,J)}};(function jr(){(0,ae._registerComponent)(new ye.wA(Xr,Nt,"PUBLIC")),(0,ae._registerComponent)(new ye.wA("installations-internal",_n,"PRIVATE"))})(),(0,ae.registerVersion)(ve,W),(0,ae.registerVersion)(ve,W,"esm2017");const ns="@firebase/remote-config",Fn=new ue.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class kc{constructor(T,M,L,J){this.client=T,this.storage=M,this.storageCache=L,this.logger=J}isCachedDataFresh(T,M){if(!M)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const L=Date.now()-M,J=L<=T;return this.logger.debug(`Config fetch cache check. Cache age millis: ${L}. Cache max age millis (minimumFetchIntervalMillis setting): ${T}. Is cache hit: ${J}.`),J}fetch(T){var M=this;return(0,N.Z)(function*(){const[L,J]=yield Promise.all([M.storage.getLastSuccessfulFetchTimestampMillis(),M.storage.getLastSuccessfulFetchResponse()]);if(J&&M.isCachedDataFresh(T.cacheMaxAgeMillis,L))return J;T.eTag=J&&J.eTag;const X=yield M.client.fetch(T),xe=[M.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===X.status&&xe.push(M.storage.setLastSuccessfulFetchResponse(X)),yield Promise.all(xe),X})()}}function du(C=navigator){return C.languages&&C.languages[0]||C.language}class nr{constructor(T,M,L,J,X,xe){this.firebaseInstallations=T,this.sdkVersion=M,this.namespace=L,this.projectId=J,this.apiKey=X,this.appId=xe}fetch(T){var M=this;return(0,N.Z)(function*(){const[L,J]=yield Promise.all([M.firebaseInstallations.getId(),M.firebaseInstallations.getToken()]),xe=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${M.projectId}/namespaces/${M.namespace}:fetch?key=${M.apiKey}`,rt={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":T.eTag||"*"},mt={sdk_version:M.sdkVersion,app_instance_id:L,app_instance_id_token:J,app_id:M.appId,language_code:du()},Et={method:"POST",headers:rt,body:JSON.stringify(mt)},kt=fetch(xe,Et),bt=new Promise((Ti,_s)=>{T.signal.addEventListener(()=>{const mo=new Error("The operation was aborted.");mo.name="AbortError",_s(mo)})});let Wr;try{yield Promise.race([kt,bt]),Wr=yield kt}catch(Ti){let _s="fetch-client-network";throw"AbortError"===Ti.name&&(_s="fetch-timeout"),Fn.create(_s,{originalErrorMessage:Ti.message})}let Nn=Wr.status;const ri=Wr.headers.get("ETag")||void 0;let ms,Ci;if(200===Wr.status){let Ti;try{Ti=yield Wr.json()}catch(_s){throw Fn.create("fetch-client-parse",{originalErrorMessage:_s.message})}ms=Ti.entries,Ci=Ti.state}if("INSTANCE_STATE_UNSPECIFIED"===Ci?Nn=500:"NO_CHANGE"===Ci?Nn=304:("NO_TEMPLATE"===Ci||"EMPTY_CONFIG"===Ci)&&(ms={}),304!==Nn&&200!==Nn)throw Fn.create("fetch-status",{httpStatus:Nn});return{status:Nn,eTag:ri,config:ms}})()}}class is{constructor(T,M){this.client=T,this.storage=M}fetch(T){var M=this;return(0,N.Z)(function*(){const L=(yield M.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return M.attemptFetch(T,L)})()}attemptFetch(T,{throttleEndTimeMillis:M,backoffCount:L}){var J=this;return(0,N.Z)(function*(){yield function Oc(C,T){return new Promise((M,L)=>{const J=Math.max(T-Date.now(),0),X=setTimeout(M,J);C.addEventListener(()=>{clearTimeout(X),L(Fn.create("fetch-throttle",{throttleEndTimeMillis:T}))})})}(T.signal,M);try{const X=yield J.client.fetch(T);return yield J.storage.deleteThrottleMetadata(),X}catch(X){if(!function kp(C){if(!(C instanceof ue.ZR&&C.customData))return!1;const T=Number(C.customData.httpStatus);return 429===T||500===T||503===T||504===T}(X))throw X;const xe={throttleEndTimeMillis:Date.now()+(0,ue.$s)(L),backoffCount:L+1};return yield J.storage.setThrottleMetadata(xe),J.attemptFetch(T,xe)}})()}}class Fp{constructor(T,M,L,J,X){this.app=T,this._client=M,this._storageCache=L,this._storage=J,this._logger=X,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function _a(C,T){const M=C.target.error||void 0;return Fn.create(T,{originalErrorMessage:M&&M.message})}const ko="app_namespace_store";class Uc{constructor(T,M,L,J=function Up(){return new Promise((C,T)=>{try{const M=indexedDB.open("firebase_remote_config",1);M.onerror=L=>{T(_a(L,"storage-open"))},M.onsuccess=L=>{C(L.target.result)},M.onupgradeneeded=L=>{0===L.oldVersion&&L.target.result.createObjectStore(ko,{keyPath:"compositeKey"})}}catch(M){T(Fn.create("storage-open",{originalErrorMessage:M}))}})}()){this.appId=T,this.appName=M,this.namespace=L,this.openDbPromise=J}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(T){return this.set("last_fetch_status",T)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(T){return this.set("last_successful_fetch_timestamp_millis",T)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(T){return this.set("last_successful_fetch_response",T)}getActiveConfig(){return this.get("active_config")}setActiveConfig(T){return this.set("active_config",T)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(T){return this.set("active_config_etag",T)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(T){return this.set("throttle_metadata",T)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(T){var M=this;return(0,N.Z)(function*(){const L=yield M.openDbPromise;return new Promise((J,X)=>{const rt=L.transaction([ko],"readonly").objectStore(ko),mt=M.createCompositeKey(T);try{const Et=rt.get(mt);Et.onerror=kt=>{X(_a(kt,"storage-get"))},Et.onsuccess=kt=>{const bt=kt.target.result;J(bt?bt.value:void 0)}}catch(Et){X(Fn.create("storage-get",{originalErrorMessage:Et&&Et.message}))}})})()}set(T,M){var L=this;return(0,N.Z)(function*(){const J=yield L.openDbPromise;return new Promise((X,xe)=>{const mt=J.transaction([ko],"readwrite").objectStore(ko),Et=L.createCompositeKey(T);try{const kt=mt.put({compositeKey:Et,value:M});kt.onerror=bt=>{xe(_a(bt,"storage-set"))},kt.onsuccess=()=>{X()}}catch(kt){xe(Fn.create("storage-set",{originalErrorMessage:kt&&kt.message}))}})})()}delete(T){var M=this;return(0,N.Z)(function*(){const L=yield M.openDbPromise;return new Promise((J,X)=>{const rt=L.transaction([ko],"readwrite").objectStore(ko),mt=M.createCompositeKey(T);try{const Et=rt.delete(mt);Et.onerror=kt=>{X(_a(kt,"storage-delete"))},Et.onsuccess=()=>{J()}}catch(Et){X(Fn.create("storage-delete",{originalErrorMessage:Et&&Et.message}))}})})()}createCompositeKey(T){return[this.appId,this.appName,this.namespace,T].join()}}class Oo{constructor(T){this.storage=T}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var T=this;return(0,N.Z)(function*(){const M=T.storage.getLastFetchStatus(),L=T.storage.getLastSuccessfulFetchTimestampMillis(),J=T.storage.getActiveConfig(),X=yield M;X&&(T.lastFetchStatus=X);const xe=yield L;xe&&(T.lastSuccessfulFetchTimestampMillis=xe);const rt=yield J;rt&&(T.activeConfig=rt)})()}setLastFetchStatus(T){return this.lastFetchStatus=T,this.storage.setLastFetchStatus(T)}setLastSuccessfulFetchTimestampMillis(T){return this.lastSuccessfulFetchTimestampMillis=T,this.storage.setLastSuccessfulFetchTimestampMillis(T)}setActiveConfig(T){return this.activeConfig=T,this.storage.setActiveConfig(T)}}function r_(){return ya.apply(this,arguments)}function ya(){return(ya=(0,N.Z)(function*(){if(!(0,ue.hl)())return!1;try{return yield(0,ue.eu)()}catch(C){return!1}})).apply(this,arguments)}!function Vp(){(0,ae._registerComponent)(new ye.wA("remote-config",function C(T,{instanceIdentifier:M}){const L=T.getProvider("app").getImmediate(),J=T.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw Fn.create("registration-window");if(!(0,ue.hl)())throw Fn.create("indexed-db-unavailable");const{projectId:X,apiKey:xe,appId:rt}=L.options;if(!X)throw Fn.create("registration-project-id");if(!xe)throw Fn.create("registration-api-key");if(!rt)throw Fn.create("registration-app-id");const mt=new Uc(rt,L.name,M=M||"firebase"),Et=new Oo(mt),kt=new pe.Yd(ns);kt.logLevel=pe.in.ERROR;const bt=new nr(J,ae.SDK_VERSION,M,X,xe,rt),Wr=new is(bt,mt),Nn=new kc(Wr,mt,Et,kt),ri=new Fp(L,Nn,Et,mt,kt);return function pn(C){const T=(0,ue.m9)(C);T._initializePromise||(T._initializePromise=T._storageCache.loadFromStorage().then(()=>{T._isInitializationComplete=!0}))}(ri),ri},"PUBLIC").setMultipleInstances(!0)),(0,ae.registerVersion)(ns,"0.3.8"),(0,ae.registerVersion)(ns,"0.3.8","esm2017")}();const Ss="/firebase-messaging-sw.js",hi="/firebase-cloud-messaging-push-scope",Fo="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Ea="google.c.a.c_id",bh="google.c.a.c_l",Bp="google.c.a.ts",Ks="google.c.a.e";var os=(()=>{return(C=os||(os={})).PUSH_RECEIVED="push-received",C.NOTIFICATION_CLICKED="notification-clicked",os;var C})();function wi(C){const T=new Uint8Array(C);return btoa(String.fromCharCode(...T)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Bc(C){const M=(C+"=".repeat((4-C.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),L=atob(M),J=new Uint8Array(L.length);for(let X=0;X<L.length;++X)J[X]=L.charCodeAt(X);return J}const Mr="fcm_token_details_db",jc="fcm_token_object_Store";function $c(C){return hu.apply(this,arguments)}function hu(){return hu=(0,N.Z)(function*(C){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(X=>X.name).includes(Mr))return null;let T=null;return(yield(0,le.X3)(Mr,5,{upgrade:(L=(0,N.Z)(function*(J,X,xe,rt){var mt;if(X<2||!J.objectStoreNames.contains(jc))return;const Et=rt.objectStore(jc),kt=yield Et.index("fcmSenderId").get(C);if(yield Et.clear(),kt)if(2===X){const bt=kt;if(!bt.auth||!bt.p256dh||!bt.endpoint)return;T={token:bt.fcmToken,createTime:null!==(mt=bt.createTime)&&void 0!==mt?mt:Date.now(),subscriptionOptions:{auth:bt.auth,p256dh:bt.p256dh,endpoint:bt.endpoint,swScope:bt.swScope,vapidKey:"string"==typeof bt.vapidKey?bt.vapidKey:wi(bt.vapidKey)}}}else if(3===X){const bt=kt;T={token:bt.fcmToken,createTime:bt.createTime,subscriptionOptions:{auth:wi(bt.auth),p256dh:wi(bt.p256dh),endpoint:bt.endpoint,swScope:bt.swScope,vapidKey:wi(bt.vapidKey)}}}else if(4===X){const bt=kt;T={token:bt.fcmToken,createTime:bt.createTime,subscriptionOptions:{auth:wi(bt.auth),p256dh:wi(bt.p256dh),endpoint:bt.endpoint,swScope:bt.swScope,vapidKey:wi(bt.vapidKey)}}}}),function(X,xe,rt,mt){return L.apply(this,arguments)})})).close(),yield(0,le.Lj)(Mr),yield(0,le.Lj)("fcm_vapid_details_db"),yield(0,le.Lj)("undefined"),fu(T)?T:null;var L}),hu.apply(this,arguments)}function fu(C){if(!C||!C.subscriptionOptions)return!1;const{subscriptionOptions:T}=C;return"number"==typeof C.createTime&&C.createTime>0&&"string"==typeof C.token&&C.token.length>0&&"string"==typeof T.auth&&T.auth.length>0&&"string"==typeof T.p256dh&&T.p256dh.length>0&&"string"==typeof T.endpoint&&T.endpoint.length>0&&"string"==typeof T.swScope&&T.swScope.length>0&&"string"==typeof T.vapidKey&&T.vapidKey.length>0}const as="firebase-messaging-store";let gl=null;function yn(){return gl||(gl=(0,le.X3)("firebase-messaging-database",1,{upgrade:(C,T)=>{0===T&&C.createObjectStore(as)}})),gl}function wa(C){return As.apply(this,arguments)}function As(){return(As=(0,N.Z)(function*(C){const T=fr(C),L=yield(yield yn()).transaction(as).objectStore(as).get(T);if(L)return L;{const J=yield $c(C.appConfig.senderId);if(J)return yield gn(C,J),J}})).apply(this,arguments)}function gn(C,T){return gu.apply(this,arguments)}function gu(){return(gu=(0,N.Z)(function*(C,T){const M=fr(C),J=(yield yn()).transaction(as,"readwrite");return yield J.objectStore(as).put(T,M),yield J.done,T})).apply(this,arguments)}function Ia(C){return Ys.apply(this,arguments)}function Ys(){return(Ys=(0,N.Z)(function*(C){const T=fr(C),L=(yield yn()).transaction(as,"readwrite");yield L.objectStore(as).delete(T),yield L.done})).apply(this,arguments)}function fr({appConfig:C}){return C.appId}const Ln=new ue.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function us(C,T){return pr.apply(this,arguments)}function pr(){return(pr=(0,N.Z)(function*(C,T){const M=yield Rs(C),L=ba(T),J={method:"POST",headers:M,body:JSON.stringify(L)};let X;try{X=yield(yield fetch(xs(C.appConfig),J)).json()}catch(xe){throw Ln.create("token-subscribe-failed",{errorInfo:xe})}if(X.error)throw Ln.create("token-subscribe-failed",{errorInfo:X.error.message});if(!X.token)throw Ln.create("token-subscribe-no-token");return X.token})).apply(this,arguments)}function Lo(C,T){return Bi.apply(this,arguments)}function Bi(){return(Bi=(0,N.Z)(function*(C,T){const M=yield Rs(C),L=ba(T.subscriptionOptions),J={method:"PATCH",headers:M,body:JSON.stringify(L)};let X;try{X=yield(yield fetch(`${xs(C.appConfig)}/${T.token}`,J)).json()}catch(xe){throw Ln.create("token-update-failed",{errorInfo:xe})}if(X.error)throw Ln.create("token-update-failed",{errorInfo:X.error.message});if(!X.token)throw Ln.create("token-update-no-token");return X.token})).apply(this,arguments)}function ml(C,T){return ei.apply(this,arguments)}function ei(){return(ei=(0,N.Z)(function*(C,T){const L={method:"DELETE",headers:yield Rs(C)};try{const X=yield(yield fetch(`${xs(C.appConfig)}/${T}`,L)).json();if(X.error)throw Ln.create("token-unsubscribe-failed",{errorInfo:X.error.message})}catch(J){throw Ln.create("token-unsubscribe-failed",{errorInfo:J})}})).apply(this,arguments)}function xs({projectId:C}){return`https://fcmregistrations.googleapis.com/v1/projects/${C}/registrations`}function Rs(C){return pt.apply(this,arguments)}function pt(){return(pt=(0,N.Z)(function*({appConfig:C,installations:T}){const M=yield T.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":C.apiKey,"x-goog-firebase-installations-auth":`FIS ${M}`})})).apply(this,arguments)}function ba({p256dh:C,auth:T,endpoint:M,vapidKey:L}){const J={web:{endpoint:M,auth:T,p256dh:C}};return L!==Fo&&(J.web.applicationPubKey=L),J}const Ca=6048e5;function Hc(C){return Ta.apply(this,arguments)}function Ta(){return(Ta=(0,N.Z)(function*(C){const T=yield Un(C.swRegistration,C.vapidKey),M={vapidKey:C.vapidKey,swScope:C.swRegistration.scope,endpoint:T.endpoint,auth:wi(T.getKey("auth")),p256dh:wi(T.getKey("p256dh"))},L=yield wa(C.firebaseDependencies);if(L){if(Aa(L.subscriptionOptions,M))return Date.now()>=L.createTime+Ca?Ch(C,{token:L.token,createTime:Date.now(),subscriptionOptions:M}):L.token;try{yield ml(C.firebaseDependencies,L.token)}catch(J){console.warn(J)}return Ht(C.firebaseDependencies,M)}return Ht(C.firebaseDependencies,M)})).apply(this,arguments)}function _l(C){return Da.apply(this,arguments)}function Da(){return(Da=(0,N.Z)(function*(C){const T=yield wa(C.firebaseDependencies);T&&(yield ml(C.firebaseDependencies,T.token),yield Ia(C.firebaseDependencies));const M=yield C.swRegistration.pushManager.getSubscription();return!M||M.unsubscribe()})).apply(this,arguments)}function Ch(C,T){return Me.apply(this,arguments)}function Me(){return(Me=(0,N.Z)(function*(C,T){try{const M=yield Lo(C.firebaseDependencies,T),L=Object.assign(Object.assign({},T),{token:M,createTime:Date.now()});return yield gn(C.firebaseDependencies,L),M}catch(M){throw yield _l(C),M}})).apply(this,arguments)}function Ht(C,T){return Sa.apply(this,arguments)}function Sa(){return(Sa=(0,N.Z)(function*(C,T){const L={token:yield us(C,T),createTime:Date.now(),subscriptionOptions:T};return yield gn(C,L),L.token})).apply(this,arguments)}function Un(C,T){return Ms.apply(this,arguments)}function Ms(){return(Ms=(0,N.Z)(function*(C,T){return(yield C.pushManager.getSubscription())||C.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Bc(T)})})).apply(this,arguments)}function Aa(C,T){return T.vapidKey===C.vapidKey&&T.endpoint===C.endpoint&&T.auth===C.auth&&T.p256dh===C.p256dh}function $r(C){const T={from:C.from,collapseKey:C.collapse_key,messageId:C.fcmMessageId};return function yl(C,T){if(!T.notification)return;C.notification={};const M=T.notification.title;M&&(C.notification.title=M);const L=T.notification.body;L&&(C.notification.body=L);const J=T.notification.image;J&&(C.notification.image=J)}(T,C),function vl(C,T){!T.data||(C.data=T.data)}(T,C),function Wc(C,T){if(!T.fcmOptions)return;C.fcmOptions={};const M=T.fcmOptions.link;M&&(C.fcmOptions.link=M);const L=T.fcmOptions.analytics_label;L&&(C.fcmOptions.analyticsLabel=L)}(T,C),T}function zc(C){return"object"==typeof C&&!!C&&Ea in C}function xa(C,T){const M=[];for(let L=0;L<C.length;L++)M.push(C.charAt(L)),L<T.length&&M.push(T.charAt(L));return M.join("")}function sr(C){return Ln.create("missing-app-config-values",{valueName:C})}xa("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),xa("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Ii{constructor(T,M,L){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const J=function Uo(C){if(!C||!C.options)throw sr("App Configuration Object");if(!C.name)throw sr("App Name");const T=["projectId","apiKey","appId","messagingSenderId"],{options:M}=C;for(const L of T)if(!M[L])throw sr(L);return{appName:C.name,projectId:M.projectId,apiKey:M.apiKey,appId:M.appId,senderId:M.messagingSenderId}}(T);this.firebaseDependencies={app:T,appConfig:J,installations:M,analyticsProvider:L}}_delete(){return Promise.resolve()}}function El(C){return ji.apply(this,arguments)}function ji(){return(ji=(0,N.Z)(function*(C){try{C.swRegistration=yield navigator.serviceWorker.register(Ss,{scope:hi}),C.swRegistration.update().catch(()=>{})}catch(T){throw Ln.create("failed-service-worker-registration",{browserErrorMessage:T.message})}})).apply(this,arguments)}function ls(C,T){return Ra.apply(this,arguments)}function Ra(){return(Ra=(0,N.Z)(function*(C,T){if(!T&&!C.swRegistration&&(yield El(C)),T||!C.swRegistration){if(!(T instanceof ServiceWorkerRegistration))throw Ln.create("invalid-sw-registration");C.swRegistration=T}})).apply(this,arguments)}function Gc(C,T){return Ma.apply(this,arguments)}function Ma(){return(Ma=(0,N.Z)(function*(C,T){T?C.vapidKey=T:C.vapidKey||(C.vapidKey=Fo)})).apply(this,arguments)}function Qs(){return(Qs=(0,N.Z)(function*(C,T){if(!navigator)throw Ln.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Ln.create("permission-blocked");return yield Gc(C,null==T?void 0:T.vapidKey),yield ls(C,null==T?void 0:T.serviceWorkerRegistration),Hc(C)})).apply(this,arguments)}function wl(C,T,M){return Na.apply(this,arguments)}function Na(){return(Na=(0,N.Z)(function*(C,T,M){const L=Il(T);(yield C.firebaseDependencies.analyticsProvider.get()).logEvent(L,{message_id:M[Ea],message_name:M[bh],message_time:M[Bp],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Il(C){switch(C){case os.NOTIFICATION_CLICKED:return"notification_open";case os.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function _u(){return(_u=(0,N.Z)(function*(C,T){const M=T.data;if(!M.isFirebaseMessaging)return;C.onMessageHandler&&M.messageType===os.PUSH_RECEIVED&&("function"==typeof C.onMessageHandler?C.onMessageHandler($r(M)):C.onMessageHandler.next($r(M)));const L=M.data;zc(L)&&"1"===L[Ks]&&(yield wl(C,M.messageType,L))})).apply(this,arguments)}const Js="@firebase/messaging",Xs=C=>{const T=new Ii(C.getProvider("app").getImmediate(),C.getProvider("installations-internal").getImmediate(),C.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",M=>function jp(C,T){return _u.apply(this,arguments)}(T,M)),T},Zc=C=>{const T=C.getProvider("messaging").getImmediate();return{getToken:L=>function qc(C,T){return Qs.apply(this,arguments)}(T,L)}};function Vo(){return $i.apply(this,arguments)}function $i(){return($i=(0,N.Z)(function*(){try{yield(0,ue.eu)()}catch(C){return!1}return"undefined"!=typeof window&&(0,ue.hl)()&&(0,ue.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Th(){(0,ae._registerComponent)(new ye.wA("messaging",Xs,"PUBLIC")),(0,ae._registerComponent)(new ye.wA("messaging-internal",Zc,"PRIVATE")),(0,ae.registerVersion)(Js,"0.9.13"),(0,ae.registerVersion)(Js,"0.9.13","esm2017")}();const Kc="analytics",$p="firebase_id",ka="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",yu="https://www.googletagmanager.com/gtag/js",mr=new pe.Yd("@firebase/analytics");function Ah(C){return Promise.all(C.map(T=>T.catch(M=>M)))}function eo(C,T){const M=document.createElement("script");M.src=`${yu}?l=${C}&id=${T}`,M.async=!0,document.head.appendChild(M)}function Yc(C,T,M,L,J,X){return Qc.apply(this,arguments)}function Qc(){return(Qc=(0,N.Z)(function*(C,T,M,L,J,X){const xe=L[J];try{if(xe)yield T[xe];else{const mt=(yield Ah(M)).find(Et=>Et.measurementId===J);mt&&(yield T[mt.appId])}}catch(rt){mr.error(rt)}C("config",J,X)})).apply(this,arguments)}function to(C,T,M,L,J){return Oa.apply(this,arguments)}function Oa(){return(Oa=(0,N.Z)(function*(C,T,M,L,J){try{let X=[];if(J&&J.send_to){let xe=J.send_to;Array.isArray(xe)||(xe=[xe]);const rt=yield Ah(M);for(const mt of xe){const Et=rt.find(bt=>bt.measurementId===mt),kt=Et&&T[Et.appId];if(!kt){X=[];break}X.push(kt)}}0===X.length&&(X=Object.values(T)),yield Promise.all(X),C("event",L,J||{})}catch(X){mr.error(X)}})).apply(this,arguments)}function Yn(){const C=window.document.getElementsByTagName("script");for(const T of Object.values(C))if(T.src&&T.src.includes(yu))return T;return null}const st=new ue.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Tl=new class bi{constructor(T={},M=1e3){this.throttleMetadata=T,this.intervalMillis=M}getThrottleMetadata(T){return this.throttleMetadata[T]}setThrottleMetadata(T,M){this.throttleMetadata[T]=M}deleteThrottleMetadata(T){delete this.throttleMetadata[T]}};function jo(C){return new Headers({Accept:"application/json","x-goog-api-key":C})}function $o(C){return Bn.apply(this,arguments)}function Bn(){return(Bn=(0,N.Z)(function*(C){var T;const{appId:M,apiKey:L}=C,J={method:"GET",headers:jo(L)},X=ka.replace("{app-id}",M),xe=yield fetch(X,J);if(200!==xe.status&&304!==xe.status){let rt="";try{const mt=yield xe.json();(null===(T=mt.error)||void 0===T?void 0:T.message)&&(rt=mt.error.message)}catch(mt){}throw st.create("config-fetch-failed",{httpStatus:xe.status,responseMessage:rt})}return xe.json()})).apply(this,arguments)}function Ho(C){return no.apply(this,arguments)}function no(){return(no=(0,N.Z)(function*(C,T=Tl,M){const{appId:L,apiKey:J,measurementId:X}=C.options;if(!L)throw st.create("no-app-id");if(!J){if(X)return{measurementId:X,appId:L};throw st.create("no-api-key")}const xe=T.getThrottleMetadata(L)||{backoffCount:0,throttleEndTimeMillis:Date.now()},rt=new ed;return setTimeout((0,N.Z)(function*(){rt.abort()}),void 0!==M?M:6e4),hs({appId:L,apiKey:J,measurementId:X},xe,rt,T)})).apply(this,arguments)}function hs(C,T,M){return Rt.apply(this,arguments)}function Rt(){return(Rt=(0,N.Z)(function*(C,{throttleEndTimeMillis:T,backoffCount:M},L,J=Tl){const{appId:X,measurementId:xe}=C;try{yield Jc(L,T)}catch(rt){if(xe)return mr.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${xe} provided in the "measurementId" field in the local Firebase config. [${rt.message}]`),{appId:X,measurementId:xe};throw rt}try{const rt=yield $o(C);return J.deleteThrottleMetadata(X),rt}catch(rt){if(!Xc(rt)){if(J.deleteThrottleMetadata(X),xe)return mr.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${xe} provided in the "measurementId" field in the local Firebase config. [${rt.message}]`),{appId:X,measurementId:xe};throw rt}const mt=503===Number(rt.customData.httpStatus)?(0,ue.$s)(M,J.intervalMillis,30):(0,ue.$s)(M,J.intervalMillis),Et={throttleEndTimeMillis:Date.now()+mt,backoffCount:M+1};return J.setThrottleMetadata(X,Et),mr.debug(`Calling attemptFetch again in ${mt} millis`),hs(C,Et,L,J)}})).apply(this,arguments)}function Jc(C,T){return new Promise((M,L)=>{const J=Math.max(T-Date.now(),0),X=setTimeout(M,J);C.addEventListener(()=>{clearTimeout(X),L(st.create("fetch-throttle",{throttleEndTimeMillis:T}))})})}function Xc(C){if(!(C instanceof ue.ZR&&C.customData))return!1;const T=Number(C.customData.httpStatus);return 429===T||500===T||503===T||504===T}class ed{constructor(){this.listeners=[]}addEventListener(T){this.listeners.push(T)}abort(){this.listeners.forEach(T=>T())}}function Rh(){return xn.apply(this,arguments)}function xn(){return(xn=(0,N.Z)(function*(){if(!(0,ue.hl)())return mr.warn(st.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,ue.eu)()}catch(C){return mr.warn(st.create("indexeddb-unavailable",{errorInfo:C}).message),!1}return!0})).apply(this,arguments)}function fs(){return(fs=(0,N.Z)(function*(C,T,M,L,J,X,xe){var rt;const mt=Ho(C);mt.then(Nn=>{M[Nn.measurementId]=Nn.appId,C.options.measurementId&&Nn.measurementId!==C.options.measurementId&&mr.warn(`The measurement ID in the local Firebase config (${C.options.measurementId}) does not match the measurement ID fetched from the server (${Nn.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Nn=>mr.error(Nn)),T.push(mt);const Et=Rh().then(Nn=>{if(Nn)return L.getId()}),[kt,bt]=yield Promise.all([mt,Et]);Yn()||eo(X,kt.measurementId),J("js",new Date);const Wr=null!==(rt=null==xe?void 0:xe.config)&&void 0!==rt?rt:{};return Wr.origin="firebase",Wr.update=!0,null!=bt&&(Wr[$p]=bt),J("config",kt.measurementId,Wr),kt.measurementId})).apply(this,arguments)}class ro{constructor(T){this.app=T}_delete(){return delete ti[this.app.options.appId],Promise.resolve()}}let ti={},Wo=[];const io={};let Ps,Go,so="dataLayer",Fa=!1;function oo(C,T,M){!function Ua(){const C=[];if((0,ue.ru)()&&C.push("This is a browser extension environment."),(0,ue.zI)()||C.push("Cookies are not available."),C.length>0){const T=C.map((L,J)=>`(${J+1}) ${L}`).join(" "),M=st.create("invalid-analytics-context",{errorInfo:T});mr.warn(M.message)}}();const L=C.options.appId;if(!L)throw st.create("no-app-id");if(!C.options.apiKey){if(!C.options.measurementId)throw st.create("no-api-key");mr.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${C.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=ti[L])throw st.create("already-exists",{id:L});if(!Fa){!function Bo(C){let T=[];Array.isArray(window[C])?T=window[C]:window[C]=T}(so);const{wrappedGtag:X,gtagCore:xe}=function Hp(C,T,M,L,J){let X=function(...xe){window[L].push(arguments)};return window[J]&&"function"==typeof window[J]&&(X=window[J]),window[J]=function xh(C,T,M,L){function X(){return(X=(0,N.Z)(function*(xe,rt,mt){try{"event"===xe?yield to(C,T,M,rt,mt):"config"===xe?yield Yc(C,T,M,L,rt,mt):C("set",rt)}catch(Et){mr.error(Et)}})).apply(this,arguments)}return function J(xe,rt,mt){return X.apply(this,arguments)}}(X,C,T,M),{gtagCore:X,wrappedGtag:window[J]}}(ti,Wo,io,so,"gtag");Go=X,Ps=xe,Fa=!0}return ti[L]=function vu(C,T,M,L,J,X,xe){return fs.apply(this,arguments)}(C,Wo,io,T,Ps,so,M),new ro(C)}function Cr(){return(Cr=(0,N.Z)(function*(C,T,M,L,J){if(J&&J.global)C("event",M,L);else{const X=yield T;C("event",M,Object.assign(Object.assign({},L),{send_to:X}))}})).apply(this,arguments)}function Eu(){return uo.apply(this,arguments)}function uo(){return(uo=(0,N.Z)(function*(){if((0,ue.ru)()||!(0,ue.zI)()||!(0,ue.hl)())return!1;try{return yield(0,ue.eu)()}catch(C){return!1}})).apply(this,arguments)}const Hr="@firebase/analytics";!function Fs(){(0,ae._registerComponent)(new ye.wA(Kc,(T,{options:M})=>oo(T.getProvider("app").getImmediate(),T.getProvider("installations-internal").getImmediate(),M),"PUBLIC")),(0,ae._registerComponent)(new ye.wA("analytics-internal",function C(T){try{const M=T.getProvider(Kc).getImmediate();return{logEvent:(L,J,X)=>function qo(C,T,M,L){C=(0,ue.m9)(C),function Dl(C,T,M,L,J){return Cr.apply(this,arguments)}(Go,ti[C.app.options.appId],T,M,L).catch(J=>mr.error(J))}(M,L,J,X)}}catch(M){throw st.create("interop-component-reg-failed",{reason:M})}},"PRIVATE")),(0,ae.registerVersion)(Hr,"0.7.9"),(0,ae.registerVersion)(Hr,"0.7.9","esm2017")}();var lo=k(4408),Qn=k(7565);const ja=new class Ba extends Qn.v{}(class Zo extends lo.o{constructor(T,M){super(T,M),this.scheduler=T,this.work=M}schedule(T,M=0){return M>0?super.schedule(T,M):(this.delay=M,this.state=T,this.scheduler.flush(this),this)}execute(T,M){return M>0||this.closed?super.execute(T,M):this._execute(T,M)}requestAsyncId(T,M,L=0){return null!=L&&L>0||null==L&&this.delay>0?super.requestAsyncId(T,M,L):T.flush(this)}});var Ph=k(4986),Or=k(8306),ni=k(8505),Ko=k(9468),Yo=k(5363);const co=new g.GfV("7.3.0"),wu="__angularfire_symbol__analyticsIsSupportedValue",gs="__angularfire_symbol__analyticsIsSupported",$a="__angularfire_symbol__remoteConfigIsSupportedValue",Sl="__angularfire_symbol__remoteConfigIsSupported",Pt="__angularfire_symbol__messagingIsSupportedValue",Iu="__angularfire_symbol__messagingIsSupported";function Cu(C,T,M){if(T){if(1===T.length)return T[0];const X=T.filter(xe=>xe.app===M);if(1===X.length)return X[0]}return M.container.getProvider(C).getImmediate({optional:!0})}globalThis[gs]||(globalThis[gs]=Eu().then(C=>globalThis[wu]=C).catch(()=>globalThis[wu]=!1)),globalThis[Iu]||(globalThis[Iu]=Vo().then(C=>globalThis[Pt]=C).catch(()=>globalThis[Pt]=!1)),globalThis[Sl]||(globalThis[Sl]=r_().then(C=>globalThis[$a]=C).catch(()=>globalThis[$a]=!1));const kh=(C,T)=>{const M=T?[T]:(0,U.C6)(),L=[];return M.forEach(J=>{J.container.getProvider(C).instances.forEach(xe=>{L.includes(xe)||L.push(xe)})}),L};function yr(){}class Al{constructor(T,M=ja){this.zone=T,this.delegate=M}now(){return this.delegate.now()}schedule(T,M,L){const J=this.zone;return this.delegate.schedule(function(xe){J.runGuarded(()=>{T.apply(this,[xe])})},M,L)}}class Tu{constructor(T){this.zone=T,this.task=null}call(T,M){const L=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",yr,{},yr,yr)),M.pipe((0,ni.b)({next:L,complete:L,error:L})).subscribe(T).add(L)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Du=(()=>{class C{constructor(M){this.ngZone=M,this.outsideAngular=M.runOutsideAngular(()=>new Al(Zone.current)),this.insideAngular=M.run(()=>new Al(Zone.current,Ph.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return C.\u0275fac=function(M){return new(M||C)(g.LFG(g.R0b))},C.\u0275prov=g.Yz7({token:C,factory:C.\u0275fac,providedIn:"root"}),C})();function fo(){const C=globalThis.\u0275AngularFireScheduler;if(!C)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return C}function Sn(C){return fo().ngZone.runOutsideAngular(()=>C())}function rr(C){return fo().ngZone.run(()=>C())}function po(C){return fo(),function go(C){return function(M){return(M=M.lift(new Tu(C.ngZone))).pipe((0,Ko.R)(C.outsideAngular),(0,Yo.Q)(C.insideAngular))}}(fo())(C)}const Oh=(C,T)=>function(){const L=arguments;return T&&setTimeout(()=>{"scheduled"===T.state&&T.invoke()},10),rr(()=>C.apply(void 0,L))},xl=(C,T)=>function(){let M;const L=arguments;for(let X=0;X<arguments.length;X++)"function"==typeof L[X]&&(T&&(M||(M=rr(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",yr,{},yr,yr)))),L[X]=Oh(L[X],M));const J=Sn(()=>C.apply(this,L));if(!T){if(J instanceof Or.y){const X=fo();return J.pipe((0,Ko.R)(X.outsideAngular),(0,Yo.Q)(X.insideAngular))}return rr(()=>J)}return J instanceof Or.y?J.pipe(po):J instanceof Promise?rr(()=>new Promise((X,xe)=>J.then(rt=>rr(()=>X(rt)),rt=>rr(()=>xe(rt))))):"function"==typeof J&&M?function(){return setTimeout(()=>{M&&"scheduled"===M.state&&M.invoke()},10),J.apply(this,arguments)}:rr(()=>J)}},198:(nt,De,k)=>{k.d(De,{$:()=>xs,A:()=>j,B:()=>Ne,G:()=>_n,H:()=>un,J:()=>is,L:()=>an,M:()=>ya,N:()=>va,P:()=>wu,Q:()=>Ea,R:()=>Fs,T:()=>bh,U:()=>Fo,V:()=>os,W:()=>wi,X:()=>$c,Y:()=>mu,Z:()=>us,_:()=>Lo,a:()=>Pr,a0:()=>Hc,a1:()=>_l,a2:()=>Ch,a3:()=>Ht,a4:()=>Un,a5:()=>Aa,a6:()=>yl,a7:()=>vl,a8:()=>zc,a9:()=>xa,aA:()=>_s,aB:()=>Nn,aC:()=>xl,aD:()=>Oh,aE:()=>je,aI:()=>jo,aL:()=>Ks,aa:()=>El,ab:()=>ls,ac:()=>Gc,af:()=>wl,ag:()=>Il,ah:()=>jp,ak:()=>as,al:()=>gr,an:()=>yu,ao:()=>Qc,ap:()=>Zn,aq:()=>Ce,ar:()=>Lt,as:()=>lt,at:()=>We,au:()=>Ls,av:()=>Fh,aw:()=>Pe,ax:()=>ne,ay:()=>re,az:()=>vt,b:()=>st,c:()=>o_,d:()=>Al,e:()=>kh,f:()=>M,g:()=>mt,h:()=>X,i:()=>oo,j:()=>bt,k:()=>Kp,l:()=>ja,m:()=>Qp,n:()=>Z0,o:()=>le,r:()=>Ph,s:()=>Qn,u:()=>Yo});var g=k(5861),U=k(2090),N=k(9681),ae=k(655),ue=k(1877),ye=k(4859);const le={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},j={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const Ne=function se(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Ue=function Ge(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},He=new U.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Se=new ue.Yd("@firebase/auth");function ze(v,...p){Se.logLevel<=ue.in.ERROR&&Se.error(`Auth (${N.SDK_VERSION}): ${v}`,...p)}function We(v,...p){throw qe(v,...p)}function Pe(v,...p){return qe(v,...p)}function ke(v,p,m){const I=Object.assign(Object.assign({},Ue()),{[p]:m});return new U.LL("auth","Firebase",I).create(p,{appName:v.name})}function be(v,p,m){if(!(p instanceof m))throw m.name!==p.constructor.name&&We(v,"argument-error"),ke(v,"argument-error",`Type of ${p.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function qe(v,...p){if("string"!=typeof v){const m=p[0],I=[...p.slice(1)];return I[0]&&(I[0].appName=v.name),v._errorFactory.create(m,...I)}return He.create(v,...p)}function ne(v,p,...m){if(!v)throw qe(p,...m)}function fe(v){const p="INTERNAL ASSERTION FAILED: "+v;throw ze(p),new Error(p)}function Ce(v,p){v||fe(p)}const K=new Map;function re(v){Ce(v instanceof Function,"Expected a class definition");let p=K.get(v);return p?(Ce(p instanceof v,"Instance stored in cache mismatched with class"),p):(p=new v,K.set(v,p),p)}function de(){var v;return"undefined"!=typeof self&&(null===(v=self.location)||void 0===v?void 0:v.href)||""}function Ve(){return"http:"===dt()||"https:"===dt()}function dt(){var v;return"undefined"!=typeof self&&(null===(v=self.location)||void 0===v?void 0:v.protocol)||null}class Ye{constructor(p,m){this.shortDelay=p,this.longDelay=m,Ce(m>p,"Short delay should be less than long delay!"),this.isMobile=(0,U.uI)()||(0,U.b$)()}get(){return function Kt(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Ve()||(0,U.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function dn(v,p){Ce(v.emulator,"Emulator should always be set here");const{url:m}=v.emulator;return p?`${m}${p.startsWith("/")?p.slice(1):p}`:m}class kn{static initialize(p,m,I){this.fetchImpl=p,m&&(this.headersImpl=m),I&&(this.responseImpl=I)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void fe("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void fe("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void fe("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const hn={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},en=new Ye(3e4,6e4);function Bt(v,p){return v.tenantId&&!p.tenantId?Object.assign(Object.assign({},p),{tenantId:v.tenantId}):p}function Yt(v,p,m,I){return In.apply(this,arguments)}function In(){return(In=(0,g.Z)(function*(v,p,m,I,x={}){return yi(v,x,(0,g.Z)(function*(){let O={},ie={};I&&("GET"===p?ie=I:O={body:JSON.stringify(I)});const Oe=(0,U.xO)(Object.assign({key:v.config.apiKey},ie)).slice(1),et=yield v._getAdditionalHeaders();return et["Content-Type"]="application/json",v.languageCode&&(et["X-Firebase-Locale"]=v.languageCode),kn.fetch()(ai(v,v.config.apiHost,m,Oe),Object.assign({method:p,headers:et,referrerPolicy:"no-referrer"},O))}))})).apply(this,arguments)}function yi(v,p,m){return Ar.apply(this,arguments)}function Ar(){return(Ar=(0,g.Z)(function*(v,p,m){v._canInitEmulator=!1;const I=Object.assign(Object.assign({},hn),p);try{const x=new vi(v),O=yield Promise.race([m(),x.promise]);x.clearNetworkTimeout();const ie=yield O.json();if("needConfirmation"in ie)throw qn(v,"account-exists-with-different-credential",ie);if(O.ok&&!("errorMessage"in ie))return ie;{const Oe=O.ok?ie.errorMessage:ie.error.message,[et,gt]=Oe.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===et)throw qn(v,"credential-already-in-use",ie);if("EMAIL_EXISTS"===et)throw qn(v,"email-already-in-use",ie);const Ct=I[et]||et.toLowerCase().replace(/[_\s]+/g,"-");if(gt)throw ke(v,Ct,gt);We(v,Ct)}}catch(x){if(x instanceof U.ZR)throw x;We(v,"network-request-failed")}})).apply(this,arguments)}function Dn(v,p,m,I){return Fi.apply(this,arguments)}function Fi(){return(Fi=(0,g.Z)(function*(v,p,m,I,x={}){const O=yield Yt(v,p,m,I,x);return"mfaPendingCredential"in O&&We(v,"multi-factor-auth-required",{_serverResponse:O}),O})).apply(this,arguments)}function ai(v,p,m,I){const x=`${p}${m}?${I}`;return v.config.emulator?dn(v.config,x):`${v.config.apiScheme}://${x}`}class vi{constructor(p){this.auth=p,this.timer=null,this.promise=new Promise((m,I)=>{this.timer=setTimeout(()=>I(Pe(this.auth,"network-request-failed")),en.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function qn(v,p,m){const I={appName:v.name};m.email&&(I.email=m.email),m.phoneNumber&&(I.phoneNumber=m.phoneNumber);const x=Pe(v,p,I);return x.customData._tokenResponse=m,x}function ft(){return(ft=(0,g.Z)(function*(v,p){return Yt(v,"POST","/v1/accounts:delete",p)})).apply(this,arguments)}function Vr(v,p){return En.apply(this,arguments)}function En(){return(En=(0,g.Z)(function*(v,p){return Yt(v,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function tn(v,p){return xr.apply(this,arguments)}function xr(){return(xr=(0,g.Z)(function*(v,p){return Yt(v,"POST","/v1/accounts:lookup",p)})).apply(this,arguments)}function ir(v){if(v)try{const p=new Date(Number(v));if(!isNaN(p.getTime()))return p.toUTCString()}catch(p){}}function cr(){return(cr=(0,g.Z)(function*(v,p=!1){const m=(0,U.m9)(v),I=yield m.getIdToken(p),x=jt(I);ne(x&&x.exp&&x.auth_time&&x.iat,m.auth,"internal-error");const O="object"==typeof x.firebase?x.firebase:void 0,ie=null==O?void 0:O.sign_in_provider;return{claims:x,token:I,authTime:ir(ts(x.auth_time)),issuedAtTime:ir(ts(x.iat)),expirationTime:ir(ts(x.exp)),signInProvider:ie||null,signInSecondFactor:(null==O?void 0:O.sign_in_second_factor)||null}})).apply(this,arguments)}function ts(v){return 1e3*Number(v)}function jt(v){const[p,m,I]=v.split(".");if(void 0===p||void 0===m||void 0===I)return ze("JWT malformed, contained fewer than 3 sections"),null;try{const x=(0,U.tV)(m);return x?JSON.parse(x):(ze("Failed to decode base64 JWT payload"),null)}catch(x){return ze("Caught error parsing JWT payload as JSON",x),null}}function it(v,p){return ui.apply(this,arguments)}function ui(){return(ui=(0,g.Z)(function*(v,p,m=!1){if(m)return p;try{return yield p}catch(I){throw I instanceof U.ZR&&li(I)&&v.auth.currentUser===v&&(yield v.auth.signOut()),I}})).apply(this,arguments)}function li({code:v}){return"auth/user-disabled"===v||"auth/user-token-expired"===v}class $t{constructor(p){this.user=p,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(p){var m;if(p){const I=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),I}{this.errorBackoff=3e4;const x=(null!==(m=this.user.stsTokenManager.expirationTime)&&void 0!==m?m:0)-Date.now()-3e5;return Math.max(0,x)}}schedule(p=!1){var m=this;if(!this.isRunning)return;const I=this.getInterval(p);this.timerId=setTimeout((0,g.Z)(function*(){yield m.iteration()}),I)}iteration(){var p=this;return(0,g.Z)(function*(){try{yield p.user.getIdToken(!0)}catch(m){return void("auth/network-request-failed"===m.code&&p.schedule(!0))}p.schedule()})()}}class Ui{constructor(p,m){this.createdAt=p,this.lastLoginAt=m,this._initializeTime()}_initializeTime(){this.lastSignInTime=ir(this.lastLoginAt),this.creationTime=ir(this.createdAt)}_copy(p){this.createdAt=p.createdAt,this.lastLoginAt=p.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function On(v){return fn.apply(this,arguments)}function fn(){return(fn=(0,g.Z)(function*(v){var p;const m=v.auth,I=yield v.getIdToken(),x=yield it(v,tn(m,{idToken:I}));ne(null==x?void 0:x.users.length,m,"internal-error");const O=x.users[0];v._notifyReloadListener(O);const ie=(null===(p=O.providerUserInfo)||void 0===p?void 0:p.length)?Ie(O.providerUserInfo):[],Oe=q(v.providerData,ie),Ct=!!v.isAnonymous&&!(v.email&&O.passwordHash||(null==Oe?void 0:Oe.length)),Cn={uid:O.localId,displayName:O.displayName||null,photoURL:O.photoUrl||null,email:O.email||null,emailVerified:O.emailVerified||!1,phoneNumber:O.phoneNumber||null,tenantId:O.tenantId||null,providerData:Oe,metadata:new Ui(O.createdAt,O.lastLoginAt),isAnonymous:Ct};Object.assign(v,Cn)})).apply(this,arguments)}function z(){return(z=(0,g.Z)(function*(v){const p=(0,U.m9)(v);yield On(p),yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)})).apply(this,arguments)}function q(v,p){return[...v.filter(I=>!p.some(x=>x.providerId===I.providerId)),...p]}function Ie(v){return v.map(p=>{var{providerId:m}=p,I=(0,ae._T)(p,["providerId"]);return{providerId:m,uid:I.rawId||"",displayName:I.displayName||null,email:I.email||null,phoneNumber:I.phoneNumber||null,photoURL:I.photoUrl||null}})}function ee(){return(ee=(0,g.Z)(function*(v,p){const m=yield yi(v,{},(0,g.Z)(function*(){const I=(0,U.xO)({grant_type:"refresh_token",refresh_token:p}).slice(1),{tokenApiHost:x,apiKey:O}=v.config,ie=ai(v,x,"/v1/token",`key=${O}`),Oe=yield v._getAdditionalHeaders();return Oe["Content-Type"]="application/x-www-form-urlencoded",kn.fetch()(ie,{method:"POST",headers:Oe,body:I})}));return{accessToken:m.access_token,expiresIn:m.expires_in,refreshToken:m.refresh_token}})).apply(this,arguments)}class Fe{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(p){ne(p.idToken,"internal-error"),ne(void 0!==p.idToken,"internal-error"),ne(void 0!==p.refreshToken,"internal-error");const m="expiresIn"in p&&void 0!==p.expiresIn?Number(p.expiresIn):function ct(v){const p=jt(v);return ne(p,"internal-error"),ne(void 0!==p.exp,"internal-error"),ne(void 0!==p.iat,"internal-error"),Number(p.exp)-Number(p.iat)}(p.idToken);this.updateTokensAndExpiration(p.idToken,p.refreshToken,m)}getToken(p,m=!1){var I=this;return(0,g.Z)(function*(){return ne(!I.accessToken||I.refreshToken,p,"user-token-expired"),m||!I.accessToken||I.isExpired?I.refreshToken?(yield I.refresh(p,I.refreshToken),I.accessToken):null:I.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(p,m){var I=this;return(0,g.Z)(function*(){const{accessToken:x,refreshToken:O,expiresIn:ie}=yield function $(v,p){return ee.apply(this,arguments)}(p,m);I.updateTokensAndExpiration(x,O,Number(ie))})()}updateTokensAndExpiration(p,m,I){this.refreshToken=m||null,this.accessToken=p||null,this.expirationTime=Date.now()+1e3*I}static fromJSON(p,m){const{refreshToken:I,accessToken:x,expirationTime:O}=m,ie=new Fe;return I&&(ne("string"==typeof I,"internal-error",{appName:p}),ie.refreshToken=I),x&&(ne("string"==typeof x,"internal-error",{appName:p}),ie.accessToken=x),O&&(ne("number"==typeof O,"internal-error",{appName:p}),ie.expirationTime=O),ie}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(p){this.accessToken=p.accessToken,this.refreshToken=p.refreshToken,this.expirationTime=p.expirationTime}_clone(){return Object.assign(new Fe,this.toJSON())}_performRefresh(){return fe("not implemented")}}function Xe(v,p){ne("string"==typeof v||void 0===v,"internal-error",{appName:p})}class ht{constructor(p){var{uid:m,auth:I,stsTokenManager:x}=p,O=(0,ae._T)(p,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new $t(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=m,this.auth=I,this.stsTokenManager=x,this.accessToken=x.accessToken,this.displayName=O.displayName||null,this.email=O.email||null,this.emailVerified=O.emailVerified||!1,this.phoneNumber=O.phoneNumber||null,this.photoURL=O.photoURL||null,this.isAnonymous=O.isAnonymous||!1,this.tenantId=O.tenantId||null,this.providerData=O.providerData?[...O.providerData]:[],this.metadata=new Ui(O.createdAt||void 0,O.lastLoginAt||void 0)}getIdToken(p){var m=this;return(0,g.Z)(function*(){const I=yield it(m,m.stsTokenManager.getToken(m.auth,p));return ne(I,m.auth,"internal-error"),m.accessToken!==I&&(m.accessToken=I,yield m.auth._persistUserIfCurrent(m),m.auth._notifyListenersIfCurrent(m)),I})()}getIdTokenResult(p){return function bn(v){return cr.apply(this,arguments)}(this,p)}reload(){return function V(v){return z.apply(this,arguments)}(this)}_assign(p){this!==p&&(ne(this.uid===p.uid,this.auth,"internal-error"),this.displayName=p.displayName,this.photoURL=p.photoURL,this.email=p.email,this.emailVerified=p.emailVerified,this.phoneNumber=p.phoneNumber,this.isAnonymous=p.isAnonymous,this.tenantId=p.tenantId,this.providerData=p.providerData.map(m=>Object.assign({},m)),this.metadata._copy(p.metadata),this.stsTokenManager._assign(p.stsTokenManager))}_clone(p){return new ht(Object.assign(Object.assign({},this),{auth:p,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(p){ne(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=p,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(p){this.reloadListener?this.reloadListener(p):this.reloadUserInfo=p}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(p,m=!1){var I=this;return(0,g.Z)(function*(){let x=!1;p.idToken&&p.idToken!==I.stsTokenManager.accessToken&&(I.stsTokenManager.updateFromServerResponse(p),x=!0),m&&(yield On(I)),yield I.auth._persistUserIfCurrent(I),x&&I.auth._notifyListenersIfCurrent(I)})()}delete(){var p=this;return(0,g.Z)(function*(){const m=yield p.getIdToken();return yield it(p,function Li(v,p){return ft.apply(this,arguments)}(p.auth,{idToken:m})),p.stsTokenManager.clearRefreshToken(),p.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(p=>Object.assign({},p)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(p,m){var I,x,O,ie,Oe,et,gt,Ct;const Cn=null!==(I=m.displayName)&&void 0!==I?I:void 0,zi=null!==(x=m.email)&&void 0!==x?x:void 0,Us=null!==(O=m.phoneNumber)&&void 0!==O?O:void 0,Hh=null!==(ie=m.photoURL)&&void 0!==ie?ie:void 0,kl=null!==(Oe=m.tenantId)&&void 0!==Oe?Oe:void 0,Xo=null!==(et=m._redirectEventId)&&void 0!==et?et:void 0,eg=null!==(gt=m.createdAt)&&void 0!==gt?gt:void 0,Mu=null!==(Ct=m.lastLoginAt)&&void 0!==Ct?Ct:void 0,{uid:Ol,emailVerified:tg,isAnonymous:od,providerData:za,stsTokenManager:ng}=m;ne(Ol&&ng,p,"internal-error");const Wh=Fe.fromJSON(this.name,ng);ne("string"==typeof Ol,p,"internal-error"),Xe(Cn,p.name),Xe(zi,p.name),ne("boolean"==typeof tg,p,"internal-error"),ne("boolean"==typeof od,p,"internal-error"),Xe(Us,p.name),Xe(Hh,p.name),Xe(kl,p.name),Xe(Xo,p.name),Xe(eg,p.name),Xe(Mu,p.name);const Fl=new ht({uid:Ol,auth:p,email:zi,emailVerified:tg,displayName:Cn,isAnonymous:od,photoURL:Hh,phoneNumber:Us,tenantId:kl,stsTokenManager:Wh,createdAt:eg,lastLoginAt:Mu});return za&&Array.isArray(za)&&(Fl.providerData=za.map(ln=>Object.assign({},ln))),Xo&&(Fl._redirectEventId=Xo),Fl}static _fromIdTokenResponse(p,m,I=!1){return(0,g.Z)(function*(){const x=new Fe;x.updateFromServerResponse(m);const O=new ht({uid:m.localId,auth:p,stsTokenManager:x,isAnonymous:I});return yield On(O),O})()}}const an=(()=>{class v{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,g.Z)(function*(){return!0})()}_set(m,I){var x=this;return(0,g.Z)(function*(){x.storage[m]=I})()}_get(m){var I=this;return(0,g.Z)(function*(){const x=I.storage[m];return void 0===x?null:x})()}_remove(m){var I=this;return(0,g.Z)(function*(){delete I.storage[m]})()}_addListener(m,I){}_removeListener(m,I){}}return v.type="NONE",v})();function vt(v,p,m){return`firebase:${v}:${p}:${m}`}class er{constructor(p,m,I){this.persistence=p,this.auth=m,this.userKey=I;const{config:x,name:O}=this.auth;this.fullUserKey=vt(this.userKey,x.apiKey,O),this.fullPersistenceKey=vt("persistence",x.apiKey,O),this.boundEventHandler=m._onStorageEvent.bind(m),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(p){return this.persistence._set(this.fullUserKey,p.toJSON())}getCurrentUser(){var p=this;return(0,g.Z)(function*(){const m=yield p.persistence._get(p.fullUserKey);return m?ht._fromJSON(p.auth,m):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(p){var m=this;return(0,g.Z)(function*(){if(m.persistence===p)return;const I=yield m.getCurrentUser();return yield m.removeCurrentUser(),m.persistence=p,I?m.setCurrentUser(I):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(p,m,I="authUser"){return(0,g.Z)(function*(){if(!m.length)return new er(re(an),p,I);const x=(yield Promise.all(m.map(function(){var gt=(0,g.Z)(function*(Ct){if(yield Ct._isAvailable())return Ct});return function(Ct){return gt.apply(this,arguments)}}()))).filter(gt=>gt);let O=x[0]||re(an);const ie=vt(I,p.config.apiKey,p.name);let Oe=null;for(const gt of m)try{const Ct=yield gt._get(ie);if(Ct){const Cn=ht._fromJSON(p,Ct);gt!==O&&(Oe=Cn),O=gt;break}}catch(Ct){}const et=x.filter(gt=>gt._shouldAllowMigration);return O._shouldAllowMigration&&et.length?(O=et[0],Oe&&(yield O._set(ie,Oe.toJSON())),yield Promise.all(m.map(function(){var gt=(0,g.Z)(function*(Ct){if(Ct!==O)try{yield Ct._remove(ie)}catch(Cn){}});return function(Ct){return gt.apply(this,arguments)}}())),new er(O,p,I)):new er(O,p,I)})()}}function ce(v){const p=v.toLowerCase();if(p.includes("opera/")||p.includes("opr/")||p.includes("opios/"))return"Opera";if(Ke(p))return"IEMobile";if(p.includes("msie")||p.includes("trident/"))return"IE";if(p.includes("edge/"))return"Edge";if(Z(p))return"Firefox";if(p.includes("silk/"))return"Silk";if(Dt(p))return"Blackberry";if(Gt(p))return"Webos";if(G(p))return"Safari";if((p.includes("chrome/")||Ae(p))&&!p.includes("edge/"))return"Chrome";if(lt(p))return"Android";{const I=v.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==I?void 0:I.length))return I[1]}return"Other"}function Z(v=(0,U.z$)()){return/firefox\//i.test(v)}function G(v=(0,U.z$)()){const p=v.toLowerCase();return p.includes("safari/")&&!p.includes("chrome/")&&!p.includes("crios/")&&!p.includes("android")}function Ae(v=(0,U.z$)()){return/crios\//i.test(v)}function Ke(v=(0,U.z$)()){return/iemobile/i.test(v)}function lt(v=(0,U.z$)()){return/android/i.test(v)}function Dt(v=(0,U.z$)()){return/blackberry/i.test(v)}function Gt(v=(0,U.z$)()){return/webos/i.test(v)}function Lt(v=(0,U.z$)()){return/iphone|ipad|ipod/i.test(v)}function Zn(v=(0,U.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(v)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(v)}function Rr(v=(0,U.z$)()){return Lt(v)||lt(v)||Gt(v)||Dt(v)||/windows phone/i.test(v)||Ke(v)}function dr(v,p=[]){let m;switch(v){case"Browser":m=ce((0,U.z$)());break;case"Worker":m=`${ce((0,U.z$)())}-${v}`;break;default:m=v}const I=p.length?p.join(","):"FirebaseCore-web";return`${m}/JsCore/${N.SDK_VERSION}/${I}`}class ma{constructor(p){this.auth=p,this.queue=[]}pushCallback(p,m){const I=O=>new Promise((ie,Oe)=>{try{ie(p(O))}catch(et){Oe(et)}});I.onAbort=m,this.queue.push(I);const x=this.queue.length-1;return()=>{this.queue[x]=()=>Promise.resolve()}}runMiddleware(p){var m=this;return(0,g.Z)(function*(){if(m.auth.currentUser===p)return;const I=[];try{for(const x of m.queue)yield x(p),x.onAbort&&I.push(x.onAbort)}catch(x){I.reverse();for(const O of I)try{O()}catch(ie){}throw m.auth._errorFactory.create("login-blocked",{originalMessage:x.message})}})()}}class Xr{constructor(p,m,I){this.app=p,this.heartbeatServiceProvider=m,this.config=I,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Nt(this),this.idTokenSubscription=new Nt(this),this.beforeStateQueue=new ma(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=He,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=p.name,this.clientVersion=I.sdkClientVersion}_initializeWithPersistence(p,m){var I=this;return m&&(this._popupRedirectResolver=re(m)),this._initializationPromise=this.queue((0,g.Z)(function*(){var x,O;if(!I._deleted&&(I.persistenceManager=yield er.create(I,p),!I._deleted)){if(null===(x=I._popupRedirectResolver)||void 0===x?void 0:x._shouldInitProactively)try{yield I._popupRedirectResolver._initialize(I)}catch(ie){}yield I.initializeCurrentUser(m),I.lastNotifiedUid=(null===(O=I.currentUser)||void 0===O?void 0:O.uid)||null,!I._deleted&&(I._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var p=this;return(0,g.Z)(function*(){if(p._deleted)return;const m=yield p.assertedPersistence.getCurrentUser();if(p.currentUser||m){if(p.currentUser&&m&&p.currentUser.uid===m.uid)return p._currentUser._assign(m),void(yield p.currentUser.getIdToken());yield p._updateCurrentUser(m,!0)}})()}initializeCurrentUser(p){var m=this;return(0,g.Z)(function*(){var I;const x=yield m.assertedPersistence.getCurrentUser();let O=x,ie=!1;if(p&&m.config.authDomain){yield m.getOrInitRedirectPersistenceManager();const Oe=null===(I=m.redirectUser)||void 0===I?void 0:I._redirectEventId,et=null==O?void 0:O._redirectEventId,gt=yield m.tryRedirectSignIn(p);(!Oe||Oe===et)&&(null==gt?void 0:gt.user)&&(O=gt.user,ie=!0)}if(!O)return m.directlySetCurrentUser(null);if(!O._redirectEventId){if(ie)try{yield m.beforeStateQueue.runMiddleware(O)}catch(Oe){O=x,m._popupRedirectResolver._overrideRedirectResult(m,()=>Promise.reject(Oe))}return O?m.reloadAndSetCurrentUserOrClear(O):m.directlySetCurrentUser(null)}return ne(m._popupRedirectResolver,m,"argument-error"),yield m.getOrInitRedirectPersistenceManager(),m.redirectUser&&m.redirectUser._redirectEventId===O._redirectEventId?m.directlySetCurrentUser(O):m.reloadAndSetCurrentUserOrClear(O)})()}tryRedirectSignIn(p){var m=this;return(0,g.Z)(function*(){let I=null;try{I=yield m._popupRedirectResolver._completeRedirectFn(m,p,!0)}catch(x){yield m._setRedirectUser(null)}return I})()}reloadAndSetCurrentUserOrClear(p){var m=this;return(0,g.Z)(function*(){try{yield On(p)}catch(I){if("auth/network-request-failed"!==I.code)return m.directlySetCurrentUser(null)}return m.directlySetCurrentUser(p)})()}useDeviceLanguage(){this.languageCode=function Ft(){if("undefined"==typeof navigator)return null;const v=navigator;return v.languages&&v.languages[0]||v.language||null}()}_delete(){var p=this;return(0,g.Z)(function*(){p._deleted=!0})()}updateCurrentUser(p){var m=this;return(0,g.Z)(function*(){const I=p?(0,U.m9)(p):null;return I&&ne(I.auth.config.apiKey===m.config.apiKey,m,"invalid-user-token"),m._updateCurrentUser(I&&I._clone(m))})()}_updateCurrentUser(p,m=!1){var I=this;return(0,g.Z)(function*(){if(!I._deleted)return p&&ne(I.tenantId===p.tenantId,I,"tenant-id-mismatch"),m||(yield I.beforeStateQueue.runMiddleware(p)),I.queue((0,g.Z)(function*(){yield I.directlySetCurrentUser(p),I.notifyAuthListeners()}))})()}signOut(){var p=this;return(0,g.Z)(function*(){return yield p.beforeStateQueue.runMiddleware(null),(p.redirectPersistenceManager||p._popupRedirectResolver)&&(yield p._setRedirectUser(null)),p._updateCurrentUser(null,!0)})()}setPersistence(p){var m=this;return this.queue((0,g.Z)(function*(){yield m.assertedPersistence.setPersistence(re(p))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(p){this._errorFactory=new U.LL("auth","Firebase",p())}onAuthStateChanged(p,m,I){return this.registerStateListener(this.authStateSubscription,p,m,I)}beforeAuthStateChanged(p,m){return this.beforeStateQueue.pushCallback(p,m)}onIdTokenChanged(p,m,I){return this.registerStateListener(this.idTokenSubscription,p,m,I)}toJSON(){var p;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(p=this._currentUser)||void 0===p?void 0:p.toJSON()}}_setRedirectUser(p,m){var I=this;return(0,g.Z)(function*(){const x=yield I.getOrInitRedirectPersistenceManager(m);return null===p?x.removeCurrentUser():x.setCurrentUser(p)})()}getOrInitRedirectPersistenceManager(p){var m=this;return(0,g.Z)(function*(){if(!m.redirectPersistenceManager){const I=p&&re(p)||m._popupRedirectResolver;ne(I,m,"argument-error"),m.redirectPersistenceManager=yield er.create(m,[re(I._redirectPersistence)],"redirectUser"),m.redirectUser=yield m.redirectPersistenceManager.getCurrentUser()}return m.redirectPersistenceManager})()}_redirectUserForId(p){var m=this;return(0,g.Z)(function*(){var I,x;return m._isInitialized&&(yield m.queue((0,g.Z)(function*(){}))),(null===(I=m._currentUser)||void 0===I?void 0:I._redirectEventId)===p?m._currentUser:(null===(x=m.redirectUser)||void 0===x?void 0:x._redirectEventId)===p?m.redirectUser:null})()}_persistUserIfCurrent(p){var m=this;return(0,g.Z)(function*(){if(p===m.currentUser)return m.queue((0,g.Z)(function*(){return m.directlySetCurrentUser(p)}))})()}_notifyListenersIfCurrent(p){p===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var p,m;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const I=null!==(m=null===(p=this.currentUser)||void 0===p?void 0:p.uid)&&void 0!==m?m:null;this.lastNotifiedUid!==I&&(this.lastNotifiedUid=I,this.authStateSubscription.next(this.currentUser))}registerStateListener(p,m,I,x){if(this._deleted)return()=>{};const O="function"==typeof m?m:m.next.bind(m),ie=this._isInitialized?Promise.resolve():this._initializationPromise;return ne(ie,this,"internal-error"),ie.then(()=>O(this.currentUser)),"function"==typeof m?p.addObserver(m,I,x):p.addObserver(m)}directlySetCurrentUser(p){var m=this;return(0,g.Z)(function*(){m.currentUser&&m.currentUser!==p&&(m._currentUser._stopProactiveRefresh(),p&&m.isProactiveRefreshEnabled&&p._startProactiveRefresh()),m.currentUser=p,p?yield m.assertedPersistence.setCurrentUser(p):yield m.assertedPersistence.removeCurrentUser()})()}queue(p){return this.operations=this.operations.then(p,p),this.operations}get assertedPersistence(){return ne(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(p){!p||this.frameworks.includes(p)||(this.frameworks.push(p),this.frameworks.sort(),this.clientVersion=dr(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var p=this;return(0,g.Z)(function*(){var m;const I={"X-Client-Version":p.clientVersion};p.app.options.appId&&(I["X-Firebase-gmpid"]=p.app.options.appId);const x=yield null===(m=p.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===m?void 0:m.getHeartbeatsHeader();return x&&(I["X-Firebase-Client"]=x),I})()}}function je(v){return(0,U.m9)(v)}class Nt{constructor(p){this.auth=p,this.observer=null,this.addObserver=(0,U.ne)(m=>this.observer=m)}get next(){return ne(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function _n(v,p,m){const I=je(v);ne(I._canInitEmulator,I,"emulator-config-failed"),ne(/^https?:\/\//.test(p),I,"invalid-emulator-scheme");const x=!!(null==m?void 0:m.disableWarnings),O=jr(p),{host:ie,port:Oe}=function ns(v){const p=jr(v),m=/(\/\/)?([^?#/]+)/.exec(v.substr(p.length));if(!m)return{host:"",port:null};const I=m[2].split("@").pop()||"",x=/^(\[[^\]]+\])(:|$)/.exec(I);if(x){const O=x[1];return{host:O,port:Kn(I.substr(O.length+1))}}{const[O,ie]=I.split(":");return{host:O,port:Kn(ie)}}}(p);I.config.emulator={url:`${O}//${ie}${null===Oe?"":`:${Oe}`}/`},I.settings.appVerificationDisabledForTesting=!0,I.emulatorConfig=Object.freeze({host:ie,port:Oe,protocol:O.replace(":",""),options:Object.freeze({disableWarnings:x})}),x||function rs(){function v(){const p=document.createElement("p"),m=p.style;p.innerText="Running in emulator mode. Do not use with production credentials.",m.position="fixed",m.width="100%",m.backgroundColor="#ffffff",m.border=".1em solid #000000",m.color="#b50000",m.bottom="0px",m.left="0px",m.margin="0px",m.zIndex="10000",m.textAlign="center",p.classList.add("firebase-emulator-warning"),document.body.appendChild(p)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",v):v())}()}function jr(v){const p=v.indexOf(":");return p<0?"":v.substr(0,p+1)}function Kn(v){if(!v)return null;const p=Number(v);return isNaN(p)?null:p}class un{constructor(p,m){this.providerId=p,this.signInMethod=m}toJSON(){return fe("not implemented")}_getIdTokenResponse(p){return fe("not implemented")}_linkToIdToken(p,m){return fe("not implemented")}_getReauthenticationResolver(p){return fe("not implemented")}}function Gs(v,p){return Fn.apply(this,arguments)}function Fn(){return(Fn=(0,g.Z)(function*(v,p){return Yt(v,"POST","/v1/accounts:resetPassword",Bt(v,p))})).apply(this,arguments)}function At(v,p){return Ro.apply(this,arguments)}function Ro(){return(Ro=(0,g.Z)(function*(v,p){return Yt(v,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function Mo(v,p){return No.apply(this,arguments)}function No(){return(No=(0,g.Z)(function*(v,p){return Yt(v,"POST","/v1/accounts:update",Bt(v,p))})).apply(this,arguments)}function tr(){return(tr=(0,g.Z)(function*(v,p){return Dn(v,"POST","/v1/accounts:signInWithPassword",Bt(v,p))})).apply(this,arguments)}function Ts(v,p){return qs.apply(this,arguments)}function qs(){return(qs=(0,g.Z)(function*(v,p){return Yt(v,"POST","/v1/accounts:sendOobCode",Bt(v,p))})).apply(this,arguments)}function hr(v,p){return pn.apply(this,arguments)}function pn(){return(pn=(0,g.Z)(function*(v,p){return Ts(v,p)})).apply(this,arguments)}function Nc(v,p){return Zs.apply(this,arguments)}function Zs(){return(Zs=(0,g.Z)(function*(v,p){return Ts(v,p)})).apply(this,arguments)}function Ei(v,p){return ci.apply(this,arguments)}function ci(){return(ci=(0,g.Z)(function*(v,p){return Ts(v,p)})).apply(this,arguments)}function Pc(v,p){return cu.apply(this,arguments)}function cu(){return(cu=(0,g.Z)(function*(v,p){return Ts(v,p)})).apply(this,arguments)}function di(){return(di=(0,g.Z)(function*(v,p){return Dn(v,"POST","/v1/accounts:signInWithEmailLink",Bt(v,p))})).apply(this,arguments)}function kc(){return(kc=(0,g.Z)(function*(v,p){return Dn(v,"POST","/v1/accounts:signInWithEmailLink",Bt(v,p))})).apply(this,arguments)}class du extends un{constructor(p,m,I,x=null){super("password",I),this._email=p,this._password=m,this._tenantId=x}static _fromEmailAndPassword(p,m){return new du(p,m,"password")}static _fromEmailAndCode(p,m,I=null){return new du(p,m,"emailLink",I)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(p){const m="string"==typeof p?JSON.parse(p):p;if((null==m?void 0:m.email)&&(null==m?void 0:m.password)){if("password"===m.signInMethod)return this._fromEmailAndPassword(m.email,m.password);if("emailLink"===m.signInMethod)return this._fromEmailAndCode(m.email,m.password,m.tenantId)}return null}_getIdTokenResponse(p){var m=this;return(0,g.Z)(function*(){switch(m.signInMethod){case"password":return function Po(v,p){return tr.apply(this,arguments)}(p,{returnSecureToken:!0,email:m._email,password:m._password});case"emailLink":return function Ds(v,p){return di.apply(this,arguments)}(p,{email:m._email,oobCode:m._password});default:We(p,"internal-error")}})()}_linkToIdToken(p,m){var I=this;return(0,g.Z)(function*(){switch(I.signInMethod){case"password":return At(p,{idToken:m,returnSecureToken:!0,email:I._email,password:I._password});case"emailLink":return function wh(v,p){return kc.apply(this,arguments)}(p,{idToken:m,email:I._email,oobCode:I._password});default:We(p,"internal-error")}})()}_getReauthenticationResolver(p){return this._getIdTokenResponse(p)}}function nr(v,p){return Oc.apply(this,arguments)}function Oc(){return(Oc=(0,g.Z)(function*(v,p){return Dn(v,"POST","/v1/accounts:signInWithIdp",Bt(v,p))})).apply(this,arguments)}class is extends un{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(p){const m=new is(p.providerId,p.signInMethod);return p.idToken||p.accessToken?(p.idToken&&(m.idToken=p.idToken),p.accessToken&&(m.accessToken=p.accessToken),p.nonce&&!p.pendingToken&&(m.nonce=p.nonce),p.pendingToken&&(m.pendingToken=p.pendingToken)):p.oauthToken&&p.oauthTokenSecret?(m.accessToken=p.oauthToken,m.secret=p.oauthTokenSecret):We("argument-error"),m}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(p){const m="string"==typeof p?JSON.parse(p):p,{providerId:I,signInMethod:x}=m,O=(0,ae._T)(m,["providerId","signInMethod"]);if(!I||!x)return null;const ie=new is(I,x);return ie.idToken=O.idToken||void 0,ie.accessToken=O.accessToken||void 0,ie.secret=O.secret,ie.nonce=O.nonce,ie.pendingToken=O.pendingToken||null,ie}_getIdTokenResponse(p){return nr(p,this.buildRequest())}_linkToIdToken(p,m){const I=this.buildRequest();return I.idToken=m,nr(p,I)}_getReauthenticationResolver(p){const m=this.buildRequest();return m.autoCreate=!1,nr(p,m)}buildRequest(){const p={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)p.pendingToken=this.pendingToken;else{const m={};this.idToken&&(m.id_token=this.idToken),this.accessToken&&(m.access_token=this.accessToken),this.secret&&(m.oauth_token_secret=this.secret),m.providerId=this.providerId,this.nonce&&!this.pendingToken&&(m.nonce=this.nonce),p.postBody=(0,U.xO)(m)}return p}}function Op(v,p){return Fc.apply(this,arguments)}function Fc(){return(Fc=(0,g.Z)(function*(v,p){return Yt(v,"POST","/v1/accounts:sendVerificationCode",Bt(v,p))})).apply(this,arguments)}function _a(){return(_a=(0,g.Z)(function*(v,p){return Dn(v,"POST","/v1/accounts:signInWithPhoneNumber",Bt(v,p))})).apply(this,arguments)}function Lc(){return(Lc=(0,g.Z)(function*(v,p){const m=yield Dn(v,"POST","/v1/accounts:signInWithPhoneNumber",Bt(v,p));if(m.temporaryProof)throw qn(v,"account-exists-with-different-credential",m);return m})).apply(this,arguments)}const Lp={USER_NOT_FOUND:"user-not-found"};function Uc(){return(Uc=(0,g.Z)(function*(v,p){return Dn(v,"POST","/v1/accounts:signInWithPhoneNumber",Bt(v,Object.assign(Object.assign({},p),{operation:"REAUTH"})),Lp)})).apply(this,arguments)}class Oo extends un{constructor(p){super("phone","phone"),this.params=p}static _fromVerification(p,m){return new Oo({verificationId:p,verificationCode:m})}static _fromTokenResponse(p,m){return new Oo({phoneNumber:p,temporaryProof:m})}_getIdTokenResponse(p){return function Fp(v,p){return _a.apply(this,arguments)}(p,this._makeVerificationRequest())}_linkToIdToken(p,m){return function ko(v,p){return Lc.apply(this,arguments)}(p,Object.assign({idToken:m},this._makeVerificationRequest()))}_getReauthenticationResolver(p){return function Up(v,p){return Uc.apply(this,arguments)}(p,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:p,phoneNumber:m,verificationId:I,verificationCode:x}=this.params;return p&&m?{temporaryProof:p,phoneNumber:m}:{sessionInfo:I,code:x}}toJSON(){const p={providerId:this.providerId};return this.params.phoneNumber&&(p.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(p.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(p.verificationCode=this.params.verificationCode),this.params.verificationId&&(p.verificationId=this.params.verificationId),p}static fromJSON(p){"string"==typeof p&&(p=JSON.parse(p));const{verificationId:m,verificationCode:I,phoneNumber:x,temporaryProof:O}=p;return I||m||x||O?new Oo({verificationId:m,verificationCode:I,phoneNumber:x,temporaryProof:O}):null}}class ss{constructor(p){var m,I,x,O,ie,Oe;const et=(0,U.zd)((0,U.pd)(p)),gt=null!==(m=et.apiKey)&&void 0!==m?m:null,Ct=null!==(I=et.oobCode)&&void 0!==I?I:null,Cn=function Vp(v){switch(v){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(x=et.mode)&&void 0!==x?x:null);ne(gt&&Ct&&Cn,"argument-error"),this.apiKey=gt,this.operation=Cn,this.code=Ct,this.continueUrl=null!==(O=et.continueUrl)&&void 0!==O?O:null,this.languageCode=null!==(ie=et.languageCode)&&void 0!==ie?ie:null,this.tenantId=null!==(Oe=et.tenantId)&&void 0!==Oe?Oe:null}static parseLink(p){const m=function Ih(v){const p=(0,U.zd)((0,U.pd)(v)).link,m=p?(0,U.zd)((0,U.pd)(p)).deep_link_id:null,I=(0,U.zd)((0,U.pd)(v)).deep_link_id;return(I?(0,U.zd)((0,U.pd)(I)).link:null)||I||m||p||v}(p);try{return new ss(m)}catch(I){return null}}}let ya=(()=>{class v{constructor(){this.providerId=v.PROVIDER_ID}static credential(m,I){return du._fromEmailAndPassword(m,I)}static credentialWithLink(m,I){const x=ss.parseLink(I);return ne(x,"argument-error"),du._fromEmailAndCode(m,x.code,x.tenantId)}}return v.PROVIDER_ID="password",v.EMAIL_PASSWORD_SIGN_IN_METHOD="password",v.EMAIL_LINK_SIGN_IN_METHOD="emailLink",v})();class Ss{constructor(p){this.providerId=p,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(p){this.defaultLanguageCode=p}setCustomParameters(p){return this.customParameters=p,this}getCustomParameters(){return this.customParameters}}class hi extends Ss{constructor(){super(...arguments),this.scopes=[]}addScope(p){return this.scopes.includes(p)||this.scopes.push(p),this}getScopes(){return[...this.scopes]}}class Fo extends hi{static credentialFromJSON(p){const m="string"==typeof p?JSON.parse(p):p;return ne("providerId"in m&&"signInMethod"in m,"argument-error"),is._fromParams(m)}credential(p){return this._credential(Object.assign(Object.assign({},p),{nonce:p.rawNonce}))}_credential(p){return ne(p.idToken||p.accessToken,"argument-error"),is._fromParams(Object.assign(Object.assign({},p),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(p){return Fo.oauthCredentialFromTaggedObject(p)}static credentialFromError(p){return Fo.oauthCredentialFromTaggedObject(p.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:m,oauthAccessToken:I,oauthTokenSecret:x,pendingToken:O,nonce:ie,providerId:Oe}=p;if(!I&&!x&&!m&&!O||!Oe)return null;try{return new Fo(Oe)._credential({idToken:m,accessToken:I,nonce:ie,pendingToken:O})}catch(et){return null}}}let va=(()=>{class v extends hi{constructor(){super("facebook.com")}static credential(m){return is._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.FACEBOOK_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return v.credential(m.oauthAccessToken)}catch(I){return null}}}return v.FACEBOOK_SIGN_IN_METHOD="facebook.com",v.PROVIDER_ID="facebook.com",v})(),Ea=(()=>{class v extends hi{constructor(){super("google.com"),this.addScope("profile")}static credential(m,I){return is._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GOOGLE_SIGN_IN_METHOD,idToken:m,accessToken:I})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthIdToken:I,oauthAccessToken:x}=m;if(!I&&!x)return null;try{return v.credential(I,x)}catch(O){return null}}}return v.GOOGLE_SIGN_IN_METHOD="google.com",v.PROVIDER_ID="google.com",v})(),bh=(()=>{class v extends hi{constructor(){super("github.com")}static credential(m){return is._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GITHUB_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return v.credential(m.oauthAccessToken)}catch(I){return null}}}return v.GITHUB_SIGN_IN_METHOD="github.com",v.PROVIDER_ID="github.com",v})();class Ks extends un{constructor(p,m){super(p,p),this.pendingToken=m}_getIdTokenResponse(p){return nr(p,this.buildRequest())}_linkToIdToken(p,m){const I=this.buildRequest();return I.idToken=m,nr(p,I)}_getReauthenticationResolver(p){const m=this.buildRequest();return m.autoCreate=!1,nr(p,m)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(p){const m="string"==typeof p?JSON.parse(p):p,{providerId:I,signInMethod:x,pendingToken:O}=m;return I&&x&&O&&I===x?new Ks(I,O):null}static _create(p,m){return new Ks(p,m)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class os extends Ss{constructor(p){ne(p.startsWith("saml."),"argument-error"),super(p)}static credentialFromResult(p){return os.samlCredentialFromTaggedObject(p)}static credentialFromError(p){return os.samlCredentialFromTaggedObject(p.customData||{})}static credentialFromJSON(p){const m=Ks.fromJSON(p);return ne(m,"argument-error"),m}static samlCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{pendingToken:m,providerId:I}=p;if(!m||!I)return null;try{return Ks._create(I,m)}catch(x){return null}}}let wi=(()=>{class v extends hi{constructor(){super("twitter.com")}static credential(m,I){return is._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.TWITTER_SIGN_IN_METHOD,oauthToken:m,oauthTokenSecret:I})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthAccessToken:I,oauthTokenSecret:x}=m;if(!I||!x)return null;try{return v.credential(I,x)}catch(O){return null}}}return v.TWITTER_SIGN_IN_METHOD="twitter.com",v.PROVIDER_ID="twitter.com",v})();function Bc(v,p){return Mr.apply(this,arguments)}function Mr(){return(Mr=(0,g.Z)(function*(v,p){return Dn(v,"POST","/v1/accounts:signUp",Bt(v,p))})).apply(this,arguments)}class Nr{constructor(p){this.user=p.user,this.providerId=p.providerId,this._tokenResponse=p._tokenResponse,this.operationType=p.operationType}static _fromIdTokenResponse(p,m,I,x=!1){return(0,g.Z)(function*(){const O=yield ht._fromIdTokenResponse(p,I,x),ie=jc(I);return new Nr({user:O,providerId:ie,_tokenResponse:I,operationType:m})})()}static _forOperation(p,m,I){return(0,g.Z)(function*(){yield p._updateTokensIfNecessary(I,!0);const x=jc(I);return new Nr({user:p,providerId:x,_tokenResponse:I,operationType:m})})()}}function jc(v){return v.providerId?v.providerId:"phoneNumber"in v?"phone":null}function $c(v){return hu.apply(this,arguments)}function hu(){return(hu=(0,g.Z)(function*(v){var p;const m=je(v);if(yield m._initializationPromise,null===(p=m.currentUser)||void 0===p?void 0:p.isAnonymous)return new Nr({user:m.currentUser,providerId:null,operationType:"signIn"});const I=yield Bc(m,{returnSecureToken:!0}),x=yield Nr._fromIdTokenResponse(m,"signIn",I,!0);return yield m._updateCurrentUser(x.user),x})).apply(this,arguments)}class fu extends U.ZR{constructor(p,m,I,x){var O;super(m.code,m.message),this.operationType=I,this.user=x,Object.setPrototypeOf(this,fu.prototype),this.customData={appName:p.name,tenantId:null!==(O=p.tenantId)&&void 0!==O?O:void 0,_serverResponse:m.customData._serverResponse,operationType:I}}static _fromErrorAndOperation(p,m,I,x){return new fu(p,m,I,x)}}function pu(v,p,m,I){return("reauthenticate"===p?m._getReauthenticationResolver(v):m._getIdTokenResponse(v)).catch(O=>{throw"auth/multi-factor-auth-required"===O.code?fu._fromErrorAndOperation(v,O,p,I):O})}function pl(v){return new Set(v.map(({providerId:p})=>p).filter(p=>!!p))}function as(v,p){return gl.apply(this,arguments)}function gl(){return(gl=(0,g.Z)(function*(v,p){const m=(0,U.m9)(v);yield As(!0,m,p);const{providerUserInfo:I}=yield Vr(m.auth,{idToken:yield m.getIdToken(),deleteProvider:[p]}),x=pl(I||[]);return m.providerData=m.providerData.filter(O=>x.has(O.providerId)),x.has("phone")||(m.phoneNumber=null),yield m.auth._persistUserIfCurrent(m),m})).apply(this,arguments)}function yn(v,p){return wa.apply(this,arguments)}function wa(){return(wa=(0,g.Z)(function*(v,p,m=!1){const I=yield it(v,p._linkToIdToken(v.auth,yield v.getIdToken()),m);return Nr._forOperation(v,"link",I)})).apply(this,arguments)}function As(v,p,m){return gn.apply(this,arguments)}function gn(){return(gn=(0,g.Z)(function*(v,p,m){yield On(p);const x=!1===v?"provider-already-linked":"no-such-provider";ne(pl(p.providerData).has(m)===v,p.auth,x)})).apply(this,arguments)}function gu(v,p){return Ia.apply(this,arguments)}function Ia(){return(Ia=(0,g.Z)(function*(v,p,m=!1){const{auth:I}=v,x="reauthenticate";try{const O=yield it(v,pu(I,x,p,v),m);ne(O.idToken,I,"internal-error");const ie=jt(O.idToken);ne(ie,I,"internal-error");const{sub:Oe}=ie;return ne(v.uid===Oe,I,"user-mismatch"),Nr._forOperation(v,x,O)}catch(O){throw"auth/user-not-found"===(null==O?void 0:O.code)&&We(I,"user-mismatch"),O}})).apply(this,arguments)}function Ys(v,p){return fr.apply(this,arguments)}function fr(){return(fr=(0,g.Z)(function*(v,p,m=!1){const I="signIn",x=yield pu(v,I,p),O=yield Nr._fromIdTokenResponse(v,I,x);return m||(yield v._updateCurrentUser(O.user)),O})).apply(this,arguments)}function mu(v,p){return Ln.apply(this,arguments)}function Ln(){return(Ln=(0,g.Z)(function*(v,p){return Ys(je(v),p)})).apply(this,arguments)}function us(v,p){return pr.apply(this,arguments)}function pr(){return(pr=(0,g.Z)(function*(v,p){const m=(0,U.m9)(v);return yield As(!1,m,p.providerId),yn(m,p)})).apply(this,arguments)}function Lo(v,p){return Bi.apply(this,arguments)}function Bi(){return(Bi=(0,g.Z)(function*(v,p){return gu((0,U.m9)(v),p)})).apply(this,arguments)}function ml(v,p){return ei.apply(this,arguments)}function ei(){return(ei=(0,g.Z)(function*(v,p){return Dn(v,"POST","/v1/accounts:signInWithCustomToken",Bt(v,p))})).apply(this,arguments)}function xs(v,p){return Rs.apply(this,arguments)}function Rs(){return(Rs=(0,g.Z)(function*(v,p){const m=je(v),I=yield ml(m,{token:p,returnSecureToken:!0}),x=yield Nr._fromIdTokenResponse(m,"signIn",I);return yield m._updateCurrentUser(x.user),x})).apply(this,arguments)}class pt{constructor(p,m){this.factorId=p,this.uid=m.mfaEnrollmentId,this.enrollmentTime=new Date(m.enrolledAt).toUTCString(),this.displayName=m.displayName}static _fromServerResponse(p,m){return"phoneInfo"in m?ba._fromServerResponse(p,m):We(p,"internal-error")}}class ba extends pt{constructor(p){super("phone",p),this.phoneNumber=p.phoneInfo}static _fromServerResponse(p,m){return new ba(m)}}function Ca(v,p,m){var I;ne((null===(I=m.url)||void 0===I?void 0:I.length)>0,v,"invalid-continue-uri"),ne(void 0===m.dynamicLinkDomain||m.dynamicLinkDomain.length>0,v,"invalid-dynamic-link-domain"),p.continueUrl=m.url,p.dynamicLinkDomain=m.dynamicLinkDomain,p.canHandleCodeInApp=m.handleCodeInApp,m.iOS&&(ne(m.iOS.bundleId.length>0,v,"missing-ios-bundle-id"),p.iOSBundleId=m.iOS.bundleId),m.android&&(ne(m.android.packageName.length>0,v,"missing-android-pkg-name"),p.androidInstallApp=m.android.installApp,p.androidMinimumVersionCode=m.android.minimumVersion,p.androidPackageName=m.android.packageName)}function Hc(v,p,m){return Ta.apply(this,arguments)}function Ta(){return(Ta=(0,g.Z)(function*(v,p,m){const I=(0,U.m9)(v),x={requestType:"PASSWORD_RESET",email:p};m&&Ca(I,x,m),yield Nc(I,x)})).apply(this,arguments)}function _l(v,p,m){return Da.apply(this,arguments)}function Da(){return(Da=(0,g.Z)(function*(v,p,m){yield Gs((0,U.m9)(v),{oobCode:p,newPassword:m})})).apply(this,arguments)}function Ch(v,p){return Me.apply(this,arguments)}function Me(){return(Me=(0,g.Z)(function*(v,p){yield Mo((0,U.m9)(v),{oobCode:p})})).apply(this,arguments)}function Ht(v,p){return Sa.apply(this,arguments)}function Sa(){return(Sa=(0,g.Z)(function*(v,p){const m=(0,U.m9)(v),I=yield Gs(m,{oobCode:p}),x=I.requestType;switch(ne(x,m,"internal-error"),x){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":ne(I.newEmail,m,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":ne(I.mfaInfo,m,"internal-error");default:ne(I.email,m,"internal-error")}let O=null;return I.mfaInfo&&(O=pt._fromServerResponse(je(m),I.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===I.requestType?I.newEmail:I.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===I.requestType?I.email:I.newEmail)||null,multiFactorInfo:O},operation:x}})).apply(this,arguments)}function Un(v,p){return Ms.apply(this,arguments)}function Ms(){return(Ms=(0,g.Z)(function*(v,p){const{data:m}=yield Ht((0,U.m9)(v),p);return m.email})).apply(this,arguments)}function Aa(v,p,m){return $r.apply(this,arguments)}function $r(){return($r=(0,g.Z)(function*(v,p,m){const I=je(v),x=yield Bc(I,{returnSecureToken:!0,email:p,password:m}),O=yield Nr._fromIdTokenResponse(I,"signIn",x);return yield I._updateCurrentUser(O.user),O})).apply(this,arguments)}function yl(v,p,m){return mu((0,U.m9)(v),ya.credential(p,m))}function vl(v,p,m){return Wc.apply(this,arguments)}function Wc(){return(Wc=(0,g.Z)(function*(v,p,m){const I=(0,U.m9)(v),x={requestType:"EMAIL_SIGNIN",email:p};ne(m.handleCodeInApp,I,"argument-error"),m&&Ca(I,x,m),yield Ei(I,x)})).apply(this,arguments)}function zc(v,p){const m=ss.parseLink(p);return"EMAIL_SIGNIN"===(null==m?void 0:m.operation)}function xa(v,p,m){return Uo.apply(this,arguments)}function Uo(){return(Uo=(0,g.Z)(function*(v,p,m){const I=(0,U.m9)(v),x=ya.credentialWithLink(p,m||de());return ne(x._tenantId===(I.tenantId||null),I,"tenant-id-mismatch"),mu(I,x)})).apply(this,arguments)}function sr(v,p){return Ii.apply(this,arguments)}function Ii(){return(Ii=(0,g.Z)(function*(v,p){return Yt(v,"POST","/v1/accounts:createAuthUri",Bt(v,p))})).apply(this,arguments)}function El(v,p){return ji.apply(this,arguments)}function ji(){return(ji=(0,g.Z)(function*(v,p){const I={identifier:p,continueUri:Ve()?de():"http://localhost"},{signinMethods:x}=yield sr((0,U.m9)(v),I);return x||[]})).apply(this,arguments)}function ls(v,p){return Ra.apply(this,arguments)}function Ra(){return(Ra=(0,g.Z)(function*(v,p){const m=(0,U.m9)(v),x={requestType:"VERIFY_EMAIL",idToken:yield v.getIdToken()};p&&Ca(m.auth,x,p);const{email:O}=yield hr(m.auth,x);O!==v.email&&(yield v.reload())})).apply(this,arguments)}function Gc(v,p,m){return Ma.apply(this,arguments)}function Ma(){return(Ma=(0,g.Z)(function*(v,p,m){const I=(0,U.m9)(v),O={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield v.getIdToken(),newEmail:p};m&&Ca(I.auth,O,m);const{email:ie}=yield Pc(I.auth,O);ie!==v.email&&(yield v.reload())})).apply(this,arguments)}function qc(v,p){return Qs.apply(this,arguments)}function Qs(){return(Qs=(0,g.Z)(function*(v,p){return Yt(v,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function wl(v,p){return Na.apply(this,arguments)}function Na(){return(Na=(0,g.Z)(function*(v,{displayName:p,photoURL:m}){if(void 0===p&&void 0===m)return;const I=(0,U.m9)(v),O={idToken:yield I.getIdToken(),displayName:p,photoUrl:m,returnSecureToken:!0},ie=yield it(I,qc(I.auth,O));I.displayName=ie.displayName||null,I.photoURL=ie.photoUrl||null;const Oe=I.providerData.find(({providerId:et})=>"password"===et);Oe&&(Oe.displayName=I.displayName,Oe.photoURL=I.photoURL),yield I._updateTokensIfNecessary(ie)})).apply(this,arguments)}function Il(v,p){return _u((0,U.m9)(v),p,null)}function jp(v,p){return _u((0,U.m9)(v),null,p)}function _u(v,p,m){return Js.apply(this,arguments)}function Js(){return(Js=(0,g.Z)(function*(v,p,m){const{auth:I}=v,O={idToken:yield v.getIdToken(),returnSecureToken:!0};p&&(O.email=p),m&&(O.password=m);const ie=yield it(v,At(I,O));yield v._updateTokensIfNecessary(ie,!0)})).apply(this,arguments)}class Xs{constructor(p,m,I={}){this.isNewUser=p,this.providerId=m,this.profile=I}}class Zc extends Xs{constructor(p,m,I,x){super(p,m,I),this.username=x}}class Th extends Xs{constructor(p,m){super(p,"facebook.com",m)}}class Vo extends Zc{constructor(p,m){super(p,"github.com",m,"string"==typeof(null==m?void 0:m.login)?null==m?void 0:m.login:null)}}class $i extends Xs{constructor(p,m){super(p,"google.com",m)}}class Dh extends Zc{constructor(p,m,I){super(p,"twitter.com",m,I)}}function gr(v){const{user:p,_tokenResponse:m}=v;return p.isAnonymous&&!m?{providerId:null,isNewUser:!1,profile:null}:function bl(v){var p,m;if(!v)return null;const{providerId:I}=v,x=v.rawUserInfo?JSON.parse(v.rawUserInfo):{},O=v.isNewUser||"identitytoolkit#SignupNewUserResponse"===v.kind;if(!I&&(null==v?void 0:v.idToken)){const ie=null===(m=null===(p=jt(v.idToken))||void 0===p?void 0:p.firebase)||void 0===m?void 0:m.sign_in_provider;if(ie)return new Xs(O,"anonymous"!==ie&&"custom"!==ie?ie:null)}if(!I)return null;switch(I){case"facebook.com":return new Th(O,x);case"github.com":return new Vo(O,x);case"google.com":return new $i(O,x);case"twitter.com":return new Dh(O,x,v.screenName||null);case"custom":case"anonymous":return new Xs(O,null);default:return new Xs(O,I,x)}}(m)}class ds{constructor(p,m){this.type=p,this.credential=m}static _fromIdtoken(p){return new ds("enroll",p)}static _fromMfaPendingCredential(p){return new ds("signin",p)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(p){var m,I;if(null==p?void 0:p.multiFactorSession){if(null===(m=p.multiFactorSession)||void 0===m?void 0:m.pendingCredential)return ds._fromMfaPendingCredential(p.multiFactorSession.pendingCredential);if(null===(I=p.multiFactorSession)||void 0===I?void 0:I.idToken)return ds._fromIdtoken(p.multiFactorSession.idToken)}return null}}class ka{constructor(p,m,I){this.session=p,this.hints=m,this.signInResolver=I}static _fromError(p,m){const I=je(p),x=m.customData._serverResponse,O=(x.mfaInfo||[]).map(Oe=>pt._fromServerResponse(I,Oe));ne(x.mfaPendingCredential,I,"internal-error");const ie=ds._fromMfaPendingCredential(x.mfaPendingCredential);return new ka(ie,O,function(){var Oe=(0,g.Z)(function*(et){const gt=yield et._process(I,ie);delete x.mfaInfo,delete x.mfaPendingCredential;const Ct=Object.assign(Object.assign({},x),{idToken:gt.idToken,refreshToken:gt.refreshToken});switch(m.operationType){case"signIn":const Cn=yield Nr._fromIdTokenResponse(I,m.operationType,Ct);return yield I._updateCurrentUser(Cn.user),Cn;case"reauthenticate":return ne(m.user,I,"internal-error"),Nr._forOperation(m.user,m.operationType,Ct);default:We(I,"internal-error")}});return function(et){return Oe.apply(this,arguments)}}())}resolveSignIn(p){var m=this;return(0,g.Z)(function*(){return m.signInResolver(p)})()}}function yu(v,p){var m;const I=(0,U.m9)(v),x=p;return ne(p.customData.operationType,I,"argument-error"),ne(null===(m=x.customData._serverResponse)||void 0===m?void 0:m.mfaPendingCredential,I,"argument-error"),ka._fromError(I,x)}function mr(v,p){return Yt(v,"POST","/v2/accounts/mfaEnrollment:start",Bt(v,p))}class Bo{constructor(p){this.user=p,this.enrolledFactors=[],p._onReload(m=>{m.mfaInfo&&(this.enrolledFactors=m.mfaInfo.map(I=>pt._fromServerResponse(p.auth,I)))})}static _fromUser(p){return new Bo(p)}getSession(){var p=this;return(0,g.Z)(function*(){return ds._fromIdtoken(yield p.user.getIdToken())})()}enroll(p,m){var I=this;return(0,g.Z)(function*(){const x=p,O=yield I.getSession(),ie=yield it(I.user,x._process(I.user.auth,O,m));return yield I.user._updateTokensIfNecessary(ie),I.user.reload()})()}unenroll(p){var m=this;return(0,g.Z)(function*(){const I="string"==typeof p?p:p.uid,x=yield m.user.getIdToken(),O=yield it(m.user,function eo(v,p){return Yt(v,"POST","/v2/accounts/mfaEnrollment:withdraw",Bt(v,p))}(m.user.auth,{idToken:x,mfaEnrollmentId:I}));m.enrolledFactors=m.enrolledFactors.filter(({uid:ie})=>ie!==I),yield m.user._updateTokensIfNecessary(O);try{yield m.user.reload()}catch(ie){if("auth/user-token-expired"!==ie.code)throw ie}})()}}const Yc=new WeakMap;function Qc(v){const p=(0,U.m9)(v);return Yc.has(p)||Yc.set(p,Bo._fromUser(p)),Yc.get(p)}const to="__sak";class Oa{constructor(p,m){this.storageRetriever=p,this.type=m}_isAvailable(){try{return this.storage?(this.storage.setItem(to,"1"),this.storage.removeItem(to),Promise.resolve(!0)):Promise.resolve(!1)}catch(p){return Promise.resolve(!1)}}_set(p,m){return this.storage.setItem(p,JSON.stringify(m)),Promise.resolve()}_get(p){const m=this.storage.getItem(p);return Promise.resolve(m?JSON.parse(m):null)}_remove(p){return this.storage.removeItem(p),Promise.resolve()}get storage(){return this.storageRetriever()}}const st=(()=>{class v extends Oa{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(m,I)=>this.onStorageEvent(m,I),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function xh(){const v=(0,U.z$)();return G(v)||Lt(v)}()&&function Vi(){try{return!(!window||window===window.top)}catch(v){return!1}}(),this.fallbackToPolling=Rr(),this._shouldAllowMigration=!0}forAllChangedKeys(m){for(const I of Object.keys(this.listeners)){const x=this.storage.getItem(I),O=this.localCache[I];x!==O&&m(I,O,x)}}onStorageEvent(m,I=!1){if(!m.key)return void this.forAllChangedKeys((Oe,et,gt)=>{this.notifyListeners(Oe,gt)});const x=m.key;if(I?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Oe=this.storage.getItem(x);if(m.newValue!==Oe)null!==m.newValue?this.storage.setItem(x,m.newValue):this.storage.removeItem(x);else if(this.localCache[x]===m.newValue&&!I)return}const O=()=>{const Oe=this.storage.getItem(x);!I&&this.localCache[x]===Oe||this.notifyListeners(x,Oe)},ie=this.storage.getItem(x);!function Ut(){return(0,U.w1)()&&10===document.documentMode}()||ie===m.newValue||m.newValue===m.oldValue?O():setTimeout(O,10)}notifyListeners(m,I){this.localCache[m]=I;const x=this.listeners[m];if(x)for(const O of Array.from(x))O(I&&JSON.parse(I))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((m,I,x)=>{this.onStorageEvent(new StorageEvent("storage",{key:m,oldValue:I,newValue:x}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(m,I){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[m]||(this.listeners[m]=new Set,this.localCache[m]=this.storage.getItem(m)),this.listeners[m].add(I)}_removeListener(m,I){this.listeners[m]&&(this.listeners[m].delete(I),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(m,I){var x=()=>super._set,O=this;return(0,g.Z)(function*(){yield x().call(O,m,I),O.localCache[m]=JSON.stringify(I)})()}_get(m){var I=()=>super._get,x=this;return(0,g.Z)(function*(){const O=yield I().call(x,m);return x.localCache[m]=JSON.stringify(O),O})()}_remove(m){var I=()=>super._remove,x=this;return(0,g.Z)(function*(){yield I().call(x,m),delete x.localCache[m]})()}}return v.type="LOCAL",v})(),Pr=(()=>{class v extends Oa{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(m,I){}_removeListener(m,I){}}return v.type="SESSION",v})();let Tl=(()=>{class v{constructor(m){this.eventTarget=m,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(m){const I=this.receivers.find(O=>O.isListeningto(m));if(I)return I;const x=new v(m);return this.receivers.push(x),x}isListeningto(m){return this.eventTarget===m}handleEvent(m){var I=this;return(0,g.Z)(function*(){const x=m,{eventId:O,eventType:ie,data:Oe}=x.data,et=I.handlersMap[ie];if(!(null==et?void 0:et.size))return;x.ports[0].postMessage({status:"ack",eventId:O,eventType:ie});const gt=Array.from(et).map(function(){var Cn=(0,g.Z)(function*(zi){return zi(x.origin,Oe)});return function(zi){return Cn.apply(this,arguments)}}()),Ct=yield function bi(v){return Promise.all(v.map(function(){var p=(0,g.Z)(function*(m){try{return{fulfilled:!0,value:yield m}}catch(I){return{fulfilled:!1,reason:I}}});return function(m){return p.apply(this,arguments)}}()))}(gt);x.ports[0].postMessage({status:"done",eventId:O,eventType:ie,response:Ct})})()}_subscribe(m,I){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[m]||(this.handlersMap[m]=new Set),this.handlersMap[m].add(I)}_unsubscribe(m,I){this.handlersMap[m]&&I&&this.handlersMap[m].delete(I),(!I||0===this.handlersMap[m].size)&&delete this.handlersMap[m],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return v.receivers=[],v})();function jo(v="",p=10){let m="";for(let I=0;I<p;I++)m+=Math.floor(10*Math.random());return v+m}class $o{constructor(p){this.target=p,this.handlers=new Set}removeMessageHandler(p){p.messageChannel&&(p.messageChannel.port1.removeEventListener("message",p.onMessage),p.messageChannel.port1.close()),this.handlers.delete(p)}_send(p,m,I=50){var x=this;return(0,g.Z)(function*(){const O="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!O)throw new Error("connection_unavailable");let ie,Oe;return new Promise((et,gt)=>{const Ct=jo("",20);O.port1.start();const Cn=setTimeout(()=>{gt(new Error("unsupported_event"))},I);Oe={messageChannel:O,onMessage(zi){const Us=zi;if(Us.data.eventId===Ct)switch(Us.data.status){case"ack":clearTimeout(Cn),ie=setTimeout(()=>{gt(new Error("timeout"))},3e3);break;case"done":clearTimeout(ie),et(Us.data.response);break;default:clearTimeout(Cn),clearTimeout(ie),gt(new Error("invalid_response"))}}},x.handlers.add(Oe),O.port1.addEventListener("message",Oe.onMessage),x.target.postMessage({eventType:p,eventId:Ct,data:m},[O.port2])}).finally(()=>{Oe&&x.removeMessageHandler(Oe)})})()}}function Bn(){return window}function no(){return void 0!==Bn().WorkerGlobalScope&&"function"==typeof Bn().importScripts}function Rt(){return(Rt=(0,g.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(v){return null}})).apply(this,arguments)}const ed="firebaseLocalStorageDb",xn="firebaseLocalStorage",vu="fbase_key";class fs{constructor(p){this.request=p}toPromise(){return new Promise((p,m)=>{this.request.addEventListener("success",()=>{p(this.request.result)}),this.request.addEventListener("error",()=>{m(this.request.error)})})}}function ro(v,p){return v.transaction([xn],p?"readwrite":"readonly").objectStore(xn)}function Wo(){const v=indexedDB.open(ed,1);return new Promise((p,m)=>{v.addEventListener("error",()=>{m(v.error)}),v.addEventListener("upgradeneeded",()=>{const I=v.result;try{I.createObjectStore(xn,{keyPath:vu})}catch(x){m(x)}}),v.addEventListener("success",(0,g.Z)(function*(){const I=v.result;I.objectStoreNames.contains(xn)?p(I):(I.close(),yield function ti(){const v=indexedDB.deleteDatabase(ed);return new fs(v).toPromise()}(),p(yield Wo()))}))})}function io(v,p,m){return so.apply(this,arguments)}function so(){return(so=(0,g.Z)(function*(v,p,m){const I=ro(v,!0).put({[vu]:p,value:m});return new fs(I).toPromise()})).apply(this,arguments)}function Ps(){return(Ps=(0,g.Z)(function*(v,p){const m=ro(v,!1).get(p),I=yield new fs(m).toPromise();return void 0===I?null:I.value})).apply(this,arguments)}function Go(v,p){const m=ro(v,!0).delete(p);return new fs(m).toPromise()}const oo=(()=>{class v{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var m=this;return(0,g.Z)(function*(){return m.db||(m.db=yield Wo()),m.db})()}_withRetries(m){var I=this;return(0,g.Z)(function*(){let x=0;for(;;)try{const O=yield I._openDb();return yield m(O)}catch(O){if(x++>3)throw O;I.db&&(I.db.close(),I.db=void 0)}})()}initializeServiceWorkerMessaging(){var m=this;return(0,g.Z)(function*(){return no()?m.initializeReceiver():m.initializeSender()})()}initializeReceiver(){var m=this;return(0,g.Z)(function*(){m.receiver=Tl._getInstance(function Xc(){return no()?self:null}()),m.receiver._subscribe("keyChanged",function(){var I=(0,g.Z)(function*(x,O){return{keyProcessed:(yield m._poll()).includes(O.key)}});return function(x,O){return I.apply(this,arguments)}}()),m.receiver._subscribe("ping",function(){var I=(0,g.Z)(function*(x,O){return["keyChanged"]});return function(x,O){return I.apply(this,arguments)}}())})()}initializeSender(){var m=this;return(0,g.Z)(function*(){var I,x;if(m.activeServiceWorker=yield function hs(){return Rt.apply(this,arguments)}(),!m.activeServiceWorker)return;m.sender=new $o(m.activeServiceWorker);const O=yield m.sender._send("ping",{},800);!O||(null===(I=O[0])||void 0===I?void 0:I.fulfilled)&&(null===(x=O[0])||void 0===x?void 0:x.value.includes("keyChanged"))&&(m.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(m){var I=this;return(0,g.Z)(function*(){if(I.sender&&I.activeServiceWorker&&function Jc(){var v;return(null===(v=null==navigator?void 0:navigator.serviceWorker)||void 0===v?void 0:v.controller)||null}()===I.activeServiceWorker)try{yield I.sender._send("keyChanged",{key:m},I.serviceWorkerReceiverAvailable?800:50)}catch(x){}})()}_isAvailable(){return(0,g.Z)(function*(){try{if(!indexedDB)return!1;const m=yield Wo();return yield io(m,to,"1"),yield Go(m,to),!0}catch(m){}return!1})()}_withPendingWrite(m){var I=this;return(0,g.Z)(function*(){I.pendingWrites++;try{yield m()}finally{I.pendingWrites--}})()}_set(m,I){var x=this;return(0,g.Z)(function*(){return x._withPendingWrite((0,g.Z)(function*(){return yield x._withRetries(O=>io(O,m,I)),x.localCache[m]=I,x.notifyServiceWorker(m)}))})()}_get(m){var I=this;return(0,g.Z)(function*(){const x=yield I._withRetries(O=>function zo(v,p){return Ps.apply(this,arguments)}(O,m));return I.localCache[m]=x,x})()}_remove(m){var I=this;return(0,g.Z)(function*(){return I._withPendingWrite((0,g.Z)(function*(){return yield I._withRetries(x=>Go(x,m)),delete I.localCache[m],I.notifyServiceWorker(m)}))})()}_poll(){var m=this;return(0,g.Z)(function*(){const I=yield m._withRetries(ie=>{const Oe=ro(ie,!1).getAll();return new fs(Oe).toPromise()});if(!I)return[];if(0!==m.pendingWrites)return[];const x=[],O=new Set;for(const{fbase_key:ie,value:Oe}of I)O.add(ie),JSON.stringify(m.localCache[ie])!==JSON.stringify(Oe)&&(m.notifyListeners(ie,Oe),x.push(ie));for(const ie of Object.keys(m.localCache))m.localCache[ie]&&!O.has(ie)&&(m.notifyListeners(ie,null),x.push(ie));return x})()}notifyListeners(m,I){this.localCache[m]=I;const x=this.listeners[m];if(x)for(const O of Array.from(x))O(I)}startPolling(){var m=this;this.stopPolling(),this.pollTimer=setInterval((0,g.Z)(function*(){return m._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(m,I){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[m]||(this.listeners[m]=new Set,this._get(m)),this.listeners[m].add(I)}_removeListener(m,I){this.listeners[m]&&(this.listeners[m].delete(I),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return v.type="LOCAL",v})();function Dl(v,p){return Yt(v,"POST","/v2/accounts/mfaSignIn:start",Bt(v,p))}function Va(){return(Va=(0,g.Z)(function*(v){return(yield Yt(v,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function ks(v){return new Promise((p,m)=>{const I=document.createElement("script");I.setAttribute("src",v),I.onload=p,I.onerror=x=>{const O=Pe("internal-error");O.customData=x,m(O)},I.type="text/javascript",I.charset="UTF-8",function _r(){var v,p;return null!==(p=null===(v=document.getElementsByTagName("head"))||void 0===v?void 0:v[0])&&void 0!==p?p:document}().appendChild(I)})}function Hi(v){return`__${v}${Math.floor(1e6*Math.random())}`}const kr=1e12;class ps{constructor(p){this.auth=p,this.counter=kr,this._widgets=new Map}render(p,m){const I=this.counter;return this._widgets.set(I,new jn(p,this.auth.name,m||{})),this.counter++,I}reset(p){var m;const I=p||kr;null===(m=this._widgets.get(I))||void 0===m||m.delete(),this._widgets.delete(I)}getResponse(p){var m;return(null===(m=this._widgets.get(p||kr))||void 0===m?void 0:m.getResponse())||""}execute(p){var m=this;return(0,g.Z)(function*(){var I;return null===(I=m._widgets.get(p||kr))||void 0===I||I.execute(),""})()}}class jn{constructor(p,m,I){this.params=I,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const x="string"==typeof p?document.getElementById(p):p;ne(x,"argument-error",{appName:m}),this.container=x,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Eu(v){const p=[],m="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let I=0;I<v;I++)p.push(m.charAt(Math.floor(Math.random()*m.length)));return p.join("")}(50);const{callback:p,"expired-callback":m}=this.params;if(p)try{p(this.responseToken)}catch(I){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,m)try{m()}catch(I){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const uo=Hi("rcb"),Rn=new Ye(3e4,6e4);class zp{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!Bn().grecaptcha}load(p,m=""){return ne(function s_(v){return v.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(v)}(m),p,"argument-error"),this.shouldResolveImmediately(m)?Promise.resolve(Bn().grecaptcha):new Promise((I,x)=>{const O=Bn().setTimeout(()=>{x(Pe(p,"network-request-failed"))},Rn.get());Bn()[uo]=()=>{Bn().clearTimeout(O),delete Bn()[uo];const Oe=Bn().grecaptcha;if(!Oe)return void x(Pe(p,"internal-error"));const et=Oe.render;Oe.render=(gt,Ct)=>{const Cn=et(gt,Ct);return this.counter++,Cn},this.hostLanguage=m,I(Oe)},ks(`https://www.google.com/recaptcha/api.js??${(0,U.xO)({onload:uo,render:"explicit",hl:m})}`).catch(()=>{clearTimeout(O),x(Pe(p,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(p){return!!Bn().grecaptcha&&(p===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class qo{load(p){return(0,g.Z)(function*(){return new ps(p)})()}clearedOneInstance(){}}const Hr="recaptcha",Mh={theme:"light",type:"image"};class Fs{constructor(p,m=Object.assign({},Mh),I){this.parameters=m,this.type=Hr,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=je(I),this.isInvisible="invisible"===this.parameters.size,ne("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const x="string"==typeof p?document.getElementById(p):p;ne(x,this.auth,"argument-error"),this.container=x,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new qo:new zp,this.validateStartingState()}verify(){var p=this;return(0,g.Z)(function*(){p.assertNotDestroyed();const m=yield p.render(),I=p.getAssertedRecaptcha();return I.getResponse(m)||new Promise(O=>{const ie=Oe=>{!Oe||(p.tokenChangeListeners.delete(ie),O(Oe))};p.tokenChangeListeners.add(ie),p.isInvisible&&I.execute(m)})})()}render(){try{this.assertNotDestroyed()}catch(p){return Promise.reject(p)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(p=>{throw this.renderPromise=null,p})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(p=>{this.container.removeChild(p)})}validateStartingState(){ne(!this.parameters.sitekey,this.auth,"argument-error"),ne(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ne("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(p){return m=>{if(this.tokenChangeListeners.forEach(I=>I(m)),"function"==typeof p)p(m);else if("string"==typeof p){const I=Bn()[p];"function"==typeof I&&I(m)}}}assertNotDestroyed(){ne(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var p=this;return(0,g.Z)(function*(){if(yield p.init(),!p.widgetId){let m=p.container;if(!p.isInvisible){const I=document.createElement("div");m.appendChild(I),m=I}p.widgetId=p.getAssertedRecaptcha().render(m,p.parameters)}return p.widgetId})()}init(){var p=this;return(0,g.Z)(function*(){ne(Ve()&&!no(),p.auth,"internal-error"),yield function lo(){let v=null;return new Promise(p=>{"complete"!==document.readyState?(v=()=>p(),window.addEventListener("load",v)):p()}).catch(p=>{throw v&&window.removeEventListener("load",v),p})}(),p.recaptcha=yield p._recaptchaLoader.load(p.auth,p.auth.languageCode||void 0);const m=yield function ao(v){return Va.apply(this,arguments)}(p.auth);ne(m,p.auth,"internal-error"),p.parameters.sitekey=m})()}getAssertedRecaptcha(){return ne(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Zo{constructor(p,m){this.verificationId=p,this.onConfirmation=m}confirm(p){const m=Oo._fromVerification(this.verificationId,p);return this.onConfirmation(m)}}function Qn(v,p,m){return Ba.apply(this,arguments)}function Ba(){return(Ba=(0,g.Z)(function*(v,p,m){const I=je(v),x=yield ni(I,p,(0,U.m9)(m));return new Zo(x,O=>mu(I,O))})).apply(this,arguments)}function ja(v,p,m){return Nh.apply(this,arguments)}function Nh(){return(Nh=(0,g.Z)(function*(v,p,m){const I=(0,U.m9)(v);yield As(!1,I,"phone");const x=yield ni(I.auth,p,(0,U.m9)(m));return new Zo(x,O=>us(I,O))})).apply(this,arguments)}function Ph(v,p,m){return Or.apply(this,arguments)}function Or(){return(Or=(0,g.Z)(function*(v,p,m){const I=(0,U.m9)(v),x=yield ni(I.auth,p,(0,U.m9)(m));return new Zo(x,O=>Lo(I,O))})).apply(this,arguments)}function ni(v,p,m){return Ko.apply(this,arguments)}function Ko(){return(Ko=(0,g.Z)(function*(v,p,m){var I;const x=yield m.verify();try{let O;if(ne("string"==typeof x,v,"argument-error"),ne(m.type===Hr,v,"argument-error"),O="string"==typeof p?{phoneNumber:p}:p,"session"in O){const ie=O.session;if("phoneNumber"in O)return ne("enroll"===ie.type,v,"internal-error"),(yield mr(v,{idToken:ie.credential,phoneEnrollmentInfo:{phoneNumber:O.phoneNumber,recaptchaToken:x}})).phoneSessionInfo.sessionInfo;{ne("signin"===ie.type,v,"internal-error");const Oe=(null===(I=O.multiFactorHint)||void 0===I?void 0:I.uid)||O.multiFactorUid;return ne(Oe,v,"missing-multi-factor-info"),(yield Dl(v,{mfaPendingCredential:ie.credential,mfaEnrollmentId:Oe,phoneSignInInfo:{recaptchaToken:x}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:ie}=yield Op(v,{phoneNumber:O.phoneNumber,recaptchaToken:x});return ie}}finally{m._reset()}})).apply(this,arguments)}function Yo(v,p){return co.apply(this,arguments)}function co(){return(co=(0,g.Z)(function*(v,p){yield yn((0,U.m9)(v),p)})).apply(this,arguments)}let wu=(()=>{class v{constructor(m){this.providerId=v.PROVIDER_ID,this.auth=je(m)}verifyPhoneNumber(m,I){return ni(this.auth,m,(0,U.m9)(I))}static credential(m,I){return Oo._fromVerification(m,I)}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{phoneNumber:I,temporaryProof:x}=m;return I&&x?Oo._fromTokenResponse(I,x):null}}return v.PROVIDER_ID="phone",v.PHONE_SIGN_IN_METHOD="phone",v})();function gs(v,p){return p?re(p):(ne(v._popupRedirectResolver,v,"argument-error"),v._popupRedirectResolver)}class $a extends un{constructor(p){super("custom","custom"),this.params=p}_getIdTokenResponse(p){return nr(p,this._buildIdpRequest())}_linkToIdToken(p,m){return nr(p,this._buildIdpRequest(m))}_getReauthenticationResolver(p){return nr(p,this._buildIdpRequest())}_buildIdpRequest(p){const m={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return p&&(m.idToken=p),m}}function Sl(v){return Ys(v.auth,new $a(v),v.bypassAuthState)}function Pt(v){const{auth:p,user:m}=v;return ne(m,p,"internal-error"),gu(m,new $a(v),v.bypassAuthState)}function Iu(v){return Mn.apply(this,arguments)}function Mn(){return(Mn=(0,g.Z)(function*(v){const{auth:p,user:m}=v;return ne(m,p,"internal-error"),yn(m,new $a(v),v.bypassAuthState)})).apply(this,arguments)}class bu{constructor(p,m,I,x,O=!1){this.auth=p,this.resolver=I,this.user=x,this.bypassAuthState=O,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(m)?m:[m]}execute(){var p=this;return new Promise(function(){var m=(0,g.Z)(function*(I,x){p.pendingPromise={resolve:I,reject:x};try{p.eventManager=yield p.resolver._initialize(p.auth),yield p.onExecution(),p.eventManager.registerConsumer(p)}catch(O){p.reject(O)}});return function(I,x){return m.apply(this,arguments)}}())}onAuthEvent(p){var m=this;return(0,g.Z)(function*(){const{urlResponse:I,sessionId:x,postBody:O,tenantId:ie,error:Oe,type:et}=p;if(Oe)return void m.reject(Oe);const gt={auth:m.auth,requestUri:I,sessionId:x,tenantId:ie||void 0,postBody:O||void 0,user:m.user,bypassAuthState:m.bypassAuthState};try{m.resolve(yield m.getIdpTask(et)(gt))}catch(Ct){m.reject(Ct)}})()}onError(p){this.reject(p)}getIdpTask(p){switch(p){case"signInViaPopup":case"signInViaRedirect":return Sl;case"linkViaPopup":case"linkViaRedirect":return Iu;case"reauthViaPopup":case"reauthViaRedirect":return Pt;default:We(this.auth,"internal-error")}}resolve(p){Ce(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(p),this.unregisterAndCleanUp()}reject(p){Ce(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(p),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const ho=new Ye(2e3,1e4);function o_(v,p,m){return Cu.apply(this,arguments)}function Cu(){return(Cu=(0,g.Z)(function*(v,p,m){const I=je(v);be(v,p,Ss);const x=gs(I,m);return new Du(I,"signInViaPopup",p,x).executeNotNull()})).apply(this,arguments)}function kh(v,p,m){return yr.apply(this,arguments)}function yr(){return(yr=(0,g.Z)(function*(v,p,m){const I=(0,U.m9)(v);be(I.auth,p,Ss);const x=gs(I.auth,m);return new Du(I.auth,"reauthViaPopup",p,x,I).executeNotNull()})).apply(this,arguments)}function Al(v,p,m){return Tu.apply(this,arguments)}function Tu(){return(Tu=(0,g.Z)(function*(v,p,m){const I=(0,U.m9)(v);be(I.auth,p,Ss);const x=gs(I.auth,m);return new Du(I.auth,"linkViaPopup",p,x,I).executeNotNull()})).apply(this,arguments)}let Du=(()=>{class v extends bu{constructor(m,I,x,O,ie){super(m,I,O,ie),this.provider=x,this.authWindow=null,this.pollId=null,v.currentPopupAction&&v.currentPopupAction.cancel(),v.currentPopupAction=this}executeNotNull(){var m=this;return(0,g.Z)(function*(){const I=yield m.execute();return ne(I,m.auth,"internal-error"),I})()}onExecution(){var m=this;return(0,g.Z)(function*(){Ce(1===m.filter.length,"Popup operations only handle one event");const I=jo();m.authWindow=yield m.resolver._openPopup(m.auth,m.provider,m.filter[0],I),m.authWindow.associatedEvent=I,m.resolver._originValidation(m.auth).catch(x=>{m.reject(x)}),m.resolver._isIframeWebStorageSupported(m.auth,x=>{x||m.reject(Pe(m.auth,"web-storage-unsupported"))}),m.pollUserCancellation()})()}get eventId(){var m;return(null===(m=this.authWindow)||void 0===m?void 0:m.associatedEvent)||null}cancel(){this.reject(Pe(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,v.currentPopupAction=null}pollUserCancellation(){const m=()=>{var I,x;this.pollId=(null===(x=null===(I=this.authWindow)||void 0===I?void 0:I.window)||void 0===x?void 0:x.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(Pe(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(m,ho.get())};m()}}return v.currentPopupAction=null,v})();const Sn=new Map;class rr extends bu{constructor(p,m,I=!1){super(p,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],m,void 0,I),this.eventId=null}execute(){var p=()=>super.execute,m=this;return(0,g.Z)(function*(){let I=Sn.get(m.auth._key());if(!I){try{const O=(yield function a_(v,p){return Qo.apply(this,arguments)}(m.resolver,m.auth))?yield p().call(m):null;I=()=>Promise.resolve(O)}catch(x){I=()=>Promise.reject(x)}Sn.set(m.auth._key(),I)}return m.bypassAuthState||Sn.set(m.auth._key(),()=>Promise.resolve(null)),I()})()}onAuthEvent(p){var m=()=>super.onAuthEvent,I=this;return(0,g.Z)(function*(){if("signInViaRedirect"===p.type)return m().call(I,p);if("unknown"!==p.type){if(p.eventId){const x=yield I.auth._redirectUserForId(p.eventId);if(x)return I.user=x,m().call(I,p);I.resolve(null)}}else I.resolve(null)})()}onExecution(){return(0,g.Z)(function*(){})()}cleanUp(){}}function Qo(){return(Qo=(0,g.Z)(function*(v,p){const m=T(p),I=C(v);if(!(yield I._isAvailable()))return!1;const x="true"===(yield I._get(m));return yield I._remove(m),x})).apply(this,arguments)}function po(v,p){return go.apply(this,arguments)}function go(){return(go=(0,g.Z)(function*(v,p){return C(v)._set(T(p),"true")})).apply(this,arguments)}function Oh(){Sn.clear()}function xl(v,p){Sn.set(v._key(),p)}function C(v){return re(v._redirectPersistence)}function T(v){return vt("pendingRedirect",v.config.apiKey,v.name)}function M(v,p,m){return function L(v,p,m){return J.apply(this,arguments)}(v,p,m)}function J(){return(J=(0,g.Z)(function*(v,p,m){const I=je(v);be(v,p,Ss);const x=gs(I,m);return yield po(x,I),x._openRedirect(I,p,"signInViaRedirect")})).apply(this,arguments)}function X(v,p,m){return function xe(v,p,m){return rt.apply(this,arguments)}(v,p,m)}function rt(){return(rt=(0,g.Z)(function*(v,p,m){const I=(0,U.m9)(v);be(I.auth,p,Ss);const x=gs(I.auth,m);yield po(x,I.auth);const O=yield ms(I);return x._openRedirect(I.auth,p,"reauthViaRedirect",O)})).apply(this,arguments)}function mt(v,p,m){return function Et(v,p,m){return kt.apply(this,arguments)}(v,p,m)}function kt(){return(kt=(0,g.Z)(function*(v,p,m){const I=(0,U.m9)(v);be(I.auth,p,Ss);const x=gs(I.auth,m);yield As(!1,I,p.providerId),yield po(x,I.auth);const O=yield ms(I);return x._openRedirect(I.auth,p,"linkViaRedirect",O)})).apply(this,arguments)}function bt(v,p){return Wr.apply(this,arguments)}function Wr(){return(Wr=(0,g.Z)(function*(v,p){return yield je(v)._initializationPromise,Nn(v,p,!1)})).apply(this,arguments)}function Nn(v,p){return ri.apply(this,arguments)}function ri(){return(ri=(0,g.Z)(function*(v,p,m=!1){const I=je(v),x=gs(I,p),ie=yield new rr(I,x,m).execute();return ie&&!m&&(delete ie.user._redirectEventId,yield I._persistUserIfCurrent(ie.user),yield I._setRedirectUser(null,p)),ie})).apply(this,arguments)}function ms(v){return Ci.apply(this,arguments)}function Ci(){return(Ci=(0,g.Z)(function*(v){const p=jo(`${v.uid}:::`);return v._redirectEventId=p,yield v.auth._setRedirectUser(v),yield v.auth._persistUserIfCurrent(v),p})).apply(this,arguments)}class _s{constructor(p){this.auth=p,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(p){this.consumers.add(p),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,p)&&(this.sendToConsumer(this.queuedRedirectEvent,p),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(p){this.consumers.delete(p)}onEvent(p){if(this.hasEventBeenHandled(p))return!1;let m=!1;return this.consumers.forEach(I=>{this.isEventForConsumer(p,I)&&(m=!0,this.sendToConsumer(p,I),this.saveEventToCache(p))}),this.hasHandledPotentialRedirect||!function Ml(v){switch(v.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Rl(v);default:return!1}}(p)||(this.hasHandledPotentialRedirect=!0,m||(this.queuedRedirectEvent=p,m=!0)),m}sendToConsumer(p,m){var I;if(p.error&&!Rl(p)){const x=(null===(I=p.error.code)||void 0===I?void 0:I.split("auth/")[1])||"internal-error";m.onError(Pe(this.auth,x))}else m.onAuthEvent(p)}isEventForConsumer(p,m){const I=null===m.eventId||!!p.eventId&&p.eventId===m.eventId;return m.filter.includes(p.type)&&I}hasEventBeenHandled(p){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(mo(p))}saveEventToCache(p){this.cachedEventUids.add(mo(p)),this.lastProcessedEventTime=Date.now()}}function mo(v){return[v.type,v.eventId,v.sessionId,v.tenantId].filter(p=>p).join("-")}function Rl({type:v,error:p}){return"unknown"===v&&"auth/no-auth-event"===(null==p?void 0:p.code)}function Fh(v){return Lh.apply(this,arguments)}function Lh(){return(Lh=(0,g.Z)(function*(v,p={}){return Yt(v,"GET","/v1/projects",p)})).apply(this,arguments)}const u_=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,_o=/^https?/;function Uh(){return(Uh=(0,g.Z)(function*(v){if(v.config.emulator)return;const{authorizedDomains:p}=yield Fh(v);for(const m of p)try{if(q0(m))return}catch(I){}We(v,"unauthorized-domain")})).apply(this,arguments)}function q0(v){const p=de(),{protocol:m,hostname:I}=new URL(p);if(v.startsWith("chrome-extension://")){const ie=new URL(v);return""===ie.hostname&&""===I?"chrome-extension:"===m&&v.replace("chrome-extension://","")===p.replace("chrome-extension://",""):"chrome-extension:"===m&&ie.hostname===I}if(!_o.test(m))return!1;if(u_.test(v))return I===v;const x=v.replace(/\./g,"\\.");return new RegExp("^(.+\\."+x+"|"+x+")$","i").test(I)}const Gp=new Ye(3e4,6e4);function qp(){const v=Bn().___jsl;if(null==v?void 0:v.H)for(const p of Object.keys(v.H))if(v.H[p].r=v.H[p].r||[],v.H[p].L=v.H[p].L||[],v.H[p].r=[...v.H[p].L],v.CP)for(let m=0;m<v.CP.length;m++)v.CP[m]=null}let Su=null;function Vh(v){return Su=Su||function l_(v){return new Promise((p,m)=>{var I,x,O;function ie(){qp(),gapi.load("gapi.iframes",{callback:()=>{p(gapi.iframes.getContext())},ontimeout:()=>{qp(),m(Pe(v,"network-request-failed"))},timeout:Gp.get()})}if(null===(x=null===(I=Bn().gapi)||void 0===I?void 0:I.iframes)||void 0===x?void 0:x.Iframe)p(gapi.iframes.getContext());else{if(!(null===(O=Bn().gapi)||void 0===O?void 0:O.load)){const Oe=Hi("iframefcb");return Bn()[Oe]=()=>{gapi.load?ie():m(Pe(v,"network-request-failed"))},ks(`https://apis.google.com/js/api.js?onload=${Oe}`).catch(et=>m(et))}ie()}}).catch(p=>{throw Su=null,p})}(v),Su}const yo=new Ye(5e3,15e3),Ha={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},c_=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Au(v){const p=v.config;ne(p.authDomain,v,"auth-domain-config-required");const m=p.emulator?dn(p,"emulator/auth/iframe"):`https://${v.config.authDomain}/__/auth/iframe`,I={apiKey:p.apiKey,appName:v.name,v:N.SDK_VERSION},x=c_.get(v.config.apiHost);x&&(I.eid=x);const O=v._getFrameworks();return O.length&&(I.fw=O.join(",")),`${m}?${(0,U.xO)(I).slice(1)}`}function xu(){return xu=(0,g.Z)(function*(v){const p=yield Vh(v),m=Bn().gapi;return ne(m,v,"internal-error"),p.open({where:document.body,url:Au(v),messageHandlersFilter:m.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Ha,dontclear:!0},I=>new Promise(function(){var x=(0,g.Z)(function*(O,ie){yield I.restyle({setHideOnLeave:!1});const Oe=Pe(v,"network-request-failed"),et=Bn().setTimeout(()=>{ie(Oe)},yo.get());function gt(){Bn().clearTimeout(et),O(I)}I.ping(gt).then(gt,()=>{ie(Oe)})});return function(O,ie){return x.apply(this,arguments)}}()))}),xu.apply(this,arguments)}const Ru={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class id{constructor(p){this.window=p,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(p){}}}function Ls(v,p,m,I,x,O){ne(v.config.authDomain,v,"auth-domain-config-required"),ne(v.config.apiKey,v,"invalid-api-key");const ie={apiKey:v.config.apiKey,appName:v.name,authType:m,redirectUrl:I,v:N.SDK_VERSION,eventId:x};if(p instanceof Ss){p.setDefaultLanguage(v.languageCode),ie.providerId=p.providerId||"",(0,U.xb)(p.getCustomParameters())||(ie.customParameters=JSON.stringify(p.getCustomParameters()));for(const[et,gt]of Object.entries(O||{}))ie[et]=gt}if(p instanceof hi){const et=p.getScopes().filter(gt=>""!==gt);et.length>0&&(ie.scopes=et.join(","))}v.tenantId&&(ie.tid=v.tenantId);const Oe=ie;for(const et of Object.keys(Oe))void 0===Oe[et]&&delete Oe[et];return`${function Jo({config:v}){return v.emulator?dn(v,"emulator/auth/handler"):`https://${v.authDomain}/__/auth/handler`}(v)}?${(0,U.xO)(Oe).slice(1)}`}const Wa="webStorageSupport",Kp=class Zp{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Pr,this._completeRedirectFn=Nn,this._overrideRedirectResult=xl}_openPopup(p,m,I,x){var O=this;return(0,g.Z)(function*(){var ie;Ce(null===(ie=O.eventManagers[p._key()])||void 0===ie?void 0:ie.manager,"_initialize() not called before _openPopup()");const Oe=Ls(p,m,I,de(),x);return function h_(v,p,m,I=500,x=600){const O=Math.max((window.screen.availHeight-x)/2,0).toString(),ie=Math.max((window.screen.availWidth-I)/2,0).toString();let Oe="";const et=Object.assign(Object.assign({},Ru),{width:I.toString(),height:x.toString(),top:O,left:ie}),gt=(0,U.z$)().toLowerCase();m&&(Oe=Ae(gt)?"_blank":m),Z(gt)&&(p=p||"http://localhost",et.scrollbars="yes");const Ct=Object.entries(et).reduce((zi,[Us,Hh])=>`${zi}${Us}=${Hh},`,"");if(function Jr(v=(0,U.z$)()){var p;return Lt(v)&&!!(null===(p=window.navigator)||void 0===p?void 0:p.standalone)}(gt)&&"_self"!==Oe)return function Pl(v,p){const m=document.createElement("a");m.href=v,m.target=p;const I=document.createEvent("MouseEvent");I.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),m.dispatchEvent(I)}(p||"",Oe),new id(null);const Cn=window.open(p||"",Oe,Ct);ne(Cn,v,"popup-blocked");try{Cn.focus()}catch(zi){}return new id(Cn)}(p,Oe,jo())})()}_openRedirect(p,m,I,x){var O=this;return(0,g.Z)(function*(){return yield O._originValidation(p),function Ho(v){Bn().location.href=v}(Ls(p,m,I,de(),x)),new Promise(()=>{})})()}_initialize(p){const m=p._key();if(this.eventManagers[m]){const{manager:x,promise:O}=this.eventManagers[m];return x?Promise.resolve(x):(Ce(O,"If manager is not set, promise should be"),O)}const I=this.initAndGetManager(p);return this.eventManagers[m]={promise:I},I.catch(()=>{delete this.eventManagers[m]}),I}initAndGetManager(p){var m=this;return(0,g.Z)(function*(){const I=yield function d_(v){return xu.apply(this,arguments)}(p),x=new _s(p);return I.register("authEvent",O=>(ne(null==O?void 0:O.authEvent,p,"invalid-auth-event"),{status:x.onEvent(O.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),m.eventManagers[p._key()]={manager:x},m.iframes[p._key()]=I,x})()}_isIframeWebStorageSupported(p,m){this.iframes[p._key()].send(Wa,{type:Wa},x=>{var O;const ie=null===(O=null==x?void 0:x[0])||void 0===O?void 0:O[Wa];void 0!==ie&&m(!!ie),We(p,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(p){const m=p._key();return this.originValidationPromises[m]||(this.originValidationPromises[m]=function Nl(v){return Uh.apply(this,arguments)}(p)),this.originValidationPromises[m]}get _shouldInitProactively(){return Rr()||G()||Lt()}};class Yp extends class g_{constructor(p){this.factorId=p}_process(p,m,I){switch(m.type){case"enroll":return this._finalizeEnroll(p,m.credential,I);case"signin":return this._finalizeSignIn(p,m.credential);default:return fe("unexpected MultiFactorSessionType")}}}{constructor(p){super("phone"),this.credential=p}static _fromCredential(p){return new Yp(p)}_finalizeEnroll(p,m,I){return function Ah(v,p){return Yt(v,"POST","/v2/accounts/mfaEnrollment:finalize",Bt(v,p))}(p,{idToken:m,displayName:I,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(p,m){return function Cr(v,p){return Yt(v,"POST","/v2/accounts/mfaSignIn:finalize",Bt(v,p))}(p,{mfaPendingCredential:m,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Qp=(()=>{class v{constructor(){}static assertion(m){return Yp._fromCredential(m)}}return v.FACTOR_ID="phone",v})();var $h="@firebase/auth";class m_{constructor(p){this.auth=p,this.internalListeners=new Map}getUid(){var p;return this.assertAuthConfigured(),(null===(p=this.auth.currentUser)||void 0===p?void 0:p.uid)||null}getToken(p){var m=this;return(0,g.Z)(function*(){return m.assertAuthConfigured(),yield m.auth._initializationPromise,m.auth.currentUser?{accessToken:yield m.auth.currentUser.getIdToken(p)}:null})()}addAuthTokenListener(p){if(this.assertAuthConfigured(),this.internalListeners.has(p))return;const m=this.auth.onIdTokenChanged(I=>{var x;p((null===(x=I)||void 0===x?void 0:x.stsTokenManager.accessToken)||null)});this.internalListeners.set(p,m),this.updateProactiveRefresh()}removeAuthTokenListener(p){this.assertAuthConfigured();const m=this.internalListeners.get(p);!m||(this.internalListeners.delete(p),m(),this.updateProactiveRefresh())}assertAuthConfigured(){ne(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Z0(v=(0,N.getApp)()){const p=(0,N._getProvider)(v,"auth");return p.isInitialized()?p.getImmediate():function oe(v,p){const m=(0,N._getProvider)(v,"auth");if(m.isInitialized()){const x=m.getImmediate(),O=m.getOptions();if((0,U.vZ)(O,null!=p?p:{}))return x;We(x,"already-initialized")}return m.initialize({options:p})}(v,{popupRedirectResolver:Kp,persistence:[oo,st,Pr]})}!function sd(v){(0,N._registerComponent)(new ye.wA("auth",(p,{options:m})=>{const I=p.getProvider("app").getImmediate(),x=p.getProvider("heartbeat"),{apiKey:O,authDomain:ie}=I.options;return((Oe,et)=>{ne(O&&!O.includes(":"),"invalid-api-key",{appName:Oe.name}),ne(!(null==ie?void 0:ie.includes(":")),"argument-error",{appName:Oe.name});const gt={apiKey:O,authDomain:ie,clientPlatform:v,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:dr(v)},Ct=new Xr(Oe,et,gt);return function we(v,p){const m=(null==p?void 0:p.persistence)||[],I=(Array.isArray(m)?m:[m]).map(re);(null==p?void 0:p.errorMap)&&v._updateErrorMap(p.errorMap),v._initializeWithPersistence(I,null==p?void 0:p.popupRedirectResolver)}(Ct,m),Ct})(I,x)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((p,m,I)=>{p.getProvider("auth-internal").initialize()})),(0,N._registerComponent)(new ye.wA("auth-internal",p=>{const m=je(p.getProvider("auth").getImmediate());return new m_(m)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,N.registerVersion)($h,"0.20.1",function Xp(v){switch(v){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(v)),(0,N.registerVersion)($h,"0.20.1","esm2017")}("Browser")},2090:(nt,De,k)=>{k.d(De,{$s:()=>$t,BH:()=>Ge,DV:()=>Yt,G6:()=>ne,GJ:()=>en,L:()=>le,LL:()=>de,Mn:()=>be,Pz:()=>Ft,Sg:()=>Ne,UG:()=>_e,UI:()=>yi,US:()=>ye,Yr:()=>qe,ZB:()=>j,ZR:()=>we,b$:()=>We,cI:()=>Kt,d:()=>Pe,dS:()=>ts,eu:()=>Ce,g5:()=>N,gK:()=>ir,gQ:()=>qn,h$:()=>pe,hl:()=>fe,hu:()=>U,jU:()=>Se,m9:()=>fn,ne:()=>Li,p$:()=>W,pd:()=>vi,r3:()=>Bt,ru:()=>ze,tV:()=>ve,uI:()=>He,ug:()=>jt,vZ:()=>Ar,w1:()=>ke,w9:()=>hn,xO:()=>Fi,xb:()=>In,z$:()=>Ue,zI:()=>K,zd:()=>ai});const U=function(V,z){if(!V)throw N(z)},N=function(V){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+V)},ae=function(V){const z=[];let q=0;for(let Ie=0;Ie<V.length;Ie++){let $=V.charCodeAt(Ie);$<128?z[q++]=$:$<2048?(z[q++]=$>>6|192,z[q++]=63&$|128):55296==(64512&$)&&Ie+1<V.length&&56320==(64512&V.charCodeAt(Ie+1))?($=65536+((1023&$)<<10)+(1023&V.charCodeAt(++Ie)),z[q++]=$>>18|240,z[q++]=$>>12&63|128,z[q++]=$>>6&63|128,z[q++]=63&$|128):(z[q++]=$>>12|224,z[q++]=$>>6&63|128,z[q++]=63&$|128)}return z},ye={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(V,z){if(!Array.isArray(V))throw Error("encodeByteArray takes an array as a parameter");this.init_();const q=z?this.byteToCharMapWebSafe_:this.byteToCharMap_,Ie=[];for(let $=0;$<V.length;$+=3){const ee=V[$],Fe=$+1<V.length,Xe=Fe?V[$+1]:0,ht=$+2<V.length,St=ht?V[$+2]:0;let er=(15&Xe)<<2|St>>6,ce=63&St;ht||(ce=64,Fe||(er=64)),Ie.push(q[ee>>2],q[(3&ee)<<4|Xe>>4],q[er],q[ce])}return Ie.join("")},encodeString(V,z){return this.HAS_NATIVE_SUPPORT&&!z?btoa(V):this.encodeByteArray(ae(V),z)},decodeString(V,z){return this.HAS_NATIVE_SUPPORT&&!z?atob(V):function(V){const z=[];let q=0,Ie=0;for(;q<V.length;){const $=V[q++];if($<128)z[Ie++]=String.fromCharCode($);else if($>191&&$<224){const ee=V[q++];z[Ie++]=String.fromCharCode((31&$)<<6|63&ee)}else if($>239&&$<365){const ht=((7&$)<<18|(63&V[q++])<<12|(63&V[q++])<<6|63&V[q++])-65536;z[Ie++]=String.fromCharCode(55296+(ht>>10)),z[Ie++]=String.fromCharCode(56320+(1023&ht))}else{const ee=V[q++],Fe=V[q++];z[Ie++]=String.fromCharCode((15&$)<<12|(63&ee)<<6|63&Fe)}}return z.join("")}(this.decodeStringToByteArray(V,z))},decodeStringToByteArray(V,z){this.init_();const q=z?this.charToByteMapWebSafe_:this.charToByteMap_,Ie=[];for(let $=0;$<V.length;){const ee=q[V.charAt($++)],Xe=$<V.length?q[V.charAt($)]:0;++$;const St=$<V.length?q[V.charAt($)]:64;++$;const vt=$<V.length?q[V.charAt($)]:64;if(++$,null==ee||null==Xe||null==St||null==vt)throw Error();Ie.push(ee<<2|Xe>>4),64!==St&&(Ie.push(Xe<<4&240|St>>2),64!==vt&&Ie.push(St<<6&192|vt))}return Ie},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let V=0;V<this.ENCODED_VALS.length;V++)this.byteToCharMap_[V]=this.ENCODED_VALS.charAt(V),this.charToByteMap_[this.byteToCharMap_[V]]=V,this.byteToCharMapWebSafe_[V]=this.ENCODED_VALS_WEBSAFE.charAt(V),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[V]]=V,V>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(V)]=V,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(V)]=V)}}},pe=function(V){const z=ae(V);return ye.encodeByteArray(z,!0)},le=function(V){return pe(V).replace(/\./g,"")},ve=function(V){try{return ye.decodeString(V,!0)}catch(z){console.error("base64Decode failed: ",z)}return null};function W(V){return j(void 0,V)}function j(V,z){if(!(z instanceof Object))return z;switch(z.constructor){case Date:return new Date(z.getTime());case Object:void 0===V&&(V={});break;case Array:V=[];break;default:return z}for(const q in z)!z.hasOwnProperty(q)||!se(q)||(V[q]=j(V[q],z[q]));return V}function se(V){return"__proto__"!==V}class Ge{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((z,q)=>{this.resolve=z,this.reject=q})}wrapCallback(z){return(q,Ie)=>{q?this.reject(q):this.resolve(Ie),"function"==typeof z&&(this.promise.catch(()=>{}),1===z.length?z(q):z(q,Ie))}}}function Ne(V,z){if(V.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const Ie=z||"demo-project",$=V.iat||0,ee=V.sub||V.user_id;if(!ee)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Fe=Object.assign({iss:`https://securetoken.google.com/${Ie}`,aud:Ie,iat:$,exp:$+3600,auth_time:$,sub:ee,user_id:ee,firebase:{sign_in_provider:"custom",identities:{}}},V);return[le(JSON.stringify({alg:"none",type:"JWT"})),le(JSON.stringify(Fe)),""].join(".")}function Ue(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function He(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ue())}function _e(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(V){return!1}}function Se(){return"object"==typeof self&&self.self===self}function ze(){const V="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof V&&void 0!==V.id}function We(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Pe(){return Ue().indexOf("Electron/")>=0}function ke(){const V=Ue();return V.indexOf("MSIE ")>=0||V.indexOf("Trident/")>=0}function be(){return Ue().indexOf("MSAppHost/")>=0}function qe(){return!1}function ne(){return!_e()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function fe(){return"object"==typeof indexedDB}function Ce(){return new Promise((V,z)=>{try{let q=!0;const Ie="validate-browser-context-for-indexeddb-analytics-module",$=self.indexedDB.open(Ie);$.onsuccess=()=>{$.result.close(),q||self.indexedDB.deleteDatabase(Ie),V(!0)},$.onupgradeneeded=()=>{q=!1},$.onerror=()=>{var ee;z((null===(ee=$.error)||void 0===ee?void 0:ee.message)||"")}}catch(q){z(q)}})}function K(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class we extends Error{constructor(z,q,Ie){super(q),this.code=z,this.customData=Ie,this.name="FirebaseError",Object.setPrototypeOf(this,we.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,de.prototype.create)}}class de{constructor(z,q,Ie){this.service=z,this.serviceName=q,this.errors=Ie}create(z,...q){const Ie=q[0]||{},$=`${this.service}/${z}`,ee=this.errors[z],Fe=ee?function Ve(V,z){return V.replace(dt,(q,Ie)=>{const $=z[Ie];return null!=$?String($):`<${Ie}?>`})}(ee,Ie):"Error";return new we($,`${this.serviceName}: ${Fe} (${$}).`,Ie)}}const dt=/\{\$([^}]+)}/g;function Kt(V){return JSON.parse(V)}function Ft(V){return JSON.stringify(V)}const Ye=function(V){let z={},q={},Ie={},$="";try{const ee=V.split(".");z=Kt(ve(ee[0])||""),q=Kt(ve(ee[1])||""),$=ee[2],Ie=q.d||{},delete q.d}catch(ee){}return{header:z,claims:q,data:Ie,signature:$}},hn=function(V){const q=Ye(V).claims;return!!q&&"object"==typeof q&&q.hasOwnProperty("iat")},en=function(V){const z=Ye(V).claims;return"object"==typeof z&&!0===z.admin};function Bt(V,z){return Object.prototype.hasOwnProperty.call(V,z)}function Yt(V,z){if(Object.prototype.hasOwnProperty.call(V,z))return V[z]}function In(V){for(const z in V)if(Object.prototype.hasOwnProperty.call(V,z))return!1;return!0}function yi(V,z,q){const Ie={};for(const $ in V)Object.prototype.hasOwnProperty.call(V,$)&&(Ie[$]=z.call(q,V[$],$,V));return Ie}function Ar(V,z){if(V===z)return!0;const q=Object.keys(V),Ie=Object.keys(z);for(const $ of q){if(!Ie.includes($))return!1;const ee=V[$],Fe=z[$];if(Dn(ee)&&Dn(Fe)){if(!Ar(ee,Fe))return!1}else if(ee!==Fe)return!1}for(const $ of Ie)if(!q.includes($))return!1;return!0}function Dn(V){return null!==V&&"object"==typeof V}function Fi(V){const z=[];for(const[q,Ie]of Object.entries(V))Array.isArray(Ie)?Ie.forEach($=>{z.push(encodeURIComponent(q)+"="+encodeURIComponent($))}):z.push(encodeURIComponent(q)+"="+encodeURIComponent(Ie));return z.length?"&"+z.join("&"):""}function ai(V){const z={};return V.replace(/^\?/,"").split("&").forEach(Ie=>{if(Ie){const[$,ee]=Ie.split("=");z[decodeURIComponent($)]=decodeURIComponent(ee)}}),z}function vi(V){const z=V.indexOf("?");if(!z)return"";const q=V.indexOf("#",z);return V.substring(z,q>0?q:void 0)}class qn{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let z=1;z<this.blockSize;++z)this.pad_[z]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(z,q){q||(q=0);const Ie=this.W_;if("string"==typeof z)for(let vt=0;vt<16;vt++)Ie[vt]=z.charCodeAt(q)<<24|z.charCodeAt(q+1)<<16|z.charCodeAt(q+2)<<8|z.charCodeAt(q+3),q+=4;else for(let vt=0;vt<16;vt++)Ie[vt]=z[q]<<24|z[q+1]<<16|z[q+2]<<8|z[q+3],q+=4;for(let vt=16;vt<80;vt++){const er=Ie[vt-3]^Ie[vt-8]^Ie[vt-14]^Ie[vt-16];Ie[vt]=4294967295&(er<<1|er>>>31)}let St,an,$=this.chain_[0],ee=this.chain_[1],Fe=this.chain_[2],Xe=this.chain_[3],ht=this.chain_[4];for(let vt=0;vt<80;vt++){vt<40?vt<20?(St=Xe^ee&(Fe^Xe),an=1518500249):(St=ee^Fe^Xe,an=1859775393):vt<60?(St=ee&Fe|Xe&(ee|Fe),an=2400959708):(St=ee^Fe^Xe,an=3395469782);const er=($<<5|$>>>27)+St+ht+an+Ie[vt]&4294967295;ht=Xe,Xe=Fe,Fe=4294967295&(ee<<30|ee>>>2),ee=$,$=er}this.chain_[0]=this.chain_[0]+$&4294967295,this.chain_[1]=this.chain_[1]+ee&4294967295,this.chain_[2]=this.chain_[2]+Fe&4294967295,this.chain_[3]=this.chain_[3]+Xe&4294967295,this.chain_[4]=this.chain_[4]+ht&4294967295}update(z,q){if(null==z)return;void 0===q&&(q=z.length);const Ie=q-this.blockSize;let $=0;const ee=this.buf_;let Fe=this.inbuf_;for(;$<q;){if(0===Fe)for(;$<=Ie;)this.compress_(z,$),$+=this.blockSize;if("string"==typeof z){for(;$<q;)if(ee[Fe]=z.charCodeAt($),++Fe,++$,Fe===this.blockSize){this.compress_(ee),Fe=0;break}}else for(;$<q;)if(ee[Fe]=z[$],++Fe,++$,Fe===this.blockSize){this.compress_(ee),Fe=0;break}}this.inbuf_=Fe,this.total_+=q}digest(){const z=[];let q=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let $=this.blockSize-1;$>=56;$--)this.buf_[$]=255&q,q/=256;this.compress_(this.buf_);let Ie=0;for(let $=0;$<5;$++)for(let ee=24;ee>=0;ee-=8)z[Ie]=this.chain_[$]>>ee&255,++Ie;return z}}function Li(V,z){const q=new ft(V,z);return q.subscribe.bind(q)}class ft{constructor(z,q){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=q,this.task.then(()=>{z(this)}).catch(Ie=>{this.error(Ie)})}next(z){this.forEachObserver(q=>{q.next(z)})}error(z){this.forEachObserver(q=>{q.error(z)}),this.close(z)}complete(){this.forEachObserver(z=>{z.complete()}),this.close()}subscribe(z,q,Ie){let $;if(void 0===z&&void 0===q&&void 0===Ie)throw new Error("Missing Observer.");$=function En(V,z){if("object"!=typeof V||null===V)return!1;for(const q of z)if(q in V&&"function"==typeof V[q])return!0;return!1}(z,["next","error","complete"])?z:{next:z,error:q,complete:Ie},void 0===$.next&&($.next=tn),void 0===$.error&&($.error=tn),void 0===$.complete&&($.complete=tn);const ee=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?$.error(this.finalError):$.complete()}catch(Fe){}}),this.observers.push($),ee}unsubscribeOne(z){void 0===this.observers||void 0===this.observers[z]||(delete this.observers[z],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(z){if(!this.finalized)for(let q=0;q<this.observers.length;q++)this.sendOne(q,z)}sendOne(z,q){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[z])try{q(this.observers[z])}catch(Ie){"undefined"!=typeof console&&console.error&&console.error(Ie)}})}close(z){this.finalized||(this.finalized=!0,void 0!==z&&(this.finalError=z),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function tn(){}function ir(V,z){return`${V} failed: ${z} argument `}const ts=function(V){const z=[];let q=0;for(let Ie=0;Ie<V.length;Ie++){let $=V.charCodeAt(Ie);if($>=55296&&$<=56319){const ee=$-55296;Ie++,U(Ie<V.length,"Surrogate pair missing trail surrogate."),$=65536+(ee<<10)+(V.charCodeAt(Ie)-56320)}$<128?z[q++]=$:$<2048?(z[q++]=$>>6|192,z[q++]=63&$|128):$<65536?(z[q++]=$>>12|224,z[q++]=$>>6&63|128,z[q++]=63&$|128):(z[q++]=$>>18|240,z[q++]=$>>12&63|128,z[q++]=$>>6&63|128,z[q++]=63&$|128)}return z},jt=function(V){let z=0;for(let q=0;q<V.length;q++){const Ie=V.charCodeAt(q);Ie<128?z++:Ie<2048?z+=2:Ie>=55296&&Ie<=56319?(z+=4,q++):z+=3}return z};function $t(V,z=1e3,q=2){const Ie=z*Math.pow(q,V),$=Math.round(.5*Ie*(Math.random()-.5)*2);return Math.min(144e5,Ie+$)}function fn(V){return V&&V._delegate?V._delegate:V}},5385:(nt,De,k)=>{var g=k(5e3);let U=null;function N(){return U}const pe=new g.OlP("DocumentToken");let le=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:function(){return function ve(){return(0,g.LFG)(j)}()},providedIn:"platform"}),n})();const W=new g.OlP("Location Initialized");let j=(()=>{class n extends le{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return N().getBaseHref(this._doc)}onPopState(t){const r=N().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=N().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,i){se()?this._history.pushState(t,r,i):this.location.hash=i}replaceState(t,r,i){se()?this._history.replaceState(t,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(pe))},n.\u0275prov=g.Yz7({token:n,factory:function(){return function Ge(){return new j((0,g.LFG)(pe))}()},providedIn:"platform"}),n})();function se(){return!!window.history.pushState}function Ne(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Ue(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function He(n){return n&&"?"!==n[0]?"?"+n:n}let _e=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:function(){return function Se(n){const e=(0,g.LFG)(pe).location;return new We((0,g.LFG)(le),e&&e.origin||"")}()},providedIn:"root"}),n})();const ze=new g.OlP("appBaseHref");let We=(()=>{class n extends _e{constructor(t,r){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Ne(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+He(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,u){const c=this.prepareExternalUrl(i+He(u));this._platformLocation.pushState(t,r,c)}replaceState(t,r,i,u){const c=this.prepareExternalUrl(i+He(u));this._platformLocation.replaceState(t,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(le),g.LFG(ze,8))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})(),Pe=(()=>{class n extends _e{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Ne(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,u){let c=this.prepareExternalUrl(i+He(u));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.pushState(t,r,c)}replaceState(t,r,i,u){let c=this.prepareExternalUrl(i+He(u));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(le),g.LFG(ze,8))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})(),ke=(()=>{class n{constructor(t,r){this._subject=new g.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const i=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=Ue(ne(i)),this._platformStrategy.onPopState(u=>{this._subject.emit({url:this.path(!0),pop:!0,state:u.state,type:u.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+He(r))}normalize(t){return n.stripTrailingSlash(function qe(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,ne(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._platformStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+He(r)),i)}replaceState(t,r="",i=null){this._platformStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+He(r)),i)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformStrategy).historyGo)||void 0===i||i.call(r,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=He,n.joinWithSlash=Ne,n.stripTrailingSlash=Ue,n.\u0275fac=function(t){return new(t||n)(g.LFG(_e),g.LFG(le))},n.\u0275prov=g.Yz7({token:n,factory:function(){return function be(){return new ke((0,g.LFG)(_e),(0,g.LFG)(le))}()},providedIn:"root"}),n})();function ne(n){return n.replace(/\/index.html$/,"")}class Po{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let tr=(()=>{class n{constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,u,c)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new Po(i.item,this._ngForOf,-1,-1),null===c?void 0:c);else if(null==c)r.remove(null===u?void 0:u);else if(null!==u){const h=r.get(u);r.move(h,c),Ts(h,i)}});for(let i=0,u=r.length;i<u;i++){const h=r.get(i).context;h.index=i,h.count=u,h.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{Ts(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(g.s_b),g.Y36(g.Rgc),g.Y36(g.ZZ4))},n.\u0275dir=g.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();function Ts(n,e){n.context.$implicit=e.item}let hr=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new pn,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){Nc("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){Nc("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(g.s_b),g.Y36(g.Rgc))},n.\u0275dir=g.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class pn{constructor(){this.$implicit=null,this.ngIf=null}}function Nc(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,g.AaK)(e)}'.`)}let Ks=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({}),n})();function Nr(n){return"server"===n}let fu=(()=>{class n{}return n.\u0275prov=(0,g.Yz7)({token:n,providedIn:"root",factory:()=>new pu((0,g.LFG)(pe),window)}),n})();class pu{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function as(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const u=i.shadowRoot;if(u){const c=u.getElementById(e)||u.querySelector(`[name="${e}"]`);if(c)return c}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,u=this.offset();this.window.scrollTo(r-u[0],i-u[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=pl(this.window.history)||pl(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function pl(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class As extends class wa extends class ye{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function ue(n){U||(U=n)}(new As)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function gu(){return gn=gn||document.querySelector("base"),gn?gn.getAttribute("href"):null}();return null==t?null:function Ys(n){Ia=Ia||document.createElement("a"),Ia.setAttribute("href",n);const e=Ia.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){gn=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function Ro(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,u]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(u)}return null}(document.cookie,e)}}let Ia,gn=null;const fr=new g.OlP("TRANSITION_ID"),Ln=[{provide:g.ip1,useFactory:function mu(n,e,t){return()=>{t.get(g.CZH).donePromise.then(()=>{const r=N(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let u=0;u<i.length;u++)r.remove(i[u])})}},deps:[fr,pe,g.zs3],multi:!0}];class us{static init(){(0,g.VLi)(new us)}addToWindow(e){g.dqk.getAngularTestability=(r,i=!0)=>{const u=e.findTestabilityInTree(r,i);if(null==u)throw new Error("Could not find testability for element.");return u},g.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),g.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),g.dqk.frameworkStabilizers||(g.dqk.frameworkStabilizers=[]),g.dqk.frameworkStabilizers.push(r=>{const i=g.dqk.getAllAngularTestabilities();let u=i.length,c=!1;const h=function(_){c=c||_,u--,0==u&&r(c)};i.forEach(function(_){_.whenStable(h)})})}findTestabilityInTree(e,t,r){if(null==t)return null;const i=e.getTestability(t);return null!=i?i:r?N().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let pr=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();const Lo=new g.OlP("EventManagerPlugins");let Bi=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let u=0;u<i.length;u++){const c=i[u];if(c.supports(t))return this._eventNameToPlugin.set(t,c),c}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(Lo),g.LFG(g.R0b))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();class ml{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=N().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let ei=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})(),xs=(()=>{class n extends ei{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(u=>{const c=this._doc.createElement("style");c.textContent=u,i.push(r.appendChild(c))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(Rs),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Rs))}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(pe))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();function Rs(n){N().remove(n)}const pt={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},ba=/%COMP%/g;function Me(n,e,t){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?Me(n,i,t):(i=i.replace(ba,n),t.push(i))}return t}function Ht(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let Un=(()=>{class n{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new Ms(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case g.ifc.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new yl(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case 1:case g.ifc.ShadowDom:return new vl(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=Me(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(Bi),g.LFG(xs),g.LFG(g.AFp))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();class Ms{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(pt[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,r){e&&e.insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const u=pt[i];u?e.setAttributeNS(u,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=pt[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(g.JOm.DashCase|g.JOm.Important)?e.style.setProperty(t,r,i&g.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&g.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Ht(r)):this.eventManager.addEventListener(e,t,Ht(r))}}class yl extends Ms{constructor(e,t,r,i){super(e),this.component=r;const u=Me(i+"-"+r.id,r.styles,[]);t.addStyles(u),this.contentAttr=function Da(n){return"_ngcontent-%COMP%".replace(ba,n)}(i+"-"+r.id),this.hostAttr=function Ch(n){return"_nghost-%COMP%".replace(ba,n)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class vl extends Ms{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const u=Me(i.id,i.styles,[]);for(let c=0;c<u.length;c++){const h=document.createElement("style");h.textContent=u[c],this.shadowRoot.appendChild(h)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let Wc=(()=>{class n extends ml{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(pe))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();const zc=["alt","control","meta","shift"],Uo={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},sr={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Ii={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let El=(()=>{class n extends ml{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const u=n.parseEventName(r),c=n.eventCallback(u.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>N().onAndCancel(t,u.domEventName,c))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const u=n._normalizeKey(r.pop());let c="";if(zc.forEach(_=>{const w=r.indexOf(_);w>-1&&(r.splice(w,1),c+=_+".")}),c+=u,0!=r.length||0===u.length)return null;const h={};return h.domEventName=i,h.fullKey=c,h}static getEventFullKey(t){let r="",i=function ji(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&sr.hasOwnProperty(e)&&(e=sr[e]))}return Uo[e]||e}(t);return i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),zc.forEach(u=>{u!=i&&Ii[u](t)&&(r+=u+".")}),r+=i,r}static eventCallback(t,r,i){return u=>{n.getEventFullKey(u)===t&&i.runGuarded(()=>r(u))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(pe))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();const qc=(0,g.eFA)(g._c5,"browser",[{provide:g.Lbi,useValue:"browser"},{provide:g.g9A,useValue:function ls(){As.makeCurrent(),us.init()},multi:!0},{provide:pe,useFactory:function Gc(){return(0,g.RDi)(document),document},deps:[]}]),Qs=[{provide:g.zSh,useValue:"root"},{provide:g.qLn,useFactory:function Ra(){return new g.qLn},deps:[]},{provide:Lo,useClass:Wc,multi:!0,deps:[pe,g.R0b,g.Lbi]},{provide:Lo,useClass:El,multi:!0,deps:[pe]},{provide:Un,useClass:Un,deps:[Bi,xs,g.AFp]},{provide:g.FYo,useExisting:Un},{provide:ei,useExisting:xs},{provide:xs,useClass:xs,deps:[pe]},{provide:g.dDg,useClass:g.dDg,deps:[g.R0b]},{provide:Bi,useClass:Bi,deps:[Lo,g.R0b]},{provide:class yn{},useClass:pr,deps:[]}];let wl=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:g.AFp,useValue:t.appId},{provide:fr,useExisting:g.AFp},Ln]}}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(n,12))},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({providers:Qs,imports:[Ks,g.hGG]}),n})();"undefined"!=typeof window&&window;var Yn=k(8996),Cl=k(7669);function st(...n){const e=(0,Cl.yG)(n);return(0,Yn.D)(n,e)}var Ns=k(7579);class Pr extends Ns.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}var bi=k(8306);const{isArray:Tl}=Array,{getPrototypeOf:jo,prototype:$o,keys:Bn}=Object;var hs=k(4671),Rt=k(4004);const{isArray:Jc}=Array;var xn=k(5403),vu=k(9672);function fs(...n){const e=(0,Cl.yG)(n),t=(0,Cl.jO)(n),{args:r,keys:i}=function Ho(n){if(1===n.length){const e=n[0];if(Tl(e))return{args:e,keys:null};if(function no(n){return n&&"object"==typeof n&&jo(n)===$o}(e)){const t=Bn(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}(n);if(0===r.length)return(0,Yn.D)([],e);const u=new bi.y(function ro(n,e,t=hs.y){return r=>{ti(e,()=>{const{length:i}=n,u=new Array(i);let c=i,h=i;for(let _=0;_<i;_++)ti(e,()=>{const w=(0,Yn.D)(n[_],e);let D=!1;w.subscribe((0,xn.x)(r,S=>{u[_]=S,D||(D=!0,h--),h||r.next(t(u.slice()))},()=>{--c||r.complete()}))},r)},r)}}(r,e,i?c=>function Rh(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}(i,c):hs.y));return t?u.pipe(function ed(n){return(0,Rt.U)(e=>function Xc(n,e){return Jc(e)?n(...e):n(e)}(n,e))}(t)):u}function ti(n,e,t){n?(0,vu.f)(t,n,e):e()}var Wo=k(576);function io(n,e){const t=(0,Wo.m)(n)?n:()=>n,r=i=>i.error(t());return new bi.y(e?i=>e.schedule(r,0,i):r)}const zo=(0,k(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var Ps=k(8189);function Fa(...n){return function Go(){return(0,Ps.J)(1)}()((0,Yn.D)(n,(0,Cl.yG)(n)))}var La=k(8421);function Ua(n){return new bi.y(e=>{(0,La.Xf)(n()).subscribe(e)})}var oo=k(515),Dl=k(727),Cr=k(4482);function ao(){return(0,Cr.e)((n,e)=>{let t=null;n._refCount++;const r=(0,xn.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,u=t;t=null,i&&(!u||i===u)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class Va extends bi.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,Cr.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,null==e||e.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Dl.w0;const t=this.getSubject();e.add(this.source.subscribe((0,xn.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Dl.w0.EMPTY)}return e}refCount(){return ao()(this)}}function _r(n,e){return(0,Cr.e)((t,r)=>{let i=null,u=0,c=!1;const h=()=>c&&!i&&r.complete();t.subscribe((0,xn.x)(r,_=>{null==i||i.unsubscribe();let w=0;const D=u++;(0,La.Xf)(n(_,D)).subscribe(i=(0,xn.x)(r,S=>r.next(e?e(_,S,D,w++):S),()=>{i=null,h()}))},()=>{c=!0,h()}))})}var ks=k(5698);function Hi(...n){const e=(0,Cl.yG)(n);return(0,Cr.e)((t,r)=>{(e?Fa(n,t,e):Fa(n,t)).subscribe(r)})}function Os(n,e,t,r,i){return(u,c)=>{let h=t,_=e,w=0;u.subscribe((0,xn.x)(c,D=>{const S=w++;_=h?n(_,D,S):(h=!0,D),r&&c.next(_)},i&&(()=>{h&&c.next(_),c.complete()})))}}function Wi(n,e){return(0,Cr.e)(Os(n,e,arguments.length>=2,!0))}function kr(n,e){return(0,Cr.e)((t,r)=>{let i=0;t.subscribe((0,xn.x)(r,u=>n.call(e,u,i++)&&r.next(u)))})}function ps(n){return(0,Cr.e)((e,t)=>{let u,r=null,i=!1;r=e.subscribe((0,xn.x)(t,void 0,void 0,c=>{u=(0,La.Xf)(n(c,ps(n)(e))),r?(r.unsubscribe(),r=null,u.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,u.subscribe(t))})}var jn=k(5577);function Eu(n,e){return(0,Wo.m)(e)?(0,jn.z)(n,e,1):(0,jn.z)(n,1)}function uo(n){return n<=0?()=>oo.E:(0,Cr.e)((e,t)=>{let r=[];e.subscribe((0,xn.x)(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function Rn(n=Wp){return(0,Cr.e)((e,t)=>{let r=!1;e.subscribe((0,xn.x)(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function Wp(){return new zo}function zp(n){return(0,Cr.e)((e,t)=>{let r=!1;e.subscribe((0,xn.x)(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function qo(n,e){const t=arguments.length>=2;return r=>r.pipe(n?kr((i,u)=>n(i,u,r)):hs.y,(0,ks.q)(1),t?zp(e):Rn(()=>new zo))}var Hr=k(8505);class Fs{constructor(e,t){this.id=e,this.url=t}}class lo extends Fs{constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Zo extends Fs{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Qn extends Fs{constructor(e,t,r){super(e,t),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Ba extends Fs{constructor(e,t,r){super(e,t),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class ja extends Fs{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Nh extends Fs{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ph extends Fs{constructor(e,t,r,i,u){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=u}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Or extends Fs{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ni extends Fs{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ko{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Yo{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class co{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class wu{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class gs{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class $a{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Sl{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Pt="primary";class Iu{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Mn(n){return new Iu(n)}const bu="ngNavigationCancelingError";function ho(n){const e=Error("NavigationCancelingError: "+n);return e[bu]=!0,e}function Cu(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let u=0;u<r.length;u++){const c=r[u],h=n[u];if(c.startsWith(":"))i[c.substring(1)]=h;else if(c!==h.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function yr(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let u=0;u<t.length;u++)if(i=t[u],!Al(n[i],e[i]))return!1;return!0}function Al(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,u)=>r[u]===i)}return n===e}function Tu(n){return Array.prototype.concat.apply([],n)}function Du(n){return n.length>0?n[n.length-1]:null}function Sn(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function rr(n){return(0,g.CqO)(n)?n:(0,g.QGY)(n)?(0,Yn.D)(Promise.resolve(n)):st(n)}const Qo={exact:function xl(n,e,t){if(!mt(n.segments,e.segments)||!L(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!xl(n.children[r],e.children[r],t))return!1;return!0},subset:T},po={exact:function Oh(n,e){return yr(n,e)},subset:function C(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>Al(n[t],e[t]))},ignored:()=>!0};function go(n,e,t){return Qo[t.paths](n.root,e.root,t.matrixParams)&&po[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function T(n,e,t){return M(n,e,e.segments,t)}function M(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!mt(i,t)||e.hasChildren()||!L(i,t,r))}if(n.segments.length===t.length){if(!mt(n.segments,t)||!L(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!T(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),u=t.slice(n.segments.length);return!!(mt(n.segments,i)&&L(n.segments,i,r)&&n.children[Pt])&&M(n.children[Pt],e,u,r)}}function L(n,e,t){return e.every((r,i)=>po[t](n[i].parameters,r.parameters))}class J{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Mn(this.queryParams)),this._queryParamMap}toString(){return Wr.serialize(this)}}class X{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Sn(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Nn(this)}}class xe{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Mn(this.parameters)),this._parameterMap}toString(){return Ml(this)}}function mt(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}class kt{}class bt{parse(e){const t=new qp(e);return new J(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${ri(e.root,!0)}`,r=function Lh(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${Ci(t)}=${Ci(i)}`).join("&"):`${Ci(t)}=${Ci(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function Ti(n){return encodeURI(n)}(e.fragment)}`:""}`}}const Wr=new bt;function Nn(n){return n.segments.map(e=>Ml(e)).join("/")}function ri(n,e){if(!n.hasChildren())return Nn(n);if(e){const t=n.children[Pt]?ri(n.children[Pt],!1):"",r=[];return Sn(n.children,(i,u)=>{u!==Pt&&r.push(`${u}:${ri(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function Et(n,e){let t=[];return Sn(n.children,(r,i)=>{i===Pt&&(t=t.concat(e(r,i)))}),Sn(n.children,(r,i)=>{i!==Pt&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===Pt?[ri(n.children[Pt],!1)]:[`${i}:${ri(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Pt]?`${Nn(n)}/${t[0]}`:`${Nn(n)}/(${t.join("//")})`}}function ms(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Ci(n){return ms(n).replace(/%3B/gi,";")}function _s(n){return ms(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function mo(n){return decodeURIComponent(n)}function Rl(n){return mo(n.replace(/\+/g,"%20"))}function Ml(n){return`${_s(n.path)}${function Fh(n){return Object.keys(n).map(e=>`;${_s(e)}=${_s(n[e])}`).join("")}(n.parameters)}`}const u_=/^[^\/()?;=#]+/;function _o(n){const e=n.match(u_);return e?e[0]:""}const Nl=/^[^=?&#]+/,q0=/^[^&#]+/;class qp{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new X([],{}):new X([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Pt]=new X(e,t)),r}parseSegment(){const e=_o(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new xe(mo(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=_o(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=_o(this.remaining);i&&(r=i,this.capture(r))}e[mo(t)]=mo(r)}parseQueryParam(e){const t=function Uh(n){const e=n.match(Nl);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const c=function Gp(n){const e=n.match(q0);return e?e[0]:""}(this.remaining);c&&(r=c,this.capture(r))}const i=Rl(t),u=Rl(r);if(e.hasOwnProperty(i)){let c=e[i];Array.isArray(c)||(c=[c],e[i]=c),c.push(u)}else e[i]=u}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=_o(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new Error(`Cannot parse url '${this.url}'`);let u;r.indexOf(":")>-1?(u=r.substr(0,r.indexOf(":")),this.capture(u),this.capture(":")):e&&(u=Pt);const c=this.parseChildren();t[u]=1===Object.keys(c).length?c[Pt]:new X([],c),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class l_{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=Su(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=Su(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=Vh(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Vh(e,this._root).map(t=>t.value)}}function Su(n,e){if(n===e.value)return e;for(const t of e.children){const r=Su(n,t);if(r)return r}return null}function Vh(n,e){if(n===e.value)return[e];for(const t of e.children){const r=Vh(n,t);if(r.length)return r.unshift(e),r}return[]}class yo{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function vo(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class td extends l_{constructor(e,t){super(e),this.snapshot=t,nd(this,e)}toString(){return this.snapshot.toString()}}function Ha(n,e){const t=function c_(n,e){const c=new Ru([],{},{},"",{},Pt,e,null,n.root,-1,{});return new Bh("",new yo(c,[]))}(n,e),r=new Pr([new xe("",{})]),i=new Pr({}),u=new Pr({}),c=new Pr({}),h=new Pr(""),_=new Au(r,i,c,h,u,Pt,e,t.root);return _.snapshot=t.root,new td(new yo(_,[]),t)}class Au{constructor(e,t,r,i,u,c,h,_){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=u,this.outlet=c,this.component=h,this._futureSnapshot=_}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Rt.U)(e=>Mn(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Rt.U)(e=>Mn(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function d_(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],u=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(u.component)break;r--}}return function xu(n){return n.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(r))}class Ru{constructor(e,t,r,i,u,c,h,_,w,D,S){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=u,this.outlet=c,this.component=h,this.routeConfig=_,this._urlSegment=w,this._lastPathIndex=D,this._resolve=S}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Mn(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Mn(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Bh extends l_{constructor(e,t){super(t),this.url=e,nd(this,t)}toString(){return jh(this._root)}}function nd(n,e){e.value._routerState=n,e.children.forEach(t=>nd(n,t))}function jh(n){const e=n.children.length>0?` { ${n.children.map(jh).join(", ")} } `:"";return`${n.value}${e}`}function rd(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,yr(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),yr(e.params,t.params)||n.params.next(t.params),function kh(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!yr(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),yr(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function id(n,e){const t=yr(n.params,e.params)&&function rt(n,e){return mt(n,e)&&n.every((t,r)=>yr(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||id(n.parent,e.parent))}function Pl(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function f_(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Pl(n,r,i);return Pl(n,r)})}(n,e,t);return new yo(r,i)}{if(n.shouldAttach(e.value)){const u=n.retrieve(e.value);if(null!==u){const c=u.route;return c.value._futureSnapshot=e.value,c.children=e.children.map(h=>Pl(n,h)),c}}const r=function p_(n){return new Au(new Pr(n.url),new Pr(n.params),new Pr(n.queryParams),new Pr(n.fragment),new Pr(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(u=>Pl(n,u));return new yo(r,i)}}function Jo(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Wa(n){return"object"==typeof n&&null!=n&&n.outlets}function Zp(n,e,t,r,i){let u={};if(r&&Sn(r,(h,_)=>{u[_]=Array.isArray(h)?h.map(w=>`${w}`):`${h}`}),n===e)return new J(t,u,i);const c=Kp(n,e,t);return new J(c,u,i)}function Kp(n,e,t){const r={};return Sn(n.children,(i,u)=>{r[u]=i===e?t:Kp(i,e,t)}),new X(n.segments,r)}class g_{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Jo(r[0]))throw new Error("Root segment cannot have matrix parameters");const i=r.find(Wa);if(i&&i!==Du(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Qp{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function Xp(n,e,t){if(n||(n=new X([],{})),0===n.segments.length&&n.hasChildren())return sd(n,e,t);const r=function Z0(n,e,t){let r=0,i=e;const u={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return u;const c=n.segments[i],h=t[r];if(Wa(h))break;const _=`${h}`,w=r<t.length-1?t[r+1]:null;if(i>0&&void 0===_)break;if(_&&w&&"object"==typeof w&&void 0===w.outlets){if(!I(_,w,c))return u;r+=2}else{if(!I(_,{},c))return u;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const u=new X(n.segments.slice(0,r.pathIndex),{});return u.children[Pt]=new X(n.segments.slice(r.pathIndex),n.children),sd(u,0,i)}return r.match&&0===i.length?new X(n.segments,{}):r.match&&!n.hasChildren()?v(n,e,t):r.match?sd(n,0,i):v(n,e,t)}function sd(n,e,t){if(0===t.length)return new X(n.segments,{});{const r=function m_(n){return Wa(n[0])?n[0].outlets:{[Pt]:n}}(t),i={};return Sn(r,(u,c)=>{"string"==typeof u&&(u=[u]),null!==u&&(i[c]=Xp(n.children[c],e,u))}),Sn(n.children,(u,c)=>{void 0===r[c]&&(i[c]=u)}),new X(n.segments,i)}}function v(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const u=t[i];if(Wa(u)){const _=p(u.outlets);return new X(r,_)}if(0===i&&Jo(t[0])){r.push(new xe(n.segments[e].path,m(t[0]))),i++;continue}const c=Wa(u)?u.outlets[Pt]:`${u}`,h=i<t.length-1?t[i+1]:null;c&&h&&Jo(h)?(r.push(new xe(c,m(h))),i+=2):(r.push(new xe(c,{})),i++)}return new X(r,{})}function p(n){const e={};return Sn(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=v(new X([],{}),0,t))}),e}function m(n){const e={};return Sn(n,(t,r)=>e[r]=`${t}`),e}function I(n,e,t){return n==t.path&&yr(e,t.parameters)}class O{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),rd(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=vo(t);e.children.forEach(u=>{const c=u.value.outlet;this.deactivateRoutes(u,i[c],r),delete i[c]}),Sn(i,(u,c)=>{this.deactivateRouteAndItsChildren(u,r)})}deactivateRoutes(e,t,r){const i=e.value,u=t?t.value:null;if(i===u)if(i.component){const c=r.getContext(i.outlet);c&&this.deactivateChildRoutes(e,t,c.children)}else this.deactivateChildRoutes(e,t,r);else u&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,u=vo(e);for(const c of Object.keys(u))this.deactivateRouteAndItsChildren(u[c],i);if(r&&r.outlet){const c=r.outlet.detach(),h=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:c,route:e,contexts:h})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,u=vo(e);for(const c of Object.keys(u))this.deactivateRouteAndItsChildren(u[c],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=vo(t);e.children.forEach(u=>{this.activateRoutes(u,i[u.value.outlet],r),this.forwardEvent(new $a(u.value.snapshot))}),e.children.length&&this.forwardEvent(new wu(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,u=t?t.value:null;if(rd(i),i===u)if(i.component){const c=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,c.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const c=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const h=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),c.children.onOutletReAttached(h.contexts),c.attachRef=h.componentRef,c.route=h.route.value,c.outlet&&c.outlet.attach(h.componentRef,h.route.value),rd(h.route.value),this.activateChildRoutes(e,null,c.children)}else{const h=function ie(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(i.snapshot),_=h?h.module.componentFactoryResolver:null;c.attachRef=null,c.route=i,c.resolver=_,c.outlet&&c.outlet.activateWith(i,_),this.activateChildRoutes(e,null,c.children)}}else this.activateChildRoutes(e,null,r)}}class Oe{constructor(e,t){this.routes=e,this.module=t}}function et(n){return"function"==typeof n}function Ct(n){return n instanceof J}const kl=Symbol("INITIAL_VALUE");function Xo(){return _r(n=>fs(n.map(e=>e.pipe((0,ks.q)(1),Hi(kl)))).pipe(Wi((e,t)=>{let r=!1;return t.reduce((i,u,c)=>i!==kl?i:(u===kl&&(r=!0),r||!1!==u&&c!==t.length-1&&!Ct(u)?i:u),e)},kl),kr(e=>e!==kl),(0,Rt.U)(e=>Ct(e)?e:!0===e),(0,ks.q)(1)))}class eg{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Mu,this.attachRef=null}}class Mu{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const r=this.getOrCreateContext(e);r.outlet=t,this.contexts.set(e,r)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new eg,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}let Ol=(()=>{class n{constructor(t,r,i,u,c){this.parentContexts=t,this.location=r,this.resolver=i,this.changeDetector=c,this.activated=null,this._activatedRoute=null,this.activateEvents=new g.vpe,this.deactivateEvents=new g.vpe,this.attachEvents=new g.vpe,this.detachEvents=new g.vpe,this.name=u||Pt,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const c=(r=r||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),h=this.parentContexts.getOrCreateContext(this.name).children,_=new tg(t,h,this.location.injector);this.activated=this.location.createComponent(c,this.location.length,_),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(Mu),g.Y36(g.s_b),g.Y36(g._Vd),g.$8M("name"),g.Y36(g.sBO))},n.\u0275dir=g.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class tg{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Au?this.route:e===Mu?this.childContexts:this.parent.get(e,t)}}let od=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=g.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,r){1&t&&g._UZ(0,"router-outlet")},directives:[Ol],encapsulation:2}),n})();function za(n,e=""){for(let t=0;t<n.length;t++){const r=n[t];ng(r,Wh(e,r))}}function ng(n,e){n.children&&za(n.children,e)}function Wh(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function Fl(n){const e=n.children&&n.children.map(Fl),t=e?Object.assign(Object.assign({},n),{children:e}):Object.assign({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Pt&&(t.component=od),t}function ln(n){return n.outlet||Pt}function K0(n,e){const t=n.filter(r=>ln(r)===e);return t.push(...n.filter(r=>ln(r)!==e)),t}const Y0={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function ad(n,e,t){var r;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?Object.assign({},Y0):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const u=(e.matcher||Cu)(t,n,e);if(!u)return Object.assign({},Y0);const c={};Sn(u.posParams,(_,w)=>{c[w]=_.path});const h=u.consumed.length>0?Object.assign(Object.assign({},c),u.consumed[u.consumed.length-1].parameters):c;return{matched:!0,consumedSegments:u.consumed,remainingSegments:t.slice(u.consumed.length),parameters:h,positionalParamSegments:null!==(r=u.posParams)&&void 0!==r?r:{}}}function zh(n,e,t,r,i="corrected"){if(t.length>0&&function DC(n,e,t){return t.some(r=>rg(n,e,r)&&ln(r)!==Pt)}(n,t,r)){const c=new X(e,function TC(n,e,t,r){const i={};i[Pt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const u of t)if(""===u.path&&ln(u)!==Pt){const c=new X([],{});c._sourceSegment=n,c._segmentIndexShift=e.length,i[ln(u)]=c}return i}(n,e,r,new X(t,n.children)));return c._sourceSegment=n,c._segmentIndexShift=e.length,{segmentGroup:c,slicedSegments:[]}}if(0===t.length&&function SC(n,e,t){return t.some(r=>rg(n,e,r))}(n,t,r)){const c=new X(n.segments,function CC(n,e,t,r,i,u){const c={};for(const h of r)if(rg(n,t,h)&&!i[ln(h)]){const _=new X([],{});_._sourceSegment=n,_._segmentIndexShift="legacy"===u?n.segments.length:e.length,c[ln(h)]=_}return Object.assign(Object.assign({},i),c)}(n,e,t,r,n.children,i));return c._sourceSegment=n,c._segmentIndexShift=e.length,{segmentGroup:c,slicedSegments:t}}const u=new X(n.segments,n.children);return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:t}}function rg(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function AC(n,e,t,r){return!!(ln(n)===r||r!==Pt&&rg(e,t,n))&&("**"===n.path||ad(e,n,t).matched)}function xC(n,e,t){return 0===e.length&&!n.children[t]}class Nu{constructor(e){this.segmentGroup=e||null}}class fi{constructor(e){this.urlTree=e}}function Ll(n){return io(new Nu(n))}function __(n){return io(new fi(n))}class y_{constructor(e,t,r,i,u){this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=u,this.allowRedirects=!0,this.ngModule=e.get(g.h0i)}apply(){const e=zh(this.urlTree.root,[],[],this.config).segmentGroup,t=new X(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,Pt).pipe((0,Rt.U)(u=>this.createUrlTree(v_(u),this.urlTree.queryParams,this.urlTree.fragment))).pipe(ps(u=>{if(u instanceof fi)return this.allowRedirects=!1,this.match(u.urlTree);throw u instanceof Nu?this.noMatchError(u):u}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,Pt).pipe((0,Rt.U)(i=>this.createUrlTree(v_(i),e.queryParams,e.fragment))).pipe(ps(i=>{throw i instanceof Nu?this.noMatchError(i):i}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,r){const i=e.segments.length>0?new X([],{[Pt]:e}):e;return new J(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,Rt.U)(u=>new X([],u))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const u of Object.keys(r.children))"primary"===u?i.unshift(u):i.push(u);return(0,Yn.D)(i).pipe(Eu(u=>{const c=r.children[u],h=K0(t,u);return this.expandSegmentGroup(e,h,c,u).pipe((0,Rt.U)(_=>({segment:_,outlet:u})))}),Wi((u,c)=>(u[c.outlet]=c.segment,u),{}),function s_(n,e){const t=arguments.length>=2;return r=>r.pipe(n?kr((i,u)=>n(i,u,r)):hs.y,uo(1),t?zp(e):Rn(()=>new zo))}())}expandSegment(e,t,r,i,u,c){return(0,Yn.D)(r).pipe(Eu(h=>this.expandSegmentAgainstRoute(e,t,r,h,i,u,c).pipe(ps(w=>{if(w instanceof Nu)return st(null);throw w}))),qo(h=>!!h),ps((h,_)=>{if(h instanceof zo||"EmptyError"===h.name)return xC(t,i,u)?st(new X([],{})):Ll(t);throw h}))}expandSegmentAgainstRoute(e,t,r,i,u,c,h){return AC(i,t,u,c)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,u,c):h&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,u,c):Ll(t):Ll(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,u,c){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,c):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,u,c)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const u=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?__(u):this.lineralizeSegments(r,u).pipe((0,jn.z)(c=>{const h=new X(c,{});return this.expandSegment(e,h,t,c,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,u,c){const{matched:h,consumedSegments:_,remainingSegments:w,positionalParamSegments:D}=ad(t,i,u);if(!h)return Ll(t);const S=this.applyRedirectCommands(_,i.redirectTo,D);return i.redirectTo.startsWith("/")?__(S):this.lineralizeSegments(i,S).pipe((0,jn.z)(P=>this.expandSegment(e,t,r,P.concat(w),c,!1)))}matchSegmentAgainstRoute(e,t,r,i,u){if("**"===r.path)return r.loadChildren?(r._loadedConfig?st(r._loadedConfig):this.configLoader.load(e.injector,r)).pipe((0,Rt.U)(S=>(r._loadedConfig=S,new X(i,{})))):st(new X(i,{}));const{matched:c,consumedSegments:h,remainingSegments:_}=ad(t,r,i);return c?this.getChildConfig(e,r,i).pipe((0,jn.z)(D=>{const S=D.module,P=D.routes,{segmentGroup:B,slicedSegments:Y}=zh(t,h,_,P),Re=new X(B.segments,B.children);if(0===Y.length&&Re.hasChildren())return this.expandChildren(S,P,Re).pipe((0,Rt.U)(Zt=>new X(h,Zt)));if(0===P.length&&0===Y.length)return st(new X(h,{}));const Ze=ln(r)===u;return this.expandSegment(S,Re,P,Y,Ze?Pt:u,!0).pipe((0,Rt.U)(zt=>new X(h.concat(zt.segments),zt.children)))})):Ll(t)}getChildConfig(e,t,r){return t.children?st(new Oe(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?st(t._loadedConfig):this.runCanLoadGuards(e.injector,t,r).pipe((0,jn.z)(i=>i?this.configLoader.load(e.injector,t).pipe((0,Rt.U)(u=>(t._loadedConfig=u,u))):function pi(n){return io(ho(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`))}(t))):st(new Oe([],e))}runCanLoadGuards(e,t,r){const i=t.canLoad;return i&&0!==i.length?st(i.map(c=>{const h=e.get(c);let _;if(function Cn(n){return n&&et(n.canLoad)}(h))_=h.canLoad(t,r);else{if(!et(h))throw new Error("Invalid CanLoad guard");_=h(t,r)}return rr(_)})).pipe(Xo(),(0,Hr.b)(c=>{if(!Ct(c))return;const h=ho(`Redirecting to "${this.urlSerializer.serialize(c)}"`);throw h.url=c,h}),(0,Rt.U)(c=>!0===c)):st(!0)}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return st(r);if(i.numberOfChildren>1||!i.children[Pt])return io(new Error(`Only absolute redirects can have named outlets. redirectTo: '${e.redirectTo}'`));i=i.children[Pt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreatreUrlTree(e,t,r,i){const u=this.createSegmentGroup(e,t.root,r,i);return new J(u,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Sn(e,(i,u)=>{if("string"==typeof i&&i.startsWith(":")){const h=i.substring(1);r[u]=t[h]}else r[u]=i}),r}createSegmentGroup(e,t,r,i){const u=this.createSegments(e,t.segments,r,i);let c={};return Sn(t.children,(h,_)=>{c[_]=this.createSegmentGroup(e,h,r,i)}),new X(u,c)}createSegments(e,t,r,i){return t.map(u=>u.path.startsWith(":")?this.findPosParam(e,u,i):this.findOrReturn(u,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}function v_(n){const e={};for(const r of Object.keys(n.children)){const u=v_(n.children[r]);(u.segments.length>0||u.hasChildren())&&(e[r]=u)}return function RC(n){if(1===n.numberOfChildren&&n.children[Pt]){const e=n.children[Pt];return new X(n.segments.concat(e.segments),e.children)}return n}(new X(n.segments,e))}class X0{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class qh{constructor(e,t){this.component=e,this.route=t}}function MC(n,e,t){const r=n._root;return Ul(r,e?e._root:null,t,[r.value])}function ig(n,e,t){const r=function NC(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:t).get(n)}function Ul(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const u=vo(e);return n.children.forEach(c=>{(function PC(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const u=n.value,c=e?e.value:null,h=t?t.getContext(n.value.outlet):null;if(c&&u.routeConfig===c.routeConfig){const _=function kC(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!mt(n.url,e.url);case"pathParamsOrQueryParamsChange":return!mt(n.url,e.url)||!yr(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!id(n,e)||!yr(n.queryParams,e.queryParams);default:return!id(n,e)}}(c,u,u.routeConfig.runGuardsAndResolvers);_?i.canActivateChecks.push(new X0(r)):(u.data=c.data,u._resolvedData=c._resolvedData),Ul(n,e,u.component?h?h.children:null:t,r,i),_&&h&&h.outlet&&h.outlet.isActivated&&i.canDeactivateChecks.push(new qh(h.outlet.component,c))}else c&&Vl(e,h,i),i.canActivateChecks.push(new X0(r)),Ul(n,null,u.component?h?h.children:null:t,r,i)})(c,u[c.value.outlet],t,r.concat([c.value]),i),delete u[c.value.outlet]}),Sn(u,(c,h)=>Vl(c,t.getContext(h),i)),i}function Vl(n,e,t){const r=vo(n),i=n.value;Sn(r,(u,c)=>{Vl(u,i.component?e?e.children.getContext(c):null:e,t)}),t.canDeactivateChecks.push(new qh(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}class tE{}function nE(n){return new bi.y(e=>e.error(n))}class HC{constructor(e,t,r,i,u,c){this.rootComponentType=e,this.config=t,this.urlTree=r,this.url=i,this.paramsInheritanceStrategy=u,this.relativeLinkResolution=c}recognize(){const e=zh(this.urlTree.root,[],[],this.config.filter(c=>void 0===c.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,Pt);if(null===t)return null;const r=new Ru([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Pt,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new yo(r,t),u=new Bh(this.url,i);return this.inheritParamsAndData(u._root),u}inheritParamsAndData(e){const t=e.value,r=d_(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,r)}processChildren(e,t){const r=[];for(const u of Object.keys(t.children)){const c=t.children[u],h=K0(e,u),_=this.processSegmentGroup(h,c,u);if(null===_)return null;r.push(..._)}const i=rE(r);return function WC(n){n.sort((e,t)=>e.value.outlet===Pt?-1:t.value.outlet===Pt?1:e.value.outlet.localeCompare(t.value.outlet))}(i),i}processSegment(e,t,r,i){for(const u of e){const c=this.processSegmentAgainstRoute(u,t,r,i);if(null!==c)return c}return xC(t,r,i)?[]:null}processSegmentAgainstRoute(e,t,r,i){if(e.redirectTo||!AC(e,t,r,i))return null;let u,c=[],h=[];if("**"===e.path){const B=r.length>0?Du(r).parameters:{};u=new Ru(r,B,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,qC(e),ln(e),e.component,e,Bl(t),Eo(t)+r.length,ZC(e))}else{const B=ad(t,e,r);if(!B.matched)return null;c=B.consumedSegments,h=B.remainingSegments,u=new Ru(c,B.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,qC(e),ln(e),e.component,e,Bl(t),Eo(t)+c.length,ZC(e))}const _=function zC(n){return n.children?n.children:n.loadChildren?n._loadedConfig.routes:[]}(e),{segmentGroup:w,slicedSegments:D}=zh(t,c,h,_.filter(B=>void 0===B.redirectTo),this.relativeLinkResolution);if(0===D.length&&w.hasChildren()){const B=this.processChildren(_,w);return null===B?null:[new yo(u,B)]}if(0===_.length&&0===D.length)return[new yo(u,[])];const S=ln(e)===i,P=this.processSegment(_,w,D,S?Pt:i);return null===P?null:[new yo(u,P)]}}function GC(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function rE(n){const e=[],t=new Set;for(const r of n){if(!GC(r)){e.push(r);continue}const i=e.find(u=>r.value.routeConfig===u.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=rE(r.children);e.push(new yo(r.value,i))}return e.filter(r=>!t.has(r))}function Bl(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function Eo(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function qC(n){return n.data||{}}function ZC(n){return n.resolve||{}}function og(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function ag(n){return _r(e=>{const t=n(e);return t?(0,Yn.D)(t).pipe((0,Rt.U)(()=>e)):st(e)})}class oE extends class sE{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const Kh=new g.OlP("ROUTES");class ug{constructor(e,t,r,i){this.injector=e,this.compiler=t,this.onLoadStartListener=r,this.onLoadEndListener=i}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const i=this.loadModuleFactory(t.loadChildren).pipe((0,Rt.U)(u=>{this.onLoadEndListener&&this.onLoadEndListener(t);const c=u.create(e);return new Oe(Tu(c.injector.get(Kh,void 0,g.XFs.Self|g.XFs.Optional)).map(Fl),c)}),ps(u=>{throw t._loader$=void 0,u}));return t._loader$=new Va(i,()=>new Ns.x).pipe(ao()),t._loader$}loadModuleFactory(e){return rr(e()).pipe((0,jn.z)(t=>t instanceof g.YKP?st(t):(0,Yn.D)(this.compiler.compileModuleAsync(t))))}}class ix{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function ud(n){throw n}function w_(n,e,t){return e.parse("/")}function I_(n,e){return st(null)}const YC={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},b_={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Di=(()=>{class n{constructor(t,r,i,u,c,h,_){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=i,this.location=u,this.config=_,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Ns.x,this.errorHandler=ud,this.malformedUriErrorHandler=w_,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:I_,afterPreactivation:I_},this.urlHandlingStrategy=new ix,this.routeReuseStrategy=new oE,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=c.get(g.h0i),this.console=c.get(g.c2e);const S=c.get(g.R0b);this.isNgZoneEnabled=S instanceof g.R0b&&g.R0b.isInAngularZone(),this.resetConfig(_),this.currentUrlTree=function a_(){return new J(new X([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new ug(c,h,P=>this.triggerEvent(new Ko(P)),P=>this.triggerEvent(new Yo(P))),this.routerState=Ha(this.currentUrlTree,this.rootComponentType),this.transitions=new Pr({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(kr(i=>0!==i.id),(0,Rt.U)(i=>Object.assign(Object.assign({},i),{extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),_r(i=>{let u=!1,c=!1;return st(i).pipe((0,Hr.b)(h=>{this.currentNavigation={id:h.id,initialUrl:h.currentRawUrl,extractedUrl:h.extractedUrl,trigger:h.source,extras:h.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),_r(h=>{const _=this.browserUrlTree.toString(),w=!this.navigated||h.extractedUrl.toString()!==_||_!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||w)&&this.urlHandlingStrategy.shouldProcessUrl(h.rawUrl))return uE(h.source)&&(this.browserUrlTree=h.extractedUrl),st(h).pipe(_r(S=>{const P=this.transitions.getValue();return r.next(new lo(S.id,this.serializeUrl(S.extractedUrl),S.source,S.restoredState)),P!==this.transitions.getValue()?oo.E:Promise.resolve(S)}),function J0(n,e,t,r){return _r(i=>function Gh(n,e,t,r,i){return new y_(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe((0,Rt.U)(u=>Object.assign(Object.assign({},i),{urlAfterRedirects:u}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Hr.b)(S=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:S.urlAfterRedirects})}),function iE(n,e,t,r,i){return(0,jn.z)(u=>function $C(n,e,t,r,i="emptyOnly",u="legacy"){try{const c=new HC(n,e,t,r,i,u).recognize();return null===c?nE(new tE):st(c)}catch(c){return nE(c)}}(n,e,u.urlAfterRedirects,t(u.urlAfterRedirects),r,i).pipe((0,Rt.U)(c=>Object.assign(Object.assign({},u),{targetSnapshot:c}))))}(this.rootComponentType,this.config,S=>this.serializeUrl(S),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Hr.b)(S=>{if("eager"===this.urlUpdateStrategy){if(!S.extras.skipLocationChange){const B=this.urlHandlingStrategy.merge(S.urlAfterRedirects,S.rawUrl);this.setBrowserUrl(B,S)}this.browserUrlTree=S.urlAfterRedirects}const P=new ja(S.id,this.serializeUrl(S.extractedUrl),this.serializeUrl(S.urlAfterRedirects),S.targetSnapshot);r.next(P)}));if(w&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:P,extractedUrl:B,source:Y,restoredState:Re,extras:Ze}=h,qt=new lo(P,this.serializeUrl(B),Y,Re);r.next(qt);const zt=Ha(B,this.rootComponentType).snapshot;return st(Object.assign(Object.assign({},h),{targetSnapshot:zt,urlAfterRedirects:B,extras:Object.assign(Object.assign({},Ze),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=h.rawUrl,h.resolve(null),oo.E}),ag(h=>{const{targetSnapshot:_,id:w,extractedUrl:D,rawUrl:S,extras:{skipLocationChange:P,replaceUrl:B}}=h;return this.hooks.beforePreactivation(_,{navigationId:w,appliedUrlTree:D,rawUrlTree:S,skipLocationChange:!!P,replaceUrl:!!B})}),(0,Hr.b)(h=>{const _=new Nh(h.id,this.serializeUrl(h.extractedUrl),this.serializeUrl(h.urlAfterRedirects),h.targetSnapshot);this.triggerEvent(_)}),(0,Rt.U)(h=>Object.assign(Object.assign({},h),{guards:MC(h.targetSnapshot,h.currentSnapshot,this.rootContexts)})),function OC(n,e){return(0,jn.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:u,canDeactivateChecks:c}}=t;return 0===c.length&&0===u.length?st(Object.assign(Object.assign({},t),{guardsResult:!0})):function FC(n,e,t,r){return(0,Yn.D)(n).pipe((0,jn.z)(i=>function jC(n,e,t,r,i){const u=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return u&&0!==u.length?st(u.map(h=>{const _=ig(h,e,i);let w;if(function Hh(n){return n&&et(n.canDeactivate)}(_))w=rr(_.canDeactivate(n,e,t,r));else{if(!et(_))throw new Error("Invalid CanDeactivate guard");w=rr(_(n,e,t,r))}return w.pipe(qo())})).pipe(Xo()):st(!0)}(i.component,i.route,t,e,r)),qo(i=>!0!==i,!0))}(c,r,i,n).pipe((0,jn.z)(h=>h&&function gt(n){return"boolean"==typeof n}(h)?function sg(n,e,t,r){return(0,Yn.D)(e).pipe(Eu(i=>Fa(function UC(n,e){return null!==n&&e&&e(new co(n)),st(!0)}(i.route.parent,r),function LC(n,e){return null!==n&&e&&e(new gs(n)),st(!0)}(i.route,r),function BC(n,e,t){const r=e[e.length-1],u=e.slice(0,e.length-1).reverse().map(c=>function eE(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(c)).filter(c=>null!==c).map(c=>Ua(()=>st(c.guards.map(_=>{const w=ig(_,c.node,t);let D;if(function Us(n){return n&&et(n.canActivateChild)}(w))D=rr(w.canActivateChild(r,n));else{if(!et(w))throw new Error("Invalid CanActivateChild guard");D=rr(w(r,n))}return D.pipe(qo())})).pipe(Xo())));return st(u).pipe(Xo())}(n,i.path,t),function VC(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return st(!0);const i=r.map(u=>Ua(()=>{const c=ig(u,e,t);let h;if(function zi(n){return n&&et(n.canActivate)}(c))h=rr(c.canActivate(e,n));else{if(!et(c))throw new Error("Invalid CanActivate guard");h=rr(c(e,n))}return h.pipe(qo())}));return st(i).pipe(Xo())}(n,i.route,t))),qo(i=>!0!==i,!0))}(r,u,n,e):st(h)),(0,Rt.U)(h=>Object.assign(Object.assign({},t),{guardsResult:h})))})}(this.ngModule.injector,h=>this.triggerEvent(h)),(0,Hr.b)(h=>{if(Ct(h.guardsResult)){const w=ho(`Redirecting to "${this.serializeUrl(h.guardsResult)}"`);throw w.url=h.guardsResult,w}const _=new Ph(h.id,this.serializeUrl(h.extractedUrl),this.serializeUrl(h.urlAfterRedirects),h.targetSnapshot,!!h.guardsResult);this.triggerEvent(_)}),kr(h=>!!h.guardsResult||(this.restoreHistory(h),this.cancelNavigationTransition(h,""),!1)),ag(h=>{if(h.guards.canActivateChecks.length)return st(h).pipe((0,Hr.b)(_=>{const w=new Or(_.id,this.serializeUrl(_.extractedUrl),this.serializeUrl(_.urlAfterRedirects),_.targetSnapshot);this.triggerEvent(w)}),_r(_=>{let w=!1;return st(_).pipe(function rx(n,e){return(0,jn.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return st(t);let u=0;return(0,Yn.D)(i).pipe(Eu(c=>function ea(n,e,t,r){return function E_(n,e,t,r){const i=og(n);if(0===i.length)return st({});const u={};return(0,Yn.D)(i).pipe((0,jn.z)(c=>function KC(n,e,t,r){const i=ig(n,e,r);return rr(i.resolve?i.resolve(e,t):i(e,t))}(n[c],e,t,r).pipe((0,Hr.b)(h=>{u[c]=h}))),uo(1),(0,jn.z)(()=>og(u).length===i.length?st(u):oo.E))}(n._resolve,n,e,r).pipe((0,Rt.U)(u=>(n._resolvedData=u,n.data=Object.assign(Object.assign({},n.data),d_(n,t).resolve),null)))}(c.route,r,n,e)),(0,Hr.b)(()=>u++),uo(1),(0,jn.z)(c=>u===i.length?st(t):oo.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Hr.b)({next:()=>w=!0,complete:()=>{w||(this.restoreHistory(_),this.cancelNavigationTransition(_,"At least one route resolver didn't emit any value."))}}))}),(0,Hr.b)(_=>{const w=new ni(_.id,this.serializeUrl(_.extractedUrl),this.serializeUrl(_.urlAfterRedirects),_.targetSnapshot);this.triggerEvent(w)}))}),ag(h=>{const{targetSnapshot:_,id:w,extractedUrl:D,rawUrl:S,extras:{skipLocationChange:P,replaceUrl:B}}=h;return this.hooks.afterPreactivation(_,{navigationId:w,appliedUrlTree:D,rawUrlTree:S,skipLocationChange:!!P,replaceUrl:!!B})}),(0,Rt.U)(h=>{const _=function h_(n,e,t){const r=Pl(n,e._root,t?t._root:void 0);return new td(r,e)}(this.routeReuseStrategy,h.targetSnapshot,h.currentRouterState);return Object.assign(Object.assign({},h),{targetRouterState:_})}),(0,Hr.b)(h=>{this.currentUrlTree=h.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(h.urlAfterRedirects,h.rawUrl),this.routerState=h.targetRouterState,"deferred"===this.urlUpdateStrategy&&(h.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,h),this.browserUrlTree=h.urlAfterRedirects)}),((n,e,t)=>(0,Rt.U)(r=>(new O(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,h=>this.triggerEvent(h)),(0,Hr.b)({next(){u=!0},complete(){u=!0}}),function Mh(n){return(0,Cr.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}(()=>{var h;u||c||this.cancelNavigationTransition(i,`Navigation ID ${i.id} is not equal to the current navigation id ${this.navigationId}`),(null===(h=this.currentNavigation)||void 0===h?void 0:h.id)===i.id&&(this.currentNavigation=null)}),ps(h=>{if(c=!0,function o_(n){return n&&n[bu]}(h)){const _=Ct(h.url);_||(this.navigated=!0,this.restoreHistory(i,!0));const w=new Qn(i.id,this.serializeUrl(i.extractedUrl),h.message);r.next(w),_?setTimeout(()=>{const D=this.urlHandlingStrategy.merge(h.url,this.rawUrlTree),S={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||uE(i.source)};this.scheduleNavigation(D,"imperative",null,S,{resolve:i.resolve,reject:i.reject,promise:i.promise})},0):i.resolve(!1)}else{this.restoreHistory(i,!0);const _=new Ba(i.id,this.serializeUrl(i.extractedUrl),h);r.next(_);try{i.resolve(this.errorHandler(h))}catch(w){i.reject(w)}}return oo.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{var i;const u={replaceUrl:!0},c=(null===(i=t.state)||void 0===i?void 0:i.navigationId)?t.state:null;if(c){const _=Object.assign({},c);delete _.navigationId,delete _.\u0275routerPageId,0!==Object.keys(_).length&&(u.state=_)}const h=this.parseUrl(t.url);this.scheduleNavigation(h,r,c,u)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){za(t),this.config=t.map(Fl),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:u,fragment:c,queryParamsHandling:h,preserveFragment:_}=r,w=i||this.routerState.root,D=_?this.currentUrlTree.fragment:c;let S=null;switch(h){case"merge":S=Object.assign(Object.assign({},this.currentUrlTree.queryParams),u);break;case"preserve":S=this.currentUrlTree.queryParams;break;default:S=u||null}return null!==S&&(S=this.removeEmptyProps(S)),function Ls(n,e,t,r,i){if(0===t.length)return Zp(e.root,e.root,e.root,r,i);const u=function Yp(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new g_(!0,0,n);let e=0,t=!1;const r=n.reduce((i,u,c)=>{if("object"==typeof u&&null!=u){if(u.outlets){const h={};return Sn(u.outlets,(_,w)=>{h[w]="string"==typeof _?_.split("/"):_}),[...i,{outlets:h}]}if(u.segmentPath)return[...i,u.segmentPath]}return"string"!=typeof u?[...i,u]:0===c?(u.split("/").forEach((h,_)=>{0==_&&"."===h||(0==_&&""===h?t=!0:".."===h?e++:""!=h&&i.push(h))}),i):[...i,u]},[]);return new g_(t,e,r)}(t);if(u.toRoot())return Zp(e.root,e.root,new X([],{}),r,i);const c=function $h(n,e,t){if(n.isAbsolute)return new Qp(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const u=t.snapshot._urlSegment;return new Qp(u,u===e.root,0)}const r=Jo(n.commands[0])?0:1;return function Jp(n,e,t){let r=n,i=e,u=t;for(;u>i;){if(u-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new Qp(r,!1,i-u)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+r,n.numberOfDoubleDots)}(u,e,n),h=c.processChildren?sd(c.segmentGroup,c.index,u.commands):Xp(c.segmentGroup,c.index,u.commands);return Zp(e.root,c.segmentGroup,h,r,i)}(w,this.currentUrlTree,t,S,null!=D?D:null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=Ct(t)?t:this.parseUrl(t),u=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(u,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function QC(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?Object.assign({},YC):!1===r?Object.assign({},b_):r,Ct(t))return go(this.currentUrlTree,t,i);const u=this.parseUrl(t);return go(this.currentUrlTree,u,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const u=t[i];return null!=u&&(r[i]=u),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new Zo(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,i,u,c){var h,_;if(this.disposed)return Promise.resolve(!1);let w,D,S;c?(w=c.resolve,D=c.reject,S=c.promise):S=new Promise((Y,Re)=>{w=Y,D=Re});const P=++this.navigationId;let B;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),B=i&&i.\u0275routerPageId?i.\u0275routerPageId:u.replaceUrl||u.skipLocationChange?null!==(h=this.browserPageId)&&void 0!==h?h:0:(null!==(_=this.browserPageId)&&void 0!==_?_:0)+1):B=0,this.setTransition({id:P,targetPageId:B,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:u,resolve:w,reject:D,promise:S,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),S.catch(Y=>Promise.reject(Y))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t),u=Object.assign(Object.assign({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",u):this.location.go(i,"",u)}restoreHistory(t,r=!1){var i,u;if("computed"===this.canceledNavigationResolution){const c=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(i=this.currentNavigation)||void 0===i?void 0:i.finalUrl)||0===c?this.currentUrlTree===(null===(u=this.currentNavigation)||void 0===u?void 0:u.finalUrl)&&0===c&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(c)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r){const i=new Qn(t.id,this.serializeUrl(t.extractedUrl),r);this.triggerEvent(i),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){g.$Z()},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();function uE(n){return"imperative"!==n}let Yh=(()=>{class n{constructor(t,r,i){this.router=t,this.route=r,this.locationStrategy=i,this.commands=null,this.href=null,this.onChanges=new Ns.x,this.subscription=t.events.subscribe(u=>{u instanceof Zo&&this.updateTargetUrlAndHref()})}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:null}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,r,i,u,c){if(0!==t||r||i||u||c||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)return!0;const h={skipLocationChange:ld(this.skipLocationChange),replaceUrl:ld(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,h),!1}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:ld(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(Di),g.Y36(Au),g.Y36(_e))},n.\u0275dir=g.lG2({type:n,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,r){1&t&&g.NdJ("click",function(u){return r.onClick(u.button,u.ctrlKey,u.shiftKey,u.altKey,u.metaKey)}),2&t&&g.uIk("target",r.target)("href",r.href,g.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[g.TTD]}),n})();function ld(n){return""===n||!!n}class D_{}class cE{preload(e,t){return st(null)}}let dE=(()=>{class n{constructor(t,r,i,u){this.router=t,this.injector=i,this.preloadingStrategy=u,this.loader=new ug(i,r,_=>t.triggerEvent(new Ko(_)),_=>t.triggerEvent(new Yo(_)))}setUpPreloading(){this.subscription=this.router.events.pipe(kr(t=>t instanceof Zo),Eu(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(g.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const u of r)if(u.loadChildren&&!u.canLoad&&u._loadedConfig){const c=u._loadedConfig;i.push(this.processRoutes(c.module,c.routes))}else u.loadChildren&&!u.canLoad?i.push(this.preloadConfig(t,u)):u.children&&i.push(this.processRoutes(t,u.children));return(0,Yn.D)(i).pipe((0,Ps.J)(),(0,Rt.U)(u=>{}))}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>(r._loadedConfig?st(r._loadedConfig):this.loader.load(t.injector,r)).pipe((0,jn.z)(u=>(r._loadedConfig=u,this.processRoutes(u.module,u.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(Di),g.LFG(g.Sil),g.LFG(g.zs3),g.LFG(D_))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})(),lg=(()=>{class n{constructor(t,r,i={}){this.router=t,this.viewportScroller=r,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof lo?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Zo&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Sl&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new Sl(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){g.$Z()},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();const ys=new g.OlP("ROUTER_CONFIGURATION"),A_=new g.OlP("ROUTER_FORROOT_GUARD"),hE=[ke,{provide:kt,useClass:bt},{provide:Di,useFactory:function R_(n,e,t,r,i,u,c={},h,_){const w=new Di(null,n,e,t,r,i,Tu(u));return h&&(w.urlHandlingStrategy=h),_&&(w.routeReuseStrategy=_),function gE(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(c,w),c.enableTracing&&w.events.subscribe(D=>{var S,P;null===(S=console.group)||void 0===S||S.call(console,`Router Event: ${D.constructor.name}`),console.log(D.toString()),console.log(D),null===(P=console.groupEnd)||void 0===P||P.call(console)}),w},deps:[kt,Mu,ke,g.zs3,g.Sil,Kh,ys,[class aE{},new g.FiY],[class Zh{},new g.FiY]]},Mu,{provide:Au,useFactory:function cg(n){return n.routerState.root},deps:[Di]},dE,cE,class S_{preload(e,t){return t().pipe(ps(()=>st(null)))}},{provide:ys,useValue:{enableTracing:!1}}];function XC(){return new g.PXZ("Router",Di)}let Qh=(()=>{class n{constructor(t,r){}static forRoot(t,r){return{ngModule:n,providers:[hE,x_(t),{provide:A_,useFactory:pE,deps:[[Di,new g.FiY,new g.tp0]]},{provide:ys,useValue:r||{}},{provide:_e,useFactory:fE,deps:[le,[new g.tBr(ze),new g.FiY],ys]},{provide:lg,useFactory:eT,deps:[Di,fu,ys]},{provide:D_,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:cE},{provide:g.PXZ,multi:!0,useFactory:XC},[cd,{provide:g.ip1,multi:!0,useFactory:mE,deps:[cd]},{provide:N_,useFactory:M_,deps:[cd]},{provide:g.tb,multi:!0,useExisting:N_}]]}}static forChild(t){return{ngModule:n,providers:[x_(t)]}}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(A_,8),g.LFG(Di,8))},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({}),n})();function eT(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new lg(n,e,t)}function fE(n,e,t={}){return t.useHash?new Pe(n,e):new We(n,e)}function pE(n){return"guarded"}function x_(n){return[{provide:g.deG,multi:!0,useValue:n},{provide:Kh,multi:!0,useValue:n}]}let cd=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new Ns.x}appInitializer(){return this.injector.get(W,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const i=new Promise(h=>r=h),u=this.injector.get(Di),c=this.injector.get(ys);return"disabled"===c.initialNavigation?(u.setUpLocationChangeListener(),r(!0)):"enabled"===c.initialNavigation||"enabledBlocking"===c.initialNavigation?(u.hooks.afterPreactivation=()=>this.initNavigation?st(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),u.initialNavigation()):r(!0),i})}bootstrapListener(t){const r=this.injector.get(ys),i=this.injector.get(dE),u=this.injector.get(lg),c=this.injector.get(Di),h=this.injector.get(g.z2F);t===h.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&c.initialNavigation(),i.setUpPreloading(),u.init(),c.resetRootComponentType(h.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(g.zs3))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();function mE(n){return n.appInitializer.bind(n)}function M_(n){return n.bootstrapListener.bind(n)}const N_=new g.OlP("Router Initializer");var he=k(5861),_E=k(4986),nn=k(5813);function k_(){return(0,Cr.e)((n,e)=>{let t,r=!1;n.subscribe((0,xn.x)(e,i=>{const u=t;t=i,r&&e.next([u,i]),r=!0}))})}function O_(n,e){return n===e}var ot,Vs=k(2011),vE=(k(5881),k(3942)),Si=k(9681),dd=k(4859),ta=k(1877),Q=k(2090),wo="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Ga={},F_=F_||{},xt=wo||self;function hg(){}function L_(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function hd(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var U_="closure_uid_"+(1e9*Math.random()>>>0),nT=0;function Mt(n,e,t){return n.call.apply(n.bind,arguments)}function EE(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function zr(n,e,t){return(zr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Mt:EE).apply(null,arguments)}function Jh(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Tr(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,i,u){for(var c=Array(arguments.length-2),h=2;h<arguments.length;h++)c[h-2]=arguments[h];return e.prototype[i].apply(r,c)}}function Gr(){this.s=this.s,this.o=this.o}var rT={};Gr.prototype.s=!1,Gr.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function tT(n){return Object.prototype.hasOwnProperty.call(n,U_)&&n[U_]||(n[U_]=++nT)}(this);delete rT[n]}},Gr.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const fg=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},na=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const r=n.length,i="string"==typeof n?n.split(""):n;for(let u=0;u<r;u++)u in i&&e.call(t,i[u],u,n)};function B_(n){return Array.prototype.concat.apply([],arguments)}function Xh(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function j_(n){return/^[\s\xa0]*$/.test(n)}var qr,$_=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function Gi(n,e){return-1!=n.indexOf(e)}function fd(n,e){return n<e?-1:n>e?1:0}e:{var pg=xt.navigator;if(pg){var gg=pg.userAgent;if(gg){qr=gg;break e}}qr=""}function ef(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function iT(n){const e={};for(const t in n)e[t]=n[t];return e}var IE="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function bE(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let u=0;u<IE.length;u++)t=IE[u],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function H_(n){return H_[" "](n),n}H_[" "]=hg;var pd,n,CE=Gi(qr,"Opera"),tf=Gi(qr,"Trident")||Gi(qr,"MSIE"),TE=Gi(qr,"Edge"),DE=TE||tf,W_=Gi(qr,"Gecko")&&!(Gi(qr.toLowerCase(),"webkit")&&!Gi(qr,"Edge"))&&!(Gi(qr,"Trident")||Gi(qr,"MSIE"))&&!Gi(qr,"Edge"),SE=Gi(qr.toLowerCase(),"webkit")&&!Gi(qr,"Edge");function AE(){var n=xt.document;return n?n.documentMode:void 0}e:{var xE="",RE=(n=qr,W_?/rv:([^\);]+)(\)|;)/.exec(n):TE?/Edge\/([\d\.]+)/.exec(n):tf?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):SE?/WebKit\/(\S+)/.exec(n):CE?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(RE&&(xE=RE?RE[1]:""),tf){var ME=AE();if(null!=ME&&ME>parseFloat(xE)){pd=String(ME);break e}}pd=xE}var sx={};var ax=xt.document&&tf&&(AE()||parseInt(pd,10))||void 0,ux=function(){if(!xt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{xt.addEventListener("test",hg,e),xt.removeEventListener("test",hg,e)}catch(t){}return n}();function Ai(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function Bs(n,e){if(Ai.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(W_){e:{try{H_(e.nodeName);var i=!0;break e}catch(u){}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:z_[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Bs.Z.h.call(this)}}Ai.prototype.h=function(){this.defaultPrevented=!0},Tr(Bs,Ai);var z_={2:"touch",3:"pen",4:"mouse"};Bs.prototype.h=function(){Bs.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var nf="closure_listenable_"+(1e6*Math.random()|0),PE=0;function G_(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ia=i,this.key=++PE,this.ca=this.fa=!1}function rf(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function gd(n){this.src=n,this.g={},this.h=0}function q_(n,e){var t=e.type;if(t in n.g){var u,r=n.g[t],i=fg(r,e);(u=0<=i)&&Array.prototype.splice.call(r,i,1),u&&(rf(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function ra(n,e,t,r){for(var i=0;i<n.length;++i){var u=n[i];if(!u.ca&&u.listener==e&&u.capture==!!t&&u.ia==r)return i}return-1}gd.prototype.add=function(n,e,t,r,i){var u=n.toString();(n=this.g[u])||(n=this.g[u]=[],this.h++);var c=ra(n,e,r,i);return-1<c?(e=n[c],t||(e.fa=!1)):((e=new G_(e,this.src,u,!!r,i)).fa=t,n.push(e)),e};var mg="closure_lm_"+(1e6*Math.random()|0),Z_={};function _g(n,e,t,r,i){if(r&&r.once)return FE(n,e,t,r,i);if(Array.isArray(e)){for(var u=0;u<e.length;u++)_g(n,e[u],t,r,i);return null}return t=ku(t),n&&n[nf]?n.N(e,t,hd(r)?!!r.capture:!!r,i):kE(n,e,t,!1,r,i)}function kE(n,e,t,r,i,u){if(!e)throw Error("Invalid event type");var c=hd(i)?!!i.capture:!!i,h=Pu(n);if(h||(n[mg]=h=new gd(n)),(t=h.add(e,t,r,c,u)).proxy)return t;if(r=function OE(){var e=K_;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)ux||(i=c),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent($l(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function FE(n,e,t,r,i){if(Array.isArray(e)){for(var u=0;u<e.length;u++)FE(n,e[u],t,r,i);return null}return t=ku(t),n&&n[nf]?n.O(e,t,hd(r)?!!r.capture:!!r,i):kE(n,e,t,!0,r,i)}function LE(n,e,t,r,i){if(Array.isArray(e))for(var u=0;u<e.length;u++)LE(n,e[u],t,r,i);else r=hd(r)?!!r.capture:!!r,t=ku(t),n&&n[nf]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=ra(u=n.g[e],t,r,i))&&(rf(u[t]),Array.prototype.splice.call(u,t,1),0==u.length&&(delete n.g[e],n.h--))):n&&(n=Pu(n))&&(e=n.g[e.toString()],n=-1,e&&(n=ra(e,t,r,i)),(t=-1<n?e[n]:null)&&jl(t))}function jl(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[nf])q_(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent($l(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=Pu(e))?(q_(t,n),0==t.h&&(t.src=null,e[mg]=null)):rf(n)}}}function $l(n){return n in Z_?Z_[n]:Z_[n]="on"+n}function K_(n,e){if(n.ca)n=!0;else{e=new Bs(e,this);var t=n.listener,r=n.ia||n.src;n.fa&&jl(n),n=t.call(r,e)}return n}function Pu(n){return(n=n[mg])instanceof gd?n:null}var Hl="__closure_events_fn_"+(1e9*Math.random()>>>0);function ku(n){return"function"==typeof n?n:(n[Hl]||(n[Hl]=function(e){return n.handleEvent(e)}),n[Hl])}function Zr(){Gr.call(this),this.i=new gd(this),this.P=this,this.I=null}function Kr(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new Ai(e,n);else if(e instanceof Ai)e.target=e.target||n;else{var i=e;bE(e=new Ai(r,n),i)}if(i=!0,t)for(var u=t.length-1;0<=u;u--){var c=e.g=t[u];i=sf(c,r,!0,e)&&i}if(i=sf(c=e.g=n,r,!0,e)&&i,i=sf(c,r,!1,e)&&i,t)for(u=0;u<t.length;u++)i=sf(c=e.g=t[u],r,!1,e)&&i}function sf(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,u=0;u<e.length;++u){var c=e[u];if(c&&!c.ca&&c.capture==t){var h=c.listener,_=c.ia||c.src;c.fa&&q_(n.i,c),i=!1!==h.call(_,r)&&i}}return i&&!r.defaultPrevented}Tr(Zr,Gr),Zr.prototype[nf]=!0,Zr.prototype.removeEventListener=function(n,e,t,r){LE(this,n,e,t,r)},Zr.prototype.M=function(){if(Zr.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)rf(t[r]);delete n.g[e],n.h--}}this.I=null},Zr.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Zr.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var of=xt.JSON.stringify;function Y_(){var n=J_;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var yg,af=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new aT,n=>n.reset());class aT{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function VE(n){xt.setTimeout(()=>{throw n},0)}function BE(n,e){yg||function jE(){var n=xt.Promise.resolve(void 0);yg=function(){n.then(uT)}}(),Q_||(yg(),Q_=!0),J_.add(n,e)}var Q_=!1,J_=new class UE{constructor(){this.h=this.g=null}add(e,t){const r=af.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function uT(){for(var n;n=Y_();){try{n.h.call(n.g)}catch(t){VE(t)}var e=af;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Q_=!1}function vg(n,e){Zr.call(this),this.h=n||1,this.g=e||xt,this.j=zr(this.kb,this),this.l=Date.now()}function xi(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function X_(n,e,t){if("function"==typeof n)t&&(n=zr(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=zr(n.handleEvent,n)}return 2147483647<Number(e)?-1:xt.setTimeout(n,e||0)}function $E(n){n.g=X_(()=>{n.g=null,n.i&&(n.i=!1,$E(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Tr(vg,Zr),(ot=vg.prototype).da=!1,ot.S=null,ot.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Kr(this,"tick"),this.da&&(xi(this),this.start()))}},ot.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},ot.M=function(){vg.Z.M.call(this),xi(this),delete this.g};class lx extends Gr{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:$E(this)}M(){super.M(),this.g&&(xt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Eg(n){Gr.call(this),this.h=n,this.g={}}Tr(Eg,Gr);var ey=[];function lT(n,e,t,r){Array.isArray(t)||(t&&(ey[0]=t.toString()),t=ey);for(var i=0;i<t.length;i++){var u=_g(e,t[i],r||n.handleEvent,!1,n.h||n);if(!u)break;n.g[u.key]=u}}function HE(n){ef(n.g,function(e,t){this.g.hasOwnProperty(t)&&jl(e)},n),n.g={}}function md(){this.g=!0}function _d(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function zE(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var u=i[0];if("noop"!=u&&"stop"!=u&&"close"!=u)for(var c=1;c<i.length;c++)i[c]=""}}}return of(t)}catch(h){return e}}(n,t)+(r?" "+r:"")})}Eg.prototype.M=function(){Eg.Z.M.call(this),HE(this)},Eg.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},md.prototype.Aa=function(){this.g=!1},md.prototype.info=function(){};var Wl={},ty=null;function wg(){return ty=ty||new Zr}function GE(n){Ai.call(this,Wl.Ma,n)}function yd(n){const e=wg();Kr(e,new GE(e,n))}function ny(n,e){Ai.call(this,Wl.STAT_EVENT,n),this.stat=e}function Ri(n){const e=wg();Kr(e,new ny(e,n))}function Io(n,e){Ai.call(this,Wl.Na,n),this.size=e}function zl(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return xt.setTimeout(function(){n()},e)}Wl.Ma="serverreachability",Tr(GE,Ai),Wl.STAT_EVENT="statevent",Tr(ny,Ai),Wl.Na="timingevent",Tr(Io,Ai);var Ig={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},qE={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function ZE(){}function KE(){}ZE.prototype.h=null;var sy,uf={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function iy(){Ai.call(this,"d")}function lf(){Ai.call(this,"c")}function bg(){}function Ou(n,e,t,r){this.l=n,this.j=e,this.m=t,this.X=r||1,this.V=new Eg(this),this.P=hT,this.W=new vg(n=DE?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new Cg}function Cg(){this.i=null,this.g="",this.h=!1}Tr(iy,Ai),Tr(lf,Ai),Tr(bg,ZE),bg.prototype.g=function(){return new XMLHttpRequest},bg.prototype.i=function(){return{}},sy=new bg;var hT=45e3,cf={},vd={};function Tg(n,e,t){n.K=1,n.v=Rg(vs(e)),n.s=t,n.U=!0,YE(n,null)}function YE(n,e){n.F=Date.now(),df(n),n.A=vs(n.v);var t=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),Mg(t.h,"t",r),n.C=0,t=n.l.H,n.h=new Cg,n.g=Xl(n.l,t?e:null,!n.s),0<n.O&&(n.L=new lx(zr(n.Ia,n,n.g),n.O)),lT(n.V,n.g,"readystatechange",n.gb),e=n.H?iT(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),yd(1),function WE(n,e,t,r,i,u){n.info(function(){if(n.g)if(u)for(var c="",h=u.split("&"),_=0;_<h.length;_++){var w=h[_].split("=");if(1<w.length){var D=w[0];w=w[1];var S=D.split("_");c=2<=S.length&&"type"==S[1]?c+(D+"=")+w+"&":c+(D+"=redacted&")}}else c=null;else c=u;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+c})}(n.j,n.u,n.A,n.m,n.X,n.s)}function QE(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function Dg(n,e,t){let i,r=!0;for(;!n.I&&n.C<t.length;){if(i=cx(n,t),i==vd){4==e&&(n.o=4,Ri(14),r=!1),_d(n.j,n.m,null,"[Incomplete Response]");break}if(i==cf){n.o=4,Ri(15),_d(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}_d(n.j,n.m,i,null),Sg(n,i)}QE(n)&&i!=vd&&i!=cf&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Ri(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),vf(e),e.L=!0,Ri(11))):(_d(n.j,n.m,t,"[Invalid Chunked Response]"),Fu(n),Ed(n))}function cx(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?vd:(t=Number(e.substring(t,r)),isNaN(t)?cf:(r+=1)+t>e.length?vd:(e=e.substr(r,t),n.C=r+t,e))}function df(n){n.Y=Date.now()+n.P,oy(n,n.P)}function oy(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=zl(zr(n.eb,n),e)}function hf(n){n.B&&(xt.clearTimeout(n.B),n.B=null)}function Ed(n){0==n.l.G||n.I||Kl(n.l,n)}function Fu(n){hf(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,xi(n.W),HE(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function Sg(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||hy(t.i,n)))if(t.I=n.N,!n.J&&hy(t.i,n)&&3==t.G){try{var r=t.Ca.g.parse(e)}catch(w){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0])e:if(t.u)t.ta=i[1],0<t.ta-t.U&&37500>i[2]&&t.N&&0==t.A&&!t.v&&(t.v=zl(zr(t.ab,t),6e3));else{if(t.g){if(!(t.g.F+3e3<n.F))break e;Ya(t),Vu(t)}qi(t),Ri(18)}if(1>=rw(t.i)&&t.ka){try{t.ka()}catch(w){}t.ka=void 0}}else js(t,11)}else if((n.J||t.g==n)&&Ya(t),!j_(e))for(i=t.Ca.g.parse(e),e=0;e<i.length;e++){let w=i[e];if(t.U=w[0],w=w[1],2==t.G)if("c"==w[0]){t.J=w[1],t.la=w[2];const D=w[3];null!=D&&(t.ma=D,t.h.info("VER="+t.ma));const S=w[4];null!=S&&(t.za=S,t.h.info("SVER="+t.za));const P=w[5];null!=P&&"number"==typeof P&&0<P&&(t.K=r=1.5*P,t.h.info("backChannelRequestTimeoutMs_="+r)),r=t;const B=n.g;if(B){const Y=B.g?B.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Y){var u=r.i;!u.g&&(Gi(Y,"spdy")||Gi(Y,"quic")||Gi(Y,"h2"))&&(u.j=u.l,u.g=new Set,u.h&&(Ng(u,u.h),u.h=null))}if(r.D){const Re=B.g?B.g.getResponseHeader("X-HTTP-Session-Id"):null;Re&&(r.sa=Re,$n(r.F,r.D,Re))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var c=n;if((r=t).oa=Jl(r,r.H?r.la:null,r.W),c.J){yT(r.i,c);var h=c,_=r.K;_&&h.setTimeout(_),h.B&&(hf(h),df(h)),r.g=c}else yf(r);0<t.l.length&&xd(t)}else"stop"!=w[0]&&"close"!=w[0]||js(t,7);else 3==t.G&&("stop"==w[0]||"close"==w[0]?"stop"==w[0]?js(t,7):yy(t):"noop"!=w[0]&&t.j&&t.j.wa(w),t.A=0)}yd(4)}catch(w){}}function wd(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(L_(n)||"string"==typeof n)na(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(L_(n)||"string"==typeof n){t=[];for(var r=n.length,i=0;i<r;i++)t.push(i)}else for(i in t=[],r=0,n)t[r++]=i;r=function qa(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(L_(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length;for(var u=0;u<i;u++)e.call(void 0,r[u],t&&t[u],n)}}function Id(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var r=0;r<t;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof Id)for(t=n.T(),r=0;r<t.length;r++)this.set(t[r],n.get(t[r]));else for(r in n)this.set(r,n[r])}function ay(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var r=n.g[e];bd(n.h,r)&&(n.g[t++]=r),e++}n.g.length=t}if(n.i!=n.g.length){var i={};for(t=e=0;e<n.g.length;)bd(i,r=n.g[e])||(n.g[t++]=r,i[r]=1),e++;n.g.length=t}}function bd(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(ot=Ou.prototype).setTimeout=function(n){this.P=n},ot.gb=function(n){n=n.target;const e=this.L;e&&3==Ka(n)?e.l():this.Ia(n)},ot.Ia=function(n){try{if(n==this.g)e:{const D=Ka(this.g);var e=this.g.Da();const S=this.g.ba();if(!(3>D)&&(3!=D||DE||this.g&&(this.h.h||this.g.ga()||uw(this.g)))){this.I||4!=D||7==e||yd(8==e||0>=S?3:2),hf(this);var t=this.g.ba();this.N=t;t:if(QE(this)){var r=uw(this.g);n="";var i=r.length,u=4==Ka(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Fu(this),Ed(this);var c="";break t}this.h.i=new xt.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:u&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,c=this.h.g}else c=this.g.ga();if(this.i=200==t,function cT(n,e,t,r,i,u,c){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+u+" "+c})}(this.j,this.u,this.A,this.m,this.X,D,t),this.i){if(this.$&&!this.J){t:{if(this.g){var h,_=this.g;if((h=_.g?_.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!j_(h)){var w=h;break t}}w=null}if(!(t=w)){this.i=!1,this.o=3,Ri(12),Fu(this),Ed(this);break e}_d(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Sg(this,t)}this.U?(Dg(this,D,c),DE&&this.i&&3==D&&(lT(this.V,this.W,"tick",this.fb),this.W.start())):(_d(this.j,this.m,c,null),Sg(this,c)),4==D&&Fu(this),this.i&&!this.I&&(4==D?Kl(this.l,this):(this.i=!1,df(this)))}else 400==t&&0<c.indexOf("Unknown SID")?(this.o=3,Ri(12)):(this.o=0,Ri(13)),Fu(this),Ed(this)}}}catch(D){}},ot.fb=function(){if(this.g){var n=Ka(this.g),e=this.g.ga();this.C<e.length&&(hf(this),Dg(this,n,e),this.i&&4!=n&&df(this))}},ot.cancel=function(){this.I=!0,Fu(this)},ot.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function dT(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(yd(3),Ri(17)),Fu(this),this.o=2,Ed(this)):oy(this,this.Y-n)},(ot=Id.prototype).R=function(){ay(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},ot.T=function(){return ay(this),this.g.concat()},ot.get=function(n,e){return bd(this.h,n)?this.h[n]:e},ot.set=function(n,e){bd(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},ot.forEach=function(n,e){for(var t=this.T(),r=0;r<t.length;r++){var i=t[r],u=this.get(i);n.call(e,u,i,this)}};var Ag=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Za(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof Za){this.g=void 0!==e?e:n.g,xg(this,n.j),this.s=n.s,Cd(this,n.i),ff(this,n.m),this.l=n.l,e=n.h;var t=new gf;t.i=e.i,e.g&&(t.g=new Id(e.g),t.h=e.h),uy(this,t),this.o=n.o}else n&&(t=String(n).match(Ag))?(this.g=!!e,xg(this,t[1]||"",!0),this.s=pf(t[2]||""),Cd(this,t[3]||"",!0),ff(this,t[4]),this.l=pf(t[5]||"",!0),uy(this,t[6]||"",!0),this.o=pf(t[7]||"")):(this.g=!!e,this.h=new gf(null,this.g))}function vs(n){return new Za(n)}function xg(n,e,t){n.j=t?pf(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function Cd(n,e,t){n.i=t?pf(e,!0):e}function ff(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function uy(n,e,t){e instanceof gf?(n.h=e,function ew(n,e){e&&!n.j&&(Lu(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(XE(this,r),Mg(this,i,t))},n)),n.j=e}(n.h,n.g)):(t||(e=Td(e,Sd)),n.h=new gf(e,n.g))}function $n(n,e,t){n.h.set(e,t)}function Rg(n){return $n(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function pf(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Td(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,Dd),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function Dd(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Za.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Td(e,cy,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Td(e,cy,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(Td(t,"/"==t.charAt(0)?gT:pT,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Td(t,mT)),n.join("")};var cy=/[#\/\?@]/g,pT=/[#\?:]/g,gT=/[#\?]/g,Sd=/[#\?@]/g,mT=/#/g;function gf(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Lu(n){n.g||(n.g=new Id,n.h=0,n.i&&function JE(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var u=n[t].substring(0,r);i=n[t].substring(r+1)}else u=n[t];e(u,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function XE(n,e){Lu(n),e=Gl(n,e),bd(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,bd((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&ay(n)))}function bo(n,e){return Lu(n),e=Gl(n,e),bd(n.g.h,e)}function Mg(n,e,t){XE(n,e),0<t.length&&(n.i=null,n.g.set(Gl(n,e),Xh(t)),n.h+=t.length)}function Gl(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function dy(n){this.l=n||_T,n=xt.PerformanceNavigationTiming?0<(n=xt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(xt.g&&xt.g.Ea&&xt.g.Ea()&&xt.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(ot=gf.prototype).add=function(n,e){Lu(this),this.i=null,n=Gl(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},ot.forEach=function(n,e){Lu(this),this.g.forEach(function(t,r){na(t,function(i){n.call(e,i,r,this)},this)},this)},ot.T=function(){Lu(this);for(var n=this.g.R(),e=this.g.T(),t=[],r=0;r<e.length;r++)for(var i=n[r],u=0;u<i.length;u++)t.push(e[r]);return t},ot.R=function(n){Lu(this);var e=[];if("string"==typeof n)bo(this,n)&&(e=B_(e,this.g.get(Gl(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=B_(e,n[t])}return e},ot.set=function(n,e){return Lu(this),this.i=null,bo(this,n=Gl(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},ot.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},ot.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var r=e[t],i=encodeURIComponent(String(r));r=this.R(r);for(var u=0;u<r.length;u++){var c=i;""!==r[u]&&(c+="="+encodeURIComponent(String(r[u]))),n.push(c)}}return this.i=n.join("&")};var _T=10;function nw(n){return!!n.h||!!n.g&&n.g.size>=n.j}function rw(n){return n.h?1:n.g?n.g.size:0}function hy(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function Ng(n,e){n.g?n.g.add(e):n.h=e}function yT(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function fy(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return Xh(n.i)}function py(){}function vT(){this.g=new py}function dx(n,e,t){const r=t||"";try{wd(n,function(i,u){let c=i;hd(i)&&(c=of(i)),e.push(r+u+"="+encodeURIComponent(c))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function Ad(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(u){}}function mf(n){this.l=n.$b||null,this.j=n.ib||!1}function _f(n,e){Zr.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=Pg,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}dy.prototype.cancel=function(){if(this.i=fy(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},py.prototype.stringify=function(n){return xt.JSON.stringify(n,void 0)},py.prototype.parse=function(n){return xt.JSON.parse(n,void 0)},Tr(mf,ZE),mf.prototype.g=function(){return new _f(this.l,this.j)},mf.prototype.i=function(n){return function(){return n}}({}),Tr(_f,Zr);var Pg=0;function ET(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function Mi(n){n.readyState=4,n.l=null,n.j=null,n.A=null,kg(n)}function kg(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(ot=_f.prototype).open=function(n,e){if(this.readyState!=Pg)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,kg(this)},ot.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||xt).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},ot.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Mi(this)),this.readyState=Pg},ot.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,kg(this)),this.g&&(this.readyState=3,kg(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==xt.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;ET(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},ot.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Mi(this):kg(this),3==this.readyState&&ET(this)}},ot.Ua=function(n){this.g&&(this.response=this.responseText=n,Mi(this))},ot.Ta=function(n){this.g&&(this.response=n,Mi(this))},ot.ha=function(){this.g&&Mi(this)},ot.setRequestHeader=function(n,e){this.v.append(n,e)},ot.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},ot.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(_f.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var fx=xt.JSON.parse;function vr(n){Zr.call(this),this.headers=new Id,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=gy,this.K=this.L=!1}Tr(vr,Zr);var gy="",iw=/^https?$/i,wT=["POST","PUT"];function sw(n){return"content-type"==n.toLowerCase()}function my(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,ow(n),Fg(n)}function ow(n){n.D||(n.D=!0,Kr(n,"complete"),Kr(n,"error"))}function Og(n){if(n.h&&void 0!==F_&&(!n.C[1]||4!=Ka(n)||2!=n.ba()))if(n.v&&4==Ka(n))X_(n.Fa,0,n);else if(Kr(n,"readystatechange"),4==Ka(n)){n.h=!1;try{const h=n.ba();e:switch(h){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===h){var i=String(n.H).match(Ag)[1]||null;if(!i&&xt.self&&xt.self.location){var u=xt.self.location.protocol;i=u.substr(0,u.length-1)}r=!iw.test(i?i.toLowerCase():"")}t=r}if(t)Kr(n,"complete"),Kr(n,"success");else{n.m=6;try{var c=2<Ka(n)?n.g.statusText:""}catch(_){c=""}n.j=c+" ["+n.ba()+"]",ow(n)}}finally{Fg(n)}}}function Fg(n,e){if(n.g){aw(n);const t=n.g,r=n.C[0]?hg:null;n.g=null,n.C=null,e||Kr(n,"ready");try{t.onreadystatechange=r}catch(i){}}}function aw(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(xt.clearTimeout(n.A),n.A=null)}function Ka(n){return n.g?n.g.readyState:0}function uw(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case gy:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function _y(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=function IT(n){let e="";return ef(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):$n(n,e,t))}function Uu(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function ql(n){this.za=0,this.l=[],this.h=new md,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Uu("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Uu("baseRetryDelayMs",5e3,n),this.$a=Uu("retryDelaySeedMs",1e4,n),this.Ya=Uu("forwardChannelMaxRetries",2,n),this.ra=Uu("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new dy(n&&n.concurrentRequestLimit),this.Ca=new vT,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function yy(n){if(lw(n),3==n.G){var e=n.V++,t=vs(n.F);$n(t,"SID",n.J),$n(t,"RID",e),$n(t,"TYPE","terminate"),Dr(n,t),(e=new Ou(n,n.h,e,void 0)).K=2,e.v=Rg(vs(t)),t=!1,xt.navigator&&xt.navigator.sendBeacon&&(t=xt.navigator.sendBeacon(e.v.toString(),"")),!t&&xt.Image&&((new Image).src=e.v,t=!0),t||(e.g=Xl(e.l,null),e.g.ea(e.v)),e.F=Date.now(),df(e)}Ql(n)}function Vu(n){n.g&&(vf(n),n.g.cancel(),n.g=null)}function lw(n){Vu(n),n.u&&(xt.clearTimeout(n.u),n.u=null),Ya(n),n.i.cancel(),n.m&&("number"==typeof n.m&&xt.clearTimeout(n.m),n.m=null)}function vy(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&xd(n)}function xd(n){nw(n.i)||n.m||(n.m=!0,BE(n.Ha,n),n.C=0)}function Rd(n,e){var t;t=e?e.m:n.V++;const r=vs(n.F);$n(r,"SID",n.J),$n(r,"RID",t),$n(r,"AID",n.U),Dr(n,r),n.o&&n.s&&_y(r,n.o,n.s),t=new Ou(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=Bu(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),Ng(n.i,t),Tg(t,r,e)}function Dr(n,e){n.j&&wd({},function(t,r){$n(e,r,t)})}function Bu(n,e,t){t=Math.min(n.l.length,t);var r=n.j?zr(n.j.Oa,n.j,n):null;e:{var i=n.l;let u=-1;for(;;){const c=["count="+t];-1==u?0<t?(u=i[0].h,c.push("ofs="+u)):u=0:c.push("ofs="+u);let h=!0;for(let _=0;_<t;_++){let w=i[_].h;const D=i[_].g;if(w-=u,0>w)u=Math.max(0,i[_].h-100),h=!1;else try{dx(D,c,"req"+w+"_")}catch(S){r&&r(D)}}if(h){r=c.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,r}function yf(n){n.g||n.u||(n.Y=1,BE(n.Ga,n),n.A=0)}function qi(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=zl(zr(n.Ga,n),Yl(n,n.A)),n.A++,0))}function vf(n){null!=n.B&&(xt.clearTimeout(n.B),n.B=null)}function Zl(n){n.g=new Ou(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=vs(n.oa);$n(e,"RID","rpc"),$n(e,"SID",n.J),$n(e,"CI",n.N?"0":"1"),$n(e,"AID",n.U),Dr(n,e),$n(e,"TYPE","xmlhttp"),n.o&&n.s&&_y(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=Rg(vs(e)),t.s=null,t.U=!0,YE(t,n)}function Ya(n){null!=n.v&&(xt.clearTimeout(n.v),n.v=null)}function Kl(n,e){var t=null;if(n.g==e){Ya(n),vf(n),n.g=null;var r=2}else{if(!hy(n.i,e))return;t=e.D,yT(n.i,e),r=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var i=n.C;Kr(r=wg(),new Io(r,t,e,i)),xd(n)}else yf(n);else if(3==(i=e.o)||0==i&&0<n.I||!(1==r&&function ia(n,e){return!(rw(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=zl(zr(n.Ha,n,e),Yl(n,n.C)),n.C++,0)))}(n,e)||2==r&&qi(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),i){case 1:js(n,5);break;case 4:js(n,10);break;case 3:js(n,6);break;default:js(n,2)}}function Yl(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function js(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var r=zr(n.jb,n);t||(t=new Za("//www.google.com/images/cleardot.gif"),xt.location&&"http"==xt.location.protocol||xg(t,"https"),Rg(t)),function hx(n,e){const t=new md;if(xt.Image){const r=new Image;r.onload=Jh(Ad,t,r,"TestLoadImage: loaded",!0,e),r.onerror=Jh(Ad,t,r,"TestLoadImage: error",!1,e),r.onabort=Jh(Ad,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=Jh(Ad,t,r,"TestLoadImage: timeout",!1,e),xt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Ri(2);n.G=0,n.j&&n.j.va(e),Ql(n),lw(n)}function Ql(n){n.G=0,n.I=-1,n.j&&((0!=fy(n.i).length||0!=n.l.length)&&(n.i.i.length=0,Xh(n.l),n.l.length=0),n.j.ua())}function Jl(n,e,t){let r=function ly(n){return n instanceof Za?vs(n):new Za(n,void 0)}(t);if(""!=r.i)e&&Cd(r,e+"."+r.i),ff(r,r.m);else{const i=xt.location;r=function fT(n,e,t,r){var i=new Za(null,void 0);return n&&xg(i,n),e&&Cd(i,e),t&&ff(i,t),r&&(i.l=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,t)}return n.aa&&ef(n.aa,function(i,u){$n(r,u,i)}),t=n.sa,(e=n.D)&&t&&$n(r,e,t),$n(r,"VER",n.ma),Dr(n,r),r}function Xl(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new vr(t&&n.Ba&&!n.qa?new mf({ib:!0}):n.qa)).L=n.H,e}function ec(){}function Ef(){if(tf&&!(10<=Number(ax)))throw Error("Environmental error: no available transport.")}function Zi(n,e){Zr.call(this),this.g=new ql(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!j_(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!j_(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new tc(this)}function Ey(n){iy.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function wy(){lf.call(this),this.status=1}function tc(n){this.g=n}(ot=vr.prototype).ea=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():sy.g(),this.C=function ry(n){return n.h||(n.h=n.i())}(this.u?this.u:sy),this.g.onreadystatechange=zr(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(u){return void my(this,u)}n=t||"";const i=new Id(this.headers);r&&wd(r,function(u,c){i.set(c,u)}),r=function V_(n){e:{var e=sw;const t=n.length,r="string"==typeof n?n.split(""):n;for(let i=0;i<t;i++)if(i in r&&e.call(void 0,r[i],i,n)){e=i;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(i.T()),t=xt.FormData&&n instanceof xt.FormData,!(0<=fg(wT,e))||r||t||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(u,c){this.g.setRequestHeader(c,u)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{aw(this),0<this.B&&((this.K=function px(n){return tf&&function ox(){return function sT(n){var e=sx;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=$_(String(pd)).split("."),t=$_("9").split("."),r=Math.max(e.length,t.length);for(let c=0;0==n&&c<r;c++){var i=e[c]||"",u=t[c]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],0==i[0].length&&0==u[0].length)break;n=fd(0==i[1].length?0:parseInt(i[1],10),0==u[1].length?0:parseInt(u[1],10))||fd(0==i[2].length,0==u[2].length)||fd(i[2],u[2]),i=i[3],u=u[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=zr(this.pa,this)):this.A=X_(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(u){my(this,u)}},ot.pa=function(){void 0!==F_&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Kr(this,"timeout"),this.abort(8))},ot.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Kr(this,"complete"),Kr(this,"abort"),Fg(this))},ot.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Fg(this,!0)),vr.Z.M.call(this)},ot.Fa=function(){this.s||(this.F||this.v||this.l?Og(this):this.cb())},ot.cb=function(){Og(this)},ot.ba=function(){try{return 2<Ka(this)?this.g.status:-1}catch(n){return-1}},ot.ga=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},ot.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),fx(e)}},ot.Da=function(){return this.m},ot.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(ot=ql.prototype).ma=8,ot.G=1,ot.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch(e){}},ot.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const i=new Ou(this,this.h,n,void 0);let u=this.s;if(this.P&&(u?(u=iT(u),bE(u,this.P)):u=this.P),null===this.o&&(i.H=u),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var r=this.l[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=Bu(this,i,e),$n(t=vs(this.F),"RID",n),$n(t,"CVER",22),this.D&&$n(t,"X-HTTP-Session-Id",this.D),Dr(this,t),this.o&&u&&_y(t,this.o,u),Ng(this.i,i),this.Ra&&$n(t,"TYPE","init"),this.ja?($n(t,"$req",e),$n(t,"SID","null"),i.$=!0,Tg(i,t,null)):Tg(i,t,e),this.G=2}}else 3==this.G&&(n?Rd(this,n):0==this.l.length||nw(this.i)||Rd(this))},ot.Ga=function(){if(this.u=null,Zl(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=zl(zr(this.bb,this),n)}},ot.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Ri(10),Vu(this),Zl(this))},ot.ab=function(){null!=this.v&&(this.v=null,Vu(this),qi(this),Ri(19))},ot.jb=function(n){n?(this.h.info("Successfully pinged google.com"),Ri(2)):(this.h.info("Failed to ping google.com"),Ri(1))},(ot=ec.prototype).xa=function(){},ot.wa=function(){},ot.va=function(){},ot.ua=function(){},ot.Oa=function(){},Ef.prototype.g=function(n,e){return new Zi(n,e)},Tr(Zi,Zr),Zi.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),BE(zr(n.hb,n,e))),Ri(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=Jl(n,null,n.W),xd(n)},Zi.prototype.close=function(){yy(this.g)},Zi.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,vy(this.g,e)}else this.v?((e={}).__data__=of(n),vy(this.g,e)):vy(this.g,n)},Zi.prototype.M=function(){this.g.j=null,delete this.j,yy(this.g),delete this.g,Zi.Z.M.call(this)},Tr(Ey,iy),Tr(wy,lf),Tr(tc,ec),tc.prototype.xa=function(){Kr(this.g,"a")},tc.prototype.wa=function(n){Kr(this.g,new Ey(n))},tc.prototype.va=function(n){Kr(this.g,new wy(n))},tc.prototype.ua=function(){Kr(this.g,"b")},Ef.prototype.createWebChannel=Ef.prototype.g,Zi.prototype.send=Zi.prototype.u,Zi.prototype.open=Zi.prototype.m,Zi.prototype.close=Zi.prototype.close,Ig.NO_ERROR=0,Ig.TIMEOUT=8,Ig.HTTP_ERROR=6,qE.COMPLETE="complete",KE.EventType=uf,uf.OPEN="a",uf.CLOSE="b",uf.ERROR="c",uf.MESSAGE="d",Zr.prototype.listen=Zr.prototype.N,vr.prototype.listenOnce=vr.prototype.O,vr.prototype.getLastError=vr.prototype.La,vr.prototype.getLastErrorCode=vr.prototype.Da,vr.prototype.getStatus=vr.prototype.ba,vr.prototype.getResponseJson=vr.prototype.Qa,vr.prototype.getResponseText=vr.prototype.ga,vr.prototype.send=vr.prototype.ea;var cw=Ga.createWebChannelTransport=function(){return new Ef},dw=Ga.getStatEventTarget=function(){return wg()},Lg=Ga.ErrorCode=Ig,hw=Ga.EventType=qE,bT=Ga.Event=Wl,Iy=Ga.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},CT=Ga.FetchXmlHttpFactory=mf,wf=Ga.WebChannel=KE,fw=Ga.XhrIo=vr;const pw="@firebase/firestore";class ii{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ii.UNAUTHENTICATED=new ii(null),ii.GOOGLE_CREDENTIALS=new ii("google-credentials-uid"),ii.FIRST_PARTY=new ii("first-party-uid"),ii.MOCK_USER=new ii("mock-user");let nc="9.8.0";const ju=new ta.Yd("@firebase/firestore");function Ug(){return ju.logLevel}function $e(n,...e){if(ju.logLevel<=ta.in.DEBUG){const t=e.map(bf);ju.debug(`Firestore (${nc}): ${n}`,...t)}}function Fr(n,...e){if(ju.logLevel<=ta.in.ERROR){const t=e.map(bf);ju.error(`Firestore (${nc}): ${n}`,...t)}}function If(n,...e){if(ju.logLevel<=ta.in.WARN){const t=e.map(bf);ju.warn(`Firestore (${nc}): ${n}`,...t)}}function bf(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function at(n="Unexpected state"){const e=`FIRESTORE (${nc}) INTERNAL ASSERTION FAILED: `+n;throw Fr(e),new Error(e)}function Tt(n,e){n||at()}function tt(n,e){return n}const ge={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Le extends Q.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Lr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class DT{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class ST{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(ii.UNAUTHENTICATED))}shutdown(){}}class Md{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class AT{constructor(e){this.t=e,this.currentUser=ii.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const u=w=>this.i!==i?(i=this.i,t(w)):Promise.resolve();let c=new Lr;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new Lr,e.enqueueRetryable(()=>u(this.currentUser))};const h=()=>{const w=c;e.enqueueRetryable((0,he.Z)(function*(){yield w.promise,yield u(r.currentUser)}))},_=w=>{$e("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=w,this.auth.addAuthTokenListener(this.o),h()};this.t.onInit(w=>_(w)),setTimeout(()=>{if(!this.auth){const w=this.t.getImmediate({optional:!0});w?_(w):($e("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new Lr)}},0),h()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?($e("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Tt("string"==typeof r.accessToken),new DT(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Tt(null===e||"string"==typeof e),new ii(e)}}class gw{constructor(e,t,r){this.type="FirstParty",this.user=ii.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const i=e.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)}}class xT{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new gw(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(ii.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class by{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Vg{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const r=u=>{null!=u.error&&$e("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const c=u.token!==this.p;return this.p=u.token,$e("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>r(u))};const i=u=>{$e("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.appCheck.addTokenListener(this.o)};this.g.onInit(u=>i(u)),setTimeout(()=>{if(!this.appCheck){const u=this.g.getImmediate({optional:!0});u?i(u):$e("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Tt("string"==typeof t.token),this.p=t.token,new by(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class Ki{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.I(r),this.T=r=>t.writeSequenceNumber(r))}I(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.T&&this.T(e),e}}function RT(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}Ki.A=-1;class mw{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=RT(40);for(let u=0;u<i.length;++u)r.length<20&&i[u]<t&&(r+=e.charAt(i[u]%e.length))}return r}}function Vt(n,e){return n<e?-1:n>e?1:0}function Nd(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function _w(n){return n+"\0"}class or{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Le(ge.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Le(ge.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Le(ge.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Le(ge.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return or.fromMillis(Date.now())}static fromDate(e){return or.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new or(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Vt(this.nanoseconds,e.nanoseconds):Vt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class wt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new wt(e)}static min(){return new wt(new or(0,0))}static max(){return new wt(new or(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function Cy(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function $u(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Bg(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class jg{constructor(e,t,r){void 0===t?t=0:t>e.length&&at(),void 0===r?r=e.length-t:r>e.length-t&&at(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===jg.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof jg?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const u=e.get(i),c=t.get(i);if(u<c)return-1;if(u>c)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class rn extends jg{construct(e,t,r){return new rn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Le(ge.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new rn(t)}static emptyPath(){return new rn([])}}const MT=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Yr extends jg{construct(e,t,r){return new Yr(e,t,r)}static isValidIdentifier(e){return MT.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Yr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Yr(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const u=()=>{if(0===r.length)throw new Le(ge.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;i<e.length;){const h=e[i];if("\\"===h){if(i+1===e.length)throw new Le(ge.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const _=e[i+1];if("\\"!==_&&"."!==_&&"`"!==_)throw new Le(ge.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=_,i+=2}else"`"===h?(c=!c,i++):"."!==h||c?(r+=h,i++):(u(),i++)}if(u(),c)throw new Le(ge.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Yr(t)}static emptyPath(){return new Yr([])}}class sa{constructor(e){this.fields=e,e.sort(Yr.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Nd(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class Er{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new Er(t)}static fromUint8Array(e){const t=function(r){let i="";for(let u=0;u<r.length;++u)i+=String.fromCharCode(r[u]);return i}(e);return new Er(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Vt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Er.EMPTY_BYTE_STRING=new Er("");const Ty=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Hu(n){if(Tt(!!n),"string"==typeof n){let e=0;const t=Ty.exec(n);if(Tt(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Hn(n.seconds),nanos:Hn(n.nanos)}}function Hn(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function oa(n){return"string"==typeof n?Er.fromBase64String(n):Er.fromUint8Array(n)}function Cf(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function NT(n){const e=n.mapValue.fields.__previous_value__;return Cf(e)?NT(e):e}function Tf(n){const e=Hu(n.mapValue.fields.__local_write_time__.timestampValue);return new or(e.seconds,e.nanos)}class Dy{constructor(e,t,r,i,u,c,h,_){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=u,this.forceLongPolling=c,this.autoDetectLongPolling=h,this.useFetchStreams=_}}class Co{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Co("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Co&&e.projectId===this.projectId&&e.database===this.database}}function Pd(n){return null==n}function kd(n){return 0===n&&1/n==-1/0}function $g(n){return"number"==typeof n&&Number.isInteger(n)&&!kd(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class Qe{constructor(e){this.path=e}static fromPath(e){return new Qe(rn.fromString(e))}static fromName(e){return new Qe(rn.fromString(e).popFirst(5))}static empty(){return new Qe(rn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===rn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return rn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Qe(new rn(e.slice()))}}const Qa={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Od={nullValue:"NULL_VALUE"};function Wu(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Cf(n)?4:Ry(n)?9007199254740991:10:at()}function aa(n,e){if(n===e)return!0;const t=Wu(n);if(t!==Wu(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Tf(n).isEqual(Tf(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const u=Hu(r.timestampValue),c=Hu(i.timestampValue);return u.seconds===c.seconds&&u.nanos===c.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,oa(n.bytesValue).isEqual(oa(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return Hn(r.geoPointValue.latitude)===Hn(i.geoPointValue.latitude)&&Hn(r.geoPointValue.longitude)===Hn(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return Hn(r.integerValue)===Hn(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const u=Hn(r.doubleValue),c=Hn(i.doubleValue);return u===c?kd(u)===kd(c):isNaN(u)&&isNaN(c)}return!1}(n,e);case 9:return Nd(n.arrayValue.values||[],e.arrayValue.values||[],aa);case 10:return function(r,i){const u=r.mapValue.fields||{},c=i.mapValue.fields||{};if(Cy(u)!==Cy(c))return!1;for(const h in u)if(u.hasOwnProperty(h)&&(void 0===c[h]||!aa(u[h],c[h])))return!1;return!0}(n,e);default:return at()}var i}function Fd(n,e){return void 0!==(n.values||[]).find(t=>aa(t,e))}function Ja(n,e){if(n===e)return 0;const t=Wu(n),r=Wu(e);if(t!==r)return Vt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Vt(n.booleanValue,e.booleanValue);case 2:return function(i,u){const c=Hn(i.integerValue||i.doubleValue),h=Hn(u.integerValue||u.doubleValue);return c<h?-1:c>h?1:c===h?0:isNaN(c)?isNaN(h)?0:-1:1}(n,e);case 3:return Hg(n.timestampValue,e.timestampValue);case 4:return Hg(Tf(n),Tf(e));case 5:return Vt(n.stringValue,e.stringValue);case 6:return function(i,u){const c=oa(i),h=oa(u);return c.compareTo(h)}(n.bytesValue,e.bytesValue);case 7:return function(i,u){const c=i.split("/"),h=u.split("/");for(let _=0;_<c.length&&_<h.length;_++){const w=Vt(c[_],h[_]);if(0!==w)return w}return Vt(c.length,h.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,u){const c=Vt(Hn(i.latitude),Hn(u.latitude));return 0!==c?c:Vt(Hn(i.longitude),Hn(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,u){const c=i.values||[],h=u.values||[];for(let _=0;_<c.length&&_<h.length;++_){const w=Ja(c[_],h[_]);if(w)return w}return Vt(c.length,h.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,u){if(i===Qa.mapValue&&u===Qa.mapValue)return 0;if(i===Qa.mapValue)return 1;if(u===Qa.mapValue)return-1;const c=i.fields||{},h=Object.keys(c),_=u.fields||{},w=Object.keys(_);h.sort(),w.sort();for(let D=0;D<h.length&&D<w.length;++D){const S=Vt(h[D],w[D]);if(0!==S)return S;const P=Ja(c[h[D]],_[w[D]]);if(0!==P)return P}return Vt(h.length,w.length)}(n.mapValue,e.mapValue);default:throw at()}}function Hg(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Vt(n,e);const t=Hu(n),r=Hu(e),i=Vt(t.seconds,r.seconds);return 0!==i?i:Vt(t.nanos,r.nanos)}function rc(n){return Sy(n)}function Sy(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=Hu(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?oa(n.bytesValue).toBase64():"referenceValue"in n?Qe.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",u=!0;for(const c of r.values||[])u?u=!1:i+=",",i+=Sy(c);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let u="{",c=!0;for(const h of i)c?c=!1:u+=",",u+=`${h}:${Sy(r.fields[h])}`;return u+"}"}(n.mapValue):at();var e}function ic(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Ay(n){return!!n&&"integerValue"in n}function sc(n){return!!n&&"arrayValue"in n}function Wg(n){return!!n&&"nullValue"in n}function xy(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Df(n){return!!n&&"mapValue"in n}function Ld(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return $u(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Ld(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Ld(n.arrayValue.values[t]);return e}return Object.assign({},n)}function Ry(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function vw(n){return"nullValue"in n?Od:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?ic(Co.empty(),Qe.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:at()}function Ew(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?ic(Co.empty(),Qe.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Qa:at()}function My(n,e){const t=Ja(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function Ny(n,e){const t=Ja(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class Ni{constructor(e){this.value=e}static empty(){return new Ni({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Df(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ld(t)}setAll(e){let t=Yr.emptyPath(),r={},i=[];e.forEach((c,h)=>{if(!t.isImmediateParentOf(h)){const _=this.getFieldsMap(t);this.applyChanges(_,r,i),r={},i=[],t=h.popLast()}c?r[h.lastSegment()]=Ld(c):i.push(h.lastSegment())});const u=this.getFieldsMap(t);this.applyChanges(u,r,i)}delete(e){const t=this.field(e.popLast());Df(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return aa(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Df(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){$u(t,(i,u)=>e[i]=u);for(const i of r)delete e[i]}clone(){return new Ni(Ld(this.value))}}function ww(n){const e=[];return $u(n.fields,(t,r)=>{const i=new Yr([t]);if(Df(r)){const u=ww(r.mapValue).fields;if(0===u.length)e.push(i);else for(const c of u)e.push(i.child(c))}else e.push(i)}),new sa(e)}class Wn{constructor(e,t,r,i,u,c){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.data=u,this.documentState=c}static newInvalidDocument(e){return new Wn(e,0,wt.min(),wt.min(),Ni.empty(),0)}static newFoundDocument(e,t,r){return new Wn(e,1,t,wt.min(),r,0)}static newNoDocument(e,t){return new Wn(e,2,t,wt.min(),Ni.empty(),0)}static newUnknownDocument(e,t){return new Wn(e,3,t,wt.min(),Ni.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ni.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ni.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Wn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Wn(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Sf{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function Py(n){return n.fields.find(e=>2===e.kind)}function zn(n){return n.fields.filter(e=>2!==e.kind)}Sf.UNKNOWN_ID=-1;class Af{constructor(e,t){this.fieldPath=e,this.kind=t}}class xf{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new xf(0,To.min())}}function Iw(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=wt.fromTimestamp(1e9===r?new or(t+1,0):new or(t,r));return new To(i,Qe.empty(),e)}function bw(n){return new To(n.readTime,n.key,-1)}class To{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new To(wt.min(),Qe.empty(),-1)}static max(){return new To(wt.max(),Qe.empty(),-1)}}function ky(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Qe.comparator(n.documentKey,e.documentKey),0!==t?t:Vt(n.largestBatchId,e.largestBatchId))}class ar{constructor(e,t){this.comparator=e,this.root=t||si.EMPTY}insert(e,t){return new ar(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,si.BLACK,null,null))}remove(e){return new ar(this.comparator,this.root.remove(e,this.comparator).copy(null,null,si.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Xa(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Xa(this.root,e,this.comparator,!1)}getReverseIterator(){return new Xa(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Xa(this.root,e,this.comparator,!0)}}class Xa{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,t&&i&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(0===u){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class si{constructor(e,t,r,i,u){this.key=e,this.value=t,this.color=null!=r?r:si.RED,this.left=null!=i?i:si.EMPTY,this.right=null!=u?u:si.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,u){return new si(null!=e?e:this.key,null!=t?t:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=u?u:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const u=r(e,i.key);return i=u<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===u?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return si.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return si.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,si.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,si.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw at();const e=this.left.check();if(e!==this.right.check())throw at();return e+(this.isRed()?0:1)}}si.EMPTY=null,si.RED=!0,si.BLACK=!1,si.EMPTY=new class{constructor(){this.size=0}get key(){throw at()}get value(){throw at()}get color(){throw at()}get left(){throw at()}get right(){throw at()}copy(n,e,t,r,i){return this}insert(n,e,t){return new si(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Pn{constructor(e){this.comparator=e,this.data=new ar(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Oy(this.data.getIterator())}getIteratorFrom(e){return new Oy(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Pn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,u=r.getNext().key;if(0!==this.comparator(i,u))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Pn(this.comparator);return t.data=e,t}}class Oy{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Ud(n){return n.hasNext()?n.getNext():void 0}class Cw{constructor(e,t=null,r=[],i=[],u=null,c=null,h=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=u,this.startAt=c,this.endAt=h,this.P=null}}function PT(n,e=null,t=[],r=[],i=null,u=null,c=null){return new Cw(n,e,t,r,i,u,c)}function zu(n){const e=tt(n);if(null===e.P){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(i=r).field.canonicalString()+i.op.toString()+rc(i.value);var i}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),Pd(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>rc(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>rc(r)).join(",")),e.P=t}return e.P}function Yi(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let i=0;i<n.orderBy.length;i++)if(!LT(n.orderBy[i],e.orderBy[i]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let i=0;i<n.filters.length;i++)if((t=n.filters[i]).op!==(r=e.filters[i]).op||!t.field.isEqual(r.field)||!aa(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Uy(n.startAt,e.startAt)&&Uy(n.endAt,e.endAt)}function zg(n){return Qe.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function Gg(n,e){return n.filters.filter(t=>t instanceof An&&t.field.isEqual(e))}function Do(n,e,t){let r=Od,i=!0;for(const u of Gg(n,e)){let c=Od,h=!0;switch(u.op){case"<":case"<=":c=vw(u.value);break;case"==":case"in":case">=":c=u.value;break;case">":c=u.value,h=!1;break;case"!=":case"not-in":c=Od}My({value:r,inclusive:i},{value:c,inclusive:h})<0&&(r=c,i=h)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const c=t.position[u];My({value:r,inclusive:i},{value:c,inclusive:t.inclusive})<0&&(r=c,i=t.inclusive);break}return{value:r,inclusive:i}}function $s(n,e,t){let r=Qa,i=!0;for(const u of Gg(n,e)){let c=Qa,h=!0;switch(u.op){case">=":case">":c=Ew(u.value),h=!1;break;case"==":case"in":case"<=":c=u.value;break;case"<":c=u.value,h=!1;break;case"!=":case"not-in":c=Qa}Ny({value:r,inclusive:i},{value:c,inclusive:h})>0&&(r=c,i=h)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const c=t.position[u];Ny({value:r,inclusive:i},{value:c,inclusive:t.inclusive})>0&&(r=c,i=t.inclusive);break}return{value:r,inclusive:i}}class An extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.V(e,t,r):new Dw(e,t,r):"array-contains"===t?new OT(e,r):"in"===t?new FT(e,r):"not-in"===t?new Fy(e,r):"array-contains-any"===t?new Rf(e,r):new An(e,t,r)}static V(e,t,r){return"in"===t?new Sw(e,r):new kT(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(Ja(t,this.value)):null!==t&&Wu(this.value)===Wu(t)&&this.v(Ja(t,this.value))}v(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return at()}}S(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class Dw extends An{constructor(e,t,r){super(e,t,r),this.key=Qe.fromName(r.referenceValue)}matches(e){const t=Qe.comparator(e.key,this.key);return this.v(t)}}class Sw extends An{constructor(e,t){super(e,"in",t),this.keys=Aw(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class kT extends An{constructor(e,t){super(e,"not-in",t),this.keys=Aw(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Aw(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Qe.fromName(r.referenceValue))}class OT extends An{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return sc(t)&&Fd(t.arrayValue,this.value)}}class FT extends An{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Fd(this.value.arrayValue,t)}}class Fy extends An{constructor(e,t){super(e,"not-in",t)}matches(e){if(Fd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Fd(this.value.arrayValue,t)}}class Rf extends An{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!sc(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Fd(this.value.arrayValue,r))}}class Gu{constructor(e,t){this.position=e,this.inclusive=t}}class oc{constructor(e,t="asc"){this.field=e,this.dir=t}}function LT(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function Ly(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const u=e[i],c=n.position[i];if(r=u.field.isKeyField()?Qe.comparator(Qe.fromName(c.referenceValue),t.key):Ja(c,t.data.field(u.field)),"desc"===u.dir&&(r*=-1),0!==r)break}return r}function Uy(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!aa(n.position[t],e.position[t]))return!1;return!0}class Hs{constructor(e,t=null,r=[],i=[],u=null,c="F",h=null,_=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=u,this.limitType=c,this.startAt=h,this.endAt=_,this.D=null,this.C=null}}function xw(n,e,t,r,i,u,c,h){return new Hs(n,e,t,r,i,u,c,h)}function ac(n){return new Hs(n)}function Mf(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function Vd(n){for(const e of n.filters)if(e.S())return e.field;return null}function qg(n){return null!==n.collectionGroup}function uc(n){const e=tt(n);if(null===e.D){e.D=[];const t=Vd(e),r=Mf(e);if(null!==t&&null===r)t.isKeyField()||e.D.push(new oc(t)),e.D.push(new oc(Yr.keyField(),"asc"));else{let i=!1;for(const u of e.explicitOrderBy)e.D.push(u),u.field.isKeyField()&&(i=!0);if(!i){const u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.D.push(new oc(Yr.keyField(),u))}}}return e.D}function Es(n){const e=tt(n);if(!e.C)if("F"===e.limitType)e.C=PT(e.path,e.collectionGroup,uc(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const u of uc(e))t.push(new oc(u.field,"desc"===u.dir?"asc":"desc"));const r=e.endAt?new Gu(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new Gu(e.startAt.position,e.startAt.inclusive):null;e.C=PT(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e.C}function Vy(n,e,t){return new Hs(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Bd(n,e){return Yi(Es(n),Es(e))&&n.limitType===e.limitType}function By(n){return`${zu(Es(n))}|lt:${n.limitType}`}function Zg(n){return`Query(target=${function Tw(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${rc(r.value)}`;var r}).join(", ")}]`),Pd(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>rc(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>rc(t)).join(",")),`Target(${e})`}(Es(n))}; limitType=${n.limitType})`}function Kg(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):Qe.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of t.explicitOrderBy)if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,u,c){const h=Ly(i,u,c);return i.inclusive?h<=0:h<0}(t.startAt,uc(t),r)||t.endAt&&!function(i,u,c){const h=Ly(i,u,c);return i.inclusive?h>=0:h>0}(t.endAt,uc(t),r)));var t,r}function Mw(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Nw(n){return(e,t)=>{let r=!1;for(const i of uc(n)){const u=UT(i,e,t);if(0!==u)return u;r=r||i.field.isKeyField()}return 0}}function UT(n,e,t){const r=n.field.isKeyField()?Qe.comparator(e.key,t.key):function(i,u,c){const h=u.data.field(i),_=c.data.field(i);return null!==h&&null!==_?Ja(h,_):at()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return at()}}function Pw(n,e){if(n.N){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:kd(e)?"-0":e}}function kw(n){return{integerValue:""+n}}function Ow(n,e){return $g(e)?kw(e):Pw(n,e)}class Yg{constructor(){this._=void 0}}function VT(n,e,t){return n instanceof jd?function(r,i){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(u.fields.__previous_value__=i),{mapValue:u}}(t,e):n instanceof lc?Lw(n,e):n instanceof cc?Uw(n,e):function(r,i){const u=Fw(r,i),c=Vw(u)+Vw(r.k);return Ay(u)&&Ay(r.k)?kw(c):Pw(r.M,c)}(n,e)}function BT(n,e,t){return n instanceof lc?Lw(n,e):n instanceof cc?Uw(n,e):t}function Fw(n,e){return n instanceof $d?Ay(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class jd extends Yg{}class lc extends Yg{constructor(e){super(),this.elements=e}}function Lw(n,e){const t=Bw(e);for(const r of n.elements)t.some(i=>aa(i,r))||t.push(r);return{arrayValue:{values:t}}}class cc extends Yg{constructor(e){super(),this.elements=e}}function Uw(n,e){let t=Bw(e);for(const r of n.elements)t=t.filter(i=>!aa(i,r));return{arrayValue:{values:t}}}class $d extends Yg{constructor(e,t){super(),this.M=e,this.k=t}}function Vw(n){return Hn(n.integerValue||n.doubleValue)}function Bw(n){return sc(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Hd{constructor(e,t){this.field=e,this.transform=t}}class $w{constructor(e,t){this.version=e,this.transformResults=t}}class wr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new wr}static exists(e){return new wr(void 0,e)}static updateTime(e){return new wr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Nf(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class Pf{}function Hw(n,e,t){n instanceof So?function(r,i,u){const c=r.value.clone(),h=hc(r.fieldTransforms,i,u.transformResults);c.setAll(h),i.convertToFoundDocument(u.version,c).setHasCommittedMutations()}(n,e,t):n instanceof dc?function(r,i,u){if(!Nf(r.precondition,i))return void i.convertToUnknownDocument(u.version);const c=hc(r.fieldTransforms,i,u.transformResults),h=i.data;h.setAll(zw(r)),h.setAll(c),i.convertToFoundDocument(u.version,h).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Qg(n,e,t){var i;n instanceof So?function(r,i,u){if(!Nf(r.precondition,i))return;const c=r.value.clone(),h=jT(r.fieldTransforms,u,i);c.setAll(h),i.convertToFoundDocument($y(i),c).setHasLocalMutations()}(n,e,t):n instanceof dc?function(r,i,u){if(!Nf(r.precondition,i))return;const c=jT(r.fieldTransforms,u,i),h=i.data;h.setAll(zw(r)),h.setAll(c),i.convertToFoundDocument($y(i),h).setHasLocalMutations()}(n,e,t):Nf(n.precondition,i=e)&&i.convertToNoDocument(wt.min())}function Ww(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),u=Fw(r.transform,i||null);null!=u&&(null==t&&(t=Ni.empty()),t.set(r.field,u))}return t||null}function jy(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&Nd(t,r,(i,u)=>function jw(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof lc&&r instanceof lc||t instanceof cc&&r instanceof cc?Nd(t.elements,r.elements,aa):t instanceof $d&&r instanceof $d?aa(t.k,r.k):t instanceof jd&&r instanceof jd);var t,r}(i,u))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}function $y(n){return n.isFoundDocument()?n.version:wt.min()}class So extends Pf{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}}class dc extends Pf{constructor(e,t,r,i,u=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=u,this.type=1}}function zw(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function hc(n,e,t){const r=new Map;Tt(n.length===t.length);for(let i=0;i<t.length;i++){const u=n[i],c=u.transform,h=e.data.field(u.field);r.set(u.field,BT(c,h,t[i]))}return r}function jT(n,e,t){const r=new Map;for(const i of n){const u=i.transform,c=t.data.field(i.field);r.set(i.field,VT(u,c,e))}return r}class fc extends Pf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class Gw extends Pf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}class qw{constructor(e){this.count=e}}var Ir,cn;function yt(n){switch(n){default:return at();case ge.CANCELLED:case ge.UNKNOWN:case ge.DEADLINE_EXCEEDED:case ge.RESOURCE_EXHAUSTED:case ge.INTERNAL:case ge.UNAVAILABLE:case ge.UNAUTHENTICATED:return!1;case ge.INVALID_ARGUMENT:case ge.NOT_FOUND:case ge.ALREADY_EXISTS:case ge.PERMISSION_DENIED:case ge.FAILED_PRECONDITION:case ge.ABORTED:case ge.OUT_OF_RANGE:case ge.UNIMPLEMENTED:case ge.DATA_LOSS:return!0}}function Zw(n){if(void 0===n)return Fr("GRPC error has no .code"),ge.UNKNOWN;switch(n){case Ir.OK:return ge.OK;case Ir.CANCELLED:return ge.CANCELLED;case Ir.UNKNOWN:return ge.UNKNOWN;case Ir.DEADLINE_EXCEEDED:return ge.DEADLINE_EXCEEDED;case Ir.RESOURCE_EXHAUSTED:return ge.RESOURCE_EXHAUSTED;case Ir.INTERNAL:return ge.INTERNAL;case Ir.UNAVAILABLE:return ge.UNAVAILABLE;case Ir.UNAUTHENTICATED:return ge.UNAUTHENTICATED;case Ir.INVALID_ARGUMENT:return ge.INVALID_ARGUMENT;case Ir.NOT_FOUND:return ge.NOT_FOUND;case Ir.ALREADY_EXISTS:return ge.ALREADY_EXISTS;case Ir.PERMISSION_DENIED:return ge.PERMISSION_DENIED;case Ir.FAILED_PRECONDITION:return ge.FAILED_PRECONDITION;case Ir.ABORTED:return ge.ABORTED;case Ir.OUT_OF_RANGE:return ge.OUT_OF_RANGE;case Ir.UNIMPLEMENTED:return ge.UNIMPLEMENTED;case Ir.DATA_LOSS:return ge.DATA_LOSS;default:return at()}}(cn=Ir||(Ir={}))[cn.OK=0]="OK",cn[cn.CANCELLED=1]="CANCELLED",cn[cn.UNKNOWN=2]="UNKNOWN",cn[cn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",cn[cn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",cn[cn.NOT_FOUND=5]="NOT_FOUND",cn[cn.ALREADY_EXISTS=6]="ALREADY_EXISTS",cn[cn.PERMISSION_DENIED=7]="PERMISSION_DENIED",cn[cn.UNAUTHENTICATED=16]="UNAUTHENTICATED",cn[cn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",cn[cn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",cn[cn.ABORTED=10]="ABORTED",cn[cn.OUT_OF_RANGE=11]="OUT_OF_RANGE",cn[cn.UNIMPLEMENTED=12]="UNIMPLEMENTED",cn[cn.INTERNAL=13]="INTERNAL",cn[cn.UNAVAILABLE=14]="UNAVAILABLE",cn[cn.DATA_LOSS=15]="DATA_LOSS";class qu{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,u]of r)if(this.equalsFn(i,e))return u}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let u=0;u<i.length;u++)if(this.equalsFn(i[u][0],e))return void(i[u]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){$u(this.inner,(t,r)=>{for(const[i,u]of r)e(i,u)})}isEmpty(){return Bg(this.inner)}size(){return this.innerSize}}const $T=new ar(Qe.comparator);function Pi(){return $T}const HT=new ar(Qe.comparator);function Wd(...n){let e=HT;for(const t of n)e=e.insert(t.key,t);return e}function Zu(){return new qu(n=>n.toString(),(n,e)=>n.isEqual(e))}const ur=new ar(Qe.comparator),_x=new Pn(Qe.comparator);function mn(...n){let e=_x;for(const t of n)e=e.add(t);return e}const WT=new Pn(Vt);function Jg(){return WT}class zd{constructor(e,t,r,i,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,Gd.createSynthesizedTargetChangeForCurrentChange(e,t)),new zd(wt.min(),r,Jg(),Pi(),mn())}}class Gd{constructor(e,t,r,i,u){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t){return new Gd(Er.EMPTY_BYTE_STRING,t,mn(),mn(),mn())}}class kf{constructor(e,t,r,i){this.O=e,this.removedTargetIds=t,this.key=r,this.F=i}}class Hy{constructor(e,t){this.targetId=e,this.$=t}}class Kw{constructor(e,t,r=Er.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class Yw{constructor(){this.B=0,this.L=Qw(),this.U=Er.EMPTY_BYTE_STRING,this.q=!1,this.K=!0}get current(){return this.q}get resumeToken(){return this.U}get G(){return 0!==this.B}get j(){return this.K}W(e){e.approximateByteSize()>0&&(this.K=!0,this.U=e)}H(){let e=mn(),t=mn(),r=mn();return this.L.forEach((i,u)=>{switch(u){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:at()}}),new Gd(this.U,this.q,e,t,r)}J(){this.K=!1,this.L=Qw()}Y(e,t){this.K=!0,this.L=this.L.insert(e,t)}X(e){this.K=!0,this.L=this.L.remove(e)}Z(){this.B+=1}tt(){this.B-=1}et(){this.K=!0,this.q=!0}}class zT{constructor(e){this.nt=e,this.st=new Map,this.it=Pi(),this.rt=qd(),this.ot=new Pn(Vt)}ut(e){for(const t of e.O)e.F&&e.F.isFoundDocument()?this.at(t,e.F):this.ct(t,e.key,e.F);for(const t of e.removedTargetIds)this.ct(t,e.key,e.F)}ht(e){this.forEachTarget(e,t=>{const r=this.lt(t);switch(e.state){case 0:this.ft(t)&&r.W(e.resumeToken);break;case 1:r.tt(),r.G||r.J(),r.W(e.resumeToken);break;case 2:r.tt(),r.G||this.removeTarget(t);break;case 3:this.ft(t)&&(r.et(),r.W(e.resumeToken));break;case 4:this.ft(t)&&(this.dt(t),r.W(e.resumeToken));break;default:at()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach((r,i)=>{this.ft(i)&&t(i)})}_t(e){const t=e.targetId,r=e.$.count,i=this.wt(t);if(i){const u=i.target;if(zg(u))if(0===r){const c=new Qe(u.path);this.ct(t,c,Wn.newNoDocument(c,wt.min()))}else Tt(1===r);else this.gt(t)!==r&&(this.dt(t),this.ot=this.ot.add(t))}}yt(e){const t=new Map;this.st.forEach((u,c)=>{const h=this.wt(c);if(h){if(u.current&&zg(h.target)){const _=new Qe(h.target.path);null!==this.it.get(_)||this.It(c,_)||this.ct(c,_,Wn.newNoDocument(_,e))}u.j&&(t.set(c,u.H()),u.J())}});let r=mn();this.rt.forEach((u,c)=>{let h=!0;c.forEachWhile(_=>{const w=this.wt(_);return!w||2===w.purpose||(h=!1,!1)}),h&&(r=r.add(u))}),this.it.forEach((u,c)=>c.setReadTime(e));const i=new zd(e,t,this.ot,this.it,r);return this.it=Pi(),this.rt=qd(),this.ot=new Pn(Vt),i}at(e,t){if(!this.ft(e))return;const r=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,r),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Tt(t.key).add(e))}ct(e,t,r){if(!this.ft(e))return;const i=this.lt(e);this.It(e,t)?i.Y(t,1):i.X(t),this.rt=this.rt.insert(t,this.Tt(t).delete(e)),r&&(this.it=this.it.insert(t,r))}removeTarget(e){this.st.delete(e)}gt(e){const t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Z(e){this.lt(e).Z()}lt(e){let t=this.st.get(e);return t||(t=new Yw,this.st.set(e,t)),t}Tt(e){let t=this.rt.get(e);return t||(t=new Pn(Vt),this.rt=this.rt.insert(e,t)),t}ft(e){const t=null!==this.wt(e);return t||$e("WatchChangeAggregator","Detected inactive target",e),t}wt(e){const t=this.st.get(e);return t&&t.G?null:this.nt.Et(e)}dt(e){this.st.set(e,new Yw),this.nt.getRemoteKeysForTarget(e).forEach(t=>{this.ct(e,t,null)})}It(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}function qd(){return new ar(Qe.comparator)}function Qw(){return new ar(Qe.comparator)}const GT={asc:"ASCENDING",desc:"DESCENDING"},qT={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class Xg{constructor(e,t){this.databaseId=e,this.N=t}}function Zd(n,e){return n.N?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Wy(n,e){return n.N?e.toBase64():e.toUint8Array()}function Jw(n,e){return Zd(n,e.toTimestamp())}function Qr(n){return Tt(!!n),wt.fromTimestamp(function(e){const t=Hu(e);return new or(t.seconds,t.nanos)}(n))}function pc(n,e){return(t=n,new rn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function Kd(n){const e=rn.fromString(n);return Tt(Yy(e)),e}function Of(n,e){return pc(n.databaseId,e.path)}function ua(n,e){const t=Kd(e);if(t.get(1)!==n.databaseId.projectId)throw new Le(ge.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Le(ge.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Qe(qy(t))}function zy(n,e){return pc(n.databaseId,e)}function Gy(n){const e=Kd(n);return 4===e.length?rn.emptyPath():qy(e)}function Yd(n){return new rn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function qy(n){return Tt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function Xw(n,e,t){return{name:Of(n,e),fields:t.value.mapValue.fields}}function Zy(n,e,t){const r=ua(n,e.name),i=Qr(e.updateTime),u=new Ni({mapValue:{fields:e.fields}}),c=Wn.newFoundDocument(r,i,u);return t&&c.setHasCommittedMutations(),t?c.setHasCommittedMutations():c}function em(n,e){let t;if(e instanceof So)t={update:Xw(n,e.key,e.value)};else if(e instanceof fc)t={delete:Of(n,e.key)};else if(e instanceof dc)t={update:Xw(n,e.key,e.data),updateMask:eD(e.fieldMask)};else{if(!(e instanceof Gw))return at();t={verify:Of(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,u){const c=u.transform;if(c instanceof jd)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof lc)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof cc)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof $d)return{fieldPath:u.field.canonicalString(),increment:c.k};throw at()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:Jw(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:at()),t;var i}function eI(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?wr.updateTime(Qr(i.updateTime)):void 0!==i.exists?wr.exists(i.exists):wr.none():wr.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(u,c){let h=null;"setToServerValue"in c?(Tt("REQUEST_TIME"===c.setToServerValue),h=new jd):"appendMissingElements"in c?h=new lc(c.appendMissingElements.values||[]):"removeAllFromArray"in c?h=new cc(c.removeAllFromArray.values||[]):"increment"in c?h=new $d(u,c.increment):at();const _=Yr.fromServerFormat(c.fieldPath);return new Hd(_,h)}(n,i)):[];var i;if(e.update){const i=ua(n,e.update.name),u=new Ni({mapValue:{fields:e.update.fields}});if(e.updateMask){const c=new sa((e.updateMask.fieldPaths||[]).map(w=>Yr.fromServerFormat(w)));return new dc(i,u,c,t,r)}return new So(i,u,t,r)}if(e.delete){const i=ua(n,e.delete);return new fc(i,t)}if(e.verify){const i=ua(n,e.verify);return new Gw(i,t)}return at()}function YT(n,e){return{documents:[zy(n,e.path)]}}function Ky(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=zy(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=zy(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(_){if(0===_.length)return;const w=_.map(D=>function(S){if("=="===S.op){if(xy(S.value))return{unaryFilter:{field:Qd(S.field),op:"IS_NAN"}};if(Wg(S.value))return{unaryFilter:{field:Qd(S.field),op:"IS_NULL"}}}else if("!="===S.op){if(xy(S.value))return{unaryFilter:{field:Qd(S.field),op:"IS_NOT_NAN"}};if(Wg(S.value))return{unaryFilter:{field:Qd(S.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Qd(S.field),op:Lf(S.op),value:S.value}}}(D));return 1===w.length?w[0]:{compositeFilter:{op:"AND",filters:w}}}(e.filters);i&&(t.structuredQuery.where=i);const u=function(_){if(0!==_.length)return _.map(w=>{return{field:Qd((D=w).field),direction:nI(D.dir)};var D})}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const c=(w=e.limit,n.N||Pd(w)?w:{value:w});var w,h,_;return null!==c&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt={before:(h=e.startAt).inclusive,values:h.position}),e.endAt&&(t.structuredQuery.endAt={before:!(_=e.endAt).inclusive,values:_.position}),t}function Ff(n){let e=Gy(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Tt(1===r);const D=t.from[0];D.allDescendants?i=D.collectionId:e=e.child(D.collectionId)}let u=[];t.where&&(u=tI(t.where));let c=[];t.orderBy&&(c=t.orderBy.map(D=>{return new oc(Jd((S=D).field),function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(S.direction));var S}));let h=null;t.limit&&(h=function(D){let S;return S="object"==typeof D?D.value:D,Pd(S)?null:S}(t.limit));let _=null;var D;t.startAt&&(_=new Gu((D=t.startAt).values||[],!!D.before));let w=null;return t.endAt&&(w=function(D){return new Gu(D.values||[],!D.before)}(t.endAt)),xw(e,i,c,u,h,"F",_,w)}function tI(n){return n?void 0!==n.unaryFilter?[XT(n)]:void 0!==n.fieldFilter?[JT(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>tI(e)).reduce((e,t)=>e.concat(t)):at():[]}function nI(n){return GT[n]}function Lf(n){return qT[n]}function Qd(n){return{fieldPath:n.canonicalString()}}function Jd(n){return Yr.fromServerFormat(n.fieldPath)}function JT(n){return An.create(Jd(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return at()}}(n.fieldFilter.op),n.fieldFilter.value)}function XT(n){switch(n.unaryFilter.op){case"IS_NAN":const e=Jd(n.unaryFilter.field);return An.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=Jd(n.unaryFilter.field);return An.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Jd(n.unaryFilter.field);return An.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Jd(n.unaryFilter.field);return An.create(i,"!=",{nullValue:"NULL_VALUE"});default:return at()}}function eD(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Yy(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function ki(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=gc(e)),e=tD(n.get(t),e);return gc(e)}function tD(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const u=n.charAt(i);switch(u){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=u}}return t}function gc(n){return n+"\x01\x01"}function la(n){const e=n.length;if(Tt(e>=2),2===e)return Tt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),rn.emptyPath();const t=e-2,r=[];let i="";for(let u=0;u<e;){const c=n.indexOf("\x01",u);switch((c<0||c>t)&&at(),n.charAt(c+1)){case"\x01":const h=n.substring(u,c);let _;0===i.length?_=h:(i+=h,_=i,i=""),r.push(_);break;case"\x10":i+=n.substring(u,c),i+="\0";break;case"\x11":i+=n.substring(u,c+1);break;default:at()}u=c+2}return new rn(r)}const Qy=["userId","batchId"];function tm(n,e){return[n,ki(e)]}function Jy(n,e,t){return[n,ki(e),t]}const nD={},rI=["prefixPath","collectionGroup","readTime","documentId"],rD=["prefixPath","collectionGroup","documentId"],Xy=["collectionGroup","readTime","prefixPath","documentId"],iD=["canonicalId","targetId"],iI=["targetId","path"],sI=["path","targetId"],sD=["collectionId","parent"],oD=["indexId","uid"],aD=["uid","sequenceNumber"],ev=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],uD=["indexId","uid","orderedDocumentKey"],oI=["userId","collectionPath","documentId"],lD=["userId","collectionPath","largestBatchId"],cD=["userId","collectionGroup","largestBatchId"],aI=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],dD=[...aI,"documentOverlays"],uI=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],hD=[...uI,"indexConfiguration","indexState","indexEntries"],lI="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class cI{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class me{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&at(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new me((r,i)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,i)},this.catchCallback=u=>{this.wrapFailure(t,u).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof me?t:me.resolve(t)}catch(t){return me.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):me.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):me.reject(t)}static resolve(e){return new me((t,r)=>{t(e)})}static reject(e){return new me((t,r)=>{r(e)})}static waitFor(e){return new me((t,r)=>{let i=0,u=0,c=!1;e.forEach(h=>{++i,h.next(()=>{++u,c&&u===i&&t()},_=>r(_))}),c=!0,u===i&&t()})}static or(e){let t=me.resolve(!1);for(const r of e)t=t.next(i=>i?me.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,u)=>{r.push(t.call(this,i,u))}),this.waitFor(r)}}class Uf{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.At=new Lr,this.transaction.oncomplete=()=>{this.At.resolve()},this.transaction.onabort=()=>{t.error?this.At.reject(new Xd(e,t.error)):this.At.resolve()},this.transaction.onerror=r=>{const i=Vf(r.target.error);this.At.reject(new Xd(e,i))}}static open(e,t,r,i){try{return new Uf(t,e.transaction(i,r))}catch(u){throw new Xd(t,u)}}get Rt(){return this.At.promise}abort(e){e&&this.At.reject(e),this.aborted||($e("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}bt(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new pD(t)}}class Ao{constructor(e,t,r){this.name=e,this.version=t,this.Pt=r,12.2===Ao.Vt((0,Q.z$)())&&Fr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return $e("SimpleDb","Removing database:",e),_c(window.indexedDB.deleteDatabase(e)).toPromise()}static vt(){if(!(0,Q.hl)())return!1;if(Ao.St())return!0;const e=(0,Q.z$)(),t=Ao.Vt(e),r=0<t&&t<10,i=Ao.Dt(e),u=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||u)}static St(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.Ct)}static xt(e,t){return e.store(t)}static Vt(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static Dt(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}Nt(e){var t=this;return(0,he.Z)(function*(){return t.db||($e("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const u=indexedDB.open(t.name,t.version);u.onsuccess=c=>{r(c.target.result)},u.onblocked=()=>{i(new Xd(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},u.onerror=c=>{const h=c.target.error;i("VersionError"===h.name?new Le(ge.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===h.name?new Le(ge.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+h):new Xd(e,h))},u.onupgradeneeded=c=>{$e("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',c.oldVersion),t.Pt.kt(c.target.result,u.transaction,c.oldVersion,t.version).next(()=>{$e("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.Mt&&(t.db.onversionchange=r=>t.Mt(r)),t.db})()}Ot(e){this.Mt=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var u=this;return(0,he.Z)(function*(){const c="readonly"===t;let h=0;for(;;){++h;try{u.db=yield u.Nt(e);const _=Uf.open(u.db,e,c?"readonly":"readwrite",r),w=i(_).next(D=>(_.bt(),D)).catch(D=>(_.abort(D),me.reject(D))).toPromise();return w.catch(()=>{}),yield _.Rt,w}catch(_){const w="FirebaseError"!==_.name&&h<3;if($e("SimpleDb","Transaction failed with error:",_.message,"Retrying:",w),u.close(),!w)return Promise.reject(_)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class fD{constructor(e){this.Ft=e,this.$t=!1,this.Bt=null}get isDone(){return this.$t}get Lt(){return this.Bt}set cursor(e){this.Ft=e}done(){this.$t=!0}Ut(e){this.Bt=e}delete(){return _c(this.Ft.delete())}}class Xd extends Le{constructor(e,t){super(ge.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function mc(n){return"IndexedDbTransactionError"===n.name}class pD{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?($e("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):($e("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),_c(r)}add(e){return $e("SimpleDb","ADD",this.store.name,e,e),_c(this.store.add(e))}get(e){return _c(this.store.get(e)).next(t=>(void 0===t&&(t=null),$e("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return $e("SimpleDb","DELETE",this.store.name,e),_c(this.store.delete(e))}count(){return $e("SimpleDb","COUNT",this.store.name),_c(this.store.count())}qt(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),u=[];return this.Kt(i,(c,h)=>{u.push(h)}).next(()=>u)}{const i=this.store.getAll(r.range);return new me((u,c)=>{i.onerror=h=>{c(h.target.error)},i.onsuccess=h=>{u(h.target.result)}})}}Gt(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new me((i,u)=>{r.onerror=c=>{u(c.target.error)},r.onsuccess=c=>{i(c.target.result)}})}Qt(e,t){$e("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.jt=!1;const i=this.cursor(r);return this.Kt(i,(u,c,h)=>h.delete())}Wt(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.Kt(i,t)}zt(e){const t=this.cursor({});return new me((r,i)=>{t.onerror=u=>{const c=Vf(u.target.error);i(c)},t.onsuccess=u=>{const c=u.target.result;c?e(c.primaryKey,c.value).next(h=>{h?c.continue():r()}):r()}})}Kt(e,t){const r=[];return new me((i,u)=>{e.onerror=c=>{u(c.target.error)},e.onsuccess=c=>{const h=c.target.result;if(!h)return void i();const _=new fD(h),w=t(h.primaryKey,h.value,_);if(w instanceof me){const D=w.catch(S=>(_.done(),me.reject(S)));r.push(D)}_.isDone?i():null===_.Lt?h.continue():h.continue(_.Lt)}}).next(()=>me.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.jt?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function _c(n){return new me((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=Vf(r.target.error);t(i)}})}let nm=!1;function Vf(n){const e=Ao.Vt((0,Q.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Le("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return nm||(nm=!0,setTimeout(()=>{throw r},0)),r}}return n}class tv extends cI{constructor(e,t){super(),this.Ht=e,this.currentSequenceNumber=t}}function Sr(n,e){const t=tt(n);return Ao.xt(t.Ht,e)}class nv{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const u=this.mutations[i];u.key.isEqual(e.key)&&Hw(u,e,r[i])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&Qg(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&Qg(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(t=>{const r=e.get(t.key),i=r;this.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(wt.min())})}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),mn())}isEqual(e){return this.batchId===e.batchId&&Nd(this.mutations,e.mutations,(t,r)=>jy(t,r))&&Nd(this.baseMutations,e.baseMutations,(t,r)=>jy(t,r))}}class rv{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Tt(e.mutations.length===r.length);let i=ur;const u=e.mutations;for(let c=0;c<u.length;c++)i=i.insert(u[c].key,r[c].version);return new rv(e,t,r,i)}}class Bf{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Ku{constructor(e,t,r,i,u=wt.min(),c=wt.min(),h=Er.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=h}withSequenceNumber(e){return new Ku(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Ku(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Ku(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class dI{constructor(e){this.Jt=e}}function iv(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:rm(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:Of(i=n.Jt,(u=e).key),fields:u.data.value.mapValue.fields,updateTime:Zd(i,u.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Yu(e.version)};else{if(!e.isUnknownDocument())return at();r.unknownDocument={path:t.path.toArray(),version:Yu(e.version)}}var i,u;return r}function rm(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Yu(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function eh(n){const e=new or(n.seconds,n.nanoseconds);return wt.fromTimestamp(e)}function th(n,e){const t=(e.baseMutations||[]).map(u=>eI(n.Jt,u));for(let u=0;u<e.mutations.length-1;++u){const c=e.mutations[u];u+1<e.mutations.length&&void 0!==e.mutations[u+1].transform&&(c.updateTransforms=e.mutations[u+1].transform.fieldTransforms,e.mutations.splice(u+1,1),++u)}const r=e.mutations.map(u=>eI(n.Jt,u)),i=or.fromMillis(e.localWriteTimeMs);return new nv(e.batchId,i,t,r)}function Qu(n){const e=eh(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?eh(n.lastLimboFreeSnapshotVersion):wt.min();let r;var i;return void 0!==n.query.documents?(Tt(1===(i=n.query).documents.length),r=Es(ac(Gy(i.documents[0])))):r=Es(Ff(n.query)),new Ku(r,n.targetId,0,n.lastListenSequenceNumber,e,t,Er.fromBase64String(n.resumeToken))}function hI(n,e){const t=Yu(e.snapshotVersion),r=Yu(e.lastLimboFreeSnapshotVersion);let i;i=zg(e.target)?YT(n.Jt,e.target):Ky(n.Jt,e.target);const u=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:zu(e.target),readTime:t,resumeToken:u,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function Ju(n){const e=Ff({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?Vy(e,e.limit,"L"):e}function yc(n,e){return new Bf(e.largestBatchId,eI(n.Jt,e.overlayMutation))}function fI(n,e){const t=e.path.lastSegment();return[n,ki(e.path.popLast()),t]}class vx{getBundleMetadata(e,t){return sv(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:eh(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return sv(e).put({bundleId:(r=t).id,createTime:Yu(Qr(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return pI(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:Ju(i.bundledQuery),readTime:eh(i.readTime)};var i})}saveNamedQuery(e,t){return pI(e).put({name:(r=t).name,readTime:Yu(Qr(r.readTime)),bundledQuery:r.bundledQuery});var r}}function sv(n){return Sr(n,"bundles")}function pI(n){return Sr(n,"namedQueries")}class ov{constructor(e,t){this.M=e,this.userId=t}static Yt(e,t){return new ov(e,t.uid||"")}getOverlay(e,t){return jf(e).get(fI(this.userId,t)).next(r=>r?yc(this.M,r):null)}saveOverlays(e,t,r){const i=[];return r.forEach((u,c)=>{const h=new Bf(t,c);i.push(this.Xt(e,h))}),me.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(c=>i.add(ki(c.getCollectionPath())));const u=[];return i.forEach(c=>{const h=IDBKeyRange.bound([this.userId,c,r],[this.userId,c,r+1],!1,!0);u.push(jf(e).Qt("collectionPathOverlayIndex",h))}),me.waitFor(u)}getOverlaysForCollection(e,t,r){const i=Zu(),u=ki(t),c=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,Number.POSITIVE_INFINITY],!0);return jf(e).qt("collectionPathOverlayIndex",c).next(h=>{for(const _ of h){const w=yc(this.M,_);i.set(w.getKey(),w)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const u=Zu();let c;const h=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return jf(e).Wt({index:"collectionGroupOverlayIndex",range:h},(_,w,D)=>{const S=yc(this.M,w);u.size()<i||S.largestBatchId===c?(u.set(S.getKey(),S),c=S.largestBatchId):D.done()}).next(()=>u)}Xt(e,t){return jf(e).put(function(r,i,u){const[c,h,_]=fI(i,u.mutation.key);return{userId:i,collectionPath:h,documentId:_,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:em(r.Jt,u.mutation)}}(this.M,this.userId,t))}}function jf(n){return Sr(n,"documentOverlays")}class vc{constructor(){}Zt(e,t){this.te(e,t),t.ee()}te(e,t){if("nullValue"in e)this.ne(t,5);else if("booleanValue"in e)this.ne(t,10),t.se(e.booleanValue?1:0);else if("integerValue"in e)this.ne(t,15),t.se(Hn(e.integerValue));else if("doubleValue"in e){const r=Hn(e.doubleValue);isNaN(r)?this.ne(t,13):(this.ne(t,15),kd(r)?t.se(0):t.se(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ne(t,20),"string"==typeof r?t.ie(r):(t.ie(`${r.seconds||""}`),t.se(r.nanos||0))}else if("stringValue"in e)this.re(e.stringValue,t),this.oe(t);else if("bytesValue"in e)this.ne(t,30),t.ue(oa(e.bytesValue)),this.oe(t);else if("referenceValue"in e)this.ae(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ne(t,45),t.se(r.latitude||0),t.se(r.longitude||0)}else"mapValue"in e?Ry(e)?this.ne(t,Number.MAX_SAFE_INTEGER):(this.ce(e.mapValue,t),this.oe(t)):"arrayValue"in e?(this.he(e.arrayValue,t),this.oe(t)):at()}re(e,t){this.ne(t,25),this.le(e,t)}le(e,t){t.ie(e)}ce(e,t){const r=e.fields||{};this.ne(t,55);for(const i of Object.keys(r))this.re(i,t),this.te(r[i],t)}he(e,t){const r=e.values||[];this.ne(t,50);for(const i of r)this.te(i,t)}ae(e,t){this.ne(t,37),Qe.fromName(e).path.forEach(r=>{this.ne(t,60),this.le(r,t)})}ne(e,t){e.se(t)}oe(e){e.se(2)}}function gI(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function av(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const u=gI(255&t[i]);if(r+=u,8!==u)break}return r}(n);return Math.ceil(e/8)}vc.fe=new vc;class uv{constructor(){this.buffer=new Uint8Array(1024),this.position=0}de(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this._e(r.value),r=t.next();this.we()}me(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.ge(r.value),r=t.next();this.ye()}pe(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this._e(r);else if(r<2048)this._e(960|r>>>6),this._e(128|63&r);else if(t<"\ud800"||"\udbff"<t)this._e(480|r>>>12),this._e(128|63&r>>>6),this._e(128|63&r);else{const i=t.codePointAt(0);this._e(240|i>>>18),this._e(128|63&i>>>12),this._e(128|63&i>>>6),this._e(128|63&i)}}this.we()}Ie(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.ge(r);else if(r<2048)this.ge(960|r>>>6),this.ge(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.ge(480|r>>>12),this.ge(128|63&r>>>6),this.ge(128|63&r);else{const i=t.codePointAt(0);this.ge(240|i>>>18),this.ge(128|63&i>>>12),this.ge(128|63&i>>>6),this.ge(128|63&i)}}this.ye()}Te(e){const t=this.Ee(e),r=av(t);this.Ae(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Re(e){const t=this.Ee(e),r=av(t);this.Ae(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}be(){this.Pe(255),this.Pe(255)}Ve(){this.ve(255),this.ve(255)}reset(){this.position=0}seed(e){this.Ae(e.length),this.buffer.set(e,this.position),this.position+=e.length}Se(){return this.buffer.slice(0,this.position)}Ee(e){const t=function(i){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,i,!1),new Uint8Array(u.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}_e(e){const t=255&e;0===t?(this.Pe(0),this.Pe(255)):255===t?(this.Pe(255),this.Pe(0)):this.Pe(t)}ge(e){const t=255&e;0===t?(this.ve(0),this.ve(255)):255===t?(this.ve(255),this.ve(0)):this.ve(e)}we(){this.Pe(0),this.Pe(1)}ye(){this.ve(0),this.ve(1)}Pe(e){this.Ae(1),this.buffer[this.position++]=e}ve(e){this.Ae(1),this.buffer[this.position++]=~e}Ae(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class im{constructor(e){this.De=e}ue(e){this.De.de(e)}ie(e){this.De.pe(e)}se(e){this.De.Te(e)}ee(){this.De.be()}}class $f{constructor(e){this.De=e}ue(e){this.De.me(e)}ie(e){this.De.Ie(e)}se(e){this.De.Re(e)}ee(){this.De.Ve()}}class Hf{constructor(){this.De=new uv,this.Ce=new im(this.De),this.xe=new $f(this.De)}seed(e){this.De.seed(e)}Ne(e){return 0===e?this.Ce:this.xe}Se(){return this.De.Se()}reset(){this.De.reset()}}class Xu{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Xu(this.indexId,this.documentKey,this.arrayValue,r)}}function el(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=mI(n.arrayValue,e.arrayValue),0!==t?t:(t=mI(n.directionalValue,e.directionalValue),0!==t?t:Qe.comparator(n.documentKey,e.documentKey)))}function mI(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class mD{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Me=e.orderBy,this.Oe=[];for(const t of e.filters){const r=t;r.S()?this.Fe=r:this.Oe.push(r)}}$e(e){const t=Py(e);if(void 0!==t&&!this.Be(t))return!1;const r=zn(e);let i=0,u=0;for(;i<r.length&&this.Be(r[i]);++i);if(i===r.length)return!0;if(void 0!==this.Fe){const c=r[i];if(!this.Le(this.Fe,c)||!this.Ue(this.Me[u++],c))return!1;++i}for(;i<r.length;++i){const c=r[i];if(u>=this.Me.length||!this.Ue(this.Me[u++],c))return!1}return!0}Be(e){for(const t of this.Oe)if(this.Le(t,e))return!0;return!1}Le(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Ue(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class lv{constructor(){this.qe=new cv}addToCollectionParentIndex(e,t){return this.qe.add(t),me.resolve()}getCollectionParents(e,t){return me.resolve(this.qe.getEntries(t))}addFieldIndex(e,t){return me.resolve()}deleteFieldIndex(e,t){return me.resolve()}getDocumentsMatchingTarget(e,t){return me.resolve(null)}getIndexType(e,t){return me.resolve(0)}getFieldIndexes(e,t){return me.resolve([])}getNextCollectionGroupToUpdate(e){return me.resolve(null)}getMinOffset(e,t){return me.resolve(To.min())}updateCollectionGroup(e,t,r){return me.resolve()}updateIndexEntries(e,t){return me.resolve()}}class cv{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Pn(rn.comparator),u=!i.has(r);return this.index[t]=i.add(r),u}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Pn(rn.comparator)).toArray()}}const dv=new Uint8Array(0);class _D{constructor(e,t){this.user=e,this.databaseId=t,this.Ke=new cv,this.Ge=new qu(r=>zu(r),(r,i)=>Yi(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Ke.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.Ke.add(t)});const u={collectionId:r,parent:ki(i)};return _I(e).put(u)}return me.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[_w(t),""],!1,!0);return _I(e).qt(i).next(u=>{for(const c of u){if(c.collectionId!==t)break;r.push(la(c.parent))}return r})}addFieldIndex(e,t){const r=Wf(e),i={indexId:(u=t).indexId,collectionGroup:u.collectionGroup,fields:u.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])};var u;return delete i.indexId,r.add(i).next()}deleteFieldIndex(e,t){const r=Wf(e),i=eu(e),u=ca(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=ca(e);let i=!0;const u=new Map;return me.forEach(this.Qe(t),c=>this.je(e,c).next(h=>{i&&(i=!!h),u.set(c,h)})).next(()=>{if(i){let c=mn();const h=[];return me.forEach(u,(_,w)=>{var D;$e("IndexedDbIndexManager",`Using index ${D=_,`id=${D.indexId}|cg=${D.collectionGroup}|f=${D.fields.map(Zt=>`${Zt.fieldPath}:${Zt.kind}`).join(",")}`} to execute ${zu(t)}`);const S=function(Zt,Ot){const on=Py(Ot);if(void 0===on)return null;for(const wn of Gg(Zt,on.fieldPath))switch(wn.op){case"array-contains-any":return wn.value.arrayValue.values||[];case"array-contains":return[wn.value]}return null}(w,_),P=function(Zt,Ot){const on=new Map;for(const wn of zn(Ot))for(const es of Gg(Zt,wn.fieldPath))switch(es.op){case"==":case"in":on.set(wn.fieldPath.canonicalString(),es.value);break;case"not-in":case"!=":return on.set(wn.fieldPath.canonicalString(),es.value),Array.from(on.values())}return null}(w,_),B=function(Zt,Ot){const on=[];let wn=!0;for(const es of zn(Ot)){const W0=0===es.kind?Do(Zt,es.fieldPath,Zt.startAt):$s(Zt,es.fieldPath,Zt.startAt);on.push(W0.value),wn&&(wn=W0.inclusive)}return new Gu(on,wn)}(w,_),Y=function(Zt,Ot){const on=[];let wn=!0;for(const es of zn(Ot)){const W0=0===es.kind?$s(Zt,es.fieldPath,Zt.endAt):Do(Zt,es.fieldPath,Zt.endAt);on.push(W0.value),wn&&(wn=W0.inclusive)}return new Gu(on,wn)}(w,_),Re=this.We(_,w,B),Ze=this.We(_,w,Y),qt=this.ze(_,w,P),zt=this.He(_.indexId,S,Re,B.inclusive,Ze,Y.inclusive,qt);return me.forEach(zt,Zt=>r.Gt(Zt,t.limit).next(Ot=>{Ot.forEach(on=>{const wn=Qe.fromSegments(on.documentKey);c.has(wn)||(c=c.add(wn),h.push(wn))})}))}).next(()=>h)}return me.resolve(null)})}Qe(e){let t=this.Ge.get(e);return t||(t=[e],this.Ge.set(e,t),t)}He(e,t,r,i,u,c,h){const _=(null!=t?t.length:1)*Math.max(r.length,u.length),w=_/(null!=t?t.length:1),D=[];for(let S=0;S<_;++S){const P=t?this.Je(t[S/w]):dv,B=this.Ye(e,P,r[S%w],i),Y=this.Xe(e,P,u[S%w],c),Re=h.map(Ze=>this.Ye(e,P,Ze,!0));D.push(...this.createRange(B,Y,Re))}return D}Ye(e,t,r,i){const u=new Xu(e,Qe.empty(),t,r);return i?u:u.ke()}Xe(e,t,r,i){const u=new Xu(e,Qe.empty(),t,r);return i?u.ke():u}je(e,t){const r=new mD(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(u=>{let c=null;for(const h of u)r.$e(h)&&(!c||h.fields.length>c.fields.length)&&(c=h);return c})}getIndexType(e,t){let r=2;return me.forEach(this.Qe(t),i=>this.je(e,i).next(u=>{u?0!==r&&u.fields.length<function(c){let h=new Pn(Yr.comparator),_=!1;for(const w of c.filters){const D=w;D.field.isKeyField()||("array-contains"===D.op||"array-contains-any"===D.op?_=!0:h=h.add(D.field))}for(const w of c.orderBy)w.field.isKeyField()||(h=h.add(w.field));return h.size+(_?1:0)}(i)&&(r=1):r=0})).next(()=>r)}Ze(e,t){const r=new Hf;for(const i of zn(e)){const u=t.data.field(i.fieldPath);if(null==u)return null;const c=r.Ne(i.kind);vc.fe.Zt(u,c)}return r.Se()}Je(e){const t=new Hf;return vc.fe.Zt(e,t.Ne(0)),t.Se()}tn(e,t){const r=new Hf;return vc.fe.Zt(ic(this.databaseId,t),r.Ne(function(i){const u=zn(i);return 0===u.length?0:u[u.length-1].kind}(e))),r.Se()}ze(e,t,r){if(null===r)return[];let i=[];i.push(new Hf);let u=0;for(const c of zn(e)){const h=r[u++];for(const _ of i)if(this.en(t,c.fieldPath)&&sc(h))i=this.nn(i,c,h);else{const w=_.Ne(c.kind);vc.fe.Zt(h,w)}}return this.sn(i)}We(e,t,r){return this.ze(e,t,r.position)}sn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Se();return t}nn(e,t,r){const i=[...e],u=[];for(const c of r.arrayValue.values||[])for(const h of i){const _=new Hf;_.seed(h.Se()),vc.fe.Zt(c,_.Ne(t.kind)),u.push(_)}return u}en(e,t){return!!e.filters.find(r=>r instanceof An&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=Wf(e),i=eu(e);return(t?r.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.qt()).next(u=>{const c=[];return me.forEach(u,h=>i.get([h.indexId,this.uid]).next(_=>{c.push(function(w,D){const S=D?new xf(D.sequenceNumber,new To(eh(D.readTime),new Qe(la(D.documentKey)),D.largestBatchId)):xf.empty(),P=w.fields.map(([B,Y])=>new Af(Yr.fromServerFormat(B),Y));return new Sf(w.indexId,w.collectionGroup,P,S)}(h,_))})).next(()=>c)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const u=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==u?u:Vt(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=Wf(e),u=eu(e);return this.rn(e).next(c=>i.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(h=>me.forEach(h,_=>{return u.put({indexId:_.indexId,uid:this.user.uid||"",sequenceNumber:c,readTime:Yu((P=r).readTime),documentKey:ki(P.documentKey.path),largestBatchId:P.largestBatchId});var P})))}updateIndexEntries(e,t){const r=new Map;return me.forEach(t,(i,u)=>{const c=r.get(i.collectionGroup);return(c?me.resolve(c):this.getFieldIndexes(e,i.collectionGroup)).next(h=>(r.set(i.collectionGroup,h),me.forEach(h,_=>this.on(e,i,_).next(w=>{const D=this.un(u,_);return w.isEqual(D)?me.resolve():this.an(e,u,_,w,D)}))))})}cn(e,t,r,i){return ca(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.tn(r,t.key),documentKey:t.key.path.toArray()})}hn(e,t,r,i){return ca(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.tn(r,t.key),t.key.path.toArray()])}on(e,t,r){const i=ca(e);let u=new Pn(el);return i.Wt({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.tn(r,t)])},(c,h)=>{u=u.add(new Xu(r.indexId,t,h.arrayValue,h.directionalValue))}).next(()=>u)}un(e,t){let r=new Pn(el);const i=this.Ze(t,e);if(null==i)return r;const u=Py(t);if(null!=u){const c=e.data.field(u.fieldPath);if(sc(c))for(const h of c.arrayValue.values||[])r=r.add(new Xu(t.indexId,e.key,this.Je(h),i))}else r=r.add(new Xu(t.indexId,e.key,dv,i));return r}an(e,t,r,i,u){$e("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const c=[];return function(h,_,w,D,S){const P=h.getIterator(),B=_.getIterator();let Y=Ud(P),Re=Ud(B);for(;Y||Re;){let Ze=!1,qt=!1;if(Y&&Re){const zt=w(Y,Re);zt<0?qt=!0:zt>0&&(Ze=!0)}else null!=Y?qt=!0:Ze=!0;Ze?(D(Re),Re=Ud(B)):qt?(S(Y),Y=Ud(P)):(Y=Ud(P),Re=Ud(B))}}(i,u,el,h=>{c.push(this.cn(e,t,r,h))},h=>{c.push(this.hn(e,t,r,h))}),me.waitFor(c)}rn(e){let t=1;return eu(e).Wt({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,u)=>{u.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((c,h)=>el(c,h)).filter((c,h,_)=>!h||0!==el(c,_[h-1]));const i=[];i.push(e);for(const c of r){const h=el(c,e),_=el(c,t);if(0===h)i[0]=e.ke();else if(h>0&&_<0)i.push(c),i.push(c.ke());else if(_>0)break}i.push(t);const u=[];for(let c=0;c<i.length;c+=2)u.push(IDBKeyRange.bound([i[c].indexId,this.uid,i[c].arrayValue,i[c].directionalValue,dv,[]],[i[c+1].indexId,this.uid,i[c+1].arrayValue,i[c+1].directionalValue,dv,[]]));return u}getMinOffset(e,t){let r;return me.forEach(this.Qe(t),i=>this.je(e,i).next(u=>{u?(!r||ky(u.indexState.offset,r)<0)&&(r=u.indexState.offset):r=To.min()})).next(()=>r)}}function _I(n){return Sr(n,"collectionParents")}function ca(n){return Sr(n,"indexEntries")}function Wf(n){return Sr(n,"indexConfiguration")}function eu(n){return Sr(n,"indexState")}const yD={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Oi{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Oi(e,Oi.DEFAULT_COLLECTION_PERCENTILE,Oi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function yI(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),u=[],c=IDBKeyRange.only(t.batchId);let h=0;const _=r.Wt({range:c},(D,S,P)=>(h++,P.delete()));u.push(_.next(()=>{Tt(1===h)}));const w=[];for(const D of t.mutations){const S=Jy(e,D.key.path,t.batchId);u.push(i.delete(S)),w.push(D.key)}return me.waitFor(u).next(()=>w)}function hv(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw at();e=n.noDocument}return JSON.stringify(e).length}Oi.DEFAULT_COLLECTION_PERCENTILE=10,Oi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Oi.DEFAULT=new Oi(41943040,Oi.DEFAULT_COLLECTION_PERCENTILE,Oi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Oi.DISABLED=new Oi(-1,0,0);class sm{constructor(e,t,r,i){this.userId=e,this.M=t,this.indexManager=r,this.referenceDelegate=i,this.ln={}}static Yt(e,t,r,i){Tt(""!==e.uid);const u=e.isAuthenticated()?e.uid:"";return new sm(u,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return tu(e).Wt({index:"userMutationsIndex",range:r},(i,u,c)=>{t=!1,c.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const u=tl(e),c=tu(e);return c.add({}).next(h=>{Tt("number"==typeof h);const _=new nv(h,t,r,i),w=function(P,B,Y){const Re=Y.baseMutations.map(qt=>em(P.Jt,qt)),Ze=Y.mutations.map(qt=>em(P.Jt,qt));return{userId:B,batchId:Y.batchId,localWriteTimeMs:Y.localWriteTime.toMillis(),baseMutations:Re,mutations:Ze}}(this.M,this.userId,_),D=[];let S=new Pn((P,B)=>Vt(P.canonicalString(),B.canonicalString()));for(const P of i){const B=Jy(this.userId,P.key.path,h);S=S.add(P.key.path.popLast()),D.push(c.put(w)),D.push(u.put(B,nD))}return S.forEach(P=>{D.push(this.indexManager.addToCollectionParentIndex(e,P))}),e.addOnCommittedListener(()=>{this.ln[h]=_.keys()}),me.waitFor(D).next(()=>_)})}lookupMutationBatch(e,t){return tu(e).get(t).next(r=>r?(Tt(r.userId===this.userId),th(this.M,r)):null)}fn(e,t){return this.ln[t]?me.resolve(this.ln[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.ln[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let u=null;return tu(e).Wt({index:"userMutationsIndex",range:i},(c,h,_)=>{h.userId===this.userId&&(Tt(h.batchId>=r),u=th(this.M,h)),_.done()}).next(()=>u)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return tu(e).Wt({index:"userMutationsIndex",range:t,reverse:!0},(i,u,c)=>{r=u.batchId,c.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return tu(e).qt("userMutationsIndex",t).next(r=>r.map(i=>th(this.M,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=tm(this.userId,t.path),i=IDBKeyRange.lowerBound(r),u=[];return tl(e).Wt({range:i},(c,h,_)=>{const[w,D,S]=c,P=la(D);if(w===this.userId&&t.path.isEqual(P))return tu(e).get(S).next(B=>{if(!B)throw at();Tt(B.userId===this.userId),u.push(th(this.M,B))});_.done()}).next(()=>u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Pn(Vt);const i=[];return t.forEach(u=>{const c=tm(this.userId,u.path),h=IDBKeyRange.lowerBound(c),_=tl(e).Wt({range:h},(w,D,S)=>{const[P,B,Y]=w,Re=la(B);P===this.userId&&u.path.isEqual(Re)?r=r.add(Y):S.done()});i.push(_)}),me.waitFor(i).next(()=>this.dn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,u=tm(this.userId,r),c=IDBKeyRange.lowerBound(u);let h=new Pn(Vt);return tl(e).Wt({range:c},(_,w,D)=>{const[S,P,B]=_,Y=la(P);S===this.userId&&r.isPrefixOf(Y)?Y.length===i&&(h=h.add(B)):D.done()}).next(()=>this.dn(e,h))}dn(e,t){const r=[],i=[];return t.forEach(u=>{i.push(tu(e).get(u).next(c=>{if(null===c)throw at();Tt(c.userId===this.userId),r.push(th(this.M,c))}))}),me.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return yI(e.Ht,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this._n(t.batchId)}),me.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}_n(e){delete this.ln[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return me.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return tl(e).Wt({range:r},(u,c,h)=>{if(u[0]===this.userId){const _=la(u[1]);i.push(_)}else h.done()}).next(()=>{Tt(0===i.length)})})}containsKey(e,t){return vD(e,this.userId,t)}wn(e){return vI(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function vD(n,e,t){const r=tm(e,t.path),i=r[1],u=IDBKeyRange.lowerBound(r);let c=!1;return tl(n).Wt({range:u,jt:!0},(h,_,w)=>{const[D,S,P]=h;D===e&&S===i&&(c=!0),w.done()}).next(()=>c)}function tu(n){return Sr(n,"mutations")}function tl(n){return Sr(n,"documentMutations")}function vI(n){return Sr(n,"mutationQueues")}class Ec{constructor(e){this.mn=e}next(){return this.mn+=2,this.mn}static gn(){return new Ec(0)}static yn(){return new Ec(-1)}}class ED{constructor(e,t){this.referenceDelegate=e,this.M=t}allocateTargetId(e){return this.pn(e).next(t=>{const r=new Ec(t.highestTargetId);return t.highestTargetId=r.next(),this.In(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.pn(e).next(t=>wt.fromTimestamp(new or(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.pn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.pn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.In(e,i)))}addTargetData(e,t){return this.Tn(e,t).next(()=>this.pn(e).next(r=>(r.targetCount+=1,this.En(t,r),this.In(e,r))))}updateTargetData(e,t){return this.Tn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>nh(e).delete(t.targetId)).next(()=>this.pn(e)).next(r=>(Tt(r.targetCount>0),r.targetCount-=1,this.In(e,r)))}removeTargets(e,t,r){let i=0;const u=[];return nh(e).Wt((c,h)=>{const _=Qu(h);_.sequenceNumber<=t&&null===r.get(_.targetId)&&(i++,u.push(this.removeTargetData(e,_)))}).next(()=>me.waitFor(u)).next(()=>i)}forEachTarget(e,t){return nh(e).Wt((r,i)=>{const u=Qu(i);t(u)})}pn(e){return EI(e).get("targetGlobalKey").next(t=>(Tt(null!==t),t))}In(e,t){return EI(e).put("targetGlobalKey",t)}Tn(e,t){return nh(e).put(hI(this.M,t))}En(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.pn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=zu(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let u=null;return nh(e).Wt({range:i,index:"queryTargetsIndex"},(c,h,_)=>{const w=Qu(h);Yi(t,w.target)&&(u=w,_.done())}).next(()=>u)}addMatchingKeys(e,t,r){const i=[],u=nl(e);return t.forEach(c=>{const h=ki(c.path);i.push(u.put({targetId:r,path:h})),i.push(this.referenceDelegate.addReference(e,r,c))}),me.waitFor(i)}removeMatchingKeys(e,t,r){const i=nl(e);return me.forEach(t,u=>{const c=ki(u.path);return me.waitFor([i.delete([r,c]),this.referenceDelegate.removeReference(e,r,u)])})}removeMatchingKeysForTargetId(e,t){const r=nl(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=nl(e);let u=mn();return i.Wt({range:r,jt:!0},(c,h,_)=>{const w=la(c[1]),D=new Qe(w);u=u.add(D)}).next(()=>u)}containsKey(e,t){const r=ki(t.path),i=IDBKeyRange.bound([r],[_w(r)],!1,!0);let u=0;return nl(e).Wt({index:"documentTargetsIndex",jt:!0,range:i},([c,h],_,w)=>{0!==c&&(u++,w.done())}).next(()=>u>0)}Et(e,t){return nh(e).get(t).next(r=>r?Qu(r):null)}}function nh(n){return Sr(n,"targets")}function EI(n){return Sr(n,"targetGlobal")}function nl(n){return Sr(n,"targetDocuments")}function wc(n){return fv.apply(this,arguments)}function fv(){return fv=(0,he.Z)(function*(n){if(n.code!==ge.FAILED_PRECONDITION||n.message!==lI)throw n;$e("LocalStore","Unexpectedly lost primary lease")}),fv.apply(this,arguments)}function wI([n,e],[t,r]){const i=Vt(n,t);return 0===i?Vt(e,r):i}class wD{constructor(e){this.An=e,this.buffer=new Pn(wI),this.Rn=0}bn(){return++this.Rn}Pn(e){const t=[e,this.bn()];if(this.buffer.size<this.An)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();wI(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class zf{constructor(e,t){this.garbageCollector=e,this.asyncQueue=t,this.Vn=!1,this.vn=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Sn(e)}stop(){this.vn&&(this.vn.cancel(),this.vn=null)}get started(){return null!==this.vn}Sn(e){var t=this;const r=this.Vn?3e5:6e4;$e("LruGarbageCollector",`Garbage collection scheduled in ${r}ms`),this.vn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",r,(0,he.Z)(function*(){t.vn=null,t.Vn=!0;try{yield e.collectGarbage(t.garbageCollector)}catch(i){mc(i)?$e("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",i):yield wc(i)}yield t.Sn(e)}))}}class II{constructor(e,t){this.Dn=e,this.params=t}calculateTargetCount(e,t){return this.Dn.Cn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return me.resolve(Ki.A);const r=new wD(t);return this.Dn.forEachTarget(e,i=>r.Pn(i.sequenceNumber)).next(()=>this.Dn.xn(e,i=>r.Pn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Dn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Dn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?($e("LruGarbageCollector","Garbage collection skipped; disabled"),me.resolve(yD)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?($e("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),yD):this.Nn(e,t))}getCacheSize(e){return this.Dn.getCacheSize(e)}Nn(e,t){let r,i,u,c,h,_,w;const D=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(S=>(S>this.params.maximumSequenceNumbersToCollect?($e("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${S}`),i=this.params.maximumSequenceNumbersToCollect):i=S,c=Date.now(),this.nthSequenceNumber(e,i))).next(S=>(r=S,h=Date.now(),this.removeTargets(e,r,t))).next(S=>(u=S,_=Date.now(),this.removeOrphanedDocuments(e,r))).next(S=>(w=Date.now(),Ug()<=ta.in.DEBUG&&$e("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${c-D}ms\n\tDetermined least recently used ${i} in `+(h-c)+`ms\n\tRemoved ${u} targets in `+(_-h)+`ms\n\tRemoved ${S} documents in `+(w-_)+`ms\nTotal Duration: ${w-D}ms`),me.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:u,documentsRemoved:S})))}}class bI{constructor(e,t){this.db=e,this.garbageCollector=new II(this,t)}Cn(e){const t=this.kn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}kn(e){let t=0;return this.xn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}xn(e,t){return this.Mn(e,(r,i)=>t(i))}addReference(e,t,r){return Gf(e,r)}removeReference(e,t,r){return Gf(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return Gf(e,t)}On(e,t){return function(r,i){let u=!1;return vI(r).zt(c=>vD(r,c,i).next(h=>(h&&(u=!0),me.resolve(!h)))).next(()=>u)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let u=0;return this.Mn(e,(c,h)=>{if(h<=t){const _=this.On(e,c).next(w=>{if(!w)return u++,r.getEntry(e,c).next(()=>(r.removeEntry(c,wt.min()),nl(e).delete([0,ki(c.path)])))});i.push(_)}}).next(()=>me.waitFor(i)).next(()=>r.apply(e)).next(()=>u)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return Gf(e,t)}Mn(e,t){const r=nl(e);let i,u=Ki.A;return r.Wt({index:"documentTargetsIndex"},([c,h],{path:_,sequenceNumber:w})=>{0===c?(u!==Ki.A&&t(new Qe(la(i)),u),u=w,i=_):u=Ki.A}).next(()=>{u!==Ki.A&&t(new Qe(la(i)),u)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Gf(n,e){return nl(n).put((r=n.currentSequenceNumber,{targetId:0,path:ki(e.path),sequenceNumber:r}));var r}class pv{constructor(){this.changes=new qu(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Wn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?me.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class CI{constructor(e){this.M=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Ic(e).put(r)}removeEntry(e,t,r){return Ic(e).delete(function(i,u){const c=i.path.toArray();return[c.slice(0,c.length-2),c[c.length-2],rm(u),c[c.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Fn(e,r)))}getEntry(e,t){let r=Wn.newInvalidDocument(t);return Ic(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(qf(t))},(i,u)=>{r=this.$n(t,u)}).next(()=>r)}Bn(e,t){let r={size:0,document:Wn.newInvalidDocument(t)};return Ic(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(qf(t))},(i,u)=>{r={document:this.$n(t,u),size:hv(u)}}).next(()=>r)}getEntries(e,t){let r=Pi();return this.Ln(e,t,(i,u)=>{const c=this.$n(i,u);r=r.insert(i,c)}).next(()=>r)}Un(e,t){let r=Pi(),i=new ar(Qe.comparator);return this.Ln(e,t,(u,c)=>{const h=this.$n(u,c);r=r.insert(u,h),i=i.insert(u,hv(c))}).next(()=>({documents:r,qn:i}))}Ln(e,t,r){if(t.isEmpty())return me.resolve();let i=new Pn(SI);t.forEach(_=>i=i.add(_));const u=IDBKeyRange.bound(qf(i.first()),qf(i.last())),c=i.getIterator();let h=c.getNext();return Ic(e).Wt({index:"documentKeyIndex",range:u},(_,w,D)=>{const S=Qe.fromSegments([...w.prefixPath,w.collectionGroup,w.documentId]);for(;h&&SI(h,S)<0;)r(h,null),h=c.getNext();h&&h.isEqual(S)&&(r(h,w),h=c.hasNext()?c.getNext():null),h?D.Ut(qf(h)):D.done()}).next(()=>{for(;h;)r(h,null),h=c.hasNext()?c.getNext():null})}getAllFromCollection(e,t,r){const i=[t.popLast().toArray(),t.lastSegment(),rm(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Ic(e).qt(IDBKeyRange.bound(i,u,!0)).next(c=>{let h=Pi();for(const _ of c){const w=this.$n(Qe.fromSegments(_.prefixPath.concat(_.collectionGroup,_.documentId)),_);h=h.insert(w.key,w)}return h})}getAllFromCollectionGroup(e,t,r,i){let u=Pi();const c=DI(t,r),h=DI(t,To.max());return Ic(e).Wt({index:"collectionGroupIndex",range:IDBKeyRange.bound(c,h,!0)},(_,w,D)=>{const S=this.$n(Qe.fromSegments(w.prefixPath.concat(w.collectionGroup,w.documentId)),w);u=u.insert(S.key,S),u.size===i&&D.done()}).next(()=>u)}newChangeBuffer(e){return new ID(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return TI(e).get("remoteDocumentGlobalKey").next(t=>(Tt(!!t),t))}Fn(e,t){return TI(e).put("remoteDocumentGlobalKey",t)}$n(e,t){if(t){const r=function gD(n,e){let t;if(e.document)t=Zy(n.Jt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Qe.fromSegments(e.noDocument.path),i=eh(e.noDocument.readTime);t=Wn.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return at();{const r=Qe.fromSegments(e.unknownDocument.path),i=eh(e.unknownDocument.version);t=Wn.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new or(r[0],r[1]);return wt.fromTimestamp(i)}(e.readTime)),t}(this.M,t);if(!r.isNoDocument()||!r.version.isEqual(wt.min()))return r}return Wn.newInvalidDocument(e)}}class ID extends pv{constructor(e,t){super(),this.Kn=e,this.trackRemovals=t,this.Gn=new qu(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new Pn((u,c)=>Vt(u.canonicalString(),c.canonicalString()));return this.changes.forEach((u,c)=>{const h=this.Gn.get(u);if(t.push(this.Kn.removeEntry(e,u,h.readTime)),c.isValidDocument()){const _=iv(this.Kn.M,c);i=i.add(u.path.popLast()),r+=hv(_)-h.size,t.push(this.Kn.addEntry(e,u,_))}else if(r-=h.size,this.trackRemovals){const _=iv(this.Kn.M,c.convertToNoDocument(wt.min()));t.push(this.Kn.addEntry(e,u,_))}}),i.forEach(u=>{t.push(this.Kn.indexManager.addToCollectionParentIndex(e,u))}),t.push(this.Kn.updateMetadata(e,r)),me.waitFor(t)}getFromCache(e,t){return this.Kn.Bn(e,t).next(r=>(this.Gn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Kn.Un(e,t).next(({documents:r,qn:i})=>(i.forEach((u,c)=>{this.Gn.set(u,{size:c,readTime:r.get(u).readTime})}),r))}}function TI(n){return Sr(n,"remoteDocumentGlobal")}function Ic(n){return Sr(n,"remoteDocumentsV14")}function qf(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function DI(n,e){const t=e.documentKey.path.toArray();return[n,rm(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function SI(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let u=0;u<t.length-2&&u<r.length-2;++u)if(i=Vt(t[u],r[u]),i)return i;return i=Vt(t.length,r.length),i||(i=Vt(t[t.length-2],r[r.length-2]),i||Vt(t[t.length-1],r[r.length-1]))}class bD{constructor(e){this.M=e}kt(e,t,r,i){const u=new Uf("createOrUpgrade",t);var h;r<1&&i>=1&&(e.createObjectStore("owner"),(h=e).createObjectStore("mutationQueues",{keyPath:"userId"}),h.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Qy,{unique:!0}),h.createObjectStore("documentMutations"),rh(e),function(h){h.createObjectStore("remoteDocuments")}(e));let c=me.resolve();return r<3&&i>=3&&(0!==r&&(function(h){h.deleteObjectStore("targetDocuments"),h.deleteObjectStore("targets"),h.deleteObjectStore("targetGlobal")}(e),rh(e)),c=c.next(()=>function(h){const _=h.store("targetGlobal"),w={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:wt.min().toTimestamp(),targetCount:0};return _.put("targetGlobalKey",w)}(u))),r<4&&i>=4&&(0!==r&&(c=c.next(()=>function(h,_){return _.store("mutations").qt().next(w=>{h.deleteObjectStore("mutations"),h.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Qy,{unique:!0});const D=_.store("mutations"),S=w.map(P=>D.put(P));return me.waitFor(S)})}(e,u))),c=c.next(()=>{!function(h){h.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(c=c.next(()=>this.Qn(u))),r<6&&i>=6&&(c=c.next(()=>(function(h){h.createObjectStore("remoteDocumentGlobal")}(e),this.jn(u)))),r<7&&i>=7&&(c=c.next(()=>this.Wn(u))),r<8&&i>=8&&(c=c.next(()=>this.zn(e,u))),r<9&&i>=9&&(c=c.next(()=>{!function(h){h.objectStoreNames.contains("remoteDocumentChanges")&&h.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(c=c.next(()=>this.Hn(u))),r<11&&i>=11&&(c=c.next(()=>{(function(h){h.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(h){h.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(c=c.next(()=>{!function(h){const _=h.createObjectStore("documentOverlays",{keyPath:oI});_.createIndex("collectionPathOverlayIndex",lD,{unique:!1}),_.createIndex("collectionGroupOverlayIndex",cD,{unique:!1})}(e)})),r<13&&i>=13&&(c=c.next(()=>function(h){const _=h.createObjectStore("remoteDocumentsV14",{keyPath:rI});_.createIndex("documentKeyIndex",rD),_.createIndex("collectionGroupIndex",Xy)}(e)).next(()=>this.Jn(e,u)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(c=c.next(()=>{!function(h){h.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),h.createObjectStore("indexState",{keyPath:oD}).createIndex("sequenceNumberIndex",aD,{unique:!1}),h.createObjectStore("indexEntries",{keyPath:ev}).createIndex("documentKeyIndex",uD,{unique:!1})}(e)})),c}jn(e){let t=0;return e.store("remoteDocuments").Wt((r,i)=>{t+=hv(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Qn(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.qt().next(i=>me.forEach(i,u=>{const c=IDBKeyRange.bound([u.userId,-1],[u.userId,u.lastAcknowledgedBatchId]);return r.qt("userMutationsIndex",c).next(h=>me.forEach(h,_=>{Tt(_.userId===u.userId);const w=th(this.M,_);return yI(e,u.userId,w).next(()=>{})}))}))}Wn(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const u=[];return r.Wt((c,h)=>{const _=new rn(c),w=[0,ki(_)];u.push(t.get(w).next(D=>D?me.resolve():t.put({targetId:0,path:ki(_),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>me.waitFor(u))})}zn(e,t){e.createObjectStore("collectionParents",{keyPath:sD});const r=t.store("collectionParents"),i=new cv,u=c=>{if(i.add(c)){const h=c.lastSegment(),_=c.popLast();return r.put({collectionId:h,parent:ki(_)})}};return t.store("remoteDocuments").Wt({jt:!0},(c,h)=>{const _=new rn(c);return u(_.popLast())}).next(()=>t.store("documentMutations").Wt({jt:!0},([c,h,_],w)=>{const D=la(h);return u(D.popLast())}))}Hn(e){const t=e.store("targets");return t.Wt((r,i)=>{const u=Qu(i),c=hI(this.M,u);return t.put(c)})}Jn(e,t){const r=t.store("remoteDocuments"),i=[];return r.Wt((u,c)=>{const h=t.store("remoteDocumentsV14"),_=(w=c,w.document?new Qe(rn.fromString(w.document.name).popFirst(5)):w.noDocument?Qe.fromSegments(w.noDocument.path):w.unknownDocument?Qe.fromSegments(w.unknownDocument.path):at()).path.toArray();var w;const D={prefixPath:_.slice(0,_.length-2),collectionGroup:_[_.length-2],documentId:_[_.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};i.push(h.put(D))}).next(()=>me.waitFor(i))}}function rh(n){n.createObjectStore("targetDocuments",{keyPath:iI}).createIndex("documentTargetsIndex",sI,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",iD,{unique:!0}),n.createObjectStore("targetGlobal")}const gv="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Zf{constructor(e,t,r,i,u,c,h,_,w,D,S=13){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Yn=u,this.window=c,this.document=h,this.Xn=w,this.Zn=D,this.ts=S,this.es=null,this.ns=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ss=null,this.inForeground=!1,this.rs=null,this.os=null,this.us=Number.NEGATIVE_INFINITY,this.cs=P=>Promise.resolve(),!Zf.vt())throw new Le(ge.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new bI(this,i),this.hs=t+"main",this.M=new dI(_),this.ls=new Ao(this.hs,this.ts,new bD(this.M)),this.fs=new ED(this.referenceDelegate,this.M),this.ds=new CI(this.M),this._s=new vx,this.window&&this.window.localStorage?this.ws=this.window.localStorage:(this.ws=null,!1===D&&Fr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.gs().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Le(ge.FAILED_PRECONDITION,gv);return this.ys(),this.ps(),this.Is(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.fs.getHighestSequenceNumber(e))}).then(e=>{this.es=new Ki(e,this.Xn)}).then(()=>{this.ns=!0}).catch(e=>(this.ls&&this.ls.close(),Promise.reject(e)))}Ts(e){var t=this;return this.cs=function(){var r=(0,he.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ls.Ot(function(){var t=(0,he.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Yn.enqueueAndForget((0,he.Z)(function*(){t.started&&(yield t.gs())})))}gs(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>om(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Es(e).next(t=>{t||(this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)))})}).next(()=>this.As(e)).next(t=>this.isPrimary&&!t?this.Rs(e).next(()=>!1):!!t&&this.bs(e).next(()=>!0))).catch(e=>{if(mc(e))return $e("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return $e("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Yn.enqueueRetryable(()=>this.cs(e)),this.isPrimary=e})}Es(e){return Qi(e).get("owner").next(t=>me.resolve(this.Ps(t)))}Vs(e){return om(e).delete(this.clientId)}vs(){var e=this;return(0,he.Z)(function*(){if(e.isPrimary&&!e.Ss(e.us,18e5)){e.us=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=Sr(r,"clientMetadata");return i.qt().next(u=>{const c=e.Ds(u,18e5),h=u.filter(_=>-1===c.indexOf(_));return me.forEach(h,_=>i.delete(_.clientId)).next(()=>h)})}).catch(()=>[]);if(e.ws)for(const r of t)e.ws.removeItem(e.Cs(r.clientId))}})()}Is(){this.os=this.Yn.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.gs().then(()=>this.vs()).then(()=>this.Is()))}Ps(e){return!!e&&e.ownerId===this.clientId}As(e){return this.Zn?me.resolve(!0):Qi(e).get("owner").next(t=>{if(null!==t&&this.Ss(t.leaseTimestampMs,5e3)&&!this.xs(t.ownerId)){if(this.Ps(t)&&this.networkEnabled)return!0;if(!this.Ps(t)){if(!t.allowTabSynchronization)throw new Le(ge.FAILED_PRECONDITION,gv);return!1}}return!(!this.networkEnabled||!this.inForeground)||om(e).qt().next(r=>void 0===this.Ds(r,5e3).find(i=>{if(this.clientId!==i.clientId){const c=!this.inForeground&&i.inForeground,h=this.networkEnabled===i.networkEnabled;if(!this.networkEnabled&&i.networkEnabled||c&&h)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&$e("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,he.Z)(function*(){e.ns=!1,e.Ns(),e.os&&(e.os.cancel(),e.os=null),e.ks(),e.Ms(),yield e.ls.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new tv(t,Ki.A);return e.Rs(r).next(()=>e.Vs(r))}),e.ls.close(),e.Os()})()}Ds(e,t){return e.filter(r=>this.Ss(r.updateTimeMs,t)&&!this.xs(r.clientId))}Fs(){return this.runTransaction("getActiveClients","readonly",e=>om(e).qt().next(t=>this.Ds(t,18e5).map(r=>r.clientId)))}get started(){return this.ns}getMutationQueue(e,t){return sm.Yt(e,this.M,t,this.referenceDelegate)}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getIndexManager(e){return new _D(e,this.M.Jt.databaseId)}getDocumentOverlayCache(e){return ov.Yt(this.M,e)}getBundleCache(){return this._s}runTransaction(e,t,r){$e("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",u=14===(c=this.ts)?hD:13===c?uI:12===c?dD:11===c?aI:void at();var c;let h;return this.ls.runTransaction(e,i,u,_=>(h=new tv(_,this.es?this.es.next():Ki.A),"readwrite-primary"===t?this.Es(h).next(w=>!!w||this.As(h)).next(w=>{if(!w)throw Fr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)),new Le(ge.FAILED_PRECONDITION,lI);return r(h)}).next(w=>this.bs(h).next(()=>w)):this.$s(h).next(()=>r(h)))).then(_=>(h.raiseOnCommittedEvent(),_))}$s(e){return Qi(e).get("owner").next(t=>{if(null!==t&&this.Ss(t.leaseTimestampMs,5e3)&&!this.xs(t.ownerId)&&!this.Ps(t)&&!(this.Zn||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Le(ge.FAILED_PRECONDITION,gv)})}bs(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Qi(e).put("owner",t)}static vt(){return Ao.vt()}Rs(e){const t=Qi(e);return t.get("owner").next(r=>this.Ps(r)?($e("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):me.resolve())}Ss(e,t){const r=Date.now();return!(e<r-t||e>r&&(Fr(`Detected an update time that is in the future: ${e} > ${r}`),1))}ys(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.rs=()=>{this.Yn.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.gs()))},this.document.addEventListener("visibilitychange",this.rs),this.inForeground="visible"===this.document.visibilityState)}ks(){this.rs&&(this.document.removeEventListener("visibilitychange",this.rs),this.rs=null)}ps(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ss=()=>{this.Ns(),(0,Q.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Yn.enterRestrictedMode(!0),this.Yn.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ss))}Ms(){this.ss&&(this.window.removeEventListener("pagehide",this.ss),this.ss=null)}xs(e){var t;try{const r=null!==(null===(t=this.ws)||void 0===t?void 0:t.getItem(this.Cs(e)));return $e("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Fr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ns(){if(this.ws)try{this.ws.setItem(this.Cs(this.clientId),String(Date.now()))}catch(e){Fr("Failed to set zombie client id.",e)}}Os(){if(this.ws)try{this.ws.removeItem(this.Cs(this.clientId))}catch(e){}}Cs(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Qi(n){return Sr(n,"owner")}function om(n){return Sr(n,"clientMetadata")}function Kf(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class Yf{constructor(e,t,r){this.ds=e,this.Bs=t,this.indexManager=r}Ls(e,t){return this.Bs.getAllMutationBatchesAffectingDocumentKey(e,t).next(r=>this.Us(e,t,r))}Us(e,t,r){return this.ds.getEntry(e,t).next(i=>{for(const u of r)u.applyToLocalView(i);return i})}qs(e,t){e.forEach((r,i)=>{for(const u of t)u.applyToLocalView(i)})}Ks(e,t){return this.ds.getEntries(e,t).next(r=>this.Gs(e,r).next(()=>r))}Gs(e,t){return this.Bs.getAllMutationBatchesAffectingDocumentKeys(e,t).next(r=>this.qs(t,r))}Qs(e,t,r){return Qe.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.js(e,t.path):qg(t)?this.Ws(e,t,r):this.zs(e,t,r);var i}js(e,t){return this.Ls(e,new Qe(t)).next(r=>{let i=Wd();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}Ws(e,t,r){const i=t.collectionGroup;let u=Wd();return this.indexManager.getCollectionParents(e,i).next(c=>me.forEach(c,h=>{const _=(w=t,D=h.child(i),new Hs(D,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt));var w,D;return this.zs(e,_,r).next(w=>{w.forEach((D,S)=>{u=u.insert(D,S)})})}).next(()=>u))}zs(e,t,r){let i;return this.ds.getAllFromCollection(e,t.path,r).next(u=>(i=u,this.Bs.getAllMutationBatchesAffectingQuery(e,t))).next(u=>{for(const c of u)for(const h of c.mutations){const _=h.key;let w=i.get(_);null==w&&(w=Wn.newInvalidDocument(_),i=i.insert(_,w)),Qg(h,w,c.localWriteTime),w.isFoundDocument()||(i=i.remove(_))}}).next(()=>(i.forEach((u,c)=>{Kg(t,c)||(i=i.remove(u))}),i))}}class mv{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Hs=r,this.Js=i}static Ys(e,t){let r=mn(),i=mn();for(const u of t.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:i=i.add(u.doc.key)}return new mv(e,t.fromCache,r,i)}}class AI{constructor(){this.Xs=!1}initialize(e,t){this.Zs=e,this.indexManager=t,this.Xs=!0}Qs(e,t,r,i){return this.ti(e,t).next(u=>u||this.ei(e,t,i,r)).next(u=>u||this.ni(e,t))}ti(e,t){return me.resolve(null)}ei(e,t,r,i){return function Rw(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}(t)||i.isEqual(wt.min())?this.ni(e,t):this.Zs.Ks(e,r).next(u=>{const c=this.si(t,u);return this.ii(t,c,r,i)?this.ni(e,t):(Ug()<=ta.in.DEBUG&&$e("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Zg(t)),this.ri(e,c,t,Iw(i,-1)))})}si(e,t){let r=new Pn(Nw(e));return t.forEach((i,u)=>{Kg(e,u)&&(r=r.add(u))}),r}ii(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const u="F"===e.limitType?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(i)>0)}ni(e,t){return Ug()<=ta.in.DEBUG&&$e("QueryEngine","Using full collection scan to execute query:",Zg(t)),this.Zs.Qs(e,t,To.min())}ri(e,t,r,i){return this.Zs.Qs(e,r,i).next(u=>(t.forEach(c=>{u=u.insert(c.key,c)}),u))}}class CD{constructor(e,t,r,i){this.persistence=e,this.oi=t,this.M=i,this.ui=new ar(Vt),this.ai=new qu(u=>zu(u),Yi),this.ci=new Map,this.hi=e.getRemoteDocumentCache(),this.fs=e.getTargetCache(),this._s=e.getBundleCache(),this.li(r)}li(e){this.indexManager=this.persistence.getIndexManager(e),this.Bs=this.persistence.getMutationQueue(e,this.indexManager),this.fi=new Yf(this.hi,this.Bs,this.indexManager),this.hi.setIndexManager(this.indexManager),this.oi.initialize(this.fi,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.ui))}}function Qf(n,e,t,r){return new CD(n,e,t,r)}function Jf(n,e){return _v.apply(this,arguments)}function _v(){return _v=(0,he.Z)(function*(n,e){const t=tt(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.Bs.getAllMutationBatches(r).next(u=>(i=u,t.li(e),t.Bs.getAllMutationBatches(r))).next(u=>{const c=[],h=[];let _=mn();for(const w of i){c.push(w.batchId);for(const D of w.mutations)_=_.add(D.key)}for(const w of u){h.push(w.batchId);for(const D of w.mutations)_=_.add(D.key)}return t.fi.Ks(r,_).next(w=>({di:w,removedBatchIds:c,addedBatchIds:h}))})})}),_v.apply(this,arguments)}function TD(n,e){const t=tt(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),u=t.hi.newChangeBuffer({trackRemovals:!0});return function(c,h,_,w){const D=_.batch,S=D.keys();let P=me.resolve();return S.forEach(B=>{P=P.next(()=>w.getEntry(h,B)).next(Y=>{const Re=_.docVersions.get(B);Tt(null!==Re),Y.version.compareTo(Re)<0&&(D.applyToRemoteDocument(Y,_),Y.isValidDocument()&&(Y.setReadTime(_.commitVersion),w.addEntry(Y)))})}),P.next(()=>c.Bs.removeMutationBatch(h,D))}(t,r,e,u).next(()=>u.apply(r)).next(()=>t.Bs.performConsistencyCheck(r)).next(()=>t.fi.Ks(r,i))})}function yv(n){const e=tt(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.fs.getLastRemoteSnapshotVersion(t))}function xI(n,e){const t=tt(n),r=e.snapshotVersion;let i=t.ui;return t.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const c=t.hi.newChangeBuffer({trackRemovals:!0});i=t.ui;const h=[];e.targetChanges.forEach((w,D)=>{const S=i.get(D);if(!S)return;h.push(t.fs.removeMatchingKeys(u,w.removedDocuments,D).next(()=>t.fs.addMatchingKeys(u,w.addedDocuments,D)));let P=S.withSequenceNumber(u.currentSequenceNumber);var B,Y,Re;e.targetMismatches.has(D)?P=P.withResumeToken(Er.EMPTY_BYTE_STRING,wt.min()).withLastLimboFreeSnapshotVersion(wt.min()):w.resumeToken.approximateByteSize()>0&&(P=P.withResumeToken(w.resumeToken,r)),i=i.insert(D,P),Y=P,Re=w,(0===(B=S).resumeToken.approximateByteSize()||Y.snapshotVersion.toMicroseconds()-B.snapshotVersion.toMicroseconds()>=3e8||Re.addedDocuments.size+Re.modifiedDocuments.size+Re.removedDocuments.size>0)&&h.push(t.fs.updateTargetData(u,P))});let _=Pi();if(e.documentUpdates.forEach(w=>{e.resolvedLimboDocuments.has(w)&&h.push(t.persistence.referenceDelegate.updateLimboDocument(u,w))}),h.push(am(u,c,e.documentUpdates).next(w=>{_=w})),!r.isEqual(wt.min())){const w=t.fs.getLastRemoteSnapshotVersion(u).next(D=>t.fs.setTargetsMetadata(u,u.currentSequenceNumber,r));h.push(w)}return me.waitFor(h).next(()=>c.apply(u)).next(()=>t.fi.Gs(u,_)).next(()=>_)}).then(u=>(t.ui=i,u))}function am(n,e,t){let r=mn();return t.forEach(i=>r=r.add(i)),e.getEntries(n,r).next(i=>{let u=Pi();return t.forEach((c,h)=>{const _=i.get(c);h.isNoDocument()&&h.version.isEqual(wt.min())?(e.removeEntry(c,h.readTime),u=u.insert(c,h)):!_.isValidDocument()||h.version.compareTo(_.version)>0||0===h.version.compareTo(_.version)&&_.hasPendingWrites?(e.addEntry(h),u=u.insert(c,h)):$e("LocalStore","Ignoring outdated watch update for ",c,". Current version:",_.version," Watch version:",h.version)}),u})}function RI(n,e){const t=tt(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.Bs.getNextMutationBatchAfterBatchId(r,e)))}function ih(n,e){const t=tt(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.fs.getTargetData(r,e).next(u=>u?(i=u,me.resolve(i)):t.fs.allocateTargetId(r).next(c=>(i=new Ku(e,c,0,r.currentSequenceNumber),t.fs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.ui.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.ui=t.ui.insert(r.targetId,r),t.ai.set(e,r.targetId)),r})}function sh(n,e,t){return MI.apply(this,arguments)}function MI(){return MI=(0,he.Z)(function*(n,e,t){const r=tt(n),i=r.ui.get(e),u=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",u,c=>r.persistence.referenceDelegate.removeTarget(c,i)))}catch(c){if(!mc(c))throw c;$e("LocalStore",`Failed to update sequence numbers for target ${e}: ${c}`)}r.ui=r.ui.remove(e),r.ai.delete(i.target)}),MI.apply(this,arguments)}function oh(n,e,t){const r=tt(n);let i=wt.min(),u=mn();return r.persistence.runTransaction("Execute query","readonly",c=>function(h,_,w){const D=tt(h),S=D.ai.get(w);return void 0!==S?me.resolve(D.ui.get(S)):D.fs.getTargetData(_,w)}(r,c,Es(e)).next(h=>{if(h)return i=h.lastLimboFreeSnapshotVersion,r.fs.getMatchingKeysForTargetId(c,h.targetId).next(_=>{u=_})}).next(()=>r.oi.Qs(c,e,t?i:wt.min(),t?u:mn())).next(h=>(lm(r,Mw(e),h),{documents:h,_i:u})))}function um(n,e){const t=tt(n),r=tt(t.fs),i=t.ui.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",u=>r.Et(u,e).next(c=>c?c.target:null))}function vv(n,e){const t=tt(n),r=t.ci.get(e)||wt.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.hi.getAllFromCollectionGroup(i,e,Iw(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(lm(t,e,i),i))}function lm(n,e,t){let r=wt.min();t.forEach((i,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)}),n.ci.set(e,r)}function wv(){return wv=(0,he.Z)(function*(n,e,t,r){const i=tt(n);let u=mn(),c=Pi();for(const w of t){const D=e.wi(w.metadata.name);w.document&&(u=u.add(D));const S=e.mi(w);S.setReadTime(e.gi(w.metadata.readTime)),c=c.insert(D,S)}const h=i.hi.newChangeBuffer({trackRemovals:!0}),_=yield ih(i,(w=r,Es(ac(rn.fromString(`__bundle__/docs/${w}`)))));var w;return i.persistence.runTransaction("Apply bundle documents","readwrite",w=>am(w,h,c).next(D=>(h.apply(w),D)).next(D=>i.fs.removeMatchingKeysForTargetId(w,_.targetId).next(()=>i.fs.addMatchingKeys(w,u,_.targetId)).next(()=>i.fi.Gs(w,D)).next(()=>D)))}),wv.apply(this,arguments)}function DD(n,e){return Iv.apply(this,arguments)}function Iv(){return Iv=(0,he.Z)(function*(n,e,t=mn()){const r=yield ih(n,Es(Ju(e.bundledQuery))),i=tt(n);return i.persistence.runTransaction("Save named query","readwrite",u=>{const c=Qr(e.readTime);if(r.snapshotVersion.compareTo(c)>=0)return i._s.saveNamedQuery(u,e);const h=r.withResumeToken(Er.EMPTY_BYTE_STRING,c);return i.ui=i.ui.insert(h.targetId,h),i.fs.updateTargetData(u,h).next(()=>i.fs.removeMatchingKeysForTargetId(u,r.targetId)).next(()=>i.fs.addMatchingKeys(u,t,r.targetId)).next(()=>i._s.saveNamedQuery(u,e))})}),Iv.apply(this,arguments)}class SD{constructor(e){this.M=e,this.yi=new Map,this.pi=new Map}getBundleMetadata(e,t){return me.resolve(this.yi.get(t))}saveBundleMetadata(e,t){var r;return this.yi.set(t.id,{id:(r=t).id,version:r.version,createTime:Qr(r.createTime)}),me.resolve()}getNamedQuery(e,t){return me.resolve(this.pi.get(t))}saveNamedQuery(e,t){return this.pi.set(t.name,{name:(r=t).name,query:Ju(r.bundledQuery),readTime:Qr(r.readTime)}),me.resolve();var r}}class NI{constructor(){this.overlays=new ar(Qe.comparator),this.Ii=new Map}getOverlay(e,t){return me.resolve(this.overlays.get(t))}saveOverlays(e,t,r){return r.forEach((i,u)=>{this.Xt(e,t,u)}),me.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.Ii.get(r);return void 0!==i&&(i.forEach(u=>this.overlays=this.overlays.remove(u)),this.Ii.delete(r)),me.resolve()}getOverlaysForCollection(e,t,r){const i=Zu(),u=t.length+1,c=new Qe(t.child("")),h=this.overlays.getIteratorFrom(c);for(;h.hasNext();){const _=h.getNext().value,w=_.getKey();if(!t.isPrefixOf(w.path))break;w.path.length===u&&_.largestBatchId>r&&i.set(_.getKey(),_)}return me.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let u=new ar((w,D)=>w-D);const c=this.overlays.getIterator();for(;c.hasNext();){const w=c.getNext().value;if(w.getKey().getCollectionGroup()===t&&w.largestBatchId>r){let D=u.get(w.largestBatchId);null===D&&(D=Zu(),u=u.insert(w.largestBatchId,D)),D.set(w.getKey(),w)}}const h=Zu(),_=u.getIterator();for(;_.hasNext()&&(_.getNext().value.forEach((w,D)=>h.set(w,D)),!(h.size()>=i)););return me.resolve(h)}Xt(e,t,r){if(null===r)return;const i=this.overlays.get(r.key);if(null!==i){const c=this.Ii.get(i.largestBatchId).delete(r.key);this.Ii.set(i.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new Bf(t,r));let u=this.Ii.get(t);void 0===u&&(u=mn(),this.Ii.set(t,u)),this.Ii.set(t,u.add(r.key))}}class Xf{constructor(){this.Ti=new Pn(Ur.Ei),this.Ai=new Pn(Ur.Ri)}isEmpty(){return this.Ti.isEmpty()}addReference(e,t){const r=new Ur(e,t);this.Ti=this.Ti.add(r),this.Ai=this.Ai.add(r)}bi(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Pi(new Ur(e,t))}Vi(e,t){e.forEach(r=>this.removeReference(r,t))}vi(e){const t=new Qe(new rn([])),r=new Ur(t,e),i=new Ur(t,e+1),u=[];return this.Ai.forEachInRange([r,i],c=>{this.Pi(c),u.push(c.key)}),u}Si(){this.Ti.forEach(e=>this.Pi(e))}Pi(e){this.Ti=this.Ti.delete(e),this.Ai=this.Ai.delete(e)}Di(e){const t=new Qe(new rn([])),r=new Ur(t,e),i=new Ur(t,e+1);let u=mn();return this.Ai.forEachInRange([r,i],c=>{u=u.add(c.key)}),u}containsKey(e){const t=new Ur(e,0),r=this.Ti.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Ur{constructor(e,t){this.key=e,this.Ci=t}static Ei(e,t){return Qe.comparator(e.key,t.key)||Vt(e.Ci,t.Ci)}static Ri(e,t){return Vt(e.Ci,t.Ci)||Qe.comparator(e.key,t.key)}}class AD{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.Bs=[],this.xi=1,this.Ni=new Pn(Ur.Ei)}checkEmpty(e){return me.resolve(0===this.Bs.length)}addMutationBatch(e,t,r,i){const u=this.xi;this.xi++;const c=new nv(u,t,r,i);this.Bs.push(c);for(const h of i)this.Ni=this.Ni.add(new Ur(h.key,u)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return me.resolve(c)}lookupMutationBatch(e,t){return me.resolve(this.ki(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.Mi(t+1),u=i<0?0:i;return me.resolve(this.Bs.length>u?this.Bs[u]:null)}getHighestUnacknowledgedBatchId(){return me.resolve(0===this.Bs.length?-1:this.xi-1)}getAllMutationBatches(e){return me.resolve(this.Bs.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Ur(t,0),i=new Ur(t,Number.POSITIVE_INFINITY),u=[];return this.Ni.forEachInRange([r,i],c=>{const h=this.ki(c.Ci);u.push(h)}),me.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Pn(Vt);return t.forEach(i=>{const u=new Ur(i,0),c=new Ur(i,Number.POSITIVE_INFINITY);this.Ni.forEachInRange([u,c],h=>{r=r.add(h.Ci)})}),me.resolve(this.Oi(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let u=r;Qe.isDocumentKey(u)||(u=u.child(""));const c=new Ur(new Qe(u),0);let h=new Pn(Vt);return this.Ni.forEachWhile(_=>{const w=_.key.path;return!!r.isPrefixOf(w)&&(w.length===i&&(h=h.add(_.Ci)),!0)},c),me.resolve(this.Oi(h))}Oi(e){const t=[];return e.forEach(r=>{const i=this.ki(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){Tt(0===this.Fi(t.batchId,"removed")),this.Bs.shift();let r=this.Ni;return me.forEach(t.mutations,i=>{const u=new Ur(i.key,t.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Ni=r})}_n(e){}containsKey(e,t){const r=new Ur(t,0),i=this.Ni.firstAfterOrEqual(r);return me.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return me.resolve()}Fi(e,t){return this.Mi(e)}Mi(e){return 0===this.Bs.length?0:e-this.Bs[0].batchId}ki(e){const t=this.Mi(e);return t<0||t>=this.Bs.length?null:this.Bs[t]}}class PI{constructor(e){this.$i=e,this.docs=new ar(Qe.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),u=i?i.size:0,c=this.$i(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return me.resolve(r?r.document.mutableCopy():Wn.newInvalidDocument(t))}getEntries(e,t){let r=Pi();return t.forEach(i=>{const u=this.docs.get(i);r=r.insert(i,u?u.document.mutableCopy():Wn.newInvalidDocument(i))}),me.resolve(r)}getAllFromCollection(e,t,r){let i=Pi();const u=new Qe(t.child("")),c=this.docs.getIteratorFrom(u);for(;c.hasNext();){const{key:h,value:{document:_}}=c.getNext();if(!t.isPrefixOf(h.path))break;h.path.length>t.length+1||ky(bw(_),r)<=0||(i=i.insert(_.key,_.mutableCopy()))}return me.resolve(i)}getAllFromCollectionGroup(e,t,r,i){at()}Bi(e,t){return me.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new kI(this)}getSize(e){return me.resolve(this.size)}}class kI extends pv{constructor(e){super(),this.Kn=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Kn.addEntry(e,i)):this.Kn.removeEntry(r)}),me.waitFor(t)}getFromCache(e,t){return this.Kn.getEntry(e,t)}getAllFromCache(e,t){return this.Kn.getEntries(e,t)}}class xD{constructor(e){this.persistence=e,this.Li=new qu(t=>zu(t),Yi),this.lastRemoteSnapshotVersion=wt.min(),this.highestTargetId=0,this.Ui=0,this.qi=new Xf,this.targetCount=0,this.Ki=Ec.gn()}forEachTarget(e,t){return this.Li.forEach((r,i)=>t(i)),me.resolve()}getLastRemoteSnapshotVersion(e){return me.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return me.resolve(this.Ui)}allocateTargetId(e){return this.highestTargetId=this.Ki.next(),me.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Ui&&(this.Ui=t),me.resolve()}Tn(e){this.Li.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ki=new Ec(t),this.highestTargetId=t),e.sequenceNumber>this.Ui&&(this.Ui=e.sequenceNumber)}addTargetData(e,t){return this.Tn(t),this.targetCount+=1,me.resolve()}updateTargetData(e,t){return this.Tn(t),me.resolve()}removeTargetData(e,t){return this.Li.delete(t.target),this.qi.vi(t.targetId),this.targetCount-=1,me.resolve()}removeTargets(e,t,r){let i=0;const u=[];return this.Li.forEach((c,h)=>{h.sequenceNumber<=t&&null===r.get(h.targetId)&&(this.Li.delete(c),u.push(this.removeMatchingKeysForTargetId(e,h.targetId)),i++)}),me.waitFor(u).next(()=>i)}getTargetCount(e){return me.resolve(this.targetCount)}getTargetData(e,t){const r=this.Li.get(t)||null;return me.resolve(r)}addMatchingKeys(e,t,r){return this.qi.bi(t,r),me.resolve()}removeMatchingKeys(e,t,r){this.qi.Vi(t,r);const i=this.persistence.referenceDelegate,u=[];return i&&t.forEach(c=>{u.push(i.markPotentiallyOrphaned(e,c))}),me.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.qi.vi(t),me.resolve()}getMatchingKeysForTargetId(e,t){const r=this.qi.Di(t);return me.resolve(r)}containsKey(e,t){return me.resolve(this.qi.containsKey(t))}}class OI{constructor(e,t){this.Gi={},this.overlays={},this.es=new Ki(0),this.ns=!1,this.ns=!0,this.referenceDelegate=e(this),this.fs=new xD(this),this.indexManager=new lv,this.ds=new PI(r=>this.referenceDelegate.Qi(r)),this.M=new dI(t),this._s=new SD(this.M)}start(){return Promise.resolve()}shutdown(){return this.ns=!1,Promise.resolve()}get started(){return this.ns}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new NI,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Gi[e.toKey()];return r||(r=new AD(t,this.referenceDelegate),this.Gi[e.toKey()]=r),r}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getBundleCache(){return this._s}runTransaction(e,t,r){$e("MemoryPersistence","Starting transaction:",e);const i=new FI(this.es.next());return this.referenceDelegate.ji(),r(i).next(u=>this.referenceDelegate.Wi(i).next(()=>u)).toPromise().then(u=>(i.raiseOnCommittedEvent(),u))}zi(e,t){return me.or(Object.values(this.Gi).map(r=>()=>r.containsKey(e,t)))}}class FI extends cI{constructor(e){super(),this.currentSequenceNumber=e}}class bv{constructor(e){this.persistence=e,this.Hi=new Xf,this.Ji=null}static Yi(e){return new bv(e)}get Xi(){if(this.Ji)return this.Ji;throw at()}addReference(e,t,r){return this.Hi.addReference(r,t),this.Xi.delete(r.toString()),me.resolve()}removeReference(e,t,r){return this.Hi.removeReference(r,t),this.Xi.add(r.toString()),me.resolve()}markPotentiallyOrphaned(e,t){return this.Xi.add(t.toString()),me.resolve()}removeTarget(e,t){this.Hi.vi(t.targetId).forEach(i=>this.Xi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(u=>this.Xi.add(u.toString()))}).next(()=>r.removeTargetData(e,t))}ji(){this.Ji=new Set}Wi(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return me.forEach(this.Xi,r=>{const i=Qe.fromPath(r);return this.Zi(e,i).next(u=>{u||t.removeEntry(i,wt.min())})}).next(()=>(this.Ji=null,t.apply(e)))}updateLimboDocument(e,t){return this.Zi(e,t).next(r=>{r?this.Xi.delete(t.toString()):this.Xi.add(t.toString())})}Qi(e){return 0}Zi(e,t){return me.or([()=>me.resolve(this.Hi.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.zi(e,t)])}}function Cv(n,e){return`firestore_clients_${n}_${e}`}function Tv(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function oi(n,e){return`firestore_targets_${n}_${e}`}class nu{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static tr(e,t,r){const i=JSON.parse(r);let u,c="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return c&&i.error&&(c="string"==typeof i.error.message&&"string"==typeof i.error.code,c&&(u=new Le(i.error.code,i.error.message))),c?new nu(e,t,i.state,u):(Fr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}er(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class ep{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static tr(e,t){const r=JSON.parse(t);let i,u="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return u&&r.error&&(u="string"==typeof r.error.message&&"string"==typeof r.error.code,u&&(i=new Le(r.error.code,r.error.message))),u?new ep(e,r.state,i):(Fr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}er(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class cm{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static tr(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,u=Jg();for(let c=0;i&&c<r.activeTargetIds.length;++c)i=$g(r.activeTargetIds[c]),u=u.add(r.activeTargetIds[c]);return i?new cm(e,u):(Fr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class LI{constructor(e,t){this.clientId=e,this.onlineState=t}static tr(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new LI(t.clientId,t.onlineState):(Fr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class bc{constructor(){this.activeTargetIds=Jg()}nr(e){this.activeTargetIds=this.activeTargetIds.add(e)}sr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}er(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Dv{constructor(e,t,r,i,u){this.window=e,this.Yn=t,this.persistenceKey=r,this.ir=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.rr=this.ur.bind(this),this.ar=new ar(Vt),this.started=!1,this.cr=[];const c=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=u,this.hr=Cv(this.persistenceKey,this.ir),this.lr=`firestore_sequence_number_${this.persistenceKey}`,this.ar=this.ar.insert(this.ir,new bc),this.dr=new RegExp(`^firestore_clients_${c}_([^_]*)$`),this._r=new RegExp(`^firestore_mutations_${c}_(\\d+)(?:_(.*))?$`),this.wr=new RegExp(`^firestore_targets_${c}_(\\d+)$`),this.mr=`firestore_online_state_${this.persistenceKey}`,this.gr=function(h){return`firestore_bundle_loaded_v2_${h}`}(this.persistenceKey),this.window.addEventListener("storage",this.rr)}static vt(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,he.Z)(function*(){const t=yield e.syncEngine.Fs();for(const i of t){if(i===e.ir)continue;const u=e.getItem(Cv(e.persistenceKey,i));if(u){const c=cm.tr(i,u);c&&(e.ar=e.ar.insert(c.clientId,c))}}e.yr();const r=e.storage.getItem(e.mr);if(r){const i=e.pr(r);i&&e.Ir(i)}for(const i of e.cr)e.ur(i);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.lr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Tr(this.ar)}isActiveQueryTarget(e){let t=!1;return this.ar.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Er(e,"pending")}updateMutationState(e,t,r){this.Er(e,t,r),this.Ar(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(oi(this.persistenceKey,e));if(r){const i=ep.tr(e,r);i&&(t=i.state)}}return this.Rr.nr(e),this.yr(),t}removeLocalQueryTarget(e){this.Rr.sr(e),this.yr()}isLocalQueryTarget(e){return this.Rr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(oi(this.persistenceKey,e))}updateQueryState(e,t,r){this.br(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Ar(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Pr(e)}notifyBundleLoaded(e){this.Vr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.rr),this.removeItem(this.hr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return $e("SharedClientState","READ",e,t),t}setItem(e,t){$e("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){$e("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ur(e){var t=this;const r=e;if(r.storageArea===this.storage){if($e("SharedClientState","EVENT",r.key,r.newValue),r.key===this.hr)return void Fr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Yn.enqueueRetryable((0,he.Z)(function*(){if(t.started){if(null!==r.key)if(t.dr.test(r.key)){if(null==r.newValue){const i=t.vr(r.key);return t.Sr(i,null)}{const i=t.Dr(r.key,r.newValue);if(i)return t.Sr(i.clientId,i)}}else if(t._r.test(r.key)){if(null!==r.newValue){const i=t.Cr(r.key,r.newValue);if(i)return t.Nr(i)}}else if(t.wr.test(r.key)){if(null!==r.newValue){const i=t.kr(r.key,r.newValue);if(i)return t.Mr(i)}}else if(r.key===t.mr){if(null!==r.newValue){const i=t.pr(r.newValue);if(i)return t.Ir(i)}}else if(r.key===t.lr){const i=function(u){let c=Ki.A;if(null!=u)try{const h=JSON.parse(u);Tt("number"==typeof h),c=h}catch(h){Fr("SharedClientState","Failed to read sequence number from WebStorage",h)}return c}(r.newValue);i!==Ki.A&&t.sequenceNumberHandler(i)}else if(r.key===t.gr){const i=t.Or(r.newValue);yield Promise.all(i.map(u=>t.syncEngine.Fr(u)))}}else t.cr.push(r)}))}}get Rr(){return this.ar.get(this.ir)}yr(){this.setItem(this.hr,this.Rr.er())}Er(e,t,r){const i=new nu(this.currentUser,e,t,r),u=Tv(this.persistenceKey,this.currentUser,e);this.setItem(u,i.er())}Ar(e){const t=Tv(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Pr(e){this.storage.setItem(this.mr,JSON.stringify({clientId:this.ir,onlineState:e}))}br(e,t,r){const i=oi(this.persistenceKey,e),u=new ep(e,t,r);this.setItem(i,u.er())}Vr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.gr,t)}vr(e){const t=this.dr.exec(e);return t?t[1]:null}Dr(e,t){const r=this.vr(e);return cm.tr(r,t)}Cr(e,t){const r=this._r.exec(e),i=Number(r[1]);return nu.tr(new ii(void 0!==r[2]?r[2]:null),i,t)}kr(e,t){const r=this.wr.exec(e),i=Number(r[1]);return ep.tr(i,t)}pr(e){return LI.tr(e)}Or(e){return JSON.parse(e)}Nr(e){var t=this;return(0,he.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.$r(e.batchId,e.state,e.error);$e("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Mr(e){return this.syncEngine.Br(e.targetId,e.state,e.error)}Sr(e,t){const r=t?this.ar.insert(e,t):this.ar.remove(e),i=this.Tr(this.ar),u=this.Tr(r),c=[],h=[];return u.forEach(_=>{i.has(_)||c.push(_)}),i.forEach(_=>{u.has(_)||h.push(_)}),this.syncEngine.Lr(c,h).then(()=>{this.ar=r})}Ir(e){this.ar.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Tr(e){let t=Jg();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class dm{constructor(){this.Ur=new bc,this.qr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Ur.nr(e),this.qr[e]||"not-current"}updateQueryState(e,t,r){this.qr[e]=t}removeLocalQueryTarget(e){this.Ur.sr(e)}isLocalQueryTarget(e){return this.Ur.activeTargetIds.has(e)}clearQueryState(e){delete this.qr[e]}getAllActiveQueryTargets(){return this.Ur.activeTargetIds}isActiveQueryTarget(e){return this.Ur.activeTargetIds.has(e)}start(){return this.Ur=new bc,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class RD{Kr(e){}shutdown(){}}class Sv{constructor(){this.Gr=()=>this.Qr(),this.jr=()=>this.Wr(),this.zr=[],this.Hr()}Kr(e){this.zr.push(e)}shutdown(){window.removeEventListener("online",this.Gr),window.removeEventListener("offline",this.jr)}Hr(){window.addEventListener("online",this.Gr),window.addEventListener("offline",this.jr)}Qr(){$e("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.zr)e(0)}Wr(){$e("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.zr)e(1)}static vt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const MD={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class ND{constructor(e){this.Jr=e.Jr,this.Yr=e.Yr}Xr(e){this.Zr=e}eo(e){this.no=e}onMessage(e){this.so=e}close(){this.Yr()}send(e){this.Jr(e)}io(){this.Zr()}ro(e){this.no(e)}oo(e){this.so(e)}}class Av extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.uo=(e.ssl?"https":"http")+"://"+e.host,this.ao="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}co(e,t,r,i,u){const c=this.ho(e,t);$e("RestConnection","Sending: ",c,r);const h={};return this.lo(h,i,u),this.fo(e,c,h,r).then(_=>($e("RestConnection","Received: ",_),_),_=>{throw If("RestConnection",`${e} failed with error: `,_,"url: ",c,"request:",r),_})}_o(e,t,r,i,u){return this.co(e,t,r,i,u)}lo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+nc,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,u)=>e[u]=i),r&&r.headers.forEach((i,u)=>e[u]=i)}ho(e,t){return`${this.uo}/v1/${t}:${MD[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,t,r,i){return new Promise((u,c)=>{const h=new fw;h.listenOnce(hw.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case Lg.NO_ERROR:const w=h.getResponseJson();$e("Connection","XHR received:",JSON.stringify(w)),u(w);break;case Lg.TIMEOUT:$e("Connection",'RPC "'+e+'" timed out'),c(new Le(ge.DEADLINE_EXCEEDED,"Request time out"));break;case Lg.HTTP_ERROR:const D=h.getStatus();if($e("Connection",'RPC "'+e+'" failed with status:',D,"response text:",h.getResponseText()),D>0){const S=h.getResponseJson().error;if(S&&S.status&&S.message){const P=function(B){const Y=B.toLowerCase().replace(/_/g,"-");return Object.values(ge).indexOf(Y)>=0?Y:ge.UNKNOWN}(S.status);c(new Le(P,S.message))}else c(new Le(ge.UNKNOWN,"Server responded with status "+h.getStatus()))}else c(new Le(ge.UNAVAILABLE,"Connection failed."));break;default:at()}}finally{$e("Connection",'RPC "'+e+'" completed.')}});const _=JSON.stringify(i);h.send(t,"POST",_,r,15)})}wo(e,t,r){const i=[this.uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=cw(),c=dw(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(h.xmlHttpFactory=new CT({})),this.lo(h.initMessageHeaders,t,r),(0,Q.uI)()||(0,Q.b$)()||(0,Q.d)()||(0,Q.w1)()||(0,Q.Mn)()||(0,Q.ru)()||(h.httpHeadersOverwriteParam="$httpHeaders");const _=i.join("");$e("Connection","Creating WebChannel: "+_,h);const w=u.createWebChannel(_,h);let D=!1,S=!1;const P=new ND({Jr:Y=>{S?$e("Connection","Not sending because WebChannel is closed:",Y):(D||($e("Connection","Opening WebChannel transport."),w.open(),D=!0),$e("Connection","WebChannel sending:",Y),w.send(Y))},Yr:()=>w.close()}),B=(Y,Re,Ze)=>{Y.listen(Re,qt=>{try{Ze(qt)}catch(zt){setTimeout(()=>{throw zt},0)}})};return B(w,wf.EventType.OPEN,()=>{S||$e("Connection","WebChannel transport opened.")}),B(w,wf.EventType.CLOSE,()=>{S||(S=!0,$e("Connection","WebChannel transport closed"),P.ro())}),B(w,wf.EventType.ERROR,Y=>{S||(S=!0,If("Connection","WebChannel transport errored:",Y),P.ro(new Le(ge.UNAVAILABLE,"The operation could not be completed")))}),B(w,wf.EventType.MESSAGE,Y=>{var Re;if(!S){const Ze=Y.data[0];Tt(!!Ze);const qt=Ze,zt=qt.error||(null===(Re=qt[0])||void 0===Re?void 0:Re.error);if(zt){$e("Connection","WebChannel received error:",zt);const Zt=zt.status;let Ot=function(wn){const es=Ir[wn];if(void 0!==es)return Zw(es)}(Zt),on=zt.message;void 0===Ot&&(Ot=ge.INTERNAL,on="Unknown error status: "+Zt+" with message "+zt.message),S=!0,P.ro(new Le(Ot,on)),w.close()}else $e("Connection","WebChannel received:",Ze),P.oo(Ze)}}),B(c,bT.STAT_EVENT,Y=>{Y.stat===Iy.PROXY?$e("Connection","Detected buffering proxy"):Y.stat===Iy.NOPROXY&&$e("Connection","Detected no buffering proxy")}),setTimeout(()=>{P.io()},0),P}}function xv(){return"undefined"!=typeof window?window:null}function tp(){return"undefined"!=typeof document?document:null}function rl(n){return new Xg(n,!0)}class np{constructor(e,t,r=1e3,i=1.5,u=6e4){this.Yn=e,this.timerId=t,this.mo=r,this.yo=i,this.po=u,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const t=Math.floor(this.Io+this.bo()),r=Math.max(0,Date.now()-this.Eo),i=Math.max(0,t-r);i>0&&$e("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Io} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.To=this.Yn.enqueueAfterDelay(this.timerId,i,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class PD{constructor(e,t,r,i,u,c,h,_){this.Yn=e,this.Vo=r,this.vo=i,this.So=u,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=h,this.listener=_,this.state=0,this.Do=0,this.Co=null,this.xo=null,this.stream=null,this.No=new np(e,t)}ko(){return 1===this.state||5===this.state||this.Mo()}Mo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}stop(){var e=this;return(0,he.Z)(function*(){e.ko()&&(yield e.close(0))})()}Fo(){this.state=0,this.No.reset()}$o(){this.Mo()&&null===this.Co&&(this.Co=this.Yn.enqueueAfterDelay(this.Vo,6e4,()=>this.Bo()))}Lo(e){this.Uo(),this.stream.send(e)}Bo(){var e=this;return(0,he.Z)(function*(){if(e.Mo())return e.close(0)})()}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}qo(){this.xo&&(this.xo.cancel(),this.xo=null)}close(e,t){var r=this;return(0,he.Z)(function*(){r.Uo(),r.qo(),r.No.cancel(),r.Do++,4!==e?r.No.reset():t&&t.code===ge.RESOURCE_EXHAUSTED?(Fr(t.toString()),Fr("Using maximum backoff delay to prevent overloading the backend."),r.No.Ao()):t&&t.code===ge.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Ko(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.eo(t)})()}Ko(){}auth(){this.state=1;const e=this.Go(this.Do),t=this.Do;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Do===t&&this.Qo(r,i)},r=>{e(()=>{const i=new Le(ge.UNKNOWN,"Fetching auth token failed: "+r.message);return this.jo(i)})})}Qo(e,t){const r=this.Go(this.Do);this.stream=this.Wo(e,t),this.stream.Xr(()=>{r(()=>(this.state=2,this.xo=this.Yn.enqueueAfterDelay(this.vo,1e4,()=>(this.Mo()&&(this.state=3),Promise.resolve())),this.listener.Xr()))}),this.stream.eo(i=>{r(()=>this.jo(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Oo(){var e=this;this.state=5,this.No.Ro((0,he.Z)(function*(){e.state=0,e.start()}))}jo(e){return $e("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Go(e){return t=>{this.Yn.enqueueAndForget(()=>this.Do===e?t():($e("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class UI extends PD{constructor(e,t,r,i,u,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,c),this.M=u}Wo(e,t){return this.So.wo("Listen",e,t)}onMessage(e){this.No.reset();const t=function KT(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(_=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===_?1:"REMOVE"===_?2:"CURRENT"===_?3:"RESET"===_?4:at(),i=e.targetChange.targetIds||[],u=function(_,w){return _.N?(Tt(void 0===w||"string"==typeof w),Er.fromBase64String(w||"")):(Tt(void 0===w||w instanceof Uint8Array),Er.fromUint8Array(w||new Uint8Array))}(n,e.targetChange.resumeToken),c=e.targetChange.cause,h=c&&function(_){const w=void 0===_.code?ge.UNKNOWN:Zw(_.code);return new Le(w,_.message||"")}(c);t=new Kw(r,i,u,h||null)}else if("documentChange"in e){const r=e.documentChange,i=ua(n,r.document.name),u=Qr(r.document.updateTime),c=new Ni({mapValue:{fields:r.document.fields}}),h=Wn.newFoundDocument(i,u,c);t=new kf(r.targetIds||[],r.removedTargetIds||[],h.key,h)}else if("documentDelete"in e){const r=e.documentDelete,i=ua(n,r.document),u=r.readTime?Qr(r.readTime):wt.min(),c=Wn.newNoDocument(i,u);t=new kf([],r.removedTargetIds||[],c.key,c)}else if("documentRemove"in e){const r=e.documentRemove,i=ua(n,r.document);t=new kf([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return at();{const r=e.filter,u=new qw(r.count||0);t=new Hy(r.targetId,u)}}var _;return t}(this.M,e),r=function(i){if(!("targetChange"in i))return wt.min();const u=i.targetChange;return u.targetIds&&u.targetIds.length?wt.min():u.readTime?Qr(u.readTime):wt.min()}(e);return this.listener.zo(t,r)}Ho(e){const t={};t.database=Yd(this.M),t.addTarget=function(i,u){let c;const h=u.target;return c=zg(h)?{documents:YT(i,h)}:{query:Ky(i,h)},c.targetId=u.targetId,u.resumeToken.approximateByteSize()>0?c.resumeToken=Wy(i,u.resumeToken):u.snapshotVersion.compareTo(wt.min())>0&&(c.readTime=Zd(i,u.snapshotVersion.toTimestamp())),c}(this.M,e);const r=function QT(n,e){const t=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return at()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Lo(t)}Jo(e){const t={};t.database=Yd(this.M),t.removeTarget=e,this.Lo(t)}}class kD extends PD{constructor(e,t,r,i,u,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,c),this.M=u,this.Yo=!1}get Xo(){return this.Yo}start(){this.Yo=!1,this.lastStreamToken=void 0,super.start()}Ko(){this.Yo&&this.Zo([])}Wo(e,t){return this.So.wo("Write",e,t)}onMessage(e){if(Tt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Yo){this.No.reset();const t=function yx(n,e){return n&&n.length>0?(Tt(void 0!==e),n.map(t=>function(r,i){let u=Qr(r.updateTime?r.updateTime:i);return u.isEqual(wt.min())&&(u=Qr(i)),new $w(u,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Qr(e.commitTime);return this.listener.tu(r,t)}return Tt(!e.writeResults||0===e.writeResults.length),this.Yo=!0,this.listener.eu()}nu(){const e={};e.database=Yd(this.M),this.Lo(e)}Zo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>em(this.M,r))};this.Lo(t)}}class VI extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.So=r,this.M=i,this.su=!1}iu(){if(this.su)throw new Le(ge.FAILED_PRECONDITION,"The client has already been terminated.")}co(e,t,r){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,u])=>this.So.co(e,t,r,i,u)).catch(i=>{throw"FirebaseError"===i.name?(i.code===ge.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Le(ge.UNKNOWN,i.toString())})}_o(e,t,r){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,u])=>this.So._o(e,t,r,i,u)).catch(i=>{throw"FirebaseError"===i.name?(i.code===ge.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Le(ge.UNKNOWN,i.toString())})}terminate(){this.su=!0}}class hm{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.ru=0,this.ou=null,this.uu=!0}au(){0===this.ru&&(this.cu("Unknown"),this.ou=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ou=null,this.hu("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}lu(e){"Online"===this.state?this.cu("Unknown"):(this.ru++,this.ru>=1&&(this.fu(),this.hu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.fu(),this.ru=0,"Online"===e&&(this.uu=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}hu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.uu?(Fr(t),this.uu=!1):$e("OnlineStateTracker",t)}fu(){null!==this.ou&&(this.ou.cancel(),this.ou=null)}}class BI{constructor(e,t,r,i,u){var c=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.du=[],this._u=new Map,this.wu=new Set,this.mu=[],this.gu=u,this.gu.Kr(h=>{r.enqueueAndForget((0,he.Z)(function*(){var _;ru(c)&&($e("RemoteStore","Restarting streams for network reachability change."),yield(_=(0,he.Z)(function*(w){const D=tt(w);D.wu.add(4),yield il(D),D.yu.set("Unknown"),D.wu.delete(4),yield rp(D)}),function(w){return _.apply(this,arguments)})(c))}))}),this.yu=new hm(r,i)}}function rp(n){return ip.apply(this,arguments)}function ip(){return ip=(0,he.Z)(function*(n){if(ru(n))for(const e of n.mu)yield e(!0)}),ip.apply(this,arguments)}function il(n){return jI.apply(this,arguments)}function jI(){return jI=(0,he.Z)(function*(n){for(const e of n.mu)yield e(!1)}),jI.apply(this,arguments)}function fm(n,e){const t=tt(n);t._u.has(e.targetId)||(t._u.set(e.targetId,e),gm(t)?Mv(t):Cc(t).Mo()&&pm(t,e))}function sp(n,e){const t=tt(n),r=Cc(t);t._u.delete(e),r.Mo()&&Rv(t,e),0===t._u.size&&(r.Mo()?r.$o():ru(t)&&t.yu.set("Unknown"))}function pm(n,e){n.pu.Z(e.targetId),Cc(n).Ho(e)}function Rv(n,e){n.pu.Z(e),Cc(n).Jo(e)}function Mv(n){n.pu=new zT({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n._u.get(e)||null}),Cc(n).start(),n.yu.au()}function gm(n){return ru(n)&&!Cc(n).ko()&&n._u.size>0}function ru(n){return 0===tt(n).wu.size}function $I(n){n.pu=void 0}function OD(n){return mm.apply(this,arguments)}function mm(){return mm=(0,he.Z)(function*(n){n._u.forEach((e,t)=>{pm(n,e)})}),mm.apply(this,arguments)}function FD(n,e){return _m.apply(this,arguments)}function _m(){return _m=(0,he.Z)(function*(n,e){$I(n),gm(n)?(n.yu.lu(e),Mv(n)):n.yu.set("Unknown")}),_m.apply(this,arguments)}function HI(n,e,t){return ym.apply(this,arguments)}function ym(){return ym=(0,he.Z)(function*(n,e,t){if(n.yu.set("Online"),e instanceof Kw&&2===e.state&&e.cause)try{yield(r=(0,he.Z)(function*(i,u){const c=u.cause;for(const h of u.targetIds)i._u.has(h)&&(yield i.remoteSyncer.rejectListen(h,c),i._u.delete(h),i.pu.removeTarget(h))}),function(i,u){return r.apply(this,arguments)})(n,e)}catch(r){$e("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield op(n,r)}else if(e instanceof kf?n.pu.ut(e):e instanceof Hy?n.pu._t(e):n.pu.ht(e),!t.isEqual(wt.min()))try{const r=yield yv(n.localStore);t.compareTo(r)>=0&&(yield function(i,u){const c=i.pu.yt(u);return c.targetChanges.forEach((h,_)=>{if(h.resumeToken.approximateByteSize()>0){const w=i._u.get(_);w&&i._u.set(_,w.withResumeToken(h.resumeToken,u))}}),c.targetMismatches.forEach(h=>{const _=i._u.get(h);if(!_)return;i._u.set(h,_.withResumeToken(Er.EMPTY_BYTE_STRING,_.snapshotVersion)),Rv(i,h);const w=new Ku(_.target,h,1,_.sequenceNumber);pm(i,w)}),i.remoteSyncer.applyRemoteEvent(c)}(n,t))}catch(r){$e("RemoteStore","Failed to raise snapshot:",r),yield op(n,r)}var r}),ym.apply(this,arguments)}function op(n,e,t){return Nv.apply(this,arguments)}function Nv(){return Nv=(0,he.Z)(function*(n,e,t){if(!mc(e))throw e;n.wu.add(1),yield il(n),n.yu.set("Offline"),t||(t=()=>yv(n.localStore)),n.asyncQueue.enqueueRetryable((0,he.Z)(function*(){$e("RemoteStore","Retrying IndexedDB access"),yield t(),n.wu.delete(1),yield rp(n)}))}),Nv.apply(this,arguments)}function WI(n,e){return e().catch(t=>op(n,t,e))}function ap(n){return vm.apply(this,arguments)}function vm(){return vm=(0,he.Z)(function*(n){const e=tt(n),t=sl(e);let r=e.du.length>0?e.du[e.du.length-1].batchId:-1;for(;Ex(e);)try{const i=yield RI(e.localStore,r);if(null===i){0===e.du.length&&t.$o();break}r=i.batchId,wx(e,i)}catch(i){yield op(e,i)}LD(e)&&UD(e)}),vm.apply(this,arguments)}function Ex(n){return ru(n)&&n.du.length<10}function wx(n,e){n.du.push(e);const t=sl(n);t.Mo()&&t.Xo&&t.Zo(e.mutations)}function LD(n){return ru(n)&&!sl(n).ko()&&n.du.length>0}function UD(n){sl(n).start()}function Ix(n){return zI.apply(this,arguments)}function zI(){return zI=(0,he.Z)(function*(n){sl(n).nu()}),zI.apply(this,arguments)}function bx(n){return GI.apply(this,arguments)}function GI(){return GI=(0,he.Z)(function*(n){const e=sl(n);for(const t of n.du)e.Zo(t.mutations)}),GI.apply(this,arguments)}function Em(n,e,t){return qI.apply(this,arguments)}function qI(){return qI=(0,he.Z)(function*(n,e,t){const r=n.du.shift(),i=rv.from(r,e,t);yield WI(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield ap(n)}),qI.apply(this,arguments)}function ZI(n,e){return up.apply(this,arguments)}function up(){return up=(0,he.Z)(function*(n,e){var t;e&&sl(n).Xo&&(yield(t=(0,he.Z)(function*(r,i){if(yt(u=i.code)&&u!==ge.ABORTED){const c=r.du.shift();sl(r).Fo(),yield WI(r,()=>r.remoteSyncer.rejectFailedWrite(c.batchId,i)),yield ap(r)}var u}),function(r,i){return t.apply(this,arguments)})(n,e)),LD(n)&&UD(n)}),up.apply(this,arguments)}function Pv(n,e){return wm.apply(this,arguments)}function wm(){return wm=(0,he.Z)(function*(n,e){const t=tt(n);t.asyncQueue.verifyOperationInProgress(),$e("RemoteStore","RemoteStore received new credentials");const r=ru(t);t.wu.add(3),yield il(t),r&&t.yu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.wu.delete(3),yield rp(t)}),wm.apply(this,arguments)}function KI(n,e){return lp.apply(this,arguments)}function lp(){return lp=(0,he.Z)(function*(n,e){const t=tt(n);e?(t.wu.delete(2),yield rp(t)):e||(t.wu.add(2),yield il(t),t.yu.set("Unknown"))}),lp.apply(this,arguments)}function Cc(n){return n.Iu||(n.Iu=function(e,t,r){const i=tt(e);return i.iu(),new UI(t,i.So,i.authCredentials,i.appCheckCredentials,i.M,r)}(n.datastore,n.asyncQueue,{Xr:OD.bind(null,n),eo:FD.bind(null,n),zo:HI.bind(null,n)}),n.mu.push(function(){var e=(0,he.Z)(function*(t){t?(n.Iu.Fo(),gm(n)?Mv(n):n.yu.set("Unknown")):(yield n.Iu.stop(),$I(n))});return function(t){return e.apply(this,arguments)}}())),n.Iu}function sl(n){return n.Tu||(n.Tu=function(e,t,r){const i=tt(e);return i.iu(),new kD(t,i.So,i.authCredentials,i.appCheckCredentials,i.M,r)}(n.datastore,n.asyncQueue,{Xr:Ix.bind(null,n),eo:ZI.bind(null,n),eu:bx.bind(null,n),tu:Em.bind(null,n)}),n.mu.push(function(){var e=(0,he.Z)(function*(t){t?(n.Tu.Fo(),yield ap(n)):(yield n.Tu.stop(),n.du.length>0&&($e("RemoteStore",`Stopping write stream with ${n.du.length} pending writes`),n.du=[]))});return function(t){return e.apply(this,arguments)}}())),n.Tu}class Im{constructor(e,t,r,i,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=u,this.deferred=new Lr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}static createAndSchedule(e,t,r,i,u){const c=Date.now()+r,h=new Im(e,t,c,i,u);return h.start(r),h}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Le(ge.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function cp(n,e){if(Fr("AsyncQueue",`${e}: ${n}`),mc(n))return new Le(ge.UNAVAILABLE,`${e}: ${n}`);throw n}class ah{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Qe.comparator(t.key,r.key):(t,r)=>Qe.comparator(t.key,r.key),this.keyedMap=Wd(),this.sortedSet=new ar(this.comparator)}static emptySet(e){return new ah(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof ah)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,u=r.getNext().key;if(!i.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new ah;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class YI{constructor(){this.Eu=new ar(Qe.comparator)}track(e){const t=e.doc.key,r=this.Eu.get(t);r?0!==e.type&&3===r.type?this.Eu=this.Eu.insert(t,e):3===e.type&&1!==r.type?this.Eu=this.Eu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Eu=this.Eu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Eu=this.Eu.remove(t):1===e.type&&2===r.type?this.Eu=this.Eu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):at():this.Eu=this.Eu.insert(t,e)}Au(){const e=[];return this.Eu.inorderTraversal((t,r)=>{e.push(r)}),e}}class ol{constructor(e,t,r,i,u,c,h,_){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=u,this.fromCache=c,this.syncStateChanged=h,this.excludesMetadataChanges=_}static fromInitialDocuments(e,t,r,i){const u=[];return t.forEach(c=>{u.push({type:0,doc:c})}),new ol(e,t,ah.emptySet(t),u,r,i,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Bd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class VD{constructor(){this.Ru=void 0,this.listeners=[]}}class Cx{constructor(){this.queries=new qu(e=>By(e),Bd),this.onlineState="Unknown",this.bu=new Set}}function QI(n,e){return JI.apply(this,arguments)}function JI(){return JI=(0,he.Z)(function*(n,e){const t=tt(n),r=e.query;let i=!1,u=t.queries.get(r);if(u||(i=!0,u=new VD),i)try{u.Ru=yield t.onListen(r)}catch(c){const h=cp(c,`Initialization of query '${Zg(e.query)}' failed`);return void e.onError(h)}t.queries.set(r,u),u.listeners.push(e),e.Pu(t.onlineState),u.Ru&&e.Vu(u.Ru)&&Fv(t)}),JI.apply(this,arguments)}function kv(n,e){return Ov.apply(this,arguments)}function Ov(){return Ov=(0,he.Z)(function*(n,e){const t=tt(n),r=e.query;let i=!1;const u=t.queries.get(r);if(u){const c=u.listeners.indexOf(e);c>=0&&(u.listeners.splice(c,1),i=0===u.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),Ov.apply(this,arguments)}function BD(n,e){const t=tt(n);let r=!1;for(const i of e){const c=t.queries.get(i.query);if(c){for(const h of c.listeners)h.Vu(i)&&(r=!0);c.Ru=i}}r&&Fv(t)}function Tx(n,e,t){const r=tt(n),i=r.queries.get(e);if(i)for(const u of i.listeners)u.onError(t);r.queries.delete(e)}function Fv(n){n.bu.forEach(e=>{e.next()})}class dp{constructor(e,t,r){this.query=e,this.vu=t,this.Su=!1,this.Du=null,this.onlineState="Unknown",this.options=r||{}}Vu(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new ol(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.Su?this.Cu(e)&&(this.vu.next(e),t=!0):this.xu(e,this.onlineState)&&(this.Nu(e),t=!0),this.Du=e,t}onError(e){this.vu.error(e)}Pu(e){this.onlineState=e;let t=!1;return this.Du&&!this.Su&&this.xu(this.Du,e)&&(this.Nu(this.Du),t=!0),t}xu(e,t){return!e.fromCache||!(this.options.ku&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}Cu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Du&&this.Du.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Nu(e){e=ol.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.Su=!0,this.vu.next(e)}}class jD{constructor(e,t){this.payload=e,this.byteLength=t}Mu(){return"metadata"in this.payload}}class Ws{constructor(e){this.M=e}wi(e){return ua(this.M,e)}mi(e){return e.metadata.exists?Zy(this.M,e.document,!1):Wn.newNoDocument(this.wi(e.metadata.name),this.gi(e.metadata.readTime))}gi(e){return Qr(e)}}class $D{constructor(e,t,r){this.Ou=e,this.localStore=t,this.M=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=bm(e)}Fu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const r=rn.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}$u(e){const t=new Map,r=new Ws(this.M);for(const i of e)if(i.metadata.queries){const u=r.wi(i.metadata.name);for(const c of i.metadata.queries){const h=(t.get(c)||mn()).add(u);t.set(c,h)}}return t}complete(){var e=this;return(0,he.Z)(function*(){const t=yield function Ev(n,e,t,r){return wv.apply(this,arguments)}(e.localStore,new Ws(e.M),e.documents,e.Ou.id),r=e.$u(e.documents);for(const i of e.queries)yield DD(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Bu:e.collectionGroups,Lu:t}})()}}function bm(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class XI{constructor(e){this.key=e}}class eb{constructor(e){this.key=e}}class Cm{constructor(e,t){this.query=e,this.Uu=t,this.qu=null,this.current=!1,this.Ku=mn(),this.mutatedKeys=mn(),this.Gu=Nw(e),this.Qu=new ah(this.Gu)}get ju(){return this.Uu}Wu(e,t){const r=t?t.zu:new YI,i=t?t.Qu:this.Qu;let u=t?t.mutatedKeys:this.mutatedKeys,c=i,h=!1;const _="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,w="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((D,S)=>{const P=i.get(D),B=Kg(this.query,S)?S:null,Y=!!P&&this.mutatedKeys.has(P.key),Re=!!B&&(B.hasLocalMutations||this.mutatedKeys.has(B.key)&&B.hasCommittedMutations);let Ze=!1;P&&B?P.data.isEqual(B.data)?Y!==Re&&(r.track({type:3,doc:B}),Ze=!0):this.Hu(P,B)||(r.track({type:2,doc:B}),Ze=!0,(_&&this.Gu(B,_)>0||w&&this.Gu(B,w)<0)&&(h=!0)):!P&&B?(r.track({type:0,doc:B}),Ze=!0):P&&!B&&(r.track({type:1,doc:P}),Ze=!0,(_||w)&&(h=!0)),Ze&&(B?(c=c.add(B),u=Re?u.add(D):u.delete(D)):(c=c.delete(D),u=u.delete(D)))}),null!==this.query.limit)for(;c.size>this.query.limit;){const D="F"===this.query.limitType?c.last():c.first();c=c.delete(D.key),u=u.delete(D.key),r.track({type:1,doc:D})}return{Qu:c,zu:r,ii:h,mutatedKeys:u}}Hu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const u=e.zu.Au();u.sort((w,D)=>function(S,P){const B=Y=>{switch(Y){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return at()}};return B(S)-B(P)}(w.type,D.type)||this.Gu(w.doc,D.doc)),this.Ju(r);const c=t?this.Yu():[],h=0===this.Ku.size&&this.current?1:0,_=h!==this.qu;return this.qu=h,0!==u.length||_?{snapshot:new ol(this.query,e.Qu,i,u,e.mutatedKeys,0===h,_,!1),Xu:c}:{Xu:c}}Pu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new YI,mutatedKeys:this.mutatedKeys,ii:!1},!1)):{Xu:[]}}Zu(e){return!this.Uu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(t=>this.Uu=this.Uu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Uu=this.Uu.delete(t)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=mn(),this.Qu.forEach(r=>{this.Zu(r.key)&&(this.Ku=this.Ku.add(r.key))});const t=[];return e.forEach(r=>{this.Ku.has(r)||t.push(new eb(r))}),this.Ku.forEach(r=>{e.has(r)||t.push(new XI(r))}),t}ta(e){this.Uu=e._i,this.Ku=mn();const t=this.Wu(e.documents);return this.applyChanges(t,!0)}ea(){return ol.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.qu)}}class tb{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class nb{constructor(e){this.key=e,this.na=!1}}class HD{constructor(e,t,r,i,u,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=u,this.maxConcurrentLimboResolutions=c,this.sa={},this.ia=new qu(h=>By(h),Bd),this.ra=new Map,this.oa=new Set,this.ua=new ar(Qe.comparator),this.aa=new Map,this.ca=new Xf,this.ha={},this.la=new Map,this.fa=Ec.yn(),this.onlineState="Unknown",this.da=void 0}get isPrimaryClient(){return!0===this.da}}function rb(n,e){return Lv.apply(this,arguments)}function Lv(){return Lv=(0,he.Z)(function*(n,e){const t=Mm(n);let r,i;const u=t.ia.get(e);if(u)r=u.targetId,t.sharedClientState.addLocalQueryTarget(r),i=u.view.ea();else{const c=yield ih(t.localStore,Es(e));t.isPrimaryClient&&fm(t.remoteStore,c);const h=t.sharedClientState.addLocalQueryTarget(c.targetId);r=c.targetId,i=yield Uv(t,e,r,"current"===h)}return i}),Lv.apply(this,arguments)}function Uv(n,e,t,r){return Vv.apply(this,arguments)}function Vv(){return Vv=(0,he.Z)(function*(n,e,t,r){n._a=(D,S,P)=>{return(B=(0,he.Z)(function*(Y,Re,Ze,qt){let zt=Re.view.Wu(Ze);zt.ii&&(zt=yield oh(Y.localStore,Re.query,!1).then(({documents:on})=>Re.view.Wu(on,zt)));const Zt=qt&&qt.targetChanges.get(Re.targetId),Ot=Re.view.applyChanges(zt,Y.isPrimaryClient,Zt);return hp(Y,Re.targetId,Ot.Xu),Ot.snapshot}),function(Y,Re,Ze,qt){return B.apply(this,arguments)})(n,D,S,P);var B};const i=yield oh(n.localStore,e,!0),u=new Cm(e,i._i),c=u.Wu(i.documents),h=Gd.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),_=u.applyChanges(c,n.isPrimaryClient,h);hp(n,t,_.Xu);const w=new tb(e,t,u);return n.ia.set(e,w),n.ra.has(t)?n.ra.get(t).push(e):n.ra.set(t,[e]),_.snapshot}),Vv.apply(this,arguments)}function Bv(n,e){return iu.apply(this,arguments)}function iu(){return iu=(0,he.Z)(function*(n,e){const t=tt(n),r=t.ia.get(e),i=t.ra.get(r.targetId);if(i.length>1)return t.ra.set(r.targetId,i.filter(u=>!Bd(u,e))),void t.ia.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield sh(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),sp(t.remoteStore,r.targetId),Tc(t,r.targetId)}).catch(wc))):(Tc(t,r.targetId),yield sh(t.localStore,r.targetId,!0))}),iu.apply(this,arguments)}function Tm(){return Tm=(0,he.Z)(function*(n,e,t){const r=fp(n);try{const i=yield function(u,c){const h=tt(u),_=or.now(),w=c.reduce((S,P)=>S.add(P.key),mn());let D;return h.persistence.runTransaction("Locally write mutations","readwrite",S=>h.fi.Ks(S,w).next(P=>{D=P;const B=[];for(const Y of c){const Re=Ww(Y,D.get(Y.key));null!=Re&&B.push(new dc(Y.key,Re,ww(Re.value.mapValue),wr.exists(!0)))}return h.Bs.addMutationBatch(S,_,B,c)})).then(S=>(S.applyToLocalDocumentSet(D),{batchId:S.batchId,changes:D}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(u,c,h){let _=u.ha[u.currentUser.toKey()];_||(_=new ar(Vt)),_=_.insert(c,h),u.ha[u.currentUser.toKey()]=_}(r,i.batchId,t),yield da(r,i.changes),yield ap(r.remoteStore)}catch(i){const u=cp(i,"Failed to persist write");t.reject(u)}}),Tm.apply(this,arguments)}function sb(n,e){return ob.apply(this,arguments)}function ob(){return ob=(0,he.Z)(function*(n,e){const t=tt(n);try{const r=yield xI(t.localStore,e);e.targetChanges.forEach((i,u)=>{const c=t.aa.get(u);c&&(Tt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?c.na=!0:i.modifiedDocuments.size>0?Tt(c.na):i.removedDocuments.size>0&&(Tt(c.na),c.na=!1))}),yield da(t,r,e)}catch(r){yield wc(r)}}),ob.apply(this,arguments)}function ab(n,e,t){const r=tt(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.ia.forEach((u,c)=>{const h=c.view.Pu(e);h.snapshot&&i.push(h.snapshot)}),function(u,c){const h=tt(u);h.onlineState=c;let _=!1;h.queries.forEach((w,D)=>{for(const S of D.listeners)S.Pu(c)&&(_=!0)}),_&&Fv(h)}(r.eventManager,e),i.length&&r.sa.zo(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function WD(n,e,t){return jv.apply(this,arguments)}function jv(){return jv=(0,he.Z)(function*(n,e,t){const r=tt(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.aa.get(e),u=i&&i.key;if(u){let c=new ar(Qe.comparator);c=c.insert(u,Wn.newNoDocument(u,wt.min()));const h=mn().add(u),_=new zd(wt.min(),new Map,new Pn(Vt),c,h);yield sb(r,_),r.ua=r.ua.remove(u),r.aa.delete(e),Gv(r)}else yield sh(r.localStore,e,!1).then(()=>Tc(r,e,t)).catch(wc)}),jv.apply(this,arguments)}function ub(n,e){return $v.apply(this,arguments)}function $v(){return $v=(0,he.Z)(function*(n,e){const t=tt(n),r=e.batch.batchId;try{const i=yield TD(t.localStore,e);zv(t,r,null),Wv(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield da(t,i)}catch(i){yield wc(i)}}),$v.apply(this,arguments)}function zD(n,e,t){return lb.apply(this,arguments)}function lb(){return lb=(0,he.Z)(function*(n,e,t){const r=tt(n);try{const i=yield function(u,c){const h=tt(u);return h.persistence.runTransaction("Reject batch","readwrite-primary",_=>{let w;return h.Bs.lookupMutationBatch(_,c).next(D=>(Tt(null!==D),w=D.keys(),h.Bs.removeMutationBatch(_,D))).next(()=>h.Bs.performConsistencyCheck(_)).next(()=>h.fi.Ks(_,w))})}(r.localStore,e);zv(r,e,t),Wv(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield da(r,i)}catch(i){yield wc(i)}}),lb.apply(this,arguments)}function Dm(){return Dm=(0,he.Z)(function*(n,e){const t=tt(n);ru(t.remoteStore)||$e("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(u){const c=tt(u);return c.persistence.runTransaction("Get highest unacknowledged batch id","readonly",h=>c.Bs.getHighestUnacknowledgedBatchId(h))}(t.localStore);if(-1===r)return void e.resolve();const i=t.la.get(r)||[];i.push(e),t.la.set(r,i)}catch(r){const i=cp(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),Dm.apply(this,arguments)}function Wv(n,e){(n.la.get(e)||[]).forEach(t=>{t.resolve()}),n.la.delete(e)}function zv(n,e,t){const r=tt(n);let i=r.ha[r.currentUser.toKey()];if(i){const u=i.get(e);u&&(t?u.reject(t):u.resolve(),i=i.remove(e)),r.ha[r.currentUser.toKey()]=i}}function Tc(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.ra.get(e))n.ia.delete(r),t&&n.sa.wa(r,t);n.ra.delete(e),n.isPrimaryClient&&n.ca.vi(e).forEach(r=>{n.ca.containsKey(r)||Sm(n,r)})}function Sm(n,e){n.oa.delete(e.path.canonicalString());const t=n.ua.get(e);null!==t&&(sp(n.remoteStore,t),n.ua=n.ua.remove(e),n.aa.delete(t),Gv(n))}function hp(n,e,t){for(const r of t)r instanceof XI?(n.ca.addReference(r.key,e),cb(n,r)):r instanceof eb?($e("SyncEngine","Document no longer in limbo: "+r.key),n.ca.removeReference(r.key,e),n.ca.containsKey(r.key)||Sm(n,r.key)):at()}function cb(n,e){const t=e.key,r=t.path.canonicalString();n.ua.get(t)||n.oa.has(r)||($e("SyncEngine","New document in limbo: "+t),n.oa.add(r),Gv(n))}function Gv(n){for(;n.oa.size>0&&n.ua.size<n.maxConcurrentLimboResolutions;){const e=n.oa.values().next().value;n.oa.delete(e);const t=new Qe(rn.fromString(e)),r=n.fa.next();n.aa.set(r,new nb(t)),n.ua=n.ua.insert(t,r),fm(n.remoteStore,new Ku(Es(ac(t.path)),r,2,Ki.A))}}function da(n,e,t){return Am.apply(this,arguments)}function Am(){return Am=(0,he.Z)(function*(n,e,t){const r=tt(n),i=[],u=[],c=[];var h;r.ia.isEmpty()||(r.ia.forEach((h,_)=>{c.push(r._a(_,e,t).then(w=>{if(w){r.isPrimaryClient&&r.sharedClientState.updateQueryState(_.targetId,w.fromCache?"not-current":"current"),i.push(w);const D=mv.Ys(_.targetId,w);u.push(D)}}))}),yield Promise.all(c),r.sa.zo(i),yield(h=(0,he.Z)(function*(_,w){const D=tt(_);try{yield D.persistence.runTransaction("notifyLocalViewChanges","readwrite",S=>me.forEach(w,P=>me.forEach(P.Hs,B=>D.persistence.referenceDelegate.addReference(S,P.targetId,B)).next(()=>me.forEach(P.Js,B=>D.persistence.referenceDelegate.removeReference(S,P.targetId,B)))))}catch(S){if(!mc(S))throw S;$e("LocalStore","Failed to update sequence numbers: "+S)}for(const S of w){const P=S.targetId;if(!S.fromCache){const B=D.ui.get(P),Re=B.withLastLimboFreeSnapshotVersion(B.snapshotVersion);D.ui=D.ui.insert(P,Re)}}}),function(_,w){return h.apply(this,arguments)})(r.localStore,u))}),Am.apply(this,arguments)}function GD(n,e){return qv.apply(this,arguments)}function qv(){return qv=(0,he.Z)(function*(n,e){const t=tt(n);if(!t.currentUser.isEqual(e)){$e("SyncEngine","User change. New user:",e.toKey());const r=yield Jf(t.localStore,e);t.currentUser=e,(i=t).la.forEach(c=>{c.forEach(h=>{h.reject(new Le(ge.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.la.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield da(t,r.di)}var i}),qv.apply(this,arguments)}function Dx(n,e){const t=tt(n),r=t.aa.get(e);if(r&&r.na)return mn().add(r.key);{let i=mn();const u=t.ra.get(e);if(!u)return i;for(const c of u){const h=t.ia.get(c);i=i.unionWith(h.view.ju)}return i}}function Sx(n,e){return xm.apply(this,arguments)}function xm(){return xm=(0,he.Z)(function*(n,e){const t=tt(n),r=yield oh(t.localStore,e.query,!0),i=e.view.ta(r);return t.isPrimaryClient&&hp(t,e.targetId,i.Xu),i}),xm.apply(this,arguments)}function qD(n,e){return Zv.apply(this,arguments)}function Zv(){return Zv=(0,he.Z)(function*(n,e){const t=tt(n);return vv(t.localStore,e).then(r=>da(t,r))}),Zv.apply(this,arguments)}function ZD(n,e,t,r){return db.apply(this,arguments)}function db(){return db=(0,he.Z)(function*(n,e,t,r){const i=tt(n),u=yield function(c,h){const _=tt(c),w=tt(_.Bs);return _.persistence.runTransaction("Lookup mutation documents","readonly",D=>w.fn(D,h).next(S=>S?_.fi.Ks(D,S):me.resolve(null)))}(i.localStore,e);var h;null!==u?("pending"===t?yield ap(i.remoteStore):"acknowledged"===t||"rejected"===t?(zv(i,e,r||null),Wv(i,e),h=e,tt(tt(i.localStore).Bs)._n(h)):at(),yield da(i,u)):$e("SyncEngine","Cannot apply mutation batch with id: "+e)}),db.apply(this,arguments)}function hb(){return hb=(0,he.Z)(function*(n,e){const t=tt(n);if(Mm(t),fp(t),!0===e&&!0!==t.da){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield KD(t,r.toArray());t.da=!0,yield KI(t.remoteStore,!0);for(const u of i)fm(t.remoteStore,u)}else if(!1===e&&!1!==t.da){const r=[];let i=Promise.resolve();t.ra.forEach((u,c)=>{t.sharedClientState.isLocalQueryTarget(c)?r.push(c):i=i.then(()=>(Tc(t,c),sh(t.localStore,c,!0))),sp(t.remoteStore,c)}),yield i,yield KD(t,r),function(u){const c=tt(u);c.aa.forEach((h,_)=>{sp(c.remoteStore,_)}),c.ca.Si(),c.aa=new Map,c.ua=new ar(Qe.comparator)}(t),t.da=!1,yield KI(t.remoteStore,!1)}}),hb.apply(this,arguments)}function KD(n,e,t){return fb.apply(this,arguments)}function fb(){return fb=(0,he.Z)(function*(n,e,t){const r=tt(n),i=[],u=[];for(const c of e){let h;const _=r.ra.get(c);if(_&&0!==_.length){h=yield ih(r.localStore,Es(_[0]));for(const w of _){const D=r.ia.get(w),S=yield Sx(r,D);S.snapshot&&u.push(S.snapshot)}}else{const w=yield um(r.localStore,c);h=yield ih(r.localStore,w),yield Uv(r,pb(w),c,!1)}i.push(h)}return r.sa.zo(u),i}),fb.apply(this,arguments)}function pb(n){return xw(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function Rm(n){const e=tt(n);return tt(tt(e.localStore).persistence).Fs()}function YD(n,e,t,r){return Kv.apply(this,arguments)}function Kv(){return Kv=(0,he.Z)(function*(n,e,t,r){const i=tt(n);if(i.da)return void $e("SyncEngine","Ignoring unexpected query state notification.");const u=i.ra.get(e);if(u&&u.length>0)switch(t){case"current":case"not-current":{const c=yield vv(i.localStore,Mw(u[0])),h=zd.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield da(i,c,h);break}case"rejected":yield sh(i.localStore,e,!0),Tc(i,e,r);break;default:at()}}),Kv.apply(this,arguments)}function gb(n,e,t){return su.apply(this,arguments)}function su(){return su=(0,he.Z)(function*(n,e,t){const r=Mm(n);if(r.da){for(const i of e){if(r.ra.has(i)){$e("SyncEngine","Adding an already active target "+i);continue}const u=yield um(r.localStore,i),c=yield ih(r.localStore,u);yield Uv(r,pb(u),c.targetId,!1),fm(r.remoteStore,c)}for(const i of t)r.ra.has(i)&&(yield sh(r.localStore,i,!1).then(()=>{sp(r.remoteStore,i),Tc(r,i)}).catch(wc))}}),su.apply(this,arguments)}function Mm(n){const e=tt(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=sb.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Dx.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=WD.bind(null,e),e.sa.zo=BD.bind(null,e.eventManager),e.sa.wa=Tx.bind(null,e.eventManager),e}function fp(n){const e=tt(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=ub.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=zD.bind(null,e),e}class mb{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,he.Z)(function*(){t.M=rl(e.databaseInfo.databaseId),t.sharedClientState=t.ga(e),t.persistence=t.ya(e),yield t.persistence.start(),t.gcScheduler=t.pa(e),t.localStore=t.Ia(e)})()}pa(e){return null}Ia(e){return Qf(this.persistence,new AI,e.initialUser,this.M)}ya(e){return new OI(bv.Yi,this.M)}ga(e){return new dm}terminate(){var e=this;return(0,he.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class Nm extends mb{constructor(e,t,r){super(),this.Ta=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,he.Z)(function*(){yield t().call(r,e),yield r.Ta.initialize(r,e),yield fp(r.Ta.syncEngine),yield ap(r.Ta.remoteStore),yield r.persistence.Ts(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()))})()}Ia(e){return Qf(this.persistence,new AI,e.initialUser,this.M)}pa(e){return new zf(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}ya(e){const t=Kf(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Oi.withCacheSize(this.cacheSizeBytes):Oi.DEFAULT;return new Zf(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,xv(),tp(),this.M,this.sharedClientState,!!this.forceOwnership)}ga(e){return new dm}}class Qv extends Nm{constructor(e,t){super(e,t,!1),this.Ta=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,he.Z)(function*(){yield t().call(r,e);const i=r.Ta.syncEngine;r.sharedClientState instanceof Dv&&(r.sharedClientState.syncEngine={$r:ZD.bind(null,i),Br:YD.bind(null,i),Lr:gb.bind(null,i),Fs:Rm.bind(null,i),Fr:qD.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.Ts(function(){var u=(0,he.Z)(function*(c){yield function Ax(n,e){return hb.apply(this,arguments)}(r.Ta.syncEngine,c),r.gcScheduler&&(c&&!r.gcScheduler.started?r.gcScheduler.start(r.localStore):c||r.gcScheduler.stop())});return function(c){return u.apply(this,arguments)}}())})()}ga(e){const t=xv();if(!Dv.vt(t))throw new Le(ge.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=Kf(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Dv(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class uh{initialize(e,t){var r=this;return(0,he.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>ab(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=GD.bind(null,r.syncEngine),yield KI(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new Cx}createDatastore(e){const t=rl(e.databaseInfo.databaseId),r=new Av(e.databaseInfo);return new VI(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,u=h=>ab(this.syncEngine,h,0),c=Sv.vt()?new Sv:new RD,new BI(t,r,i,u,c);var t,r,i,u,c}createSyncEngine(e,t){return function(r,i,u,c,h,_,w){const D=new HD(r,i,u,c,h,_);return w&&(D.da=!0),D}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,he.Z)(function*(t){const r=tt(t);$e("RemoteStore","RemoteStore shutting down."),r.wu.add(5),yield il(r),r.gu.shutdown(),r.yu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function QD(n,e=10240){let t=0;return{read:()=>(0,he.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,he.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class Jv{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ea(this.observer.next,e)}error(e){this.observer.error?this.Ea(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}Aa(){this.muted=!0}Ea(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class xx{constructor(e,t){this.Ra=e,this.M=t,this.metadata=new Lr,this.buffer=new Uint8Array,this.ba=new TextDecoder("utf-8"),this.Pa().then(r=>{r&&r.Mu()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==r?void 0:r.payload)}`))},r=>this.metadata.reject(r))}close(){return this.Ra.cancel()}getMetadata(){var e=this;return(0,he.Z)(function*(){return e.metadata.promise})()}ma(){var e=this;return(0,he.Z)(function*(){return yield e.getMetadata(),e.Pa()})()}Pa(){var e=this;return(0,he.Z)(function*(){const t=yield e.Va();if(null===t)return null;const r=e.ba.decode(t),i=Number(r);isNaN(i)&&e.va(`length string (${r}) is not valid number`);const u=yield e.Sa(i);return new jD(JSON.parse(u),t.length+i)})()}Da(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Va(){var e=this;return(0,he.Z)(function*(){for(;e.Da()<0&&!(yield e.Ca()););if(0===e.buffer.length)return null;const t=e.Da();t<0&&e.va("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Sa(e){var t=this;return(0,he.Z)(function*(){for(;t.buffer.length<e;)(yield t.Ca())&&t.va("Reached the end of bundle when more is expected.");const r=t.ba.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}va(e){throw this.Ra.cancel(),new Error(`Invalid bundle format: ${e}`)}Ca(){var e=this;return(0,he.Z)(function*(){const t=yield e.Ra.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class Rx{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,he.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Le(ge.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,he.Z)(function*(u,c){const h=tt(u),_=Yd(h.M)+"/documents",w={documents:c.map(B=>Of(h.M,B))},D=yield h._o("BatchGetDocuments",_,w),S=new Map;D.forEach(B=>{const Y=function ZT(n,e){return"found"in e?function(t,r){Tt(!!r.found);const i=ua(t,r.found.name),u=Qr(r.found.updateTime),c=new Ni({mapValue:{fields:r.found.fields}});return Wn.newFoundDocument(i,u,c)}(n,e):"missing"in e?function(t,r){Tt(!!r.missing),Tt(!!r.readTime);const i=ua(t,r.missing),u=Qr(r.readTime);return Wn.newNoDocument(i,u)}(n,e):at()}(h.M,B);S.set(Y.key.toString(),Y)});const P=[];return c.forEach(B=>{const Y=S.get(B.toString());Tt(!!Y),P.push(Y)}),P}),function(u,c){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new fc(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,he.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const u=Qe.fromPath(i);e.mutations.push(new Gw(u,e.precondition(u)))}),yield(r=(0,he.Z)(function*(i,u){const c=tt(i),h=Yd(c.M)+"/documents",_={writes:u.map(w=>em(c.M,w))};yield c.co("Commit",h,_)}),function(i,u){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw at();t=wt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Le(ge.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?wr.updateTime(t):wr.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(wt.min()))throw new Le(ge.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return wr.updateTime(t)}return wr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class _b{constructor(e,t,r,i,u){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=u,this.xa=r.maxAttempts,this.No=new np(this.asyncQueue,"transaction_retry")}run(){this.xa-=1,this.Na()}Na(){var e=this;this.No.Ro((0,he.Z)(function*(){const t=new Rx(e.datastore),r=e.ka(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(u=>{e.Ma(u)}))}).catch(i=>{e.Ma(i)})}))}ka(e){try{const t=this.updateFunction(e);return!Pd(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Ma(e){this.xa>0&&this.Oa(e)?(this.xa-=1,this.asyncQueue.enqueueAndForget(()=>(this.Na(),Promise.resolve()))):this.deferred.reject(e)}Oa(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!yt(t)}return!1}}class JD{constructor(e,t,r,i){var u=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=ii.UNAUTHENTICATED,this.clientId=mw.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var c=(0,he.Z)(function*(h){$e("FirestoreClient","Received user=",h.uid),yield u.authCredentialListener(h),u.user=h});return function(h){return c.apply(this,arguments)}}()),this.appCheckCredentials.start(r,c=>($e("FirestoreClient","Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}getConfiguration(){var e=this;return(0,he.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Le(ge.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Lr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,he.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=cp(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function yb(n,e){return Xv.apply(this,arguments)}function Xv(){return Xv=(0,he.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),$e("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,he.Z)(function*(u){r.isEqual(u)||(yield Jf(e.localStore,u),r=u)});return function(u){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),Xv.apply(this,arguments)}function vb(n,e){return Pm.apply(this,arguments)}function Pm(){return Pm=(0,he.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield km(n);$e("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>Pv(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,u)=>Pv(e.remoteStore,u)),n.onlineComponents=e}),Pm.apply(this,arguments)}function km(n){return Om.apply(this,arguments)}function Om(){return Om=(0,he.Z)(function*(n){return n.offlineComponents||($e("FirestoreClient","Using default OfflineComponentProvider"),yield yb(n,new mb)),n.offlineComponents}),Om.apply(this,arguments)}function Fm(n){return e0.apply(this,arguments)}function e0(){return e0=(0,he.Z)(function*(n){return n.onlineComponents||($e("FirestoreClient","Using default OnlineComponentProvider"),yield vb(n,new uh)),n.onlineComponents}),e0.apply(this,arguments)}function t0(n){return km(n).then(e=>e.persistence)}function pp(n){return km(n).then(e=>e.localStore)}function XD(n){return Fm(n).then(e=>e.remoteStore)}function Lm(n){return Fm(n).then(e=>e.syncEngine)}function al(n){return n0.apply(this,arguments)}function n0(){return n0=(0,he.Z)(function*(n){const e=yield Fm(n),t=e.eventManager;return t.onListen=rb.bind(null,e.syncEngine),t.onUnlisten=Bv.bind(null,e.syncEngine),t}),n0.apply(this,arguments)}function Eb(n,e,t={}){const r=new Lr;return n.asyncQueue.enqueueAndForget((0,he.Z)(function*(){return function(i,u,c,h,_){const w=new Jv({next:S=>{u.enqueueAndForget(()=>kv(i,D));const P=S.docs.has(c);!P&&S.fromCache?_.reject(new Le(ge.UNAVAILABLE,"Failed to get document because the client is offline.")):P&&S.fromCache&&h&&"server"===h.source?_.reject(new Le(ge.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):_.resolve(S)},error:S=>_.reject(S)}),D=new dp(ac(c.path),w,{includeMetadataChanges:!0,ku:!0});return QI(i,D)}(yield al(n),n.asyncQueue,e,t,r)})),r.promise}function nS(n,e,t={}){const r=new Lr;return n.asyncQueue.enqueueAndForget((0,he.Z)(function*(){return function(i,u,c,h,_){const w=new Jv({next:S=>{u.enqueueAndForget(()=>kv(i,D)),S.fromCache&&"server"===h.source?_.reject(new Le(ge.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):_.resolve(S)},error:S=>_.reject(S)}),D=new dp(c,w,{includeMetadataChanges:!0,ku:!0});return QI(i,D)}(yield al(n),n.asyncQueue,e,t,r)})),r.promise}const wb=new Map;function Ib(n,e,t){if(!t)throw new Le(ge.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function rS(n,e,t,r){if(!0===e&&!0===r)throw new Le(ge.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function iS(n){if(!Qe.isDocumentKey(n))throw new Le(ge.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function sS(n){if(Qe.isDocumentKey(n))throw new Le(ge.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function s(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":at()}function o(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Le(ge.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=s(n);throw new Le(ge.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function a(n,e){if(e<=0)throw new Le(ge.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class l{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Le(ge.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Le(ge.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,rS("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class d{constructor(e,t,r){this._authCredentials=t,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new l({}),this._settingsFrozen=!1,e instanceof Co?this._databaseId=e:(this._app=e,this._databaseId=function(i){if(!Object.prototype.hasOwnProperty.apply(i.options,["projectId"]))throw new Le(ge.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Co(i.options.projectId)}(e))}get app(){if(!this._app)throw new Le(ge.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Le(ge.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new l(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new ST;switch(t.type){case"gapi":const r=t.client;return Tt(!("object"!=typeof r||null===r||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new xT(r,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new Le(ge.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=wb.get(e);t&&($e("ComponentProvider","Removing Datastore"),wb.delete(e),t.terminate())}(this),Promise.resolve()}}class y{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new b(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new y(this.firestore,e,this._key)}}class E{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new E(this.firestore,e,this._query)}}class b extends E{constructor(e,t,r){super(e,t,ac(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new y(this.firestore,null,new Qe(e))}withConverter(e){return new b(this.firestore,e,this._path)}}function A(n,e,...t){if(n=(0,Q.m9)(n),Ib("collection","path",e),n instanceof d){const r=rn.fromString(e,...t);return sS(r),new b(n,null,r)}{if(!(n instanceof y||n instanceof b))throw new Le(ge.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(rn.fromString(e,...t));return sS(r),new b(n.firestore,null,r)}}function F(n,e,...t){if(n=(0,Q.m9)(n),1===arguments.length&&(e=mw.R()),Ib("doc","path",e),n instanceof d){const r=rn.fromString(e,...t);return iS(r),new y(n,null,new Qe(r))}{if(!(n instanceof y||n instanceof b))throw new Le(ge.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(rn.fromString(e,...t));return iS(r),new y(n.firestore,n instanceof b?n.converter:null,new Qe(r))}}function H(n,e){return n=(0,Q.m9)(n),e=(0,Q.m9)(e),(n instanceof y||n instanceof b)&&(e instanceof y||e instanceof b)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function te(n,e){return n=(0,Q.m9)(n),e=(0,Q.m9)(e),n instanceof E&&e instanceof E&&n.firestore===e.firestore&&Bd(n._query,e._query)&&n.converter===e.converter}class Te{constructor(){this.Fa=Promise.resolve(),this.$a=[],this.Ba=!1,this.La=[],this.Ua=null,this.qa=!1,this.Ka=!1,this.Ga=[],this.No=new np(this,"async_queue_retry"),this.Qa=()=>{const t=tp();t&&$e("AsyncQueue","Visibility state changed to "+t.visibilityState),this.No.Po()};const e=tp();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Qa)}get isShuttingDown(){return this.Ba}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ja(),this.Wa(e)}enterRestrictedMode(e){if(!this.Ba){this.Ba=!0,this.Ka=e||!1;const t=tp();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Qa)}}enqueue(e){if(this.ja(),this.Ba)return new Promise(()=>{});const t=new Lr;return this.Wa(()=>this.Ba&&this.Ka?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.$a.push(e),this.za()))}za(){var e=this;return(0,he.Z)(function*(){if(0!==e.$a.length){try{yield e.$a[0](),e.$a.shift(),e.No.reset()}catch(t){if(!mc(t))throw t;$e("AsyncQueue","Operation failed with retryable error: "+t)}e.$a.length>0&&e.No.Ro(()=>e.za())}})()}Wa(e){const t=this.Fa.then(()=>(this.qa=!0,e().catch(r=>{throw this.Ua=r,this.qa=!1,Fr("INTERNAL UNHANDLED ERROR: ",function(u){let c=u.message||"";return u.stack&&(c=u.stack.includes(u.message)?u.stack:u.message+"\n"+u.stack),c}(r)),r}).then(r=>(this.qa=!1,r))));return this.Fa=t,t}enqueueAfterDelay(e,t,r){this.ja(),this.Ga.indexOf(e)>-1&&(t=0);const i=Im.createAndSchedule(this,e,t,r,u=>this.Ha(u));return this.La.push(i),i}ja(){this.Ua&&at()}verifyOperationInProgress(){}Ja(){var e=this;return(0,he.Z)(function*(){let t;do{t=e.Fa,yield t}while(t!==e.Fa)})()}Ya(e){for(const t of this.La)if(t.timerId===e)return!0;return!1}Xa(e){return this.Ja().then(()=>{this.La.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.La)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Ja()})}Za(e){this.Ga.push(e)}Ha(e){const t=this.La.indexOf(e);this.La.splice(t,1)}}function Be(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class Je{constructor(){this._progressObserver={},this._taskCompletionResolver=new Lr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Ee extends d{constructor(e,t,r){super(e,t,r),this.type="firestore",this._queue=new Te,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||Ji(this),this._firestoreClient.terminate()}}function Qt(n=(0,Si.getApp)()){return(0,Si._getProvider)(n,"firestore").getImmediate()}function It(n){return n._firestoreClient||Ji(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function Ji(n){var e;const t=n._freezeSettings(),r=(u=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new Dy(n._databaseId,u,n._persistenceKey,(h=t).host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,h.useFetchStreams));var u,h;n._firestoreClient=new JD(n._authCredentials,n._appCheckCredentials,n._queue,r)}function Um(n,e,t){const r=new Lr;return n.asyncQueue.enqueue((0,he.Z)(function*(){try{yield yb(n,t),yield vb(n,e),r.resolve()}catch(i){if(!("FirebaseError"===(u=i).name?u.code===ge.FAILED_PRECONDITION||u.code===ge.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&u instanceof DOMException)||22===u.code||20===u.code||11===u.code))throw i;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+i),r.reject(i)}var u})).then(()=>r.promise)}function Lx(n){if(n._initialized||n._terminated)throw new Le(ge.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Sc{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Le(ge.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Yr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class ul{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ul(Er.fromBase64String(e))}catch(t){throw new Le(ge.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new ul(Er.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class gp{constructor(e){this._methodName=e}}class Cb{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Le(ge.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Le(ge.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Vt(this._lat,e._lat)||Vt(this._long,e._long)}}const uP=/^__.*__$/;class lP{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new dc(e,this.data,this.fieldMask,t,this.fieldTransforms):new So(e,this.data,t,this.fieldTransforms)}}class Ux{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new dc(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Vx(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw at()}}class Tb{constructor(e,t,r,i,u,c){this.settings=e,this.databaseId=t,this.M=r,this.ignoreUndefinedProperties=i,void 0===u&&this.tc(),this.fieldTransforms=u||[],this.fieldMask=c||[]}get path(){return this.settings.path}get ec(){return this.settings.ec}nc(e){return new Tb(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}sc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.nc({path:r,ic:!1});return i.rc(e),i}oc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.nc({path:r,ic:!1});return i.tc(),i}uc(e){return this.nc({path:void 0,ic:!0})}ac(e){return Ab(e,this.settings.methodName,this.settings.cc||!1,this.path,this.settings.hc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}tc(){if(this.path)for(let e=0;e<this.path.length;e++)this.rc(this.path.get(e))}rc(e){if(0===e.length)throw this.ac("Document fields must not be empty");if(Vx(this.ec)&&uP.test(e))throw this.ac('Document fields cannot begin and end with "__"')}}class cP{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.M=r||rl(e)}lc(e,t,r,i=!1){return new Tb({ec:e,methodName:t,hc:r,path:Yr.emptyPath(),ic:!1,cc:i},this.databaseId,this.M,this.ignoreUndefinedProperties)}}function mp(n){const e=n._freezeSettings(),t=rl(n._databaseId);return new cP(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Db(n,e,t,r,i,u={}){const c=n.lc(u.merge||u.mergeFields?2:0,e,t,i);lS("Data must be an object, but it was:",c,r);const h=$x(r,c);let _,w;if(u.merge)_=new sa(c.fieldMask),w=c.fieldTransforms;else if(u.mergeFields){const D=[];for(const S of u.mergeFields){const P=cS(e,S,t);if(!c.contains(P))throw new Le(ge.INVALID_ARGUMENT,`Field '${P}' is specified in your field mask but missing from your input data.`);Wx(D,P)||D.push(P)}_=new sa(D),w=c.fieldTransforms.filter(S=>_.covers(S.field))}else _=null,w=c.fieldTransforms;return new lP(new Ni(h),_,w)}class d0 extends gp{_toFieldTransform(e){if(2!==e.ec)throw e.ac(1===e.ec?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof d0}}function Bx(n,e,t){return new Tb({ec:3,hc:e.settings.hc,methodName:n._methodName,ic:t},e.databaseId,e.M,e.ignoreUndefinedProperties)}class oS extends gp{_toFieldTransform(e){return new Hd(e.path,new jd)}isEqual(e){return e instanceof oS}}class dP extends gp{constructor(e,t){super(e),this.fc=t}_toFieldTransform(e){const t=Bx(this,e,!0),r=this.fc.map(u=>_p(u,t)),i=new lc(r);return new Hd(e.path,i)}isEqual(e){return this===e}}class hP extends gp{constructor(e,t){super(e),this.fc=t}_toFieldTransform(e){const t=Bx(this,e,!0),r=this.fc.map(u=>_p(u,t)),i=new cc(r);return new Hd(e.path,i)}isEqual(e){return this===e}}class fP extends gp{constructor(e,t){super(e),this.dc=t}_toFieldTransform(e){const t=new $d(e.M,Ow(e.M,this.dc));return new Hd(e.path,t)}isEqual(e){return this===e}}function aS(n,e,t,r){const i=n.lc(1,e,t);lS("Data must be an object, but it was:",i,r);const u=[],c=Ni.empty();$u(r,(_,w)=>{const D=Sb(e,_,t);w=(0,Q.m9)(w);const S=i.oc(D);if(w instanceof d0)u.push(D);else{const P=_p(w,S);null!=P&&(u.push(D),c.set(D,P))}});const h=new sa(u);return new Ux(c,h,i.fieldTransforms)}function uS(n,e,t,r,i,u){const c=n.lc(1,e,t),h=[cS(e,r,t)],_=[i];if(u.length%2!=0)throw new Le(ge.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let P=0;P<u.length;P+=2)h.push(cS(e,u[P])),_.push(u[P+1]);const w=[],D=Ni.empty();for(let P=h.length-1;P>=0;--P)if(!Wx(w,h[P])){const B=h[P];let Y=_[P];Y=(0,Q.m9)(Y);const Re=c.oc(B);if(Y instanceof d0)w.push(B);else{const Ze=_p(Y,Re);null!=Ze&&(w.push(B),D.set(B,Ze))}}const S=new sa(w);return new Ux(D,S,c.fieldTransforms)}function jx(n,e,t,r=!1){return _p(t,n.lc(r?4:3,e))}function _p(n,e){if(Hx(n=(0,Q.m9)(n)))return lS("Unsupported field value:",e,n),$x(n,e);if(n instanceof gp)return function(t,r){if(!Vx(r.ec))throw r.ac(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.ac(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.ic&&4!==e.ec)throw e.ac("Nested arrays are not supported");return function(t,r){const i=[];let u=0;for(const c of t){let h=_p(c,r.uc(u));null==h&&(h={nullValue:"NULL_VALUE"}),i.push(h),u++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,Q.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Ow(r.M,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=or.fromDate(t);return{timestampValue:Zd(r.M,i)}}if(t instanceof or){const i=new or(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Zd(r.M,i)}}if(t instanceof Cb)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof ul)return{bytesValue:Wy(r.M,t._byteString)};if(t instanceof y){const i=r.databaseId,u=t.firestore._databaseId;if(!u.isEqual(i))throw r.ac(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:pc(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.ac(`Unsupported field value: ${s(t)}`)}(n,e)}function $x(n,e){const t={};return Bg(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):$u(n,(r,i)=>{const u=_p(i,e.sc(r));null!=u&&(t[r]=u)}),{mapValue:{fields:t}}}function Hx(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof or||n instanceof Cb||n instanceof ul||n instanceof y||n instanceof gp)}function lS(n,e,t){if(!Hx(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=s(t);throw e.ac("an object"===r?n+" a custom object":n+" "+r)}var r}function cS(n,e,t){if((e=(0,Q.m9)(e))instanceof Sc)return e._internalPath;if("string"==typeof e)return Sb(n,e);throw Ab("Field path arguments must be of type string or ",n,!1,void 0,t)}const pP=new RegExp("[~\\*/\\[\\]]");function Sb(n,e,t){if(e.search(pP)>=0)throw Ab(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Sc(...e.split("."))._internalPath}catch(r){throw Ab(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Ab(n,e,t,r,i){const u=r&&!r.isEmpty(),c=void 0!==i;let h=`Function ${e}() called with invalid data`;t&&(h+=" (via `toFirestore()`)"),h+=". ";let _="";return(u||c)&&(_+=" (found",u&&(_+=` in field ${r}`),c&&(_+=` in document ${i}`),_+=")"),new Le(ge.INVALID_ARGUMENT,h+n+_)}function Wx(n,e){return n.some(t=>t.isEqual(e))}class h0{constructor(e,t,r,i,u){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new y(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new gP(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(xb("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class gP extends h0{data(){return super.data()}}function xb(n,e){return"string"==typeof e?Sb(n,e):e instanceof Sc?e._internalPath:e._delegate._internalPath}class yp{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ac extends h0{constructor(e,t,r,i,u,c){super(e,t,r,i,c),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new f0(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(xb("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class f0 extends Ac{data(e={}){return super.data(e)}}class lh{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new yp(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new f0(this._firestore,this._userDataWriter,r.key,r,new yp(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Le(ge.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map(c=>({type:"added",doc:new f0(r._firestore,r._userDataWriter,c.doc.key,c.doc,new yp(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:u++}))}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(c=>i||3!==c.type).map(c=>{const h=new f0(r._firestore,r._userDataWriter,c.doc.key,c.doc,new yp(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter);let _=-1,w=-1;return 0!==c.type&&(_=u.indexOf(c.doc.key),u=u.delete(c.doc.key)),1!==c.type&&(u=u.add(c.doc),w=u.indexOf(c.doc.key)),{type:mP(c.type),doc:h,oldIndex:_,newIndex:w}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function mP(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return at()}}function zx(n,e){return n instanceof Ac&&e instanceof Ac?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof lh&&e instanceof lh&&n._firestore===e._firestore&&te(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function Gx(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Le(ge.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class p0{}function ch(n,...e){for(const t of e)n=t._apply(n);return n}class _P extends p0{constructor(e,t,r){super(),this._c=e,this.wc=t,this.mc=r,this.type="where"}_apply(e){const t=mp(e.firestore),r=function(i,u,c,h,_,w,D){let S;if(_.isKeyField()){if("array-contains"===w||"array-contains-any"===w)throw new Le(ge.INVALID_ARGUMENT,`Invalid Query. You can't perform '${w}' queries on documentId().`);if("in"===w||"not-in"===w){Jx(D,w);const B=[];for(const Y of D)B.push(Qx(h,i,Y));S={arrayValue:{values:B}}}else S=Qx(h,i,D)}else"in"!==w&&"not-in"!==w&&"array-contains-any"!==w||Jx(D,w),S=jx(c,"where",D,"in"===w||"not-in"===w);const P=An.create(_,w,S);return function(B,Y){if(Y.S()){const Ze=Vd(B);if(null!==Ze&&!Ze.isEqual(Y.field))throw new Le(ge.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${Ze.toString()}' and '${Y.field.toString()}'`);const qt=Mf(B);null!==qt&&Xx(0,Y.field,qt)}const Re=function(Ze,qt){for(const zt of Ze.filters)if(qt.indexOf(zt.op)>=0)return zt.op;return null}(B,function(Ze){switch(Ze){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(Y.op));if(null!==Re)throw new Le(ge.INVALID_ARGUMENT,Re===Y.op?`Invalid query. You cannot use more than one '${Y.op.toString()}' filter.`:`Invalid query. You cannot use '${Y.op.toString()}' filters with '${Re.toString()}' filters.`)}(i,P),P}(e._query,0,t,e.firestore._databaseId,this._c,this.wc,this.mc);return new E(e.firestore,e.converter,function(i,u){const c=i.filters.concat([u]);return new Hs(i.path,i.collectionGroup,i.explicitOrderBy.slice(),c,i.limit,i.limitType,i.startAt,i.endAt)}(e._query,r))}}class vP extends p0{constructor(e,t){super(),this._c=e,this.gc=t,this.type="orderBy"}_apply(e){const t=function(r,i,u){if(null!==r.startAt)throw new Le(ge.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Le(ge.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const c=new oc(i,u);return function(h,_){if(null===Mf(h)){const w=Vd(h);null!==w&&Xx(0,w,_.field)}}(r,c),c}(e._query,this._c,this.gc);return new E(e.firestore,e.converter,function(r,i){const u=r.explicitOrderBy.concat([i]);return new Hs(r.path,r.collectionGroup,u,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class qx extends p0{constructor(e,t,r){super(),this.type=e,this.yc=t,this.Ic=r}_apply(e){return new E(e.firestore,e.converter,Vy(e._query,this.yc,this.Ic))}}class Zx extends p0{constructor(e,t,r){super(),this.type=e,this.Tc=t,this.Ec=r}_apply(e){const t=Yx(e,this.type,this.Tc,this.Ec);return new E(e.firestore,e.converter,(i=t,new Hs((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class Kx extends p0{constructor(e,t,r){super(),this.type=e,this.Tc=t,this.Ec=r}_apply(e){const t=Yx(e,this.type,this.Tc,this.Ec);return new E(e.firestore,e.converter,(i=t,new Hs((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function Yx(n,e,t,r){if(t[0]=(0,Q.m9)(t[0]),t[0]instanceof h0)return function(i,u,c,h,_){if(!h)throw new Le(ge.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${c}().`);const w=[];for(const D of uc(i))if(D.field.isKeyField())w.push(ic(u,h.key));else{const S=h.data.field(D.field);if(Cf(S))throw new Le(ge.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+D.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===S){const P=D.field.canonicalString();throw new Le(ge.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${P}' (used as the orderBy) does not exist.`)}w.push(S)}return new Gu(w,_)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=mp(n.firestore);return function(u,c,h,_,w,D){const S=u.explicitOrderBy;if(w.length>S.length)throw new Le(ge.INVALID_ARGUMENT,`Too many arguments provided to ${_}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const P=[];for(let B=0;B<w.length;B++){const Y=w[B];if(S[B].field.isKeyField()){if("string"!=typeof Y)throw new Le(ge.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${_}(), but got a ${typeof Y}`);if(!qg(u)&&-1!==Y.indexOf("/"))throw new Le(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${_}() must be a plain document ID, but '${Y}' contains a slash.`);const Re=u.path.child(rn.fromString(Y));if(!Qe.isDocumentKey(Re))throw new Le(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${_}() must result in a valid document path, but '${Re}' is not because it contains an odd number of segments.`);const Ze=new Qe(Re);P.push(ic(c,Ze))}else{const Re=jx(h,_,Y);P.push(Re)}}return new Gu(P,D)}(n._query,n.firestore._databaseId,i,e,t,r)}}function Qx(n,e,t){if("string"==typeof(t=(0,Q.m9)(t))){if(""===t)throw new Le(ge.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!qg(e)&&-1!==t.indexOf("/"))throw new Le(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(rn.fromString(t));if(!Qe.isDocumentKey(r))throw new Le(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return ic(n,new Qe(r))}if(t instanceof y)return ic(n,t._key);throw new Le(ge.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${s(t)}.`)}function Jx(n,e){if(!Array.isArray(n)||0===n.length)throw new Le(ge.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Le(ge.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function Xx(n,e,t){if(!t.isEqual(e))throw new Le(ge.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}const SP={maxAttempts:5};class dS{convertValue(e,t="none"){switch(Wu(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Hn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(oa(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw at()}}convertObject(e,t){const r={};return $u(e.fields,(i,u)=>{r[i]=this.convertValue(u,t)}),r}convertGeoPoint(e){return new Cb(Hn(e.latitude),Hn(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=NT(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Tf(e));default:return null}}convertTimestamp(e){const t=Hu(e);return new or(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=rn.fromString(e);Tt(Yy(r));const i=new Co(r.get(1),r.get(3)),u=new Qe(r.popFirst(5));return i.isEqual(t)||Fr(`Document ${u} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}function Rb(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class AP extends dS{constructor(e){super(),this.firestore=e}convertBytes(e){return new ul(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new y(this.firestore,null,t)}}class eR{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=mp(e)}set(e,t,r){this._verifyNotCommitted();const i=dh(e,this._firestore),u=Rb(i.converter,t,r),c=Db(this._dataReader,"WriteBatch.set",i._key,u,null!==i.converter,r);return this._mutations.push(c.toMutation(i._key,wr.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const u=dh(e,this._firestore);let c;return c="string"==typeof(t=(0,Q.m9)(t))||t instanceof Sc?uS(this._dataReader,"WriteBatch.update",u._key,t,r,i):aS(this._dataReader,"WriteBatch.update",u._key,t),this._mutations.push(c.toMutation(u._key,wr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=dh(e,this._firestore);return this._mutations=this._mutations.concat(new fc(t._key,wr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Le(ge.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function dh(n,e){if((n=(0,Q.m9)(n)).firestore!==e)throw new Le(ge.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class vp extends dS{constructor(e){super(),this.firestore=e}convertBytes(e){return new ul(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new y(this.firestore,null,t)}}function tR(n,e,t){n=o(n,y);const r=o(n.firestore,Ee),i=Rb(n.converter,e,t);return Vm(r,[Db(mp(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,wr.none())])}function nR(n,e,t,...r){n=o(n,y);const i=o(n.firestore,Ee),u=mp(i);let c;return c="string"==typeof(e=(0,Q.m9)(e))||e instanceof Sc?uS(u,"updateDoc",n._key,e,t,r):aS(u,"updateDoc",n._key,e),Vm(i,[c.toMutation(n._key,wr.exists(!0))])}function rR(n,...e){var t,r,i;n=(0,Q.m9)(n);let u={includeMetadataChanges:!1},c=0;"object"!=typeof e[c]||Be(e[c])||(u=e[c],c++);const h={includeMetadataChanges:u.includeMetadataChanges};if(Be(e[c])){const S=e[c];e[c]=null===(t=S.next)||void 0===t?void 0:t.bind(S),e[c+1]=null===(r=S.error)||void 0===r?void 0:r.bind(S),e[c+2]=null===(i=S.complete)||void 0===i?void 0:i.bind(S)}let _,w,D;if(n instanceof y)w=o(n.firestore,Ee),D=ac(n._key.path),_={next:S=>{e[c]&&e[c](hS(w,n,S))},error:e[c+1],complete:e[c+2]};else{const S=o(n,E);w=o(S.firestore,Ee),D=S._query;const P=new vp(w);_={next:B=>{e[c]&&e[c](new lh(w,P,S,B))},error:e[c+1],complete:e[c+2]},Gx(n._query)}return function(S,P,B,Y){const Re=new Jv(Y),Ze=new dp(P,Re,B);return S.asyncQueue.enqueueAndForget((0,he.Z)(function*(){return QI(yield al(S),Ze)})),()=>{Re.Aa(),S.asyncQueue.enqueueAndForget((0,he.Z)(function*(){return kv(yield al(S),Ze)}))}}(It(w),D,h,_)}function Vm(n,e){return function(t,r){const i=new Lr;return t.asyncQueue.enqueueAndForget((0,he.Z)(function*(){return function ib(n,e,t){return Tm.apply(this,arguments)}(yield Lm(t),r,i)})),i.promise}(It(n),e)}function hS(n,e,t){const r=t.docs.get(e._key),i=new vp(n);return new Ac(n,i,e._key,r,new yp(t.hasPendingWrites,t.fromCache),e.converter)}class UP extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=mp(e)}get(e){const t=dh(e,this._firestore),r=new AP(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return at();const u=i[0];if(u.isFoundDocument())return new h0(this._firestore,r,u.key,u,t.converter);if(u.isNoDocument())return new h0(this._firestore,r,t._key,null,t.converter);throw at()})}set(e,t,r){const i=dh(e,this._firestore),u=Rb(i.converter,t,r),c=Db(this._dataReader,"Transaction.set",i._key,u,null!==i.converter,r);return this._transaction.set(i._key,c),this}update(e,t,r,...i){const u=dh(e,this._firestore);let c;return c="string"==typeof(t=(0,Q.m9)(t))||t instanceof Sc?uS(this._dataReader,"Transaction.update",u._key,t,r,i):aS(this._dataReader,"Transaction.update",u._key,t),this._transaction.update(u._key,c),this}delete(e){const t=dh(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=dh(e,this._firestore),r=new vp(this._firestore);return super.get(e).then(i=>new Ac(this._firestore,r,t._key,i._document,new yp(!1,!1),t.converter))}}function fS(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Le("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function sR(){if("undefined"==typeof Uint8Array)throw new Le("unimplemented","Uint8Arrays are not available in this environment.")}function oR(){if(!function yw(){return"undefined"!=typeof atob}())throw new Le("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){nc=Si.SDK_VERSION,(0,Si._registerComponent)(new dd.wA("firestore",(t,{options:r})=>{const i=t.getProvider("app").getImmediate(),u=new Ee(i,new AT(t.getProvider("auth-internal")),new Vg(t.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:e},r),u._setSettings(r),u},"PUBLIC")),(0,Si.registerVersion)(pw,"3.4.9",n),(0,Si.registerVersion)(pw,"3.4.9","esm2017")}();class g0{constructor(e){this._delegate=e}static fromBase64String(e){return oR(),new g0(ul.fromBase64String(e))}static fromUint8Array(e){return sR(),new g0(ul.fromUint8Array(e))}toBase64(){return oR(),this._delegate.toBase64()}toUint8Array(){return sR(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function pS(n){return function qP(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class ZP{enableIndexedDbPersistence(e,t){return function Dc(n,e){Lx(n=o(n,Ee));const t=It(n),r=n._freezeSettings(),i=new uh;return Um(t,i,new Nm(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function r0(n){Lx(n=o(n,Ee));const e=It(n),t=n._freezeSettings(),r=new uh;return Um(e,r,new Qv(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function s0(n){if(n._initialized&&!n._terminated)throw new Le(ge.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Lr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,he.Z)(function*(){try{yield(t=(0,he.Z)(function*(r){if(!Ao.vt())return Promise.resolve();const i=r+"main";yield Ao.delete(i)}),function(r){return t.apply(this,arguments)})(Kf(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class aR{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Co||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&If("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function f(n,e,t,r={}){var i;const u=(n=o(n,d))._getSettings();if("firestore.googleapis.com"!==u.host&&u.host!==e&&If("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},u),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let c,h;if("string"==typeof r.mockUserToken)c=r.mockUserToken,h=ii.MOCK_USER;else{c=(0,Q.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const _=r.mockUserToken.sub||r.mockUserToken.user_id;if(!_)throw new Le(ge.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new ii(_)}n._authCredentials=new Md(new DT(c,h))}}(this._delegate,e,t,r)}enableNetwork(){return function a0(n){return function eS(n){return n.asyncQueue.enqueue((0,he.Z)(function*(){const e=yield t0(n),t=yield XD(n);return e.setNetworkEnabled(!0),function(r){const i=tt(r);return i.wu.delete(0),rp(i)}(t)}))}(It(n=o(n,Ee)))}(this._delegate)}disableNetwork(){return function u0(n){return function Mx(n){return n.asyncQueue.enqueue((0,he.Z)(function*(){const e=yield t0(n),t=yield XD(n);return e.setNetworkEnabled(!1),(r=(0,he.Z)(function*(i){const u=tt(i);u.wu.add(0),yield il(u),u.yu.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(It(n=o(n,Ee)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,rS("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function o0(n){return function(e){const t=new Lr;return e.asyncQueue.enqueueAndForget((0,he.Z)(function*(){return function Hv(n,e){return Dm.apply(this,arguments)}(yield Lm(e),t)})),t.promise}(It(n=o(n,Ee)))}(this._delegate)}onSnapshotsInSync(e){return function LP(n,e){return function Px(n,e){const t=new Jv(e);return n.asyncQueue.enqueueAndForget((0,he.Z)(function*(){return r=yield al(n),i=t,tt(r).bu.add(i),void i.next();var r,i})),()=>{t.Aa(),n.asyncQueue.enqueueAndForget((0,he.Z)(function*(){return r=yield al(n),i=t,void tt(r).bu.delete(i);var r,i}))}}(It(n=o(n,Ee)),Be(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Le("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Bm(this,A(this._delegate,e))}catch(t){throw ws(t,"collection()","Firestore.collection()")}}doc(e){try{return new ha(this,F(this._delegate,e))}catch(t){throw ws(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Is(this,function R(n,e){if(n=o(n,d),Ib("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Le(ge.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new E(n,null,(t=e,new Hs(rn.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw ws(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function VP(n,e,t){n=o(n,Ee);const r=Object.assign(Object.assign({},SP),t);return function(i){if(i.maxAttempts<1)throw new Le(ge.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function kx(n,e,t){const r=new Lr;return n.asyncQueue.enqueueAndForget((0,he.Z)(function*(){const i=yield(u=n,Fm(u).then(c=>c.datastore));var u;new _b(n.asyncQueue,i,t,e,r).run()})),r.promise}(It(n),i=>e(new UP(n,i)),r)}(this._delegate,t=>e(new uR(this,t)))}batch(){return It(this._delegate),new lR(new eR(this._delegate,e=>Vm(this._delegate,e)))}loadBundle(e){return function l0(n,e){const t=It(n=o(n,Ee)),r=new Je;return function Ox(n,e,t,r){const i=function(u,c){let h;return h="string"==typeof u?(new TextEncoder).encode(u):u,_=function(_,w){if(_ instanceof Uint8Array)return QD(_,w);if(_ instanceof ArrayBuffer)return QD(new Uint8Array(_),w);if(_ instanceof ReadableStream)return _.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(h),new xx(_,c);var _}(t,rl(e));n.asyncQueue.enqueueAndForget((0,he.Z)(function*(){!function Yv(n,e,t){const r=tt(n);var i;(i=(0,he.Z)(function*(u,c,h){try{const _=yield c.getMetadata();if(yield function(P,B){const Y=tt(P),Re=Qr(B.createTime);return Y.persistence.runTransaction("hasNewerBundle","readonly",Ze=>Y._s.getBundleMetadata(Ze,B.id)).then(Ze=>!!Ze&&Ze.createTime.compareTo(Re)>=0)}(u.localStore,_))return yield c.close(),h._completeWith({taskState:"Success",documentsLoaded:(P=_).totalDocuments,bytesLoaded:P.totalBytes,totalDocuments:P.totalDocuments,totalBytes:P.totalBytes}),Promise.resolve(new Set);h._updateProgress(bm(_));const w=new $D(_,u.localStore,c.M);let D=yield c.ma();for(;D;){const P=yield w.Fu(D);P&&h._updateProgress(P),D=yield c.ma()}const S=yield w.complete();return yield da(u,S.Lu,void 0),yield function(P,B){const Y=tt(P);return Y.persistence.runTransaction("Save bundle","readwrite",Re=>Y._s.saveBundleMetadata(Re,B))}(u.localStore,_),h._completeWith(S.progress),Promise.resolve(S.Bu)}catch(_){return If("SyncEngine",`Loading bundle failed with ${_}`),h._failWith(_),Promise.resolve(new Set)}var P}),function(u,c,h){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield Lm(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function c0(n,e){return function Fx(n,e){return n.asyncQueue.enqueue((0,he.Z)(function*(){return function(t,r){const i=tt(t);return i.persistence.runTransaction("Get named query","readonly",u=>i._s.getNamedQuery(u,r))}(yield pp(n),e)}))}(It(n=o(n,Ee)),e).then(t=>t?new E(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Is(this,t):null)}}class Mb extends dS{constructor(e){super(),this.firestore=e}convertBytes(e){return new g0(new ul(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return ha.forKey(t,this.firestore,null)}}class uR{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Mb(e)}get(e){const t=wp(e);return this._delegate.get(t).then(r=>new m0(this._firestore,new Ac(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=wp(e);return r?(fS("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const u=wp(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...i),this}delete(e){const t=wp(e);return this._delegate.delete(t),this}}class lR{constructor(e){this._delegate=e}set(e,t,r){const i=wp(e);return r?(fS("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const u=wp(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...i),this}delete(e){const t=wp(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Ep{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new f0(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new _0(this._firestore,r),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Ep.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let u=i.get(t);return u||(u=new Ep(e,new Mb(e),t),i.set(t,u)),u}}Ep.INSTANCES=new WeakMap;class ha{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Mb(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Le("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new ha(t,new y(t._delegate,r,new Qe(e)))}static forKey(e,t,r){return new ha(t,new y(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Bm(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Bm(this.firestore,A(this._delegate,e))}catch(t){throw ws(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Q.m9)(e))instanceof y&&H(this._delegate,e)}set(e,t){t=fS("DocumentReference.set",t);try{return t?tR(this._delegate,e,t):tR(this._delegate,e)}catch(r){throw ws(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?nR(this._delegate,e):nR(this._delegate,e,t,...r)}catch(i){throw ws(i,"updateDoc()","DocumentReference.update()")}}delete(){return function OP(n){return Vm(o(n.firestore,Ee),[new fc(n._key,wr.none())])}(this._delegate)}onSnapshot(...e){const t=cR(e),r=dR(e,i=>new m0(this.firestore,new Ac(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return rR(this._delegate,t,r)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function RP(n){n=o(n,y);const e=o(n.firestore,Ee),t=It(e),r=new vp(e);return function Nx(n,e){const t=new Lr;return n.asyncQueue.enqueueAndForget((0,he.Z)(function*(){return(r=(0,he.Z)(function*(i,u,c){try{const h=yield function(_,w){const D=tt(_);return D.persistence.runTransaction("read document","readonly",S=>D.fi.Ls(S,w))}(i,u);h.isFoundDocument()?c.resolve(h):h.isNoDocument()?c.resolve(null):c.reject(new Le(ge.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(h){const _=cp(h,`Failed to get document '${u} from cache`);c.reject(_)}}),function(i,u,c){return r.apply(this,arguments)})(yield pp(n),e,t);var r})),t.promise}(t,n._key).then(i=>new Ac(e,r,n._key,i,new yp(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function MP(n){n=o(n,y);const e=o(n.firestore,Ee);return Eb(It(e),n._key,{source:"server"}).then(t=>hS(e,n,t))}(this._delegate):function xP(n){n=o(n,y);const e=o(n.firestore,Ee);return Eb(It(e),n._key).then(t=>hS(e,n,t))}(this._delegate),t.then(r=>new m0(this.firestore,new Ac(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new ha(this.firestore,this._delegate.withConverter(e?Ep.getInstance(this.firestore,e):null))}}function ws(n,e,t){return n.message=n.message.replace(e,t),n}function cR(n){for(const e of n)if("object"==typeof e&&!pS(e))return e;return{}}function dR(n,e){var t,r;let i;return i=pS(n[0])?n[0]:pS(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:u=>{i.next&&i.next(e(u))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class m0{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new ha(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return zx(this._delegate,e._delegate)}}class _0 extends m0{data(e){const t=this._delegate.data(e);return function gx(n,e){n||at()}(void 0!==t),t}}class Is{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Mb(e)}where(e,t,r){try{return new Is(this.firestore,ch(this._delegate,function yP(n,e,t){const r=e,i=xb("where",n);return new _P(i,r,t)}(e,t,r)))}catch(i){throw ws(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Is(this.firestore,ch(this._delegate,function EP(n,e="asc"){const t=e,r=xb("orderBy",n);return new vP(r,t)}(e,t)))}catch(r){throw ws(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Is(this.firestore,ch(this._delegate,function wP(n){return a("limit",n),new qx("limit",n,"F")}(e)))}catch(t){throw ws(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Is(this.firestore,ch(this._delegate,function IP(n){return a("limitToLast",n),new qx("limitToLast",n,"L")}(e)))}catch(t){throw ws(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Is(this.firestore,ch(this._delegate,function bP(...n){return new Zx("startAt",n,!0)}(...e)))}catch(t){throw ws(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Is(this.firestore,ch(this._delegate,function CP(...n){return new Zx("startAfter",n,!1)}(...e)))}catch(t){throw ws(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Is(this.firestore,ch(this._delegate,function TP(...n){return new Kx("endBefore",n,!1)}(...e)))}catch(t){throw ws(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Is(this.firestore,ch(this._delegate,function DP(...n){return new Kx("endAt",n,!0)}(...e)))}catch(t){throw ws(t,"endAt()","Query.endAt()")}}isEqual(e){return te(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function PP(n){n=o(n,E);const e=o(n.firestore,Ee),t=It(e),r=new vp(e);return function tS(n,e){const t=new Lr;return n.asyncQueue.enqueueAndForget((0,he.Z)(function*(){return(r=(0,he.Z)(function*(i,u,c){try{const h=yield oh(i,u,!0),_=new Cm(u,h._i),w=_.Wu(h.documents),D=_.applyChanges(w,!1);c.resolve(D.snapshot)}catch(h){const _=cp(h,`Failed to execute query '${u} against cache`);c.reject(_)}}),function(i,u,c){return r.apply(this,arguments)})(yield pp(n),e,t);var r})),t.promise}(t,n._query).then(i=>new lh(e,r,n,i))}(this._delegate):"server"===(null==e?void 0:e.source)?function kP(n){n=o(n,E);const e=o(n.firestore,Ee),t=It(e),r=new vp(e);return nS(t,n._query,{source:"server"}).then(i=>new lh(e,r,n,i))}(this._delegate):function NP(n){n=o(n,E);const e=o(n.firestore,Ee),t=It(e),r=new vp(e);return Gx(n._query),nS(t,n._query).then(i=>new lh(e,r,n,i))}(this._delegate),t.then(r=>new gS(this.firestore,new lh(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=cR(e),r=dR(e,i=>new gS(this.firestore,new lh(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return rR(this._delegate,t,r)}withConverter(e){return new Is(this.firestore,this._delegate.withConverter(e?Ep.getInstance(this.firestore,e):null))}}class YP{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new _0(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class gS{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Is(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new _0(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new YP(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new _0(this._firestore,r))})}isEqual(e){return zx(this._delegate,e._delegate)}}class Bm extends Is{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new ha(this.firestore,e):null}doc(e){try{return new ha(this.firestore,void 0===e?F(this._delegate):F(this._delegate,e))}catch(t){throw ws(t,"doc()","CollectionReference.doc()")}}add(e){return function FP(n,e){const t=o(n.firestore,Ee),r=F(n),i=Rb(n.converter,e);return Vm(t,[Db(mp(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,wr.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new ha(this.firestore,t))}isEqual(e){return H(this._delegate,e._delegate)}withConverter(e){return new Bm(this.firestore,this._delegate.withConverter(e?Ep.getInstance(this.firestore,e):null))}}function wp(n){return o(n,y)}class mS{constructor(...e){this._delegate=new Sc(...e)}static documentId(){return new mS(Yr.keyField().canonicalString())}isEqual(e){return(e=(0,Q.m9)(e))instanceof Sc&&this._delegate._internalPath.isEqual(e._internalPath)}}class Ip{constructor(e){this._delegate=e}static serverTimestamp(){const e=function jP(){return new oS("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Ip(e)}static delete(){const e=function BP(){return new d0("deleteField")}();return e._methodName="FieldValue.delete",new Ip(e)}static arrayUnion(...e){const t=function $P(...n){return new dP("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Ip(t)}static arrayRemove(...e){const t=function HP(...n){return new hP("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Ip(t)}static increment(e){const t=function WP(n){return new fP("increment",n)}(e);return t._methodName="FieldValue.increment",new Ip(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const QP={Firestore:aR,GeoPoint:Cb,Timestamp:or,Blob:g0,Transaction:uR,WriteBatch:lR,DocumentReference:ha,DocumentSnapshot:m0,Query:Is,QueryDocumentSnapshot:_0,QuerySnapshot:gS,CollectionReference:Bm,FieldPath:mS,FieldValue:Ip,setLogLevel:function KP(n){!function TT(n){ju.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function XP(n){(function JP(n,e){n.INTERNAL.registerComponent(new dd.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},QP)))})(n,(e,t)=>new aR(e,t,new ZP)),n.registerVersion("@firebase/firestore-compat","0.1.18")}(vE.Z);var e1=k(6451),Nb=k(5363),t1=k(6063);class n1 extends Ns.x{constructor(e=1/0,t=1/0,r=t1.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:u,_windowTime:c}=this;t||(r.push(e),!i&&r.push(u.now()+c)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,u=i.slice();for(let c=0;c<u.length&&!e.closed;c+=r?1:2)e.next(u[c]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,u=(i?1:2)*e;if(e<1/0&&u<r.length&&r.splice(0,r.length-u),!i){const c=t.now();let h=0;for(let _=1;_<r.length&&r[_]<=c;_+=2)h=_;h&&r.splice(0,h+1)}}}var r1=k(3099);function hR(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=null!=n?n:1/0,(0,r1.B)({connector:()=>new n1(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function fR(n,e){return(0,Wo.m)(e)?_r(()=>n,e):_r(()=>n)}var _S=k(9468),xc=k(5867);class bp{constructor(e){return e}}class Pb{constructor(){return(0,xc.C6)()}}const yS=new g.OlP("angularfire2._apps"),s1={provide:bp,useFactory:function i1(n){return n&&1===n.length?n[0]:new bp((0,xc.Mq)())},deps:[[new g.FiY,yS]]},o1={provide:Pb,deps:[[new g.FiY,yS]]};function a1(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new bp(r)}}let u1=(()=>{class n{constructor(t){(0,xc.KN)("angularfire",nn.q4.full,"core"),(0,xc.KN)("angularfire",nn.q4.full,"app"),(0,xc.KN)("angular",g.q4F.full,t.toString())}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(g.Lbi))},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({providers:[s1,o1]}),n})();function l1(n,...e){return{ngModule:u1,providers:[{provide:yS,useFactory:a1(n),multi:!0,deps:[g.R0b,g.zs3,nn.HU,...e]}]}}const c1=(0,nn.u3)(xc.ZF,!0),pR=new Map,d1={activated:!1,tokenObservers:[]},h1={initialized:!1,enabled:!1};function gi(n){return pR.get(n)||d1}function ou(n,e){pR.set(n,e)}function kb(){return h1}class _1{constructor(e,t,r,i,u){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=u,this.pending=null,this.nextErrorWaitInterval=i,i>u)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,he.Z)(function*(){t.stop();try{t.pending=new Q.BH,yield function y1(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new Q.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const bs=new Q.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function mR(n){if(!gi(n).activated)throw bs.create("use-before-activation",{appName:n.name})}function wS(n,e){return IS.apply(this,arguments)}function IS(){return IS=(0,he.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});if(i){const S=yield i.getHeartbeatsHeader();S&&(r["X-Firebase-Client"]=S)}const u={method:"POST",body:JSON.stringify(e),headers:r};let c,h;try{c=yield fetch(n,u)}catch(S){throw bs.create("fetch-network-error",{originalErrorMessage:S.message})}if(200!==c.status)throw bs.create("fetch-status-error",{httpStatus:c.status});try{h=yield c.json()}catch(S){throw bs.create("fetch-parse-error",{originalErrorMessage:S.message})}const _=h.ttl.match(/^([\d.]+)(s)$/);if(!_||!_[2]||isNaN(Number(_[1])))throw bs.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${h.ttl}`});const w=1e3*Number(_[1]),D=Date.now();return{token:h.token,expireTimeMillis:D+w,issuedAtTimeMillis:D}}),IS.apply(this,arguments)}function b1(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:e}}}const y0="firebase-app-check-store";let Lb=null;function yR(){return Lb||(Lb=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(bs.create("storage-open",{originalErrorMessage:null===(i=r.target.error)||void 0===i?void 0:i.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(y0,{keyPath:"compositeKey"})}}catch(t){e(bs.create("storage-open",{originalErrorMessage:t.message}))}}),Lb)}function bS(){return bS=(0,he.Z)(function*(n,e){const r=(yield yR()).transaction(y0,"readwrite"),u=r.objectStore(y0).put({compositeKey:n,value:e});return new Promise((c,h)=>{u.onsuccess=_=>{c()},r.onerror=_=>{var w;h(bs.create("storage-set",{originalErrorMessage:null===(w=_.target.error)||void 0===w?void 0:w.message}))}})}),bS.apply(this,arguments)}const v0=new ta.Yd("@firebase/app-check");function IR(n,e){return(0,Q.hl)()?function S1(n,e){return function vR(n,e){return bS.apply(this,arguments)}(function wR(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{v0.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function bR(){return kb().enabled}function CR(){return SS.apply(this,arguments)}function SS(){return SS=(0,he.Z)(function*(){const n=kb();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),SS.apply(this,arguments)}const P1={error:"UNKNOWN_ERROR"};function k1(n){return Q.US.encodeString(JSON.stringify(n),!1)}function Ub(n){return AS.apply(this,arguments)}function AS(){return AS=(0,he.Z)(function*(n,e=!1){const t=n.app;mR(t);const r=gi(t);let u,i=r.token;if(!i){const _=yield r.cachedTokenPromise;_&&Vb(_)&&(i=_)}if(!e&&i&&Vb(i))return{token:i.token};let h,c=!1;if(bR()){r.exchangeTokenPromise||(r.exchangeTokenPromise=wS(b1(t,yield CR()),n.heartbeatServiceProvider).then(w=>(r.exchangeTokenPromise=void 0,w)),c=!0);const _=yield r.exchangeTokenPromise;return yield IR(t,_),ou(t,Object.assign(Object.assign({},r),{token:_})),{token:_.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(_=>(r.exchangeTokenPromise=void 0,_)),c=!0),i=yield r.exchangeTokenPromise}catch(_){"appCheck/throttled"===_.code?v0.warn(_.message):v0.error(_),u=_}return i?(h={token:i.token},ou(t,Object.assign(Object.assign({},r),{token:i})),yield IR(t,i)):h=F1(u),c&&DR(t,h),h}),AS.apply(this,arguments)}function RS(n,e){const t=gi(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),ou(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function TR(n){const{app:e}=n,t=gi(e);let r=t.tokenRefresher;r||(r=function O1(n){const{app:e}=n;return new _1((0,he.Z)(function*(){let r;if(r=gi(e).token?yield Ub(n,!0):yield Ub(n),r.error)throw r.error}),()=>!0,()=>{const t=gi(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),ou(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function DR(n,e){const t=gi(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch(i){}}function Vb(n){return n.expireTimeMillis-Date.now()>0}function F1(n){return{token:k1(P1),error:n}}class L1{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=gi(this.app);for(const t of e)RS(this.app,t.next);return Promise.resolve()}}const kR="app-check-internal";!function Q1(){(0,Si._registerComponent)(new dd.wA("app-check",n=>function U1(n,e){return new L1(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(kR).initialize()})),(0,Si._registerComponent)(new dd.wA(kR,n=>function V1(n){return{getToken:e=>Ub(n,e),addTokenListener:e=>function xS(n,e,t,r){const{app:i}=n,u=gi(i),c={next:t,error:r,type:e};if(ou(i,Object.assign(Object.assign({},u),{tokenObservers:[...u.tokenObservers,c]})),u.token&&Vb(u.token)){const h=u.token;Promise.resolve().then(()=>{t({token:h.token}),TR(n)}).catch(()=>{})}u.cachedTokenPromise.then(()=>TR(n))}(n,"INTERNAL",e),removeTokenListener:e=>RS(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Si.registerVersion)("@firebase/app-check","0.5.8")}();class jm{constructor(){return(0,nn.vb)("app-check")}}"undefined"!=typeof window&&window;var nk=k(127);const FR=new g.OlP("angularfire2.auth.use-emulator"),LR=new g.OlP("angularfire2.auth.settings"),UR=new g.OlP("angularfire2.auth.tenant-id"),VR=new g.OlP("angularfire2.auth.langugage-code"),BR=new g.OlP("angularfire2.auth.use-device-language"),jR=new g.OlP("angularfire.auth.persistence"),$R=(n,e,t,r,i,u,c,h)=>(0,Vs.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const _=e.runOutsideAngular(()=>n.auth());if(t&&_.useEmulator(...t),r&&(_.tenantId=r),_.languageCode=i,u&&_.useDeviceLanguage(),c)for(const[w,D]of Object.entries(c))_.settings[w]=D;return h&&_.setPersistence(h),_},[t,r,i,u,c,h]);let HR=(()=>{class n{constructor(t,r,i,u,c,h,_,w,D,S,P,B){const Y=new Ns.x,Re=st(void 0).pipe((0,Nb.Q)(c.outsideAngular),_r(()=>u.runOutsideAngular(()=>Promise.resolve().then(k.bind(k,5881)))),(0,Rt.U)(()=>(0,Vs.on)(t,u,r)),(0,Rt.U)(Ze=>$R(Ze,u,h,w,D,S,_,P)),hR({bufferSize:1,refCount:!1}));if(Nr(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=st(null);else{Re.pipe(qo()).subscribe();const qt=Re.pipe(_r(Ot=>Ot.getRedirectResult().then(on=>on,()=>null)),nn.iC,hR({bufferSize:1,refCount:!1})),zt=Re.pipe(_r(Ot=>new bi.y(on=>({unsubscribe:u.runOutsideAngular(()=>Ot.onAuthStateChanged(wn=>on.next(wn),wn=>on.error(wn),()=>on.complete()))})))),Zt=Re.pipe(_r(Ot=>new bi.y(on=>({unsubscribe:u.runOutsideAngular(()=>Ot.onIdTokenChanged(wn=>on.next(wn),wn=>on.error(wn),()=>on.complete()))}))));this.authState=qt.pipe(fR(zt),(0,_S.R)(c.outsideAngular),(0,Nb.Q)(c.insideAngular)),this.user=qt.pipe(fR(Zt),(0,_S.R)(c.outsideAngular),(0,Nb.Q)(c.insideAngular)),this.idToken=this.user.pipe(_r(Ot=>Ot?(0,Yn.D)(Ot.getIdToken()):st(null))),this.idTokenResult=this.user.pipe(_r(Ot=>Ot?(0,Yn.D)(Ot.getIdTokenResult()):st(null))),this.credential=(0,e1.T)(qt,Y,this.authState.pipe(kr(Ot=>!Ot))).pipe((0,Rt.U)(Ot=>(null==Ot?void 0:Ot.user)?Ot:null),(0,_S.R)(c.outsideAngular),(0,Nb.Q)(c.insideAngular))}return(0,Vs.pX)(this,Re,u,{spy:{apply:(Ze,qt,zt)=>{(Ze.startsWith("signIn")||Ze.startsWith("createUser"))&&zt.then(Zt=>Y.next(Zt))}}})}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(Vs.Dh),g.LFG(Vs.xv,8),g.LFG(g.Lbi),g.LFG(g.R0b),g.LFG(nn.HU),g.LFG(FR,8),g.LFG(LR,8),g.LFG(UR,8),g.LFG(VR,8),g.LFG(BR,8),g.LFG(jR,8),g.LFG(jm,8))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function WR(n,e){return function ik(n,e=_E.z){return new bi.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=r&&r()}})}(n,e)}function OS(n,e){return WR(n,e).pipe((0,Rt.U)(t=>({payload:t,type:"query"})))}function jb(n,e){return OS(n,e).pipe(Hi(void 0),k_(),(0,Rt.U)(([t,r])=>{const i=r.payload.docChanges(),u=i.map(c=>({type:c.type,payload:c}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((c,h)=>{const _=i.find(D=>D.doc.ref.isEqual(c.ref)),w=null==t?void 0:t.payload.docs.find(D=>D.ref.isEqual(c.ref));_&&JSON.stringify(_.doc.metadata)===JSON.stringify(c.metadata)||!_&&w&&JSON.stringify(w.metadata)===JSON.stringify(c.metadata)||u.push({type:"modified",payload:{oldIndex:h,newIndex:h,type:"modified",doc:c}})}),u}))}function zR(n,e,t){return jb(n,t).pipe(Wi((r,i)=>function ok(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function ak(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return FS(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return FS(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return FS(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(u=>u.payload),e),[]),function yE(n,e=hs.y){return n=null!=n?n:O_,(0,Cr.e)((t,r)=>{let i,u=!0;t.subscribe((0,xn.x)(r,c=>{const h=e(c);(u||!n(i,h))&&(u=!1,i=h,r.next(c))}))})}(),(0,Rt.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function FS(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function GR(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class qR{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=jb(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,Rt.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(Hi(void 0),k_(),kr(([r,i])=>i.length>0||!r),(0,Rt.U)(([r,i])=>i),nn.iC)}auditTrail(e){return this.stateChanges(e).pipe(Wi((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=GR(e);return zR(this.query,t,this.afs.schedulers.outsideAngular).pipe(nn.iC)}valueChanges(e={}){return OS(this.query,this.afs.schedulers.outsideAngular).pipe((0,Rt.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),nn.iC)}get(e){return(0,Yn.D)(this.query.get(e)).pipe(nn.iC)}add(e){return this.ref.add(e)}doc(e){return new ZR(this.ref.doc(e),this.afs)}}class ZR{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:u}=QR(r,t);return new qR(i,u,this.afs)}snapshotChanges(){return function sk(n,e){return WR(n,e).pipe(Hi(void 0),k_(),(0,Rt.U)(([t,r])=>r.exists?(null==t?void 0:t.exists)?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(nn.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,Rt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,Yn.D)(this.ref.get(e)).pipe(nn.iC)}}class uk{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?jb(this.query,this.afs.schedulers.outsideAngular).pipe((0,Rt.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),kr(t=>t.length>0),nn.iC):jb(this.query,this.afs.schedulers.outsideAngular).pipe(nn.iC)}auditTrail(e){return this.stateChanges(e).pipe(Wi((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=GR(e);return zR(this.query,t,this.afs.schedulers.outsideAngular).pipe(nn.iC)}valueChanges(e={}){return OS(this.query,this.afs.schedulers.outsideAngular).pipe((0,Rt.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),nn.iC)}get(e){return(0,Yn.D)(this.query.get(e)).pipe(nn.iC)}}const KR=new g.OlP("angularfire2.enableFirestorePersistence"),YR=new g.OlP("angularfire2.firestore.persistenceSettings"),lk=new g.OlP("angularfire2.firestore.settings"),ck=new g.OlP("angularfire2.firestore.use-emulator");function QR(n,e=(t=>t)){return{query:e(n),ref:n}}let LS=(()=>{class n{constructor(t,r,i,u,c,h,_,w,D,S,P,B,Y,Re,Ze,qt,zt){this.schedulers=_;const Zt=(0,Vs.on)(t,h,r),Ot=D;S&&$R(Zt,h,P,Y,Re,Ze,B,qt),[this.firestore,this.persistenceEnabled$]=(0,Vs.cc)(`${Zt.name}.firestore`,"AngularFirestore",Zt.name,()=>{const on=h.runOutsideAngular(()=>Zt.firestore());if(u&&on.settings(u),Ot&&on.useEmulator(...Ot),i&&!Nr(c)){const wn=()=>{try{return(0,Yn.D)(on.enablePersistence(w||void 0).then(()=>!0,()=>!1))}catch(es){return"undefined"!=typeof console&&console.warn(es),st(!1)}};return[on,h.runOutsideAngular(wn)]}return[on,st(!1)]},[u,Ot,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:u,query:c}=QR(i,r),h=this.schedulers.ngZone.run(()=>u);return new qR(h,c,this)}collectionGroup(t,r){const i=r||(c=>c),u=this.firestore.collectionGroup(t);return new uk(i(u),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new ZR(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(Vs.Dh),g.LFG(Vs.xv,8),g.LFG(KR,8),g.LFG(lk,8),g.LFG(g.Lbi),g.LFG(g.R0b),g.LFG(nn.HU),g.LFG(YR,8),g.LFG(ck,8),g.LFG(HR,8),g.LFG(FR,8),g.LFG(LR,8),g.LFG(UR,8),g.LFG(VR,8),g.LFG(BR,8),g.LFG(jR,8),g.LFG(jm,8))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),dk=(()=>{class n{constructor(){nk.Z.registerVersion("angularfire",nn.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:KR,useValue:!0},{provide:YR,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({providers:[LS]}),n})(),$m=(()=>{class n{constructor(t,r){this.db=t,this.route=r,this.emmitLoginStatus=new g.vpe,this.emmitEmail=new g.vpe,this.loggedEmail="",this.isLoggedIn=!1}checkLogin(){var t=this;return(0,he.Z)(function*(){0==t.isLoggedIn&&t.route.navigate(["/"])})()}login(t,r,i){var u=this;return(0,he.Z)(function*(){(yield u.getAllUsers()).forEach(c=>{c.email==t&&c.senha==r&&(u.emmitLoginStatus.emit(!0),u.isLoggedIn=!0,u.emmitEmail.emit(t),u.loggedEmail=t,u.route.navigate(["/home"]))})})()}register(t,r,i){var u=this;return(0,he.Z)(function*(){return u.db.collection("/user").add({nome:i,email:t,senha:r,saldo:20,root:!1}),!0})()}checkEmail(t){var r=this;return(0,he.Z)(function*(){return r.db.collection("user"),new Promise(u=>{r.db.collection("user",c=>c.where("email","==",t)).valueChanges({idField:"id"}).subscribe(c=>u(c))})})()}editUser(t,r,i,u,c){var h=this;return(0,he.Z)(function*(){h.db.collection("user").doc(t).update({email:r,senha:i,nome:u,saldo:c})})()}deleteUser(t){var r=this;return(0,he.Z)(function*(){r.db.collection("/user").doc(t).delete()})()}logout(){var t=this;return(0,he.Z)(function*(){t.emmitLoginStatus.emit("False"),t.emmitEmail.emit("")})()}getAllUsers(){return new Promise(t=>{this.db.collection("user").valueChanges({idField:"id"}).subscribe(r=>t(r))})}loggedAccount(){return this.db.collection("user"),new Promise(r=>{this.db.collection("user",i=>i.where("email","==",this.loggedEmail)).valueChanges({idField:"id"}).subscribe(i=>r(i))})}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(LS),g.LFG(Di))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),JR=(()=>{class n{constructor(t,r){this.db=t,this.firebaseService=r,this.accountData=[]}getAllNumbers(){return new Promise(t=>{this.db.collection("numbers",r=>r.orderBy("number")).valueChanges({idField:"id"}).subscribe(r=>t(r))})}createGame(t){var r=this;return(0,he.Z)(function*(){const i=r.db.collection("numbers");let u=yield r.getAllNumbers();for(let c=0;c<u.length;c++){let _=u[c].id.toString();i.doc(_).delete()}i.doc("status").update({winner:""});for(let c=1;c<=t;c++)i.add({owner:"null",number:c})})()}buyNumber(t,r){var i=this;return(0,he.Z)(function*(){i.accountData=yield new Promise(_=>{i.db.collection("user",w=>w.where("email","==",r)).valueChanges({idField:"id"}).subscribe(w=>_(w))});let u=yield new Promise(_=>{i.db.collection("numbers",w=>w.where("number","==",t)).valueChanges({idField:"id"}).subscribe(w=>_(w[0].id))}),c=yield new Promise(_=>{i.db.collection("numbers",w=>w.where("number","==",t)).doc("status").valueChanges({idField:"id"}).subscribe(w=>_(w))});console.log("Numero: ",u),console.log("Conta: ",i.accountData[0].nome),console.log("Id da conta",i.accountData[0].id),console.log("Pre\xe7o: ",c.price);let h=i.accountData[0].saldo-c.price;i.db.collection("numbers").doc(u).update({owner:i.accountData[0].nome}),i.db.collection("user").doc(i.accountData[0].id).update({saldo:h})})()}checkNumber(t){var r=this;return(0,he.Z)(function*(){return"null"==(yield new Promise(u=>{r.db.collection("numbers",c=>c.where("number","==",t)).valueChanges({idField:"id"}).subscribe(c=>u(c))}))[0].owner})()}changePrice(t){this.db.collection("numbers").doc("status").update({price:t})}getPrice(){return new Promise(t=>{this.db.collection("numbers").doc("status").valueChanges({idField:"id"}).subscribe(r=>t(r))})}createResult(t){var r=this;return(0,he.Z)(function*(){const i=r.db.collection("numbers");let u=yield r.getAllNumbers(),c=Math.ceil(0),h=Math.floor(u.length),_=Math.floor(Math.random()*(h-c+1))+c,w=t[_].owner;i.doc("status").update({winner:w})})()}getWinner(){var t=this;return(0,he.Z)(function*(){return new Promise(r=>{t.db.collection("numbers").doc("status").valueChanges({idField:"id"}).subscribe(i=>r(i))})})()}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(LS),g.LFG($m))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function hk(n,e){if(1&n&&(g.TgZ(0,"option",16),g._uU(1),g.qZA()),2&n){const t=e.$implicit;g.s9C("value",t.number),g.xp6(1),g.Oqu(t.number)}}function fk(n,e){if(1&n&&(g.TgZ(0,"div",17)(1,"span",18),g._uU(2),g.qZA()()),2&n){const t=g.oxw();g.xp6(2),g.Oqu(t.message)}}function pk(n,e){if(1&n&&(g.TgZ(0,"span"),g._uU(1),g.qZA()),2&n){const t=g.oxw().$implicit;g.xp6(1),g.hij(" ",t.owner," ")}}function gk(n,e){1&n&&(g.TgZ(0,"span"),g._uU(1," Vazio "),g.qZA())}function mk(n,e){if(1&n&&(g.TgZ(0,"tbody")(1,"tr")(2,"td"),g._uU(3),g.qZA(),g.TgZ(4,"td",19),g.YNc(5,pk,2,1,"span",20),g.YNc(6,gk,2,0,"ng-template",null,21,g.W1O),g.qZA()()()),2&n){const t=e.$implicit,r=g.MAs(7);g.xp6(3),g.hij(" ",t.number," "),g.xp6(2),g.Q6J("ngIf","null"!=t.owner)("ngIfElse",r)}}function _k(n,e){1&n&&(g.TgZ(0,"span",18),g._uU(1,"N\xe3o \xe9 possivel voltar/continuar"),g.qZA())}function yk(n,e){if(1&n&&(g.TgZ(0,"p"),g._uU(1),g.qZA()),2&n){const t=g.oxw(2);g.xp6(1),g.hij("O ganhador foi ",t.winnerName,"")}}function vk(n,e){if(1&n){const t=g.EpF();g.TgZ(0,"div")(1,"button",9),g.NdJ("click",function(){g.CHM(t);const i=g.oxw().$implicit;return g.oxw(2).deleteUser(i.id)}),g._uU(2,"Delete"),g.qZA(),g._uU(3," \xa0 "),g.TgZ(4,"button",9),g.NdJ("click",function(){return g.CHM(t),g.oxw(3).openEditForm()}),g._uU(5,"Edit"),g.qZA()()}}function Ek(n,e){if(1&n){const t=g.EpF();g.TgZ(0,"div"),g._UZ(1,"br"),g.TgZ(2,"div")(3,"label"),g._uU(4,"Nome:"),g.qZA(),g._UZ(5,"input",32,33),g.qZA(),g.TgZ(7,"div")(8,"label"),g._uU(9,"Email:"),g.qZA(),g._UZ(10,"input",32,34),g.qZA(),g.TgZ(12,"div")(13,"label"),g._uU(14,"Saldo:"),g.qZA(),g._UZ(15,"input",32,35),g.qZA(),g.TgZ(17,"div")(18,"label"),g._uU(19,"Senha:"),g.qZA(),g._UZ(20,"input",32,36),g.qZA(),g.TgZ(22,"div")(23,"label"),g._uU(24,"Root:"),g.qZA(),g.TgZ(25,"p"),g._uU(26),g.qZA()(),g.TgZ(27,"div")(28,"button",9),g.NdJ("click",function(){g.CHM(t);const i=g.MAs(11),u=g.MAs(21),c=g.MAs(6),h=g.MAs(16),_=g.oxw().$implicit;return g.oxw(2).editUser(_.id,i.value,u.value,c.value,h.value)}),g._uU(29,"Editar"),g.qZA()()()}if(2&n){const t=g.oxw().$implicit;g.xp6(5),g.s9C("value",t.nome),g.xp6(5),g.s9C("value",t.email),g.xp6(5),g.s9C("value",t.saldo),g.xp6(5),g.s9C("value",t.senha),g.xp6(6),g.Oqu(t.root)}}function wk(n,e){if(1&n&&(g.TgZ(0,"div")(1,"p"),g._uU(2),g.qZA(),g.TgZ(3,"p"),g._uU(4),g.qZA(),g.TgZ(5,"p"),g._uU(6),g.qZA(),g.TgZ(7,"p"),g._uU(8),g.qZA(),g.TgZ(9,"p"),g._uU(10),g.qZA(),g.TgZ(11,"p"),g._uU(12),g.qZA(),g.YNc(13,vk,6,0,"div",24),g.YNc(14,Ek,30,5,"div",24),g._UZ(15,"hr"),g.qZA()),2&n){const t=e.$implicit,r=g.oxw(2);g.xp6(2),g.hij("Nome: ",t.nome,""),g.xp6(2),g.hij("Saldo: ",t.saldo,""),g.xp6(2),g.hij("Email: ",t.email,""),g.xp6(2),g.hij("Senha: ",t.senha,""),g.xp6(2),g.hij("Root?: ",t.root,""),g.xp6(2),g.hij("Id: ",t.id,""),g.xp6(1),g.Q6J("ngIf",!1===t.root),g.xp6(1),g.Q6J("ngIf",1==r.editForm)}}function Ik(n,e){if(1&n){const t=g.EpF();g.TgZ(0,"div",22)(1,"div",23)(2,"h1"),g._uU(3,"Sortear"),g.qZA(),g.TgZ(4,"button",9),g.NdJ("click",function(){return g.CHM(t),g.oxw().createResult()}),g._uU(5,"Sortear"),g.qZA(),g.YNc(6,yk,2,1,"p",24),g.qZA(),g.TgZ(7,"div",25)(8,"h1"),g._uU(9,"Criar Jogo"),g.qZA(),g._UZ(10,"input",26,27),g._uU(12," \xa0"),g.TgZ(13,"button",9),g.NdJ("click",function(){g.CHM(t);const i=g.MAs(11);return g.oxw().createGame(i.value)}),g._uU(14,"Criar"),g.qZA()(),g.TgZ(15,"div",28)(16,"h1"),g._uU(17,"Pre\xe7o"),g.qZA(),g._UZ(18,"input",29,30),g._uU(20," \xa0"),g.TgZ(21,"button",9),g.NdJ("click",function(){g.CHM(t);const i=g.MAs(19);return g.oxw().changePrice(i.value)}),g._uU(22,"Change"),g.qZA()(),g.TgZ(23,"div",31)(24,"h1"),g._uU(25,"Users"),g.qZA(),g.YNc(26,wk,16,8,"div",13),g.qZA()()}if(2&n){const t=g.oxw();g.xp6(6),g.Q6J("ngIf",""!=t.winnerName),g.xp6(20),g.Q6J("ngForOf",t.users)}}let bk=(()=>{class n{constructor(t,r,i){this.firebaseService=t,this.route=r,this.sortitionService=i,this.root=!1,this.editForm=!1,this.users=[],this.account=[],this.numbers=[],this.price=[],this.numbersFiltered=[],this.position=0,this.pageSize=5,this.showMessage=!1,this.message="",this.error=[{type:"Number already used",description:"N\xfamero j\xe1 est\xe1 em uso!"},{type:"No money",description:"Saldo insuficiente."}],this.winnerName=""}ngOnInit(){var t=this;return(0,he.Z)(function*(){yield t.getAllNumbers(),t.getUsers(),t.isRoot(),t.getPrice(),t.getFilteredNumbers(t.pageSize),t.checkLogin()})()}getFilteredNumbers(t){this.numbersFiltered=[];for(let r=this.position;r<t;r++)this.numbersFiltered.push(this.numbers[r])}backPageTable(){if(this.position>0){this.numbersFiltered=[],this.position-=this.pageSize;let t=this.position;for(let r=t;r<t+this.pageSize;r++)this.numbersFiltered.push(this.numbers[r])}else this.showMessage=!0,setTimeout(()=>{this.showMessage=!1},3e3)}nextPageTable(){if(this.position<this.numbers.length-this.pageSize){this.numbersFiltered=[],this.position+=this.pageSize;let t=this.position;for(let r=t;r<t+this.pageSize;r++)this.numbersFiltered.push(this.numbers[r])}else this.showMessage=!0,setTimeout(()=>{this.showMessage=!1},3e3)}getUsers(){var t=this;return(0,he.Z)(function*(){t.users=yield t.firebaseService.getAllUsers()})()}deleteUser(t){var r=this;return(0,he.Z)(function*(){r.firebaseService.deleteUser(t),r.getUsers(),r.editForm=!1})()}isRoot(){var t=this;return(0,he.Z)(function*(){t.account=yield t.firebaseService.loggedAccount(),t.root=1==t.account[0].root})()}checkLogin(){var t=this;return(0,he.Z)(function*(){t.firebaseService.checkLogin()})()}openEditForm(){var t=this;return(0,he.Z)(function*(){t.editForm=!0})()}editUser(t,r,i,u,c){var h=this;return(0,he.Z)(function*(){h.firebaseService.editUser(t,r,i,u,c),h.getUsers(),h.editForm=!1})()}getAllNumbers(){var t=this;return(0,he.Z)(function*(){t.numbers=yield t.sortitionService.getAllNumbers()})()}createGame(t){var r=this;return(0,he.Z)(function*(){const i=parseInt(t);yield r.sortitionService.createGame(i),r.getAllNumbers()})()}buyNumber(t){var r=this;return(0,he.Z)(function*(){const i=parseInt(t);if(yield r.sortitionService.checkNumber(i)){let c=r.account[0].email;r.account[0].saldo>r.price.price?yield r.sortitionService.buyNumber(i,c):(r.message=r.error[1].description,setTimeout(()=>{r.message=""},3e3)),yield r.getAllNumbers(),r.getFilteredNumbers(r.position+r.pageSize),r.account=yield r.firebaseService.loggedAccount()}else r.message=r.error[0].description,setTimeout(()=>{r.message=""},3e3)})()}changePrice(t){var r=this;return(0,he.Z)(function*(){const i=parseFloat(t);r.sortitionService.changePrice(i),r.getPrice()})()}getPrice(){var t=this;return(0,he.Z)(function*(){t.price=yield t.sortitionService.getPrice()})()}createResult(){var t=this;return(0,he.Z)(function*(){yield t.sortitionService.createResult(t.numbers);let r=yield t.sortitionService.getWinner();t.winnerName=r.winner})()}}return n.\u0275fac=function(t){return new(t||n)(g.Y36($m),g.Y36(Di),g.Y36(JR))},n.\u0275cmp=g.Xpm({type:n,selectors:[["app-home"]],decls:40,vars:9,consts:[[1,"font-color"],[1,"center"],[1,"title"],[1,"content"],[1,"text","center"],["aria-label","normalUserMenu"],["aria-label","buyMenu"],["number",""],[3,"value",4,"ngFor","ngForOf"],[3,"click"],["style","margin-top: 0.6em;",4,"ngIf"],["aria-label","numbersTable"],[1,"table","table-dark","table-striped","table-bordered"],[4,"ngFor","ngForOf"],["id","alert",4,"ngIf"],["aria-label","rootUserMenu",4,"ngIf"],[3,"value"],[2,"margin-top","0.6em"],["id","alert"],["colspan","2"],[4,"ngIf","ngIfElse"],["noOwner",""],["aria-label","rootUserMenu"],["aria-label","sortNumber"],[4,"ngIf"],["aria-label","createGame"],["placeholder","Quantidade de n\xfameros"],["length",""],["aria-label","definePrice"],["placeholder","Pre\xe7o"],["price",""],["aria-label","CRUD"],["type","text",3,"value"],["name",""],["email",""],["balance",""],["password",""]],template:function(t,r){if(1&t){const i=g.EpF();g.TgZ(0,"div",0)(1,"div",1)(2,"b",2),g._uU(3),g.qZA()(),g.TgZ(4,"div",3)(5,"div",4)(6,"div",5)(7,"div",6)(8,"p"),g._uU(9,"Comprar n\xfamero:"),g.qZA(),g.TgZ(10,"p"),g._uU(11),g.qZA(),g.TgZ(12,"select",null,7),g.YNc(14,hk,2,2,"option",8),g.qZA(),g._uU(15," \xa0 "),g.TgZ(16,"button",9),g.NdJ("click",function(){g.CHM(i);const c=g.MAs(13);return r.buyNumber(c.value)}),g._uU(17,"Comprar"),g.qZA(),g.YNc(18,fk,3,1,"div",10),g.qZA(),g._UZ(19,"br"),g.TgZ(20,"div",11)(21,"table",12)(22,"thead")(23,"tr")(24,"th"),g._uU(25),g.qZA(),g.TgZ(26,"th"),g._uU(27,"Sorteio: 29/03"),g.qZA(),g.TgZ(28,"th"),g._uU(29),g.qZA()()(),g.YNc(30,mk,8,3,"tbody",13),g.qZA(),g.TgZ(31,"p"),g.YNc(32,_k,2,0,"span",14),g.qZA(),g.TgZ(33,"p")(34,"button",9),g.NdJ("click",function(){return r.backPageTable()}),g._uU(35,"Back"),g.qZA(),g._uU(36,"\xa0 "),g.TgZ(37,"button",9),g.NdJ("click",function(){return r.nextPageTable()}),g._uU(38,"Next"),g.qZA()()()(),g.YNc(39,Ik,27,2,"div",15),g.qZA()()()}2&t&&(g.xp6(3),g.hij("Bem vindo, ",r.account[0].nome,"!!"),g.xp6(8),g.hij("Seu saldo \xe9 de ",r.account[0].saldo," reais."),g.xp6(3),g.Q6J("ngForOf",r.numbersFiltered),g.xp6(4),g.Q6J("ngIf",""!=r.message),g.xp6(7),g.hij("N\xfameros(",r.numbers.length,"):"),g.xp6(4),g.hij("Pre\xe7o: ",r.price.price,""),g.xp6(1),g.Q6J("ngForOf",r.numbersFiltered),g.xp6(2),g.Q6J("ngIf",1==r.showMessage),g.xp6(7),g.Q6J("ngIf",r.root))},directives:[tr,hr],styles:[".center[_ngcontent-%COMP%]{display:grid;place-items:center}.font-color[_ngcontent-%COMP%]{color:#fff}.content[_ngcontent-%COMP%]{background-color:#967259;margin:0rem 1.5rem 1.5rem}.text[_ngcontent-%COMP%]{padding:1em}.title[_ngcontent-%COMP%]{font-size:2em}td[_ngcontent-%COMP%]{text-align:center}table[_ngcontent-%COMP%]{word-break:break-all;width:auto;table-layout:fixed;box-shadow:4px 8px 19px -3px #000}td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{max-width:100%;height:auto}"]}),n})();function Ck(n,e){if(1&n&&(g.TgZ(0,"h3"),g._uU(1),g.qZA()),2&n){const t=g.oxw();g.xp6(1),g.hij("O ultimo ganhador foi ",t.winner.winner,"")}}function Tk(n,e){1&n&&(g.TgZ(0,"div",13)(1,"span",14),g._uU(2,"Usu\xe1rio ou senha inv\xe1lidos."),g.qZA()())}let Dk=(()=>{class n{constructor(t,r){this.firebaseService=t,this.sortitionService=r,this.winner={winner:""},this.userIncorrect=!1,this.getWinner()}ngOnInit(){}login(t,r){var i=this;return(0,he.Z)(function*(){yield i.firebaseService.login(t,r,[]),i.userIncorrect=!0,setTimeout(()=>{i.userIncorrect=!1},3e3)})()}getWinner(){var t=this;return(0,he.Z)(function*(){t.winner=yield t.sortitionService.getWinner()})()}}return n.\u0275fac=function(t){return new(t||n)(g.Y36($m),g.Y36(JR))},n.\u0275cmp=g.Xpm({type:n,selectors:[["app-login"]],decls:27,vars:2,consts:[[1,"font-color"],[1,"center"],[1,"title"],[1,"login"],[1,"text"],[4,"ngIf"],["type","text"],["email",""],["type","password"],["password",""],["style","margin-top: 0.6em;",4,"ngIf"],[2,"margin-top","0.6em",3,"click"],["routerLink","register"],[2,"margin-top","0.6em"],["id","alert"]],template:function(t,r){if(1&t){const i=g.EpF();g.TgZ(0,"div",0)(1,"div",1)(2,"b",2),g._uU(3,"Login:"),g.qZA()(),g.TgZ(4,"div",3)(5,"div",4)(6,"div"),g.YNc(7,Ck,2,1,"h3",5),g.qZA(),g.TgZ(8,"div")(9,"label"),g._uU(10,"Email:"),g.qZA(),g._UZ(11,"br")(12,"input",6,7),g.qZA(),g.TgZ(14,"div")(15,"label"),g._uU(16,"Senha:"),g.qZA(),g._UZ(17,"br")(18,"input",8,9),g.qZA(),g.YNc(20,Tk,3,0,"div",10),g.TgZ(21,"div")(22,"button",11),g.NdJ("click",function(){g.CHM(i);const c=g.MAs(13),h=g.MAs(19);return r.login(c.value,h.value)}),g._uU(23,"Login"),g.qZA()(),g.TgZ(24,"div")(25,"a",12),g._uU(26,"Cadastre-se"),g.qZA()()()()()}2&t&&(g.xp6(7),g.Q6J("ngIf",""!=r.winner.winner),g.xp6(13),g.Q6J("ngIf",r.userIncorrect))},directives:[hr,Yh],styles:["#alert[_ngcontent-%COMP%]{color:#751e19;background-color:#fff;font-weight:700;border-radius:5px;padding:.2em;border:1px solid rgb(138,0,0)}.center[_ngcontent-%COMP%]{display:grid;place-items:center}.font-color[_ngcontent-%COMP%]{color:#fff}.login[_ngcontent-%COMP%]{background-color:#967259;margin:0rem 1.5rem 1.5rem}.text[_ngcontent-%COMP%]{padding:1em}.title[_ngcontent-%COMP%]{font-size:2em}"]}),n})();function Sk(n,e){if(1&n&&(g.TgZ(0,"div",13)(1,"span",14),g._uU(2),g.qZA()()),2&n){const t=g.oxw();g.xp6(2),g.Oqu(t.message)}}const Ak=[{path:"",component:Dk},{path:"register",component:(()=>{class n{constructor(t){this.firebaseService=t,this.error=[{type:"noName",description:"N\xe3o deixe o campo de nome vazio!"},{type:"noPassword",description:"N\xe3o deixe o campo de senha vazio!"},{type:"noEmail",description:"N\xe3o deixe o campo de email vazio!"},{type:"emailAlreadyUsed",description:"Este email ja foi utilizado!"}],this.message=""}ngOnInit(){}register(t,r,i){var u=this;return(0,he.Z)(function*(){let c=[];c=yield u.firebaseService.checkEmail(t),""==i?u.message=u.error[0].description:""==t?u.message=u.error[2].description:""==r?u.message=u.error[1].description:c.length>0?u.message=u.error[3].description:(yield u.firebaseService.register(t,r,i),u.message="Registro concluido!"),setTimeout(()=>{u.message=""},3e3)})()}}return n.\u0275fac=function(t){return new(t||n)(g.Y36($m))},n.\u0275cmp=g.Xpm({type:n,selectors:[["app-register"]],decls:31,vars:1,consts:[[1,"font-color"],[1,"center"],[1,"title"],[1,"login"],[1,"inputs"],["type","text"],["name",""],["email",""],["type","password"],["password",""],["style","margin-top: 0.6em;",4,"ngIf"],[2,"margin-top","0.6em",3,"click"],["routerLink",""],[2,"margin-top","0.6em"],["id","alert"]],template:function(t,r){if(1&t){const i=g.EpF();g.TgZ(0,"div",0)(1,"div",1)(2,"b",2),g._uU(3,"Registrar:"),g.qZA()(),g.TgZ(4,"div",3)(5,"div",4)(6,"div")(7,"label"),g._uU(8,"Nome:"),g.qZA(),g._UZ(9,"br")(10,"input",5,6),g.qZA(),g.TgZ(12,"div")(13,"label"),g._uU(14,"Email:"),g.qZA(),g._UZ(15,"br")(16,"input",5,7),g.qZA(),g.TgZ(18,"div")(19,"label"),g._uU(20,"Senha:"),g.qZA(),g._UZ(21,"br")(22,"input",8,9),g.qZA(),g.YNc(24,Sk,3,1,"div",10),g.TgZ(25,"div")(26,"button",11),g.NdJ("click",function(){g.CHM(i);const c=g.MAs(17),h=g.MAs(23),_=g.MAs(11);return r.register(c.value,h.value,_.value)}),g._uU(27,"Registrar"),g.qZA()(),g.TgZ(28,"div")(29,"a",12),g._uU(30,"Voltar"),g.qZA()()()()()}2&t&&(g.xp6(24),g.Q6J("ngIf",""!=r.message))},directives:[hr,Yh],styles:[".center[_ngcontent-%COMP%]{display:grid;place-items:center}.font-color[_ngcontent-%COMP%]{color:#fff}.login[_ngcontent-%COMP%]{background-color:#967259;margin:0rem 1.5rem 1.5rem}.inputs[_ngcontent-%COMP%]{padding:1em}.title[_ngcontent-%COMP%]{font-size:2em}"]}),n})()},{path:"home",component:bk}];let xk=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({imports:[[Qh.forRoot(Ak)],Qh]}),n})();function Rk(n,e){if(1&n){const t=g.EpF();g.TgZ(0,"span")(1,"span"),g._uU(2),g.TgZ(3,"a",6),g.NdJ("click",function(){return g.CHM(t),g.oxw().logout()}),g._uU(4,"(Logout)"),g.qZA()()()}if(2&n){const t=g.oxw();g.xp6(2),g.hij(" Ol\xe1, ",t.email," ")}}let Mk=(()=>{class n{constructor(t){this.firebaseService=t,this.isLoggedIn="",this.email="",this.title="SiteSorteios"}ngOnInit(){this.firebaseService.emmitLoginStatus.subscribe(t=>this.isLoggedIn=t),this.firebaseService.emmitEmail.subscribe(t=>this.email=t)}logout(){this.firebaseService.logout()}}return n.\u0275fac=function(t){return new(t||n)(g.Y36($m))},n.\u0275cmp=g.Xpm({type:n,selectors:[["app-root"]],decls:8,vars:1,consts:[[1,"header"],[1,"headerContent"],["href","#",1,"headerTitle"],[4,"ngIf"],[1,"bodyContent"],[1,"complete"],["href","#",3,"click"]],template:function(t,r){1&t&&(g.TgZ(0,"div",0)(1,"div",1)(2,"a",2),g._uU(3,"Sorteios"),g.qZA(),g.YNc(4,Rk,5,1,"span",3),g.qZA()(),g.TgZ(5,"div",4),g._UZ(6,"router-outlet"),g.qZA(),g._UZ(7,"div",5)),2&t&&(g.xp6(4),g.Q6J("ngIf",r.isLoggedIn))},directives:[hr,Ol],styles:[".header[_ngcontent-%COMP%]{position:absolute;top:0;left:0;right:0;height:60px;display:flex;align-items:center;background-color:#38220f;color:#fff;font-weight:600}.headerContent[_ngcontent-%COMP%]{margin:1em}.headerTitle[_ngcontent-%COMP%]{font-size:1.5em;text-decoration:inherit}"]}),n})();const US_firebase={projectId:"angularproject-157",appId:"1:772516128790:web:696fa39810754439876d37",databaseURL:"https://angularproject-157-default-rtdb.firebaseio.com",storageBucket:"angularproject-157.appspot.com",locationId:"southamerica-east1",apiKey:"AIzaSyCF295zm0MgJ1JiMY6GqllbkZjfnSpjzYY",authDomain:"angularproject-157.firebaseapp.com",messagingSenderId:"772516128790",measurementId:"G-TMZEPFE2E9"};var Nk=k(198);class VS{constructor(e){return e}}class BS{constructor(){return(0,nn.vb)("auth")}}const jS=new g.OlP("angularfire2.auth-instances");function kk(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new VS(r)}}const Ok={provide:BS,deps:[[new g.FiY,jS]]},Fk={provide:VS,useFactory:function Pk(n,e){const t=(0,nn.JM)("auth",n,e);return t&&new VS(t)},deps:[[new g.FiY,jS],bp]};let Lk=(()=>{class n{constructor(){(0,xc.KN)("angularfire",nn.q4.full,"auth")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({providers:[Fk,Ok]}),n})();function Uk(n,...e){return{ngModule:Lk,providers:[{provide:jS,useFactory:kk(n),multi:!0,deps:[g.R0b,g.zs3,nn.HU,Pb,[new g.FiY,jm],...e]}]}}const Vk=(0,nn.u3)(Nk.n,!0),eM="@firebase/database";let $S="";class jk{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,Q.Pz)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,Q.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class $k{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,Q.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const nM=function(n){try{if("undefined"!=typeof window&&void 0!==window[n]){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new jk(e)}}catch(e){}return new $k},Cp=nM("localStorage"),HS=nM("sessionStorage"),Hm=new ta.Yd("@firebase/database"),rM=function(){let n=1;return function(){return n++}}(),iM=function(n){const e=(0,Q.dS)(n),t=new Q.gQ;t.update(e);const r=t.digest();return Q.US.encodeByteArray(r)},E0=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=E0.apply(null,r):e+="object"==typeof r?(0,Q.Pz)(r):r,e+=" "}return e};let Tp=null,sM=!0;const mi=function(...n){if(!0===sM&&(sM=!1,null===Tp&&!0===HS.get("logging_enabled")&&function(n,e){(0,Q.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(Hm.logLevel=ta.in.VERBOSE,Tp=Hm.log.bind(Hm),e&&HS.set("logging_enabled",!0)):"function"==typeof n?Tp=n:(Tp=null,HS.remove("logging_enabled"))}(!0)),Tp){const e=E0.apply(null,n);Tp(e)}},w0=function(n){return function(...e){mi(n,...e)}},WS=function(...n){const e="FIREBASE INTERNAL ERROR: "+E0(...n);Hm.error(e)},ll=function(...n){const e=`FIREBASE FATAL ERROR: ${E0(...n)}`;throw Hm.error(e),new Error(e)},Xi=function(...n){const e="FIREBASE WARNING: "+E0(...n);Hm.warn(e)},$b=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},Rc="[MIN_NAME]",cl="[MAX_NAME]",Dp=function(n,e){if(n===e)return 0;if(n===Rc||e===cl)return-1;if(e===Rc||n===cl)return 1;{const t=Hb(n),r=Hb(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},zk=function(n,e){return n===e?0:n<e?-1:1},I0=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,Q.Pz)(e))},zS=function(n){if("object"!=typeof n||null===n)return(0,Q.Pz)(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=(0,Q.Pz)(e[r]),t+=":",t+=zS(n[e[r]]);return t+="}",t},aM=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let i=0;i<t;i+=e)r.push(n.substring(i,i+e>t?t:i+e));return r};function _i(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const uM=function(n){(0,Q.hu)(!$b(n),"Invalid JSON number");const r=1023;let i,u,c,h,_;0===n?(u=0,c=0,i=1/n==-1/0?1:0):(i=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(h=Math.min(Math.floor(Math.log(n)/Math.LN2),r),u=h+r,c=Math.round(n*Math.pow(2,52-h)-Math.pow(2,52))):(u=0,c=Math.round(n/Math.pow(2,-1074))));const w=[];for(_=52;_;_-=1)w.push(c%2?1:0),c=Math.floor(c/2);for(_=11;_;_-=1)w.push(u%2?1:0),u=Math.floor(u/2);w.push(i?1:0),w.reverse();const D=w.join("");let S="";for(_=0;_<64;_+=8){let P=parseInt(D.substr(_,8),2).toString(16);1===P.length&&(P="0"+P),S+=P}return S.toLowerCase()},Kk=new RegExp("^-?(0*)\\d{1,10}$"),Hb=function(n){if(Kk.test(n)){const e=Number(n);if(e>=-2147483648&&e<=2147483647)return e}return null},Wm=function(n){try{n()}catch(e){setTimeout(()=>{throw Xi("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},b0=function(n,e){const t=setTimeout(n,e);return"object"==typeof t&&t.unref&&t.unref(),t};class Qk{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=null==t?void 0:t.getImmediate({optional:!0}),this.appCheck||null==t||t.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){Xi(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class Jk{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(mi("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Xi(e)}}let C0=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const pM=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,_M="websocket",yM="long_polling";class ZS{constructor(e,t,r,i,u=!1,c="",h=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=u,this.persistenceKey=c,this.includeNamespaceInQueryParams=h,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Cp.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Cp.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function vM(n,e,t){let r;if((0,Q.hu)("string"==typeof e,"typeof type must == string"),(0,Q.hu)("object"==typeof t,"typeof params must == object"),e===_M)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==yM)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function Xk(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const i=[];return _i(t,(u,c)=>{i.push(u+"="+c)}),r+i.join("&")}class eO{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,Q.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,Q.p$)(this.counters_)}}const KS={},YS={};function QS(n){const e=n.toString();return KS[e]||(KS[e]=new eO),KS[e]}class nO{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&Wm(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class hh{constructor(e,t,r,i,u,c,h){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=u,this.transportSessionId=c,this.lastSessionId=h,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=w0(e),this.stats_=QS(t),this.urlFn=_=>(this.appCheckToken&&(_.ac=this.appCheckToken),vM(t,yM,_))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new nO(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,Q.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new JS((...u)=>{const[c,h,_,w,D]=u;if(this.incrementIncomingBytes_(u),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===c)this.id=h,this.password=_;else{if("close"!==c)throw new Error("Unrecognized command received: "+c);h?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(h,()=>{this.onClosed_()})):this.onClosed_()}},(...u)=>{const[c,h]=u;this.incrementIncomingBytes_(u),this.myPacketOrderer.handleResponse(c,h)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&pM.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){hh.forceAllow_=!0}static forceDisallow(){hh.forceDisallow_=!0}static isAvailable(){return!((0,Q.Yr)()||!hh.forceAllow_&&(hh.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,Q.Pz)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=(0,Q.h$)(t),i=aM(r,1840);for(let u=0;u<i.length;u++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[u]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,Q.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,Q.Pz)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class JS{constructor(e,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,Q.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=rM(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=JS.createIFrame_();let u="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(u='<script>document.domain="'+document.domain+'";<\/script>');const c="<html><body>"+u+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(c),this.myIFrame.doc.close()}catch(h){mi("frame writing exception"),h.stack&&mi(h.stack),mi(h)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||mi("No IE domain setting required")}catch(t){const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const c=this.pendingSegs.shift();r=r+"&seg"+i+"="+c.seg+"&ts"+i+"="+c.ts+"&d"+i+"="+c.d,i++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),r()})}addTag(e,t){(0,Q.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{mi("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch(r){}},Math.floor(1))}}let zb=null;"undefined"!=typeof MozWebSocket?zb=MozWebSocket:"undefined"!=typeof WebSocket&&(zb=WebSocket);let zm=(()=>{class n{constructor(t,r,i,u,c,h,_){this.connId=t,this.applicationId=i,this.appCheckToken=u,this.authToken=c,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=w0(this.connId),this.stats_=QS(r),this.connURL=n.connectionURL_(r,h,_,u,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,u,c){const h={v:"5"};return!(0,Q.Yr)()&&"undefined"!=typeof location&&location.hostname&&pM.test(location.hostname)&&(h.r="f"),r&&(h.s=r),i&&(h.ls=i),u&&(h.ac=u),c&&(h.p=c),vM(t,_M,h)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Cp.set("previous_websocket_failure",!0);try{let i;if((0,Q.Yr)()){const c={headers:{"User-Agent":`Firebase/5/${$S}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}};this.authToken&&(c.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(c.headers["X-Firebase-AppCheck"]=this.appCheckToken);const h=process.env,_=0===this.connURL.indexOf("wss://")?h.HTTPS_PROXY||h.https_proxy:h.HTTP_PROXY||h.http_proxy;_&&(c.proxy={origin:_})}this.mySock=new zb(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const u=i.message||i.data;return u&&this.log_(u),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const u=i.message||i.data;u&&this.log_(u),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if("undefined"!=typeof navigator&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&null!==zb&&!n.forceDisallow_}static previouslyFailed(){return Cp.isInMemoryStorage||!0===Cp.get("previous_websocket_failure")}markConnectionHealthy(){Cp.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=(0,Q.cI)(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,Q.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();const r=(0,Q.Pz)(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=aM(r,16384);i.length>1&&this.sendString_(String(i.length));for(let u=0;u<i.length;u++)this.sendString_(i[u])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),DM=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[hh,zm]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const r=zm&&zm.isAvailable();let i=r&&!zm.previouslyFailed();if(t.webSocketOnly&&(r||Xi("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[zm];else{const u=this.transports_=[];for(const c of n.ALL_TRANSPORTS)c&&c.isAvailable()&&u.push(c);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class PM{constructor(e,t,r,i,u,c,h,_,w,D){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=u,this.onMessage_=c,this.onReady_=h,this.onDisconnect_=_,this.onKill_=w,this.lastSessionId=D,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=w0("c:"+this.id+":"),this.transportManager_=new DM(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=b0(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=I0("t",e),r=I0("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=I0("t",e),r=I0("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=I0("t",e);if("d"in e){const r=e.d;if("h"===t)this.onHandshake_(r);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?WS("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):WS("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&Xi("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),b0(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):b0(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Cp.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class kM{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class OM{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,Q.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let u=0;u<i.length;u++)if(i[u].callback===t&&(!r||r===i[u].context))return void i.splice(u,1)}validateEventType_(e){(0,Q.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class Gb extends OM{constructor(){super(["online"]),this.online_=!0,"undefined"!=typeof window&&void 0!==window.addEventListener&&!(0,Q.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new Gb}getInitialEvent(e){return(0,Q.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class Tn{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function vn(){return new Tn("")}function Jt(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function fh(n){return n.pieces_.length-n.pieceNum_}function Gn(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new Tn(n.pieces_,e)}function eA(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function T0(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function UM(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new Tn(e,0)}function lr(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof Tn)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new Tn(t,0)}function Xt(n){return n.pieceNum_>=n.pieces_.length}function Cs(n,e){const t=Jt(n),r=Jt(e);if(null===t)return e;if(t===r)return Cs(Gn(n),Gn(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function tA(n,e){if(fh(n)!==fh(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function fa(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(fh(n)>fh(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class TO{constructor(e,t){this.errorPrefix_=t,this.parts_=T0(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,Q.ug)(this.parts_[r]);VM(this)}}function VM(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Sp(n))}function Sp(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class nA extends OM{constructor(){let e,t;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(t="visibilitychange",e="hidden"):void 0!==document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(t="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new nA}getInitialEvent(e){return(0,Q.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const D0=1e3;let Zb,Ap=(()=>{class n extends kM{constructor(t,r,i,u,c,h,_,w){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=u,this.onServerInfoUpdate_=c,this.authTokenProvider_=h,this.appCheckTokenProvider_=_,this.authOverride_=w,this.id=n.nextPersistentConnectionId_++,this.log_=w0("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=D0,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,w&&!(0,Q.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");nA.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&Gb.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){const u=++this.requestNumber_,c={r:u,a:t,b:r};this.log_((0,Q.Pz)(c)),(0,Q.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(c),i&&(this.requestCBHash_[u]=i)}get(t){this.initConnection_();const r=new Q.BH,i={p:t._path.toString(),q:t._queryObject},u={action:"g",request:i,onComplete:h=>{const _=h.d;"ok"===h.s?(this.onDataUpdate_(i.p,_,!1,null),r.resolve(_)):r.reject(_)}};this.outstandingGets_.push(u),this.outstandingGetCount_++;const c=this.outstandingGets_.length-1;return this.connected_||setTimeout(()=>{const h=this.outstandingGets_[c];void 0===h||u!==h||(delete this.outstandingGets_[c],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),this.log_("get "+c+" timed out on connection"),r.reject(new Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_(c),r.promise}listen(t,r,i,u){this.initConnection_();const c=t._queryIdentifier,h=t._path.toString();this.log_("Listen called for "+h+" "+c),this.listens.has(h)||this.listens.set(h,new Map),(0,Q.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,Q.hu)(!this.listens.get(h).has(c),"listen() called twice for same path/queryId.");const _={onComplete:u,hashFn:r,query:t,tag:i};this.listens.get(h).set(c,_),this.connected_&&this.sendListen_(_)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){const r=t.query,i=r._path.toString(),u=r._queryIdentifier;this.log_("Listen on "+i+" for "+u);const c={p:i};t.tag&&(c.q=r._queryObject,c.t=t.tag),c.h=t.hashFn(),this.sendRequest("q",c,_=>{const w=_.d,D=_.s;n.warnOnListenWarnings_(w,r),(this.listens.get(i)&&this.listens.get(i).get(u))===t&&(this.log_("listen response",_),"ok"!==D&&this.removeListen_(i,u),t.onComplete&&t.onComplete(D,w))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&(0,Q.r3)(t,"w")){const i=(0,Q.DV)(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const u='".indexOn": "'+r._queryParams.getIndex().toString()+'"',c=r._path.toString();Xi(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${u} at ${c} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,Q.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=(0,Q.w9)(t)?"auth":"gauth",i={cred:t};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,u=>{const c=u.s,h=u.d||"error";this.authToken_===t&&("ok"===c?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(c,h))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,i=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){const i=t._path.toString(),u=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+u),(0,Q.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,u)&&this.connected_&&this.sendUnlisten_(i,u,t._queryObject,r)}sendUnlisten_(t,r,i,u){this.log_("Unlisten on "+t+" for "+r);const c={p:t};u&&(c.q=i,c.t=u),this.sendRequest("n",c)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,u){const c={p:r,d:i};this.log_("onDisconnect "+t,c),this.sendRequest(t,c,h=>{u&&setTimeout(()=>{u(h.s,h.d)},Math.floor(0))})}put(t,r,i,u){this.putInternal("p",t,r,i,u)}merge(t,r,i,u){this.putInternal("m",t,r,i,u)}putInternal(t,r,i,u,c){this.initConnection_();const h={p:r,d:i};void 0!==c&&(h.h=c),this.outstandingPuts_.push({action:t,request:h,onComplete:u}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,u=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,c=>{this.log_(r+" response",c),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),u&&u(c.s,c.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,Q.Pz)(t));const r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):WS("Unrecognized action received from server: "+(0,Q.Pz)(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,Q.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=D0,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=D0,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=D0),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,he.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),i=t.onReady_.bind(t),u=t.onRealtimeDisconnect_.bind(t),c=t.id+":"+n.nextConnectionId_++,h=t.lastSessionId;let _=!1,w=null;const D=function(){w?w.close():(_=!0,u())};t.realtime_={close:D,sendRequest:function(B){(0,Q.hu)(w,"sendRequest call when we're not connected not allowed."),w.sendRequest(B)}};const P=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[B,Y]=yield Promise.all([t.authTokenProvider_.getToken(P),t.appCheckTokenProvider_.getToken(P)]);_?mi("getToken() completed but was canceled"):(mi("getToken() completed. Creating connection."),t.authToken_=B&&B.accessToken,t.appCheckToken_=Y&&Y.token,w=new PM(c,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,i,u,Re=>{Xi(Re+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},h))}catch(B){t.log_("Failed to get token: "+B),_||(t.repoInfo_.nodeAdmin&&Xi(B),D())}}})()}interrupt(t){mi("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){mi("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,Q.xb)(this.interruptReasons_)&&(this.reconnectDelay_=D0,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;i=r?r.map(c=>zS(c)).join("$"):"default";const u=this.removeListen_(t,i);u&&u.onComplete&&u.onComplete("permission_denied")}removeListen_(t,r){const i=new Tn(t).toString();let u;if(this.listens.has(i)){const c=this.listens.get(i);u=c.get(r),c.delete(r),0===c.size&&this.listens.delete(i)}else u=void 0;return u}onAuthRevoked_(t,r){mi("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){mi("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";(0,Q.Yr)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+r+"."+$S.replace(/\./g,"-")]=1,(0,Q.uI)()?t["framework.cordova"]=1:(0,Q.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=Gb.getInstance().currentlyOnline();return(0,Q.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class sn{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new sn(e,t)}}class qb{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new sn(Rc,e),i=new sn(Rc,t);return 0!==this.compare(r,i)}minPost(){return sn.MIN}}class $M extends qb{static get __EMPTY_NODE(){return Zb}static set __EMPTY_NODE(e){Zb=e}compare(e,t){return Dp(e.name,t.name)}isDefinedOn(e){throw(0,Q.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return sn.MIN}maxPost(){return new sn(cl,Zb)}makePost(e,t){return(0,Q.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new sn(e,Zb)}toString(){return".key"}}const dl=new $M;class Kb{constructor(e,t,r,i,u=null){this.isReverse_=i,this.resultGenerator_=u,this.nodeStack_=[];let c=1;for(;!e.isEmpty();)if(e=e,c=t?r(e.key,t):1,i&&(c*=-1),c<0)e=this.isReverse_?e.left:e.right;else{if(0===c){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let iA,au=(()=>{class n{constructor(t,r,i,u,c){this.key=t,this.value=r,this.color=null!=i?i:n.RED,this.left=null!=u?u:zs.EMPTY_NODE,this.right=null!=c?c:zs.EMPTY_NODE}copy(t,r,i,u,c){return new n(null!=t?t:this.key,null!=r?r:this.value,null!=i?i:this.color,null!=u?u:this.left,null!=c?c:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let u=this;const c=i(t,u.key);return u=c<0?u.copy(null,null,null,u.left.insert(t,r,i),null):0===c?u.copy(null,r,null,null,null):u.copy(null,null,null,null,u.right.insert(t,r,i)),u.fixUp_()}removeMin_(){if(this.left.isEmpty())return zs.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,u;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(t,i.key)){if(i.right.isEmpty())return zs.EMPTY_NODE;u=i.right.min_(),i=i.copy(u.key,u.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class zs{constructor(e,t=zs.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new zs(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,au.BLACK,null,null))}remove(e){return new zs(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,au.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Kb(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new Kb(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new Kb(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new Kb(this.root_,null,this.comparator_,!0,e)}}function kO(n,e){return Dp(n.name,e.name)}function rA(n,e){return Dp(n,e)}zs.EMPTY_NODE=new class PO{copy(e,t,r,i,u){return this}insert(e,t,r){return new au(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const HM=function(n){return"number"==typeof n?"number:"+uM(n):"string:"+n},WM=function(n){if(n.isLeafNode()){const e=n.val();(0,Q.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,Q.r3)(e,".sv"),"Priority must be a string or number.")}else(0,Q.hu)(n===iA||n.isEmpty(),"priority of unexpected type.");(0,Q.hu)(n===iA||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let zM,GM,qM,Gm=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,(0,Q.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),WM(this.priorityNode_)}static set __childrenNodeConstructor(t){zM=t}static get __childrenNodeConstructor(){return zM}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return Xt(t)?this:".priority"===Jt(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const i=Jt(t);return null===i?r:r.isEmpty()&&".priority"!==i?this:((0,Q.hu)(".priority"!==i||1===fh(t),".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(Gn(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+HM(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?uM(this.value_):this.value_,this.lazyHash_=iM(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,Q.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,i=typeof this.value_,u=n.VALUE_TYPE_ORDER.indexOf(r),c=n.VALUE_TYPE_ORDER.indexOf(i);return(0,Q.hu)(u>=0,"Unknown leaf type: "+r),(0,Q.hu)(c>=0,"Unknown leaf type: "+i),u===c?"object"===i?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:c-u}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const r=t;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}return!1}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const Jn=new class UO extends qb{compare(e,t){const r=e.node.getPriority(),i=t.node.getPriority(),u=r.compareTo(i);return 0===u?Dp(e.name,t.name):u}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return sn.MIN}maxPost(){return new sn(cl,new Gm("[PRIORITY-POST]",qM))}makePost(e,t){const r=GM(e);return new sn(t,new Gm("[PRIORITY-POST]",r))}toString(){return".priority"}},VO=Math.log(2);class BO{constructor(e){this.count=parseInt(Math.log(e+1)/VO,10),this.current_=this.count-1;const i=(u=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Yb=function(n,e,t,r){n.sort(e);const i=function(_,w){const D=w-_;let S,P;if(0===D)return null;if(1===D)return S=n[_],P=t?t(S):S,new au(P,S.node,au.BLACK,null,null);{const B=parseInt(D/2,10)+_,Y=i(_,B),Re=i(B+1,w);return S=n[B],P=t?t(S):S,new au(P,S.node,au.BLACK,Y,Re)}},h=function(_){let w=null,D=null,S=n.length;const P=function(Y,Re){const Ze=S-Y,qt=S;S-=Y;const zt=i(Ze+1,qt),Zt=n[Ze],Ot=t?t(Zt):Zt;B(new au(Ot,Zt.node,Re,null,zt))},B=function(Y){w?(w.left=Y,w=Y):(D=Y,w=Y)};for(let Y=0;Y<_.count;++Y){const Re=_.nextBitIsOne(),Ze=Math.pow(2,_.count-(Y+1));Re?P(Ze,au.BLACK):(P(Ze,au.BLACK),P(Ze,au.RED))}return D}(new BO(n.length));return new zs(r||e,h)};let sA;const qm={};class Mc{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,Q.hu)(qm&&Jn,"ChildrenNode.ts has not been loaded"),sA=sA||new Mc({".priority":qm},{".priority":Jn}),sA}get(e){const t=(0,Q.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof zs?t:null}hasIndex(e){return(0,Q.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,Q.hu)(e!==dl,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const u=t.getIterator(sn.Wrap);let h,c=u.getNext();for(;c;)i=i||e.isDefinedOn(c.node),r.push(c),c=u.getNext();h=i?Yb(r,e.getCompare()):qm;const _=e.toString(),w=Object.assign({},this.indexSet_);w[_]=e;const D=Object.assign({},this.indexes_);return D[_]=h,new Mc(D,w)}addToIndexes(e,t){const r=(0,Q.UI)(this.indexes_,(i,u)=>{const c=(0,Q.DV)(this.indexSet_,u);if((0,Q.hu)(c,"Missing index implementation for "+u),i===qm){if(c.isDefinedOn(e.node)){const h=[],_=t.getIterator(sn.Wrap);let w=_.getNext();for(;w;)w.name!==e.name&&h.push(w),w=_.getNext();return h.push(e),Yb(h,c.getCompare())}return qm}{const h=t.get(e.name);let _=i;return h&&(_=_.remove(new sn(e.name,h))),_.insert(e,e.node)}});return new Mc(r,this.indexSet_)}removeFromIndexes(e,t){const r=(0,Q.UI)(this.indexes_,i=>{if(i===qm)return i;{const u=t.get(e.name);return u?i.remove(new sn(e.name,u)):i}});return new Mc(r,this.indexSet_)}}let S0,Wt=(()=>{class n{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&WM(this.priorityNode_),this.children_.isEmpty()&&(0,Q.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return S0||(S0=new n(new zs(rA),null,Mc.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||S0}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?S0:r}}getChild(t){const r=Jt(t);return null===r?this:this.getImmediateChild(r).getChild(Gn(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if((0,Q.hu)(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const i=new sn(t,r);let u,c;r.isEmpty()?(u=this.children_.remove(t),c=this.indexMap_.removeFromIndexes(i,this.children_)):(u=this.children_.insert(t,r),c=this.indexMap_.addToIndexes(i,this.children_));const h=u.isEmpty()?S0:this.priorityNode_;return new n(u,h,c)}}updateChild(t,r){const i=Jt(t);if(null===i)return r;{(0,Q.hu)(".priority"!==Jt(t)||1===fh(t),".priority must be the last token in a path");const u=this.getImmediateChild(i).updateChild(Gn(t),r);return this.updateImmediateChild(i,u)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let i=0,u=0,c=!0;if(this.forEachChild(Jn,(h,_)=>{r[h]=_.val(t),i++,c&&n.INTEGER_REGEXP_.test(h)?u=Math.max(u,Number(h)):c=!1}),!t&&c&&u<2*i){const h=[];for(const _ in r)h[_]=r[_];return h}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+HM(this.getPriority().val())+":"),this.forEachChild(Jn,(r,i)=>{const u=i.hash();""!==u&&(t+=":"+r+":"+u)}),this.lazyHash_=""===t?"":iM(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){const u=this.resolveIndex_(i);if(u){const c=u.getPredecessorKey(new sn(t,r));return c?c.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new sn(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new sn(r,this.children_.get(r)):null}forEachChild(t,r){const i=this.resolveIndex_(t);return i?i.inorderTraversal(u=>r(u.name,u.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,u=>u);{const u=this.children_.getIteratorFrom(t.name,sn.Wrap);let c=u.peek();for(;null!=c&&r.compare(c,t)<0;)u.getNext(),c=u.peek();return u}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,u=>u);{const u=this.children_.getReverseIteratorFrom(t.name,sn.Wrap);let c=u.peek();for(;null!=c&&r.compare(c,t)>0;)u.getNext(),c=u.peek();return u}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===A0?-1:0}withIndex(t){if(t===dl||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===dl||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(Jn),u=r.getIterator(Jn);let c=i.getNext(),h=u.getNext();for(;c&&h;){if(c.name!==h.name||!c.node.equals(h.node))return!1;c=i.getNext(),h=u.getNext()}return null===c&&null===h}return!1}return!1}}resolveIndex_(t){return t===dl?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const A0=new class jO extends Wt{constructor(){super(new zs(rA),Wt.EMPTY_NODE,Mc.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Wt.EMPTY_NODE}isEmpty(){return!1}};function br(n,e=null){if(null===n)return Wt.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,Q.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new Gm(n,br(e));if(n instanceof Array){let t=Wt.EMPTY_NODE;return _i(n,(r,i)=>{if((0,Q.r3)(n,r)&&"."!==r.substring(0,1)){const u=br(i);(u.isLeafNode()||!u.isEmpty())&&(t=t.updateImmediateChild(r,u))}}),t.updatePriority(br(e))}{const t=[];let r=!1;if(_i(n,(c,h)=>{if("."!==c.substring(0,1)){const _=br(h);_.isEmpty()||(r=r||!_.getPriority().isEmpty(),t.push(new sn(c,_)))}}),0===t.length)return Wt.EMPTY_NODE;const u=Yb(t,kO,c=>c.name,rA);if(r){const c=Yb(t,Jn.getCompare());return new Wt(u,br(e),new Mc({".priority":c},{".priority":Jn}))}return new Wt(u,br(e),Mc.Default)}}Object.defineProperties(sn,{MIN:{value:new sn(Rc,Wt.EMPTY_NODE)},MAX:{value:new sn(cl,A0)}}),$M.__EMPTY_NODE=Wt.EMPTY_NODE,Gm.__childrenNodeConstructor=Wt,function OO(n){iA=n}(A0),function LO(n){qM=n}(A0),function FO(n){GM=n}(br);class oA extends qb{constructor(e){super(),this.indexPath_=e,(0,Q.hu)(!Xt(e)&&".priority"!==Jt(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),i=this.extractChild(t.node),u=r.compareTo(i);return 0===u?Dp(e.name,t.name):u}makePost(e,t){const r=br(e),i=Wt.EMPTY_NODE.updateChild(this.indexPath_,r);return new sn(t,i)}maxPost(){const e=Wt.EMPTY_NODE.updateChild(this.indexPath_,A0);return new sn(cl,e)}toString(){return T0(this.indexPath_,0).join("/")}}const aA=new class HO extends qb{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?Dp(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return sn.MIN}maxPost(){return sn.MAX}makePost(e,t){const r=br(e);return new sn(t,r)}toString(){return".value"}};function R0(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class cA{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Jn}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,Q.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,Q.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Rc}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,Q.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,Q.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:cl}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,Q.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Jn}copy(){const e=new cA;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function XM(n){const e={};if(n.isDefault())return e;let t;return n.index_===Jn?t="$priority":n.index_===aA?t="$value":n.index_===dl?t="$key":((0,Q.hu)(n.index_ instanceof oA,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,Q.Pz)(t),n.startSet_&&(e.startAt=(0,Q.Pz)(n.indexStartValue_),n.startNameSet_&&(e.startAt+=","+(0,Q.Pz)(n.indexStartName_))),n.endSet_&&(e.endAt=(0,Q.Pz)(n.indexEndValue_),n.endNameSet_&&(e.endAt+=","+(0,Q.Pz)(n.indexEndName_))),n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function eN(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_)),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_)),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==Jn&&(e.i=n.index_.toString()),e}class Jb extends kM{constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=w0("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,Q.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){const u=e._path.toString();this.log_("Listen called for "+u+" "+e._queryIdentifier);const c=Jb.getListenId_(e,r),h={};this.listens_[c]=h;const _=XM(e._queryParams);this.restRequest_(u+".json",_,(w,D)=>{let S=D;if(404===w&&(S=null,w=null),null===w&&this.onDataUpdate_(u,S,!1,r),(0,Q.DV)(this.listens_,c)===h){let P;P=w?401===w?"permission_denied":"rest_error:"+w:"ok",i(P,null)}})}unlisten(e,t){const r=Jb.getListenId_(e,t);delete this.listens_[r]}get(e){const t=XM(e._queryParams),r=e._path.toString(),i=new Q.BH;return this.restRequest_(r+".json",t,(u,c)=>{let h=c;404===u&&(h=null,u=null),null===u?(this.onDataUpdate_(r,h,!1,null),i.resolve(h)):i.reject(new Error(h))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,u])=>{i&&i.accessToken&&(t.auth=i.accessToken),u&&u.token&&(t.ac=u.token);const c=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,Q.xO)(t);this.log_("Sending REST request for "+c);const h=new XMLHttpRequest;h.onreadystatechange=()=>{if(r&&4===h.readyState){this.log_("REST Response for "+c+" received. status:",h.status,"response:",h.responseText);let _=null;if(h.status>=200&&h.status<300){try{_=(0,Q.cI)(h.responseText)}catch(w){Xi("Failed to parse JSON response for "+c+": "+h.responseText)}r(null,_)}else 401!==h.status&&404!==h.status&&Xi("Got unsuccessful REST response for "+c+" Status: "+h.status),r(h.status);r=null}},h.open("GET",c,!0),h.send()})}}class JO{constructor(){this.rootNode_=Wt.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function Xb(){return{value:null,children:new Map}}function Ym(n,e,t){if(Xt(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=Jt(e);n.children.has(r)||n.children.set(r,Xb()),Ym(n.children.get(r),e=Gn(e),t)}}function pA(n,e,t){null!==n.value?t(e,n.value):function XO(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,i)=>{pA(i,new Tn(e.toString()+"/"+r),t)})}class eF{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&_i(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}}class rF{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new eF(e);const r=1e4+2e4*Math.random();b0(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;_i(e,(i,u)=>{u>0&&(0,Q.r3)(this.statsToReport_,i)&&(t[i]=u,r=!0)}),r&&this.server_.reportStats(t),b0(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var pa=(()=>(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(pa||(pa={})),pa))();function _A(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class eC{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=pa.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(Xt(this.path)){if(null!=this.affectedTree.value)return(0,Q.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new Tn(e));return new eC(vn(),t,this.revert)}}return(0,Q.hu)(Jt(this.path)===e,"operationForChild called for unrelated child."),new eC(Gn(this.path),this.affectedTree,this.revert)}}class xp{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=pa.OVERWRITE}operationForChild(e){return Xt(this.path)?new xp(this.source,vn(),this.snap.getImmediateChild(e)):new xp(this.source,Gn(this.path),this.snap)}}class Qm{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=pa.MERGE}operationForChild(e){if(Xt(this.path)){const t=this.children.subtree(new Tn(e));return t.isEmpty()?null:t.value?new xp(this.source,vn(),t.value):new Qm(this.source,vn(),t)}return(0,Q.hu)(Jt(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Qm(this.source,Gn(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class ph{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Xt(e))return this.isFullyInitialized()&&!this.filtered_;const t=Jt(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}function P0(n,e,t,r,i,u){const c=r.filter(h=>h.type===t);c.sort((h,_)=>function aF(n,e,t){if(null==e.childName||null==t.childName)throw(0,Q.g5)("Should only compare child_ events.");const r=new sn(e.childName,e.snapshotNode),i=new sn(t.childName,t.snapshotNode);return n.index_.compare(r,i)}(n,h,_)),c.forEach(h=>{const _=function oF(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,h,u);i.forEach(w=>{w.respondsTo(h.type)&&e.push(w.createEvent(_,n.query_))})})}function tC(n,e){return{eventCache:n,serverCache:e}}function k0(n,e,t,r){return tC(new ph(e,t,r),n.serverCache)}function nN(n,e,t,r){return tC(n.eventCache,new ph(e,t,r))}function nC(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function Rp(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let yA;class Xn{constructor(e,t=(()=>(yA||(yA=new zs(zk)),yA))()){this.value=e,this.children=t}static fromObject(e){let t=new Xn(null);return _i(e,(r,i)=>{t=t.set(new Tn(r),i)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:vn(),value:this.value};if(Xt(e))return null;{const r=Jt(e),i=this.children.get(r);if(null!==i){const u=i.findRootMostMatchingPathAndValue(Gn(e),t);return null!=u?{path:lr(new Tn(r),u.path),value:u.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Xt(e))return this;{const t=Jt(e),r=this.children.get(t);return null!==r?r.subtree(Gn(e)):new Xn(null)}}set(e,t){if(Xt(e))return new Xn(t,this.children);{const r=Jt(e),u=(this.children.get(r)||new Xn(null)).set(Gn(e),t),c=this.children.insert(r,u);return new Xn(this.value,c)}}remove(e){if(Xt(e))return this.children.isEmpty()?new Xn(null):new Xn(null,this.children);{const t=Jt(e),r=this.children.get(t);if(r){const i=r.remove(Gn(e));let u;return u=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&u.isEmpty()?new Xn(null):new Xn(this.value,u)}return this}}get(e){if(Xt(e))return this.value;{const t=Jt(e),r=this.children.get(t);return r?r.get(Gn(e)):null}}setTree(e,t){if(Xt(e))return t;{const r=Jt(e),u=(this.children.get(r)||new Xn(null)).setTree(Gn(e),t);let c;return c=u.isEmpty()?this.children.remove(r):this.children.insert(r,u),new Xn(this.value,c)}}fold(e){return this.fold_(vn(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((i,u)=>{r[i]=u.fold_(lr(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,vn(),t)}findOnPath_(e,t,r){const i=!!this.value&&r(t,this.value);if(i)return i;if(Xt(e))return null;{const u=Jt(e),c=this.children.get(u);return c?c.findOnPath_(Gn(e),lr(t,u),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,vn(),t)}foreachOnPath_(e,t,r){if(Xt(e))return this;{this.value&&r(t,this.value);const i=Jt(e),u=this.children.get(i);return u?u.foreachOnPath_(Gn(e),lr(t,i),r):new Xn(null)}}foreach(e){this.foreach_(vn(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(lr(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class uu{constructor(e){this.writeTree_=e}static empty(){return new uu(new Xn(null))}}function O0(n,e,t){if(Xt(e))return new uu(new Xn(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let u=r.value;const c=Cs(i,e);return u=u.updateChild(c,t),new uu(n.writeTree_.set(i,u))}{const i=new Xn(t),u=n.writeTree_.setTree(e,i);return new uu(u)}}}function vA(n,e,t){let r=n;return _i(t,(i,u)=>{r=O0(r,lr(e,i),u)}),r}function rN(n,e){if(Xt(e))return uu.empty();{const t=n.writeTree_.setTree(e,new Xn(null));return new uu(t)}}function EA(n,e){return null!=Mp(n,e)}function Mp(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(Cs(t.path,e)):null}function iN(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(Jn,(r,i)=>{e.push(new sn(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&e.push(new sn(r,i.value))}),e}function gh(n,e){if(Xt(e))return n;{const t=Mp(n,e);return new uu(null!=t?new Xn(t):n.writeTree_.subtree(e))}}function wA(n){return n.writeTree_.isEmpty()}function Jm(n,e){return sN(vn(),n.writeTree_,e)}function sN(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,u)=>{".priority"===i?((0,Q.hu)(null!==u.value,"Priority writes must always be leaf nodes"),r=u.value):t=sN(lr(n,i),u,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(lr(n,".priority"),r)),t}}function rC(n,e){return cN(e,n)}function fF(n,e){if(n.snap)return fa(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&fa(lr(n.path,t),e))return!0;return!1}function gF(n){return n.visible}function oN(n,e,t){let r=uu.empty();for(let i=0;i<n.length;++i){const u=n[i];if(e(u)){const c=u.path;let h;if(u.snap)fa(t,c)?(h=Cs(t,c),r=O0(r,h,u.snap)):fa(c,t)&&(h=Cs(c,t),r=O0(r,vn(),u.snap.getChild(h)));else{if(!u.children)throw(0,Q.g5)("WriteRecord should have .snap or .children");if(fa(t,c))h=Cs(t,c),r=vA(r,h,u.children);else if(fa(c,t))if(h=Cs(c,t),Xt(h))r=vA(r,vn(),u.children);else{const _=(0,Q.DV)(u.children,Jt(h));if(_){const w=_.getChild(Gn(h));r=O0(r,vn(),w)}}}}}return r}function aN(n,e,t,r,i){if(r||i){const u=gh(n.visibleWrites,e);return!i&&wA(u)?t:i||null!=t||EA(u,vn())?Jm(oN(n.allWrites,function(w){return(w.visible||i)&&(!r||!~r.indexOf(w.writeId))&&(fa(w.path,e)||fa(e,w.path))},e),t||Wt.EMPTY_NODE):null}{const u=Mp(n.visibleWrites,e);if(null!=u)return u;{const c=gh(n.visibleWrites,e);return wA(c)?t:null!=t||EA(c,vn())?Jm(c,t||Wt.EMPTY_NODE):null}}}function iC(n,e,t,r){return aN(n.writeTree,n.treePath,e,t,r)}function IA(n,e){return function mF(n,e,t){let r=Wt.EMPTY_NODE;const i=Mp(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(Jn,(u,c)=>{r=r.updateImmediateChild(u,c)}),r;if(t){const u=gh(n.visibleWrites,e);return t.forEachChild(Jn,(c,h)=>{const _=Jm(gh(u,new Tn(c)),h);r=r.updateImmediateChild(c,_)}),iN(u).forEach(c=>{r=r.updateImmediateChild(c.name,c.node)}),r}return iN(gh(n.visibleWrites,e)).forEach(c=>{r=r.updateImmediateChild(c.name,c.node)}),r}(n.writeTree,n.treePath,e)}function uN(n,e,t,r){return function _F(n,e,t,r,i){(0,Q.hu)(r||i,"Either existingEventSnap or existingServerSnap must exist");const u=lr(e,t);if(EA(n.visibleWrites,u))return null;{const c=gh(n.visibleWrites,u);return wA(c)?i.getChild(t):Jm(c,i.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function sC(n,e){return function vF(n,e){return Mp(n.visibleWrites,e)}(n.writeTree,lr(n.treePath,e))}function bA(n,e,t){return function yF(n,e,t,r){const i=lr(e,t),u=Mp(n.visibleWrites,i);return null!=u?u:r.isCompleteForChild(t)?Jm(gh(n.visibleWrites,i),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function lN(n,e){return cN(lr(n.treePath,e),n.writeTree)}function cN(n,e){return{treePath:n,writeTree:e}}class bF{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;(0,Q.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,Q.hu)(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const u=i.type;if("child_added"===t&&"child_removed"===u)this.changeMap.set(r,R0(r,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===u)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===u)this.changeMap.set(r,function x0(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}(r,i.oldSnap));else if("child_changed"===t&&"child_added"===u)this.changeMap.set(r,function Km(n,e){return{type:"child_added",snapshotNode:e,childName:n}}(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==u)throw(0,Q.g5)("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(r,R0(r,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const dN=new class CF{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class CA{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new ph(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return bA(this.writes_,e,r)}}getChildAfterChild(e,t,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Rp(this.viewCache_),u=function IF(n,e,t,r,i,u){return function EF(n,e,t,r,i,u,c){let h;const _=gh(n.visibleWrites,e),w=Mp(_,vn());if(null!=w)h=w;else{if(null==t)return[];h=Jm(_,t)}if(h=h.withIndex(c),h.isEmpty()||h.isLeafNode())return[];{const D=[],S=c.getCompare(),P=u?h.getReverseIteratorFrom(r,c):h.getIteratorFrom(r,c);let B=P.getNext();for(;B&&D.length<i;)0!==S(B,r)&&D.push(B),B=P.getNext();return D}}(n.writeTree,n.treePath,e,t,r,i,u)}(this.writes_,i,t,1,r,e);return 0===u.length?null:u[0]}}function hN(n,e,t,r,i,u){const c=e.eventCache;if(null!=sC(r,t))return e;{let h,_;if(Xt(t))if((0,Q.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const w=Rp(e),S=IA(r,w instanceof Wt?w:Wt.EMPTY_NODE);h=n.filter.updateFullNode(e.eventCache.getNode(),S,u)}else{const w=iC(r,Rp(e));h=n.filter.updateFullNode(e.eventCache.getNode(),w,u)}else{const w=Jt(t);if(".priority"===w){(0,Q.hu)(1===fh(t),"Can't have a priority with additional path components");const D=c.getNode();_=e.serverCache.getNode();const S=uN(r,t,D,_);h=null!=S?n.filter.updatePriority(D,S):c.getNode()}else{const D=Gn(t);let S;if(c.isCompleteForChild(w)){_=e.serverCache.getNode();const P=uN(r,t,c.getNode(),_);S=null!=P?c.getNode().getImmediateChild(w).updateChild(D,P):c.getNode().getImmediateChild(w)}else S=bA(r,w,e.serverCache);h=null!=S?n.filter.updateChild(c.getNode(),w,S,D,i,u):c.getNode()}}return k0(e,h,c.isFullyInitialized()||Xt(t),n.filter.filtersNodes())}}function oC(n,e,t,r,i,u,c,h){const _=e.serverCache;let w;const D=c?n.filter:n.filter.getIndexedFilter();if(Xt(t))w=D.updateFullNode(_.getNode(),r,null);else if(D.filtersNodes()&&!_.isFiltered()){const B=_.getNode().updateChild(t,r);w=D.updateFullNode(_.getNode(),B,null)}else{const B=Jt(t);if(!_.isCompleteForPath(t)&&fh(t)>1)return e;const Y=Gn(t),Ze=_.getNode().getImmediateChild(B).updateChild(Y,r);w=".priority"===B?D.updatePriority(_.getNode(),Ze):D.updateChild(_.getNode(),B,Ze,Y,dN,null)}const S=nN(e,w,_.isFullyInitialized()||Xt(t),D.filtersNodes());return hN(n,S,t,i,new CA(i,S,u),h)}function TA(n,e,t,r,i,u,c){const h=e.eventCache;let _,w;const D=new CA(i,e,u);if(Xt(t))w=n.filter.updateFullNode(e.eventCache.getNode(),r,c),_=k0(e,w,!0,n.filter.filtersNodes());else{const S=Jt(t);if(".priority"===S)w=n.filter.updatePriority(e.eventCache.getNode(),r),_=k0(e,w,h.isFullyInitialized(),h.isFiltered());else{const P=Gn(t),B=h.getNode().getImmediateChild(S);let Y;if(Xt(P))Y=r;else{const Re=D.getCompleteChild(S);Y=null!=Re?".priority"===eA(P)&&Re.getChild(UM(P)).isEmpty()?Re:Re.updateChild(P,r):Wt.EMPTY_NODE}_=B.equals(Y)?e:k0(e,n.filter.updateChild(h.getNode(),S,Y,P,D,c),h.isFullyInitialized(),n.filter.filtersNodes())}}return _}function fN(n,e){return n.eventCache.isCompleteForChild(e)}function pN(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function DA(n,e,t,r,i,u,c,h){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let w,_=e;w=Xt(t)?r:new Xn(null).setTree(t,r);const D=e.serverCache.getNode();return w.children.inorderTraversal((S,P)=>{if(D.hasChild(S)){const Y=pN(0,e.serverCache.getNode().getImmediateChild(S),P);_=oC(n,_,new Tn(S),Y,i,u,c,h)}}),w.children.inorderTraversal((S,P)=>{const B=!e.serverCache.isCompleteForChild(S)&&void 0===P.value;if(!D.hasChild(S)&&!B){const Re=pN(0,e.serverCache.getNode().getImmediateChild(S),P);_=oC(n,_,new Tn(S),Re,i,u,c,h)}}),_}function FF(n,e){const t=Rp(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!Xt(e)&&!t.getImmediateChild(Jt(e)).isEmpty())?t.getChild(e):null}function _N(n,e,t,r){e.type===pa.MERGE&&null!==e.source.queryId&&((0,Q.hu)(Rp(n.viewCache_),"We should always have a full cache before handling merges"),(0,Q.hu)(nC(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,u=function SF(n,e,t,r,i){const u=new bF;let c,h;if(t.type===pa.OVERWRITE){const w=t;w.source.fromUser?c=TA(n,e,w.path,w.snap,r,i,u):((0,Q.hu)(w.source.fromServer,"Unknown source."),h=w.source.tagged||e.serverCache.isFiltered()&&!Xt(w.path),c=oC(n,e,w.path,w.snap,r,i,h,u))}else if(t.type===pa.MERGE){const w=t;w.source.fromUser?c=function xF(n,e,t,r,i,u,c){let h=e;return r.foreach((_,w)=>{const D=lr(t,_);fN(e,Jt(D))&&(h=TA(n,h,D,w,i,u,c))}),r.foreach((_,w)=>{const D=lr(t,_);fN(e,Jt(D))||(h=TA(n,h,D,w,i,u,c))}),h}(n,e,w.path,w.children,r,i,u):((0,Q.hu)(w.source.fromServer,"Unknown source."),h=w.source.tagged||e.serverCache.isFiltered(),c=DA(n,e,w.path,w.children,r,i,h,u))}else if(t.type===pa.ACK_USER_WRITE){const w=t;c=w.revert?function NF(n,e,t,r,i,u){let c;if(null!=sC(r,t))return e;{const h=new CA(r,e,i),_=e.eventCache.getNode();let w;if(Xt(t)||".priority"===Jt(t)){let D;if(e.serverCache.isFullyInitialized())D=iC(r,Rp(e));else{const S=e.serverCache.getNode();(0,Q.hu)(S instanceof Wt,"serverChildren would be complete if leaf node"),D=IA(r,S)}D=D,w=n.filter.updateFullNode(_,D,u)}else{const D=Jt(t);let S=bA(r,D,e.serverCache);null==S&&e.serverCache.isCompleteForChild(D)&&(S=_.getImmediateChild(D)),w=null!=S?n.filter.updateChild(_,D,S,Gn(t),h,u):e.eventCache.getNode().hasChild(D)?n.filter.updateChild(_,D,Wt.EMPTY_NODE,Gn(t),h,u):_,w.isEmpty()&&e.serverCache.isFullyInitialized()&&(c=iC(r,Rp(e)),c.isLeafNode()&&(w=n.filter.updateFullNode(w,c,u)))}return c=e.serverCache.isFullyInitialized()||null!=sC(r,vn()),k0(e,w,c,n.filter.filtersNodes())}}(n,e,w.path,r,i,u):function RF(n,e,t,r,i,u,c){if(null!=sC(i,t))return e;const h=e.serverCache.isFiltered(),_=e.serverCache;if(null!=r.value){if(Xt(t)&&_.isFullyInitialized()||_.isCompleteForPath(t))return oC(n,e,t,_.getNode().getChild(t),i,u,h,c);if(Xt(t)){let w=new Xn(null);return _.getNode().forEachChild(dl,(D,S)=>{w=w.set(new Tn(D),S)}),DA(n,e,t,w,i,u,h,c)}return e}{let w=new Xn(null);return r.foreach((D,S)=>{const P=lr(t,D);_.isCompleteForPath(P)&&(w=w.set(D,_.getNode().getChild(P)))}),DA(n,e,t,w,i,u,h,c)}}(n,e,w.path,w.affectedTree,r,i,u)}else{if(t.type!==pa.LISTEN_COMPLETE)throw(0,Q.g5)("Unknown operation type: "+t.type);c=function MF(n,e,t,r,i){const u=e.serverCache;return hN(n,nN(e,u.getNode(),u.isFullyInitialized()||Xt(t),u.isFiltered()),t,r,dN,i)}(n,e,t.path,r,u)}const _=u.getChanges();return function AF(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),u=nC(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(u)||!r.getNode().getPriority().equals(u.getPriority()))&&t.push(function JM(n){return{type:"value",snapshotNode:n}}(nC(e)))}}(e,c,_),{viewCache:c,changes:_}}(n.processor_,i,e,t,r);return function DF(n,e){(0,Q.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,Q.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,u.viewCache),(0,Q.hu)(u.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=u.viewCache,function yN(n,e,t,r){return function sF(n,e,t,r){const i=[],u=[];return e.forEach(c=>{"child_changed"===c.type&&n.index_.indexedValueChanged(c.oldSnap,c.snapshotNode)&&u.push(function zO(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(c.childName,c.snapshotNode))}),P0(n,i,"child_removed",e,r,t),P0(n,i,"child_added",e,r,t),P0(n,i,"child_moved",u,r,t),P0(n,i,"child_changed",e,r,t),P0(n,i,"value",e,r,t),i}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}(n,u.changes,u.viewCache.eventCache.getNode(),null)}let aC,lC;function SA(n,e,t,r){const i=e.source.queryId;if(null!==i){const u=n.views.get(i);return(0,Q.hu)(null!=u,"SyncTree gave us an op for an invalid query."),_N(u,e,t,r)}{let u=[];for(const c of n.views.values())u=u.concat(_N(c,e,t,r));return u}}function mh(n,e){let t=null;for(const r of n.views.values())t=t||FF(r,e);return t}class CN{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Xn(null),this.pendingWriteTree_=function wF(){return{visibleWrites:uu.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function AA(n,e,t,r,i){return function lF(n,e,t,r,i){(0,Q.hu)(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=O0(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,i),i?Xm(n,new xp({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function yh(n,e,t=!1){const r=function dF(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function hF(n,e){const t=n.allWrites.findIndex(h=>h.writeId===e);(0,Q.hu)(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,u=!1,c=n.allWrites.length-1;for(;i&&c>=0;){const h=n.allWrites[c];h.visible&&(c>=t&&fF(h,r.path)?i=!1:fa(r.path,h.path)&&(u=!0)),c--}return!!i&&(u?(function pF(n){n.visibleWrites=oN(n.allWrites,gF,vn()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=rN(n.visibleWrites,r.path):_i(r.children,_=>{n.visibleWrites=rN(n.visibleWrites,lr(r.path,_))}),!0))}(n.pendingWriteTree_,e)){let u=new Xn(null);return null!=r.snap?u=u.set(vn(),!0):_i(r.children,c=>{u=u.set(new Tn(c),!0)}),Xm(n,new eC(r.path,u,t))}return[]}function F0(n,e,t){return Xm(n,new xp({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function cC(n,e,t){const i=n.pendingWriteTree_,u=n.syncPointTree_.findOnPath(e,(c,h)=>{const w=mh(h,Cs(c,e));if(w)return w});return aN(i,e,u,t,!0)}function Xm(n,e){return DN(e,n.syncPointTree_,null,rC(n.pendingWriteTree_,vn()))}function DN(n,e,t,r){if(Xt(n.path))return SN(n,e,t,r);{const i=e.get(vn());null==t&&null!=i&&(t=mh(i,vn()));let u=[];const c=Jt(n.path),h=n.operationForChild(c),_=e.children.get(c);if(_&&h){const w=t?t.getImmediateChild(c):null,D=lN(r,c);u=u.concat(DN(h,_,w,D))}return i&&(u=u.concat(SA(i,n,r,t))),u}}function SN(n,e,t,r){const i=e.get(vn());null==t&&null!=i&&(t=mh(i,vn()));let u=[];return e.children.inorderTraversal((c,h)=>{const _=t?t.getImmediateChild(c):null,w=lN(r,c),D=n.operationForChild(c);D&&(u=u.concat(SN(D,h,_,w)))}),i&&(u=u.concat(SA(i,n,r,t))),u}function RA(n,e){return n.tagToQueryMap.get(e)}function MA(n){const e=n.indexOf("$");return(0,Q.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new Tn(n.substr(0,e))}}function NA(n,e,t){const r=n.syncPointTree_.get(e);return(0,Q.hu)(r,"Missing sync point for query tag that we're tracking"),SA(r,t,rC(n.pendingWriteTree_,e),null)}class PA{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new PA(t)}node(){return this.node_}}class kA{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=lr(this.path_,e);return new kA(this.syncTree_,t)}node(){return cC(this.syncTree_,this.path_)}}const xN=function(n,e,t){return n&&"object"==typeof n?((0,Q.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?sL(n[".sv"],e,t):"object"==typeof n[".sv"]?oL(n[".sv"],e):void(0,Q.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},sL=function(n,e,t){if("timestamp"===n)return t.timestamp;(0,Q.hu)(!1,"Unexpected server value: "+n)},oL=function(n,e,t){n.hasOwnProperty("increment")||(0,Q.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&(0,Q.hu)(!1,"Unexpected increment value: "+r);const i=e.node();if((0,Q.hu)(null!=i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const c=i.getValue();return"number"!=typeof c?r:c+r},OA=function(n,e,t){return FA(n,new PA(e),t)};function FA(n,e,t){const r=n.getPriority().val(),i=xN(r,e.getImmediateChild(".priority"),t);let u;if(n.isLeafNode()){const c=n,h=xN(c.getValue(),e,t);return h!==c.getValue()||i!==c.getPriority().val()?new Gm(h,br(i)):n}{const c=n;return u=c,i!==c.getPriority().val()&&(u=u.updatePriority(new Gm(i))),c.forEachChild(Jn,(h,_)=>{const w=FA(_,e.getImmediateChild(h),t);w!==_&&(u=u.updateImmediateChild(h,w))}),u}}class LA{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function fC(n,e){let t=e instanceof Tn?e:new Tn(e),r=n,i=Jt(t);for(;null!==i;){const u=(0,Q.DV)(r.node.children,i)||{children:{},childCount:0};r=new LA(i,r,u),t=Gn(t),i=Jt(t)}return r}function Np(n){return n.node.value}function UA(n,e){n.node.value=e,VA(n)}function MN(n){return n.node.childCount>0}function pC(n,e){_i(n.node.children,(t,r)=>{e(new LA(t,n,r))})}function NN(n,e,t,r){t&&!r&&e(n),pC(n,i=>{NN(i,e,!0,r)}),t&&r&&e(n)}function U0(n){return new Tn(null===n.parent?n.name:U0(n.parent)+"/"+n.name)}function VA(n){null!==n.parent&&function lL(n,e,t){const r=function aL(n){return void 0===Np(n)&&!MN(n)}(t),i=(0,Q.r3)(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,VA(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,VA(n))}(n.parent,n.name,n)}const cL=/[\[\].#$\/\u0000-\u001F\u007F]/,dL=/[\[\].#$\u0000-\u001F\u007F]/,BA=10485760,gC=function(n){return"string"==typeof n&&0!==n.length&&!cL.test(n)},B0=function(n,e,t){const r=t instanceof Tn?new TO(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+Sp(r));if("function"==typeof e)throw new Error(n+"contains a function "+Sp(r)+" with contents = "+e.toString());if($b(e))throw new Error(n+"contains "+e.toString()+" "+Sp(r));if("string"==typeof e&&e.length>BA/3&&(0,Q.ug)(e)>BA)throw new Error(n+"contains a string greater than "+BA+" utf8 bytes "+Sp(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let i=!1,u=!1;if(_i(e,(c,h)=>{if(".value"===c)i=!0;else if(".priority"!==c&&".sv"!==c&&(u=!0,!gC(c)))throw new Error(n+" contains an invalid key ("+c+") "+Sp(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function DO(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,Q.ug)(e),VM(n)})(r,c),B0(n,h,r),function SO(n){const e=n.parts_.pop();n.byteLength_-=(0,Q.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),i&&u)throw new Error(n+' contains ".value" child '+Sp(r)+" in addition to actual children.")}},ON=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!gC(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),function(n){return"string"==typeof n&&0!==n.length&&!dL.test(n)}(n)}(t))throw new Error((0,Q.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class gL{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function ga(n,e,t){(function mC(n,e){let t=null;for(let r=0;r<e.length;r++){const i=e[r],u=i.getPath();null!==t&&!tA(u,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:u}),t.events.push(i)}t&&n.eventLists_.push(t)})(n,t),function FN(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];i&&(e(i.path)?(mL(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}(n,r=>fa(r,e)||fa(e,r))}function mL(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();Tp&&mi("event: "+t.toString()),Wm(r)}}}class yL{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new gL,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Xb(),this.transactionQueueTree_=new LA,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function UN(n){const t=n.infoData_.getNode(new Tn(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function $0(n){return function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n}({timestamp:UN(n)})}function VN(n,e,t,r,i){n.dataUpdateCount++;const u=new Tn(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let c=[];if(i)if(r){const _=(0,Q.UI)(t,w=>br(w));c=function JF(n,e,t,r){const i=RA(n,r);if(i){const u=MA(i),c=u.path,h=u.queryId,_=Cs(c,e),w=Xn.fromObject(t);return NA(n,c,new Qm(_A(h),_,w))}return[]}(n.serverSyncTree_,u,_,i)}else{const _=br(t);c=function QF(n,e,t,r){const i=RA(n,r);if(null!=i){const u=MA(i),c=u.path,h=u.queryId,_=Cs(c,e);return NA(n,c,new xp(_A(h),_,t))}return[]}(n.serverSyncTree_,u,_,i)}else if(r){const _=(0,Q.UI)(t,w=>br(w));c=function ZF(n,e,t){const r=Xn.fromObject(t);return Xm(n,new Qm({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,u,_)}else{const _=br(t);c=F0(n.serverSyncTree_,u,_)}let h=u;c.length>0&&(h=t_(n,u)),ga(n.eventQueue_,h,c)}function BN(n,e){WA(n,"connected",e),!1===e&&function bL(n){e_(n,"onDisconnectEvents");const e=$0(n),t=Xb();pA(n.onDisconnect_,vn(),(i,u)=>{const c=function(n,e,t,r){return FA(e,new kA(t,n),r)}(i,u,n.serverSyncTree_,e);Ym(t,i,c)});let r=[];pA(t,vn(),(i,u)=>{r=r.concat(F0(n.serverSyncTree_,i,u));const c=function ZA(n,e){const t=U0(HN(n,e)),r=fC(n.transactionQueueTree_,e);return function uL(n,e,t){let r=t?n:n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,i=>{KA(n,i)}),KA(n,r),NN(r,i=>{KA(n,i)}),t}(n,i);t_(n,c)}),n.onDisconnect_=Xb(),ga(n.eventQueue_,vn(),r)}(n)}function WA(n,e,t){const r=new Tn("/.info/"+e),i=br(t);n.infoData_.updateSnapshot(r,i);const u=F0(n.infoSyncTree_,r,i);ga(n.eventQueue_,r,u)}function _C(n){return n.nextWriteId_++}function e_(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),mi(t,...e)}function qA(n,e,t){return cC(n.serverSyncTree_,e,t)||Wt.EMPTY_NODE}function yC(n,e=n.transactionQueueTree_){if(e||vC(n,e),Np(e)){const t=WN(n,e);(0,Q.hu)(t.length>0,"Sending zero length transaction queue"),t.every(i=>0===i.status)&&function RL(n,e,t){const r=t.map(w=>w.currentWriteId),i=qA(n,e,r);let u=i;const c=i.hash();for(let w=0;w<t.length;w++){const D=t[w];(0,Q.hu)(0===D.status,"tryToSendTransactionQueue_: items in queue should all be run."),D.status=1,D.retryCount++;const S=Cs(e,D.path);u=u.updateChild(S,D.currentOutputSnapshotRaw)}const h=u.val(!0),_=e;n.server_.put(_.toString(),h,w=>{e_(n,"transaction put response",{path:_.toString(),status:w});let D=[];if("ok"===w){const S=[];for(let P=0;P<t.length;P++)t[P].status=2,D=D.concat(yh(n.serverSyncTree_,t[P].currentWriteId)),t[P].onComplete&&S.push(()=>t[P].onComplete(null,!0,t[P].currentOutputSnapshotResolved)),t[P].unwatcher();vC(n,fC(n.transactionQueueTree_,e)),yC(n,n.transactionQueueTree_),ga(n.eventQueue_,e,D);for(let P=0;P<S.length;P++)Wm(S[P])}else{if("datastale"===w)for(let S=0;S<t.length;S++)t[S].status=3===t[S].status?4:0;else{Xi("transaction at "+_.toString()+" failed: "+w);for(let S=0;S<t.length;S++)t[S].status=4,t[S].abortReason=w}t_(n,e)}},c)}(n,U0(e),t)}else MN(e)&&pC(e,t=>{yC(n,t)})}function t_(n,e){const t=HN(n,e),r=U0(t);return function ML(n,e,t){if(0===e.length)return;const r=[];let i=[];const c=e.filter(h=>0===h.status).map(h=>h.currentWriteId);for(let h=0;h<e.length;h++){const _=e[h],w=Cs(t,_.path);let S,D=!1;if((0,Q.hu)(null!==w,"rerunTransactionsUnderNode_: relativePath should not be null."),4===_.status)D=!0,S=_.abortReason,i=i.concat(yh(n.serverSyncTree_,_.currentWriteId,!0));else if(0===_.status)if(_.retryCount>=25)D=!0,S="maxretry",i=i.concat(yh(n.serverSyncTree_,_.currentWriteId,!0));else{const P=qA(n,_.path,c);_.currentInputSnapshot=P;const B=e[h].update(P.val());if(void 0!==B){B0("transaction failed: Data returned ",B,_.path);let Y=br(B);"object"==typeof B&&null!=B&&(0,Q.r3)(B,".priority")||(Y=Y.updatePriority(P.getPriority()));const Ze=_.currentWriteId,qt=$0(n),zt=OA(Y,P,qt);_.currentOutputSnapshotRaw=Y,_.currentOutputSnapshotResolved=zt,_.currentWriteId=_C(n),c.splice(c.indexOf(Ze),1),i=i.concat(AA(n.serverSyncTree_,_.path,zt,_.currentWriteId,_.applyLocally)),i=i.concat(yh(n.serverSyncTree_,Ze,!0))}else D=!0,S="nodata",i=i.concat(yh(n.serverSyncTree_,_.currentWriteId,!0))}ga(n.eventQueue_,t,i),i=[],D&&(e[h].status=2,setTimeout(e[h].unwatcher,Math.floor(0)),e[h].onComplete&&r.push("nodata"===S?()=>e[h].onComplete(null,!1,e[h].currentInputSnapshot):()=>e[h].onComplete(new Error(S),!1,null)))}vC(n,n.transactionQueueTree_);for(let h=0;h<r.length;h++)Wm(r[h]);yC(n,n.transactionQueueTree_)}(n,WN(n,t),r),r}function HN(n,e){let t,r=n.transactionQueueTree_;for(t=Jt(e);null!==t&&void 0===Np(r);)r=fC(r,t),t=Jt(e=Gn(e));return r}function WN(n,e){const t=[];return zN(n,e,t),t.sort((r,i)=>r.order-i.order),t}function zN(n,e,t){const r=Np(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);pC(e,i=>{zN(n,i,t)})}function vC(n,e){const t=Np(e);if(t){let r=0;for(let i=0;i<t.length;i++)2!==t[i].status&&(t[r]=t[i],r++);t.length=r,UA(e,t.length>0?t:void 0)}pC(e,r=>{vC(n,r)})}function KA(n,e){const t=Np(e);if(t){const r=[];let i=[],u=-1;for(let c=0;c<t.length;c++)3===t[c].status||(1===t[c].status?((0,Q.hu)(u===c-1,"All SENT items should be at beginning of queue."),u=c,t[c].status=3,t[c].abortReason="set"):((0,Q.hu)(0===t[c].status,"Unexpected transaction status in abort"),t[c].unwatcher(),i=i.concat(yh(n.serverSyncTree_,t[c].currentWriteId,!0)),t[c].onComplete&&r.push(t[c].onComplete.bind(null,new Error("set"),!1,null))));-1===u?UA(e,void 0):t.length=u+1,ga(n.eventQueue_,U0(e),i);for(let c=0;c<r.length;c++)Wm(r[c])}}const YA=function(n,e){const t=kL(n),r=t.namespace;return"firebase.com"===t.domain&&ll(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&ll("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Xi("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new ZS(t.host,t.secure,r,"ws"===t.scheme||"wss"===t.scheme,e,"",r!==t.subdomain),path:new Tn(t.pathString)}},kL=function(n){let e="",t="",r="",i="",u="",c=!0,h="https",_=443;if("string"==typeof n){let w=n.indexOf("//");w>=0&&(h=n.substring(0,w-1),n=n.substring(w+2));let D=n.indexOf("/");-1===D&&(D=n.length);let S=n.indexOf("?");-1===S&&(S=n.length),e=n.substring(0,Math.min(D,S)),D<S&&(i=function NL(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(u){}e+="/"+i}return e}(n.substring(D,S)));const P=function PL(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Xi(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,S)));w=e.indexOf(":"),w>=0?(c="https"===h||"wss"===h,_=parseInt(e.substring(w+1),10)):w=e.length;const B=e.slice(0,w);if("localhost"===B.toLowerCase())t="localhost";else if(B.split(".").length<=2)t=B;else{const Y=e.indexOf(".");r=e.substring(0,Y).toLowerCase(),t=e.substring(Y+1),u=r}"ns"in P&&(u=P.ns)}return{host:e,port:_,domain:t,subdomain:r,secure:c,scheme:h,pathString:i,namespace:u}};class xo{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return Xt(this._path)?null:eA(this._path)}get ref(){return new lu(this._repo,this._path)}get _queryIdentifier(){const e=eN(this._queryParams),t=zS(e);return"{}"===t?"default":t}get _queryObject(){return eN(this._queryParams)}isEqual(e){if(!((e=(0,Q.m9)(e))instanceof xo))return!1;const t=this._repo===e._repo,r=tA(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function bO(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}class lu extends xo{constructor(e,t){super(e,t,new cA,!1)}get parent(){const e=UM(this._path);return null===e?null:new lu(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}(function VF(n){(0,Q.hu)(!aC,"__referenceConstructor has already been defined"),aC=n})(lu),function WF(n){(0,Q.hu)(!lC,"__referenceConstructor has already been defined"),lC=n}(lu);const QA={};class XL{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function vL(n,e,t){if(n.stats_=QS(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new Jb(n.repoInfo_,(r,i,u,c)=>{VN(n,r,i,u,c)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>BN(n,!0),0);else{if(null!=t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,Q.Pz)(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new Ap(n.repoInfo_,e,(r,i,u,c)=>{VN(n,r,i,u,c)},r=>{BN(n,r)},r=>{!function EL(n,e){_i(e,(t,r)=>{WA(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function tO(n,e){const t=n.toString();return YS[t]||(YS[t]=e()),YS[t]}(n.repoInfo_,()=>new rF(n.stats_,n.server_)),n.infoData_=new JO,n.infoSyncTree_=new CN({startListening:(r,i,u,c)=>{let h=[];const _=n.infoData_.getNode(r._path);return _.isEmpty()||(h=F0(n.infoSyncTree_,r._path,_),setTimeout(()=>{c("ok")},0)),h},stopListening:()=>{}}),WA(n,"connected",!1),n.serverSyncTree_=new CN({startListening:(r,i,u,c)=>(n.server_.listen(r,u,i,(h,_)=>{const w=c(h,_);ga(n.eventQueue_,r._path,w)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new lu(this._repo,vn())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function YL(n,e){const t=QA[e];(!t||t[n.key]!==n)&&ll(`Database ${e}(${n.repoInfo_}) has already been deleted.`),function $N(n){n.persistentConnection_&&n.persistentConnection_.interrupt("repo_interrupt")}(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&ll("Cannot call "+e+" on a deleted database.")}}function eU(n=(0,Si.getApp)(),e){return(0,Si._getProvider)(n,"database").getImmediate({identifier:e})}Ap.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},Ap.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function tU(n){(function Bk(n){$S=n})(Si.SDK_VERSION),(0,Si._registerComponent)(new dd.wA("database",(e,{instanceIdentifier:t})=>function KL(n,e,t,r,i){let u=r||n.options.databaseURL;void 0===u&&(n.options.projectId||ll("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),mi("Using default host for project ",n.options.projectId),u=`${n.options.projectId}-default-rtdb.firebaseio.com`);let _,w,c=YA(u,i),h=c.repoInfo;"undefined"!=typeof process&&process.env&&(w=process.env.FIREBASE_DATABASE_EMULATOR_HOST),w?(_=!0,u=`http://${w}?ns=${h.namespace}`,c=YA(u,i),h=c.repoInfo):_=!c.repoInfo.secure;const D=i&&_?new C0(C0.OWNER):new Jk(n.name,n.options,e);ON("Invalid Firebase Database URL",c),Xt(c.path)||ll("Database URL must point to the root of a Firebase Database (not including a child path).");const S=function QL(n,e,t,r){let i=QA[e.name];i||(i={},QA[e.name]=i);let u=i[n.toURLString()];return u&&ll("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),u=new yL(n,!1,t,r),i[n.toURLString()]=u,u}(h,n,D,new Qk(n.name,t));return new XL(S,n)}(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,Si.registerVersion)(eM,"0.13.0",n),(0,Si.registerVersion)(eM,"0.13.0","esm2017")}();class JA{constructor(e){return e}}const eP="database",XA=new g.OlP("angularfire2.database-instances");function oU(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new JA(r)}}const aU={provide:class iU{constructor(){return(0,nn.vb)(eP)}},deps:[[new g.FiY,XA]]},uU={provide:JA,useFactory:function sU(n,e){const t=(0,nn.JM)(eP,n,e);return t&&new JA(t)},deps:[[new g.FiY,XA],bp]};let lU=(()=>{class n{constructor(){(0,xc.KN)("angularfire",nn.q4.full,"rtdb")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({providers:[uU,aU]}),n})();function cU(n,...e){return{ngModule:lU,providers:[{provide:XA,useFactory:oU(n),multi:!0,deps:[g.R0b,g.zs3,nn.HU,Pb,[new g.FiY,BS],[new g.FiY,jm],...e]}]}}const dU=(0,nn.u3)(eU,!0);class ex{constructor(e){return e}}const tP="firestore",tx=new g.OlP("angularfire2.firestore-instances");function pU(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new ex(r)}}const gU={provide:class hU{constructor(){return(0,nn.vb)(tP)}},deps:[[new g.FiY,tx]]},mU={provide:ex,useFactory:function fU(n,e){const t=(0,nn.JM)(tP,n,e);return t&&new ex(t)},deps:[[new g.FiY,tx],bp]};let nP=(()=>{class n{constructor(){(0,xc.KN)("angularfire",nn.q4.full,"fst")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({providers:[mU,gU]}),n})();function _U(n,...e){return{ngModule:nP,providers:[{provide:tx,useFactory:pU(n),multi:!0,deps:[g.R0b,g.zs3,nn.HU,Pb,[new g.FiY,BS],[new g.FiY,jm],...e]}]}}const yU=(0,nn.u3)(Qt,!0);let vU=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n,bootstrap:[Mk]}),n.\u0275inj=g.cJS({providers:[$m],imports:[[wl,xk,Vs.hO.initializeApp(US_firebase),nP,dk,l1(()=>c1(US_firebase)),cU(()=>dU()),Uk(()=>Vk()),_U(()=>yU())]]}),n})();(0,g.G48)(),qc().bootstrapModule(vU).catch(n=>console.error(n))},5867:(nt,De,k)=>{k.d(De,{C6:()=>g.getApps,KN:()=>g.registerVersion,Mq:()=>g.getApp,ZF:()=>g.initializeApp});var g=k(9681);(0,g.registerVersion)("firebase","9.8.1","app")},127:(nt,De,k)=>{k.d(De,{Z:()=>g.Z});var g=k(3942);g.Z.registerVersion("firebase","9.8.1","app-compat")},5881:(nt,De,k)=>{k.r(De);var g=k(5861),U=k(3942),N=k(198),ae=k(2090),pe=(k(9681),k(1877),k(4859));function le(){return window}function j(){return(j=(0,g.Z)(function*(ce,Z,G){var Ae;const{BuildInfo:Ke}=le();(0,N.aq)(Z.sessionId,"AuthEvent did not contain a session ID");const lt=yield Se(Z.sessionId),Dt={};return(0,N.ar)()?Dt.ibi=Ke.packageName:(0,N.as)()?Dt.apn=Ke.packageName:(0,N.at)(ce,"operation-not-supported-in-this-environment"),Ke.displayName&&(Dt.appDisplayName=Ke.displayName),Dt.sessionId=lt,(0,N.au)(ce,G,Z.type,void 0,null!==(Ae=Z.eventId)&&void 0!==Ae?Ae:void 0,Dt)})).apply(this,arguments)}function Ge(){return(Ge=(0,g.Z)(function*(ce){const{BuildInfo:Z}=le(),G={};(0,N.ar)()?G.iosBundleId=Z.packageName:(0,N.as)()?G.androidPackageName=Z.packageName:(0,N.at)(ce,"operation-not-supported-in-this-environment"),yield(0,N.av)(ce,G)})).apply(this,arguments)}function He(){return(He=(0,g.Z)(function*(ce,Z,G){const{cordova:Ae}=le();let Ke=()=>{};try{yield new Promise((lt,Dt)=>{let Gt=null;function Lt(){var Ut;lt();const Rr=null===(Ut=Ae.plugins.browsertab)||void 0===Ut?void 0:Ut.close;"function"==typeof Rr&&Rr(),"function"==typeof(null==G?void 0:G.close)&&G.close()}function Zn(){Gt||(Gt=window.setTimeout(()=>{Dt((0,N.aw)(ce,"redirect-cancelled-by-user"))},2e3))}function Jr(){"visible"===(null==document?void 0:document.visibilityState)&&Zn()}Z.addPassiveListener(Lt),document.addEventListener("resume",Zn,!1),(0,N.as)()&&document.addEventListener("visibilitychange",Jr,!1),Ke=()=>{Z.removePassiveListener(Lt),document.removeEventListener("resume",Zn,!1),document.removeEventListener("visibilitychange",Jr,!1),Gt&&window.clearTimeout(Gt)}})}finally{Ke()}})).apply(this,arguments)}function Se(ce){return ze.apply(this,arguments)}function ze(){return(ze=(0,g.Z)(function*(ce){const Z=We(ce),G=yield crypto.subtle.digest("SHA-256",Z);return Array.from(new Uint8Array(G)).map(Ke=>Ke.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function We(ce){if((0,N.aq)(/[0-9a-zA-Z]+/.test(ce),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(ce);const Z=new ArrayBuffer(ce.length),G=new Uint8Array(Z);for(let Ae=0;Ae<ce.length;Ae++)G[Ae]=ce.charCodeAt(Ae);return G}class ke extends N.aA{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(Z=>{this.resolveInialized=Z})}addPassiveListener(Z){this.passiveListeners.add(Z)}removePassiveListener(Z){this.passiveListeners.delete(Z)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(Z){return this.resolveInialized(),this.passiveListeners.forEach(G=>G(Z)),super.onEvent(Z)}initialized(){var Z=this;return(0,g.Z)(function*(){yield Z.initPromise})()}}function ne(ce){return fe.apply(this,arguments)}function fe(){return(fe=(0,g.Z)(function*(ce){const Z=yield re()._get(oe(ce));return Z&&(yield re()._remove(oe(ce))),Z})).apply(this,arguments)}function K(){const ce=[],Z="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let G=0;G<20;G++){const Ae=Math.floor(Math.random()*Z.length);ce.push(Z.charAt(Ae))}return ce.join("")}function re(){return(0,N.ay)(N.b)}function oe(ce){return(0,N.az)("authEvent",ce.config.apiKey,ce.name)}function Ve(ce){if(!(null==ce?void 0:ce.includes("?")))return{};const[Z,...G]=ce.split("?");return(0,ae.zd)(G.join("?"))}function Ye(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,N.aw)("no-auth-event")}}function Bt(){var ce;return(null===(ce=null==self?void 0:self.location)||void 0===ce?void 0:ce.protocol)||null}function In(ce=(0,ae.z$)()){return!("file:"!==Bt()&&"ionic:"!==Bt()||!ce.toLowerCase().match(/iphone|ipad|ipod|android/))}function ai(){try{const ce=self.localStorage,Z=N.aI();if(ce)return ce.setItem(Z,"1"),ce.removeItem(Z),!function Fi(ce=(0,ae.z$)()){return function Ar(){return(0,ae.w1)()&&11===(null==document?void 0:document.documentMode)}()||function Dn(ce=(0,ae.z$)()){return/Edge\/\d+/.test(ce)}(ce)}()||(0,ae.hl)()}catch(ce){return vi()&&(0,ae.hl)()}return!1}function vi(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function qn(){return(function Yt(){return"http:"===Bt()||"https:"===Bt()}()||(0,ae.ru)()||In())&&!function yi(){return(0,ae.b$)()||(0,ae.UG)()}()&&ai()&&!vi()}function Li(){return In()&&"undefined"!=typeof document}function Vr(){return(Vr=(0,g.Z)(function*(){return!!Li()&&new Promise(ce=>{const Z=setTimeout(()=>{ce(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(Z),ce(!0)})})})).apply(this,arguments)}const tn={LOCAL:"local",NONE:"none",SESSION:"session"},xr=N.ax,ir="persistence";function bn(ce){return cr.apply(this,arguments)}function cr(){return(cr=(0,g.Z)(function*(ce){yield ce._initializationPromise;const Z=jt(),G=N.az(ir,ce.config.apiKey,ce.name);Z&&Z.setItem(G,ce._getPersistence())})).apply(this,arguments)}function jt(){var ce;try{return(null===(ce=function En(){return"undefined"!=typeof window?window:null}())||void 0===ce?void 0:ce.sessionStorage)||null}catch(Z){return null}}const ct=N.ax;class it{constructor(){this.browserResolver=N.ay(N.k),this.cordovaResolver=N.ay(class Kt{constructor(){this._redirectPersistence=N.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=N.aB,this._overrideRedirectResult=N.aC}_initialize(Z){var G=this;return(0,g.Z)(function*(){const Ae=Z._key();let Ke=G.eventManagers.get(Ae);return Ke||(Ke=new ke(Z),G.eventManagers.set(Ae,Ke),G.attachCallbackListeners(Z,Ke)),Ke})()}_openPopup(Z){(0,N.at)(Z,"operation-not-supported-in-this-environment")}_openRedirect(Z,G,Ae,Ke){var lt=this;return(0,g.Z)(function*(){!function _e(ce){var Z,G,Ae,Ke,lt,Dt,Gt,Lt,Zn,Jr;const Ut=le();(0,N.ax)("function"==typeof(null===(Z=null==Ut?void 0:Ut.universalLinks)||void 0===Z?void 0:Z.subscribe),ce,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,N.ax)(void 0!==(null===(G=null==Ut?void 0:Ut.BuildInfo)||void 0===G?void 0:G.packageName),ce,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,N.ax)("function"==typeof(null===(lt=null===(Ke=null===(Ae=null==Ut?void 0:Ut.cordova)||void 0===Ae?void 0:Ae.plugins)||void 0===Ke?void 0:Ke.browsertab)||void 0===lt?void 0:lt.openUrl),ce,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,N.ax)("function"==typeof(null===(Lt=null===(Gt=null===(Dt=null==Ut?void 0:Ut.cordova)||void 0===Dt?void 0:Dt.plugins)||void 0===Gt?void 0:Gt.browsertab)||void 0===Lt?void 0:Lt.isAvailable),ce,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,N.ax)("function"==typeof(null===(Jr=null===(Zn=null==Ut?void 0:Ut.cordova)||void 0===Zn?void 0:Zn.InAppBrowser)||void 0===Jr?void 0:Jr.open),ce,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(Z);const Dt=yield lt._initialize(Z);yield Dt.initialized(),Dt.resetRedirect(),(0,N.aD)(),yield lt._originValidation(Z);const Gt=function be(ce,Z,G=null){return{type:Z,eventId:G,urlResponse:null,sessionId:K(),postBody:null,tenantId:ce.tenantId,error:(0,N.aw)(ce,"no-auth-event")}}(Z,Ae,Ke);yield function qe(ce,Z){return re()._set(oe(ce),Z)}(Z,Gt);const Lt=yield function W(ce,Z,G){return j.apply(this,arguments)}(Z,Gt,G),Zn=yield function Ne(ce){const{cordova:Z}=le();return new Promise(G=>{Z.plugins.browsertab.isAvailable(Ae=>{let Ke=null;Ae?Z.plugins.browsertab.openUrl(ce):Ke=Z.InAppBrowser.open(ce,(0,N.ap)()?"_blank":"_system","location=yes"),G(Ke)})})}(Lt);return function Ue(ce,Z,G){return He.apply(this,arguments)}(Z,Dt,Zn)})()}_isIframeWebStorageSupported(Z,G){throw new Error("Method not implemented.")}_originValidation(Z){const G=Z._key();return this.originValidationPromises[G]||(this.originValidationPromises[G]=function se(ce){return Ge.apply(this,arguments)}(Z)),this.originValidationPromises[G]}attachCallbackListeners(Z,G){const{universalLinks:Ae,handleOpenURL:Ke,BuildInfo:lt}=le(),Dt=setTimeout((0,g.Z)(function*(){yield ne(Z),G.onEvent(Ye())}),500),Gt=function(){var Jr=(0,g.Z)(function*(Ut){clearTimeout(Dt);const Rr=yield ne(Z);let Vi=null;Rr&&(null==Ut?void 0:Ut.url)&&(Vi=function Ce(ce,Z){var G,Ae;const Ke=function de(ce){const Z=Ve(ce),G=Z.link?decodeURIComponent(Z.link):void 0,Ae=Ve(G).link,Ke=Z.deep_link_id?decodeURIComponent(Z.deep_link_id):void 0;return Ve(Ke).link||Ke||Ae||G||ce}(Z);if(Ke.includes("/__/auth/callback")){const lt=Ve(Ke),Dt=lt.firebaseError?function we(ce){try{return JSON.parse(ce)}catch(Z){return null}}(decodeURIComponent(lt.firebaseError)):null,Gt=null===(Ae=null===(G=null==Dt?void 0:Dt.code)||void 0===G?void 0:G.split("auth/"))||void 0===Ae?void 0:Ae[1],Lt=Gt?(0,N.aw)(Gt):null;return Lt?{type:ce.type,eventId:ce.eventId,tenantId:ce.tenantId,error:Lt,urlResponse:null,sessionId:null,postBody:null}:{type:ce.type,eventId:ce.eventId,tenantId:ce.tenantId,sessionId:ce.sessionId,urlResponse:Ke,postBody:null}}return null}(Rr,Ut.url)),G.onEvent(Vi||Ye())});return function(Rr){return Jr.apply(this,arguments)}}();void 0!==Ae&&"function"==typeof Ae.subscribe&&Ae.subscribe(null,Gt);const Lt=Ke,Zn=`${lt.packageName.toLowerCase()}://`;le().handleOpenURL=function(){var Jr=(0,g.Z)(function*(Ut){if(Ut.toLowerCase().startsWith(Zn)&&Gt({url:Ut}),"function"==typeof Lt)try{Lt(Ut)}catch(Rr){console.error(Rr)}});return function(Ut){return Jr.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=N.a,this._completeRedirectFn=N.aB,this._overrideRedirectResult=N.aC}_initialize(Z){var G=this;return(0,g.Z)(function*(){return yield G.selectUnderlyingResolver(),G.assertedUnderlyingResolver._initialize(Z)})()}_openPopup(Z,G,Ae,Ke){var lt=this;return(0,g.Z)(function*(){return yield lt.selectUnderlyingResolver(),lt.assertedUnderlyingResolver._openPopup(Z,G,Ae,Ke)})()}_openRedirect(Z,G,Ae,Ke){var lt=this;return(0,g.Z)(function*(){return yield lt.selectUnderlyingResolver(),lt.assertedUnderlyingResolver._openRedirect(Z,G,Ae,Ke)})()}_isIframeWebStorageSupported(Z,G){this.assertedUnderlyingResolver._isIframeWebStorageSupported(Z,G)}_originValidation(Z){return this.assertedUnderlyingResolver._originValidation(Z)}get _shouldInitProactively(){return Li()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return ct(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var Z=this;return(0,g.Z)(function*(){if(Z.underlyingResolver)return;const G=yield function ft(){return Vr.apply(this,arguments)}();Z.underlyingResolver=G?Z.cordovaResolver:Z.browserResolver})()}}function ui(ce){return ce.unwrap()}function $t(ce){return On(ce)}function On(ce){const{_tokenResponse:Z}=ce instanceof ae.ZR?ce.customData:ce;if(!Z)return null;if(!(ce instanceof ae.ZR)&&"temporaryProof"in Z&&"phoneNumber"in Z)return N.P.credentialFromResult(ce);const G=Z.providerId;if(!G||G===N.o.PASSWORD)return null;let Ae;switch(G){case N.o.GOOGLE:Ae=N.Q;break;case N.o.FACEBOOK:Ae=N.N;break;case N.o.GITHUB:Ae=N.T;break;case N.o.TWITTER:Ae=N.W;break;default:const{oauthIdToken:Ke,oauthAccessToken:lt,oauthTokenSecret:Dt,pendingToken:Gt,nonce:Lt}=Z;return lt||Dt||Ke||Gt?Gt?G.startsWith("saml.")?N.aL._create(G,Gt):N.J._fromParams({providerId:G,signInMethod:G,pendingToken:Gt,idToken:Ke,accessToken:lt}):new N.U(G).credential({idToken:Ke,accessToken:lt,rawNonce:Lt}):null}return ce instanceof ae.ZR?Ae.credentialFromError(ce):Ae.credentialFromResult(ce)}function fn(ce,Z){return Z.catch(G=>{throw G instanceof ae.ZR&&function Ui(ce,Z){var G;const Ae=null===(G=Z.customData)||void 0===G?void 0:G._tokenResponse;if("auth/multi-factor-auth-required"===Z.code)Z.resolver=new q(ce,N.an(ce,Z));else if(Ae){const Ke=On(Z),lt=Z;Ke&&(lt.credential=Ke,lt.tenantId=Ae.tenantId||void 0,lt.email=Ae.email||void 0,lt.phoneNumber=Ae.phoneNumber||void 0)}}(ce,G),G}).then(G=>{const Ke=G.user;return{operationType:G.operationType,credential:$t(G),additionalUserInfo:N.al(G),user:Ie.getOrCreate(Ke)}})}function V(ce,Z){return z.apply(this,arguments)}function z(){return(z=(0,g.Z)(function*(ce,Z){const G=yield Z;return{verificationId:G.verificationId,confirm:Ae=>fn(ce,G.confirm(Ae))}})).apply(this,arguments)}class q{constructor(Z,G){this.resolver=G,this.auth=function li(ce){return ce.wrapped()}(Z)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(Z){return fn(ui(this.auth),this.resolver.resolveSignIn(Z))}}class Ie{constructor(Z){this._delegate=Z,this.multiFactor=N.ao(Z)}static getOrCreate(Z){return Ie.USER_MAP.has(Z)||Ie.USER_MAP.set(Z,new Ie(Z)),Ie.USER_MAP.get(Z)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(Z){return this._delegate.getIdTokenResult(Z)}getIdToken(Z){return this._delegate.getIdToken(Z)}linkAndRetrieveDataWithCredential(Z){return this.linkWithCredential(Z)}linkWithCredential(Z){var G=this;return(0,g.Z)(function*(){return fn(G.auth,N.Z(G._delegate,Z))})()}linkWithPhoneNumber(Z,G){var Ae=this;return(0,g.Z)(function*(){return V(Ae.auth,N.l(Ae._delegate,Z,G))})()}linkWithPopup(Z){var G=this;return(0,g.Z)(function*(){return fn(G.auth,N.d(G._delegate,Z,it))})()}linkWithRedirect(Z){var G=this;return(0,g.Z)(function*(){return yield bn(N.aE(G.auth)),N.g(G._delegate,Z,it)})()}reauthenticateAndRetrieveDataWithCredential(Z){return this.reauthenticateWithCredential(Z)}reauthenticateWithCredential(Z){var G=this;return(0,g.Z)(function*(){return fn(G.auth,N._(G._delegate,Z))})()}reauthenticateWithPhoneNumber(Z,G){return V(this.auth,N.r(this._delegate,Z,G))}reauthenticateWithPopup(Z){return fn(this.auth,N.e(this._delegate,Z,it))}reauthenticateWithRedirect(Z){var G=this;return(0,g.Z)(function*(){return yield bn(N.aE(G.auth)),N.h(G._delegate,Z,it)})()}sendEmailVerification(Z){return N.ab(this._delegate,Z)}unlink(Z){var G=this;return(0,g.Z)(function*(){return yield N.ak(G._delegate,Z),G})()}updateEmail(Z){return N.ag(this._delegate,Z)}updatePassword(Z){return N.ah(this._delegate,Z)}updatePhoneNumber(Z){return N.u(this._delegate,Z)}updateProfile(Z){return N.af(this._delegate,Z)}verifyBeforeUpdateEmail(Z,G){return N.ac(this._delegate,Z,G)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Ie.USER_MAP=new WeakMap;const $=N.ax;let ee=(()=>{class ce{constructor(G,Ae){if(this.app=G,Ae.isInitialized())return this._delegate=Ae.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:Ke}=G.options;$(Ke,"invalid-api-key",{appName:G.name}),$(Ke,"invalid-api-key",{appName:G.name});const lt="undefined"!=typeof window?it:void 0;this._delegate=Ae.initialize({options:{persistence:Xe(Ke,G.name),popupRedirectResolver:lt}}),this._delegate._updateErrorMap(N.B),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Ie.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(G){this._delegate.languageCode=G}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(G){this._delegate.tenantId=G}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(G,Ae){N.G(this._delegate,G,Ae)}applyActionCode(G){return N.a2(this._delegate,G)}checkActionCode(G){return N.a3(this._delegate,G)}confirmPasswordReset(G,Ae){return N.a1(this._delegate,G,Ae)}createUserWithEmailAndPassword(G,Ae){var Ke=this;return(0,g.Z)(function*(){return fn(Ke._delegate,N.a5(Ke._delegate,G,Ae))})()}fetchProvidersForEmail(G){return this.fetchSignInMethodsForEmail(G)}fetchSignInMethodsForEmail(G){return N.aa(this._delegate,G)}isSignInWithEmailLink(G){return N.a8(this._delegate,G)}getRedirectResult(){var G=this;return(0,g.Z)(function*(){$(qn(),G._delegate,"operation-not-supported-in-this-environment");const Ae=yield N.j(G._delegate,it);return Ae?fn(G._delegate,Promise.resolve(Ae)):{credential:null,user:null}})()}addFrameworkForLogging(G){!function dn(ce,Z){(0,N.aE)(ce)._logFramework(Z)}(this._delegate,G)}onAuthStateChanged(G,Ae,Ke){const{next:lt,error:Dt,complete:Gt}=Fe(G,Ae,Ke);return this._delegate.onAuthStateChanged(lt,Dt,Gt)}onIdTokenChanged(G,Ae,Ke){const{next:lt,error:Dt,complete:Gt}=Fe(G,Ae,Ke);return this._delegate.onIdTokenChanged(lt,Dt,Gt)}sendSignInLinkToEmail(G,Ae){return N.a7(this._delegate,G,Ae)}sendPasswordResetEmail(G,Ae){return N.a0(this._delegate,G,Ae||void 0)}setPersistence(G){var Ae=this;return(0,g.Z)(function*(){let Ke;switch(function Br(ce,Z){xr(Object.values(tn).includes(Z),ce,"invalid-persistence-type"),(0,ae.b$)()?xr(Z!==tn.SESSION,ce,"unsupported-persistence-type"):(0,ae.UG)()?xr(Z===tn.NONE,ce,"unsupported-persistence-type"):vi()?xr(Z===tn.NONE||Z===tn.LOCAL&&(0,ae.hl)(),ce,"unsupported-persistence-type"):xr(Z===tn.NONE||ai(),ce,"unsupported-persistence-type")}(Ae._delegate,G),G){case tn.SESSION:Ke=N.a;break;case tn.LOCAL:Ke=(yield N.ay(N.i)._isAvailable())?N.i:N.b;break;case tn.NONE:Ke=N.L;break;default:return N.at("argument-error",{appName:Ae._delegate.name})}return Ae._delegate.setPersistence(Ke)})()}signInAndRetrieveDataWithCredential(G){return this.signInWithCredential(G)}signInAnonymously(){return fn(this._delegate,N.X(this._delegate))}signInWithCredential(G){return fn(this._delegate,N.Y(this._delegate,G))}signInWithCustomToken(G){return fn(this._delegate,N.$(this._delegate,G))}signInWithEmailAndPassword(G,Ae){return fn(this._delegate,N.a6(this._delegate,G,Ae))}signInWithEmailLink(G,Ae){return fn(this._delegate,N.a9(this._delegate,G,Ae))}signInWithPhoneNumber(G,Ae){return V(this._delegate,N.s(this._delegate,G,Ae))}signInWithPopup(G){var Ae=this;return(0,g.Z)(function*(){return $(qn(),Ae._delegate,"operation-not-supported-in-this-environment"),fn(Ae._delegate,N.c(Ae._delegate,G,it))})()}signInWithRedirect(G){var Ae=this;return(0,g.Z)(function*(){return $(qn(),Ae._delegate,"operation-not-supported-in-this-environment"),yield bn(Ae._delegate),N.f(Ae._delegate,G,it)})()}updateCurrentUser(G){return this._delegate.updateCurrentUser(G)}verifyPasswordResetCode(G){return N.a4(this._delegate,G)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return ce.Persistence=tn,ce})();function Fe(ce,Z,G){let Ae=ce;"function"!=typeof ce&&({next:Ae,error:Z,complete:G}=ce);const Ke=Ae;return{next:Dt=>Ke(Dt&&Ie.getOrCreate(Dt)),error:Z,complete:G}}function Xe(ce,Z){const G=function ts(ce,Z){const G=jt();if(!G)return[];const Ae=N.az(ir,ce,Z);switch(G.getItem(Ae)){case tn.NONE:return[N.L];case tn.LOCAL:return[N.i,N.a];case tn.SESSION:return[N.a];default:return[]}}(ce,Z);if("undefined"!=typeof self&&!G.includes(N.i)&&G.push(N.i),"undefined"!=typeof window)for(const Ae of[N.b,N.a])G.includes(Ae)||G.push(Ae);return G.includes(N.L)||G.push(N.L),G}class ht{constructor(){this.providerId="phone",this._delegate=new N.P(ui(U.Z.auth()))}static credential(Z,G){return N.P.credential(Z,G)}verifyPhoneNumber(Z,G){return this._delegate.verifyPhoneNumber(Z,G)}unwrap(){return this._delegate}}ht.PHONE_SIGN_IN_METHOD=N.P.PHONE_SIGN_IN_METHOD,ht.PROVIDER_ID=N.P.PROVIDER_ID;const St=N.ax;class an{constructor(Z,G,Ae=U.Z.app()){var Ke;St(null===(Ke=Ae.options)||void 0===Ke?void 0:Ke.apiKey,"invalid-api-key",{appName:Ae.name}),this._delegate=new N.R(Z,G,Ae.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function er(ce){ce.INTERNAL.registerComponent(new pe.wA("auth-compat",Z=>{const G=Z.getProvider("app-compat").getImmediate(),Ae=Z.getProvider("auth");return new ee(G,Ae)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:N.A.EMAIL_SIGNIN,PASSWORD_RESET:N.A.PASSWORD_RESET,RECOVER_EMAIL:N.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:N.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:N.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:N.A.VERIFY_EMAIL}},EmailAuthProvider:N.M,FacebookAuthProvider:N.N,GithubAuthProvider:N.T,GoogleAuthProvider:N.Q,OAuthProvider:N.U,SAMLAuthProvider:N.V,PhoneAuthProvider:ht,PhoneMultiFactorGenerator:N.m,RecaptchaVerifier:an,TwitterAuthProvider:N.W,Auth:ee,AuthCredential:N.H,Error:ae.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),ce.registerVersion("@firebase/auth-compat","0.2.14")}(U.Z)},8306:(nt,De,k)=>{k.d(De,{y:()=>W});var g=k(2961),U=k(727),N=k(8822),ae=k(4671);var pe=k(2416),le=k(576),ve=k(2806);let W=(()=>{class Ne{constructor(He){He&&(this._subscribe=He)}lift(He){const _e=new Ne;return _e.source=this,_e.operator=He,_e}subscribe(He,_e,Se){const ze=function Ge(Ne){return Ne&&Ne instanceof g.Lv||function se(Ne){return Ne&&(0,le.m)(Ne.next)&&(0,le.m)(Ne.error)&&(0,le.m)(Ne.complete)}(Ne)&&(0,U.Nn)(Ne)}(He)?He:new g.Hp(He,_e,Se);return(0,ve.x)(()=>{const{operator:We,source:Pe}=this;ze.add(We?We.call(ze,Pe):Pe?this._subscribe(ze):this._trySubscribe(ze))}),ze}_trySubscribe(He){try{return this._subscribe(He)}catch(_e){He.error(_e)}}forEach(He,_e){return new(_e=j(_e))((Se,ze)=>{const We=new g.Hp({next:Pe=>{try{He(Pe)}catch(ke){ze(ke),We.unsubscribe()}},error:ze,complete:Se});this.subscribe(We)})}_subscribe(He){var _e;return null===(_e=this.source)||void 0===_e?void 0:_e.subscribe(He)}[N.L](){return this}pipe(...He){return function ye(Ne){return 0===Ne.length?ae.y:1===Ne.length?Ne[0]:function(He){return Ne.reduce((_e,Se)=>Se(_e),He)}}(He)(this)}toPromise(He){return new(He=j(He))((_e,Se)=>{let ze;this.subscribe(We=>ze=We,We=>Se(We),()=>_e(ze))})}}return Ne.create=Ue=>new Ne(Ue),Ne})();function j(Ne){var Ue;return null!==(Ue=null!=Ne?Ne:pe.v.Promise)&&void 0!==Ue?Ue:Promise}},7579:(nt,De,k)=>{k.d(De,{x:()=>pe});var g=k(8306),U=k(727);const ae=(0,k(3888).d)(ve=>function(){ve(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ue=k(8737),ye=k(2806);let pe=(()=>{class ve extends g.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(j){const se=new le(this,this);return se.operator=j,se}_throwIfClosed(){if(this.closed)throw new ae}next(j){(0,ye.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const se of this.currentObservers)se.next(j)}})}error(j){(0,ye.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=j;const{observers:se}=this;for(;se.length;)se.shift().error(j)}})}complete(){(0,ye.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:j}=this;for(;j.length;)j.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var j;return(null===(j=this.observers)||void 0===j?void 0:j.length)>0}_trySubscribe(j){return this._throwIfClosed(),super._trySubscribe(j)}_subscribe(j){return this._throwIfClosed(),this._checkFinalizedStatuses(j),this._innerSubscribe(j)}_innerSubscribe(j){const{hasError:se,isStopped:Ge,observers:Ne}=this;return se||Ge?U.Lc:(this.currentObservers=null,Ne.push(j),new U.w0(()=>{this.currentObservers=null,(0,ue.P)(Ne,j)}))}_checkFinalizedStatuses(j){const{hasError:se,thrownError:Ge,isStopped:Ne}=this;se?j.error(Ge):Ne&&j.complete()}asObservable(){const j=new g.y;return j.source=this,j}}return ve.create=(W,j)=>new le(W,j),ve})();class le extends pe{constructor(W,j){super(),this.destination=W,this.source=j}next(W){var j,se;null===(se=null===(j=this.destination)||void 0===j?void 0:j.next)||void 0===se||se.call(j,W)}error(W){var j,se;null===(se=null===(j=this.destination)||void 0===j?void 0:j.error)||void 0===se||se.call(j,W)}complete(){var W,j;null===(j=null===(W=this.destination)||void 0===W?void 0:W.complete)||void 0===j||j.call(W)}_subscribe(W){var j,se;return null!==(se=null===(j=this.source)||void 0===j?void 0:j.subscribe(W))&&void 0!==se?se:U.Lc}}},2961:(nt,De,k)=>{k.d(De,{Hp:()=>He,Lv:()=>se});var g=k(576),U=k(727),N=k(2416),ae=k(7849);function ue(){}const ye=ve("C",void 0,void 0);function ve(Pe,ke,be){return{kind:Pe,value:ke,error:be}}var W=k(3410),j=k(2806);class se extends U.w0{constructor(ke){super(),this.isStopped=!1,ke?(this.destination=ke,(0,U.Nn)(ke)&&ke.add(this)):this.destination=We}static create(ke,be,qe){return new He(ke,be,qe)}next(ke){this.isStopped?ze(function le(Pe){return ve("N",Pe,void 0)}(ke),this):this._next(ke)}error(ke){this.isStopped?ze(function pe(Pe){return ve("E",void 0,Pe)}(ke),this):(this.isStopped=!0,this._error(ke))}complete(){this.isStopped?ze(ye,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(ke){this.destination.next(ke)}_error(ke){try{this.destination.error(ke)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Ge=Function.prototype.bind;function Ne(Pe,ke){return Ge.call(Pe,ke)}class Ue{constructor(ke){this.partialObserver=ke}next(ke){const{partialObserver:be}=this;if(be.next)try{be.next(ke)}catch(qe){_e(qe)}}error(ke){const{partialObserver:be}=this;if(be.error)try{be.error(ke)}catch(qe){_e(qe)}else _e(ke)}complete(){const{partialObserver:ke}=this;if(ke.complete)try{ke.complete()}catch(be){_e(be)}}}class He extends se{constructor(ke,be,qe){let ne;if(super(),(0,g.m)(ke)||!ke)ne={next:null!=ke?ke:void 0,error:null!=be?be:void 0,complete:null!=qe?qe:void 0};else{let fe;this&&N.v.useDeprecatedNextContext?(fe=Object.create(ke),fe.unsubscribe=()=>this.unsubscribe(),ne={next:ke.next&&Ne(ke.next,fe),error:ke.error&&Ne(ke.error,fe),complete:ke.complete&&Ne(ke.complete,fe)}):ne=ke}this.destination=new Ue(ne)}}function _e(Pe){N.v.useDeprecatedSynchronousErrorHandling?(0,j.O)(Pe):(0,ae.h)(Pe)}function ze(Pe,ke){const{onStoppedNotification:be}=N.v;be&&W.z.setTimeout(()=>be(Pe,ke))}const We={closed:!0,next:ue,error:function Se(Pe){throw Pe},complete:ue}},727:(nt,De,k)=>{k.d(De,{Lc:()=>ye,w0:()=>ue,Nn:()=>pe});var g=k(576);const N=(0,k(3888).d)(ve=>function(j){ve(this),this.message=j?`${j.length} errors occurred during unsubscription:\n${j.map((se,Ge)=>`${Ge+1}) ${se.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=j});var ae=k(8737);class ue{constructor(W){this.initialTeardown=W,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let W;if(!this.closed){this.closed=!0;const{_parentage:j}=this;if(j)if(this._parentage=null,Array.isArray(j))for(const Ne of j)Ne.remove(this);else j.remove(this);const{initialTeardown:se}=this;if((0,g.m)(se))try{se()}catch(Ne){W=Ne instanceof N?Ne.errors:[Ne]}const{_finalizers:Ge}=this;if(Ge){this._finalizers=null;for(const Ne of Ge)try{le(Ne)}catch(Ue){W=null!=W?W:[],Ue instanceof N?W=[...W,...Ue.errors]:W.push(Ue)}}if(W)throw new N(W)}}add(W){var j;if(W&&W!==this)if(this.closed)le(W);else{if(W instanceof ue){if(W.closed||W._hasParent(this))return;W._addParent(this)}(this._finalizers=null!==(j=this._finalizers)&&void 0!==j?j:[]).push(W)}}_hasParent(W){const{_parentage:j}=this;return j===W||Array.isArray(j)&&j.includes(W)}_addParent(W){const{_parentage:j}=this;this._parentage=Array.isArray(j)?(j.push(W),j):j?[j,W]:W}_removeParent(W){const{_parentage:j}=this;j===W?this._parentage=null:Array.isArray(j)&&(0,ae.P)(j,W)}remove(W){const{_finalizers:j}=this;j&&(0,ae.P)(j,W),W instanceof ue&&W._removeParent(this)}}ue.EMPTY=(()=>{const ve=new ue;return ve.closed=!0,ve})();const ye=ue.EMPTY;function pe(ve){return ve instanceof ue||ve&&"closed"in ve&&(0,g.m)(ve.remove)&&(0,g.m)(ve.add)&&(0,g.m)(ve.unsubscribe)}function le(ve){(0,g.m)(ve)?ve():ve.unsubscribe()}},2416:(nt,De,k)=>{k.d(De,{v:()=>g});const g={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(nt,De,k)=>{k.d(De,{E:()=>U});const U=new(k(8306).y)(ue=>ue.complete())},8996:(nt,De,k)=>{k.d(De,{D:()=>ke});var g=k(8421),U=k(5363),N=k(9468),ye=k(8306),le=k(2202),ve=k(576),W=k(9672);function se(be,qe){if(!be)throw new Error("Iterable cannot be null");return new ye.y(ne=>{(0,W.f)(ne,qe,()=>{const fe=be[Symbol.asyncIterator]();(0,W.f)(ne,qe,()=>{fe.next().then(Ce=>{Ce.done?ne.complete():ne.next(Ce.value)})},0,!0)})})}var Ge=k(3670),Ne=k(8239),Ue=k(1144),He=k(6495),_e=k(2206),Se=k(4532),ze=k(3260);function ke(be,qe){return qe?function Pe(be,qe){if(null!=be){if((0,Ge.c)(be))return function ae(be,qe){return(0,g.Xf)(be).pipe((0,N.R)(qe),(0,U.Q)(qe))}(be,qe);if((0,Ue.z)(be))return function pe(be,qe){return new ye.y(ne=>{let fe=0;return qe.schedule(function(){fe===be.length?ne.complete():(ne.next(be[fe++]),ne.closed||this.schedule())})})}(be,qe);if((0,Ne.t)(be))return function ue(be,qe){return(0,g.Xf)(be).pipe((0,N.R)(qe),(0,U.Q)(qe))}(be,qe);if((0,_e.D)(be))return se(be,qe);if((0,He.T)(be))return function j(be,qe){return new ye.y(ne=>{let fe;return(0,W.f)(ne,qe,()=>{fe=be[le.h](),(0,W.f)(ne,qe,()=>{let Ce,K;try{({value:Ce,done:K}=fe.next())}catch(re){return void ne.error(re)}K?ne.complete():ne.next(Ce)},0,!0)}),()=>(0,ve.m)(null==fe?void 0:fe.return)&&fe.return()})}(be,qe);if((0,ze.L)(be))return function We(be,qe){return se((0,ze.Q)(be),qe)}(be,qe)}throw(0,Se.z)(be)}(be,qe):(0,g.Xf)(be)}},8421:(nt,De,k)=>{k.d(De,{Xf:()=>Ge});var g=k(655),U=k(1144),N=k(8239),ae=k(8306),ue=k(3670),ye=k(2206),pe=k(4532),le=k(6495),ve=k(3260),W=k(576),j=k(7849),se=k(8822);function Ge(Pe){if(Pe instanceof ae.y)return Pe;if(null!=Pe){if((0,ue.c)(Pe))return function Ne(Pe){return new ae.y(ke=>{const be=Pe[se.L]();if((0,W.m)(be.subscribe))return be.subscribe(ke);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Pe);if((0,U.z)(Pe))return function Ue(Pe){return new ae.y(ke=>{for(let be=0;be<Pe.length&&!ke.closed;be++)ke.next(Pe[be]);ke.complete()})}(Pe);if((0,N.t)(Pe))return function He(Pe){return new ae.y(ke=>{Pe.then(be=>{ke.closed||(ke.next(be),ke.complete())},be=>ke.error(be)).then(null,j.h)})}(Pe);if((0,ye.D)(Pe))return Se(Pe);if((0,le.T)(Pe))return function _e(Pe){return new ae.y(ke=>{for(const be of Pe)if(ke.next(be),ke.closed)return;ke.complete()})}(Pe);if((0,ve.L)(Pe))return function ze(Pe){return Se((0,ve.Q)(Pe))}(Pe)}throw(0,pe.z)(Pe)}function Se(Pe){return new ae.y(ke=>{(function We(Pe,ke){var be,qe,ne,fe;return(0,g.mG)(this,void 0,void 0,function*(){try{for(be=(0,g.KL)(Pe);!(qe=yield be.next()).done;)if(ke.next(qe.value),ke.closed)return}catch(Ce){ne={error:Ce}}finally{try{qe&&!qe.done&&(fe=be.return)&&(yield fe.call(be))}finally{if(ne)throw ne.error}}ke.complete()})})(Pe,ke).catch(be=>ke.error(be))})}},6451:(nt,De,k)=>{k.d(De,{T:()=>ye});var g=k(8189),U=k(8421),N=k(515),ae=k(7669),ue=k(8996);function ye(...pe){const le=(0,ae.yG)(pe),ve=(0,ae._6)(pe,1/0),W=pe;return W.length?1===W.length?(0,U.Xf)(W[0]):(0,g.J)(ve)((0,ue.D)(W,le)):N.E}},5403:(nt,De,k)=>{k.d(De,{x:()=>U});var g=k(2961);function U(ae,ue,ye,pe,le){return new N(ae,ue,ye,pe,le)}class N extends g.Lv{constructor(ue,ye,pe,le,ve,W){super(ue),this.onFinalize=ve,this.shouldUnsubscribe=W,this._next=ye?function(j){try{ye(j)}catch(se){ue.error(se)}}:super._next,this._error=le?function(j){try{le(j)}catch(se){ue.error(se)}finally{this.unsubscribe()}}:super._error,this._complete=pe?function(){try{pe()}catch(j){ue.error(j)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var ue;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:ye}=this;super.unsubscribe(),!ye&&(null===(ue=this.onFinalize)||void 0===ue||ue.call(this))}}}},4004:(nt,De,k)=>{k.d(De,{U:()=>N});var g=k(4482),U=k(5403);function N(ae,ue){return(0,g.e)((ye,pe)=>{let le=0;ye.subscribe((0,U.x)(pe,ve=>{pe.next(ae.call(ue,ve,le++))}))})}},8189:(nt,De,k)=>{k.d(De,{J:()=>N});var g=k(5577),U=k(4671);function N(ae=1/0){return(0,g.z)(U.y,ae)}},5577:(nt,De,k)=>{k.d(De,{z:()=>le});var g=k(4004),U=k(8421),N=k(4482),ae=k(9672),ue=k(5403),pe=k(576);function le(ve,W,j=1/0){return(0,pe.m)(W)?le((se,Ge)=>(0,g.U)((Ne,Ue)=>W(se,Ne,Ge,Ue))((0,U.Xf)(ve(se,Ge))),j):("number"==typeof W&&(j=W),(0,N.e)((se,Ge)=>function ye(ve,W,j,se,Ge,Ne,Ue,He){const _e=[];let Se=0,ze=0,We=!1;const Pe=()=>{We&&!_e.length&&!Se&&W.complete()},ke=qe=>Se<se?be(qe):_e.push(qe),be=qe=>{Ne&&W.next(qe),Se++;let ne=!1;(0,U.Xf)(j(qe,ze++)).subscribe((0,ue.x)(W,fe=>{null==Ge||Ge(fe),Ne?ke(fe):W.next(fe)},()=>{ne=!0},void 0,()=>{if(ne)try{for(Se--;_e.length&&Se<se;){const fe=_e.shift();Ue?(0,ae.f)(W,Ue,()=>be(fe)):be(fe)}Pe()}catch(fe){W.error(fe)}}))};return ve.subscribe((0,ue.x)(W,ke,()=>{We=!0,Pe()})),()=>{null==He||He()}}(se,Ge,ve,j)))}},5363:(nt,De,k)=>{k.d(De,{Q:()=>ae});var g=k(9672),U=k(4482),N=k(5403);function ae(ue,ye=0){return(0,U.e)((pe,le)=>{pe.subscribe((0,N.x)(le,ve=>(0,g.f)(le,ue,()=>le.next(ve),ye),()=>(0,g.f)(le,ue,()=>le.complete(),ye),ve=>(0,g.f)(le,ue,()=>le.error(ve),ye)))})}},3099:(nt,De,k)=>{k.d(De,{B:()=>ye});var g=k(8996),U=k(5698),N=k(7579),ae=k(2961),ue=k(4482);function ye(le={}){const{connector:ve=(()=>new N.x),resetOnError:W=!0,resetOnComplete:j=!0,resetOnRefCountZero:se=!0}=le;return Ge=>{let Ne=null,Ue=null,He=null,_e=0,Se=!1,ze=!1;const We=()=>{null==Ue||Ue.unsubscribe(),Ue=null},Pe=()=>{We(),Ne=He=null,Se=ze=!1},ke=()=>{const be=Ne;Pe(),null==be||be.unsubscribe()};return(0,ue.e)((be,qe)=>{_e++,!ze&&!Se&&We();const ne=He=null!=He?He:ve();qe.add(()=>{_e--,0===_e&&!ze&&!Se&&(Ue=pe(ke,se))}),ne.subscribe(qe),Ne||(Ne=new ae.Hp({next:fe=>ne.next(fe),error:fe=>{ze=!0,We(),Ue=pe(Pe,W,fe),ne.error(fe)},complete:()=>{Se=!0,We(),Ue=pe(Pe,j),ne.complete()}}),(0,g.D)(be).subscribe(Ne))})(Ge)}}function pe(le,ve,...W){return!0===ve?(le(),null):!1===ve?null:ve(...W).pipe((0,U.q)(1)).subscribe(()=>le())}},9468:(nt,De,k)=>{k.d(De,{R:()=>U});var g=k(4482);function U(N,ae=0){return(0,g.e)((ue,ye)=>{ye.add(N.schedule(()=>ue.subscribe(ye),ae))})}},5698:(nt,De,k)=>{k.d(De,{q:()=>ae});var g=k(515),U=k(4482),N=k(5403);function ae(ue){return ue<=0?()=>g.E:(0,U.e)((ye,pe)=>{let le=0;ye.subscribe((0,N.x)(pe,ve=>{++le<=ue&&(pe.next(ve),ue<=le&&pe.complete())}))})}},8505:(nt,De,k)=>{k.d(De,{b:()=>ue});var g=k(576),U=k(4482),N=k(5403),ae=k(4671);function ue(ye,pe,le){const ve=(0,g.m)(ye)||pe||le?{next:ye,error:pe,complete:le}:ye;return ve?(0,U.e)((W,j)=>{var se;null===(se=ve.subscribe)||void 0===se||se.call(ve);let Ge=!0;W.subscribe((0,N.x)(j,Ne=>{var Ue;null===(Ue=ve.next)||void 0===Ue||Ue.call(ve,Ne),j.next(Ne)},()=>{var Ne;Ge=!1,null===(Ne=ve.complete)||void 0===Ne||Ne.call(ve),j.complete()},Ne=>{var Ue;Ge=!1,null===(Ue=ve.error)||void 0===Ue||Ue.call(ve,Ne),j.error(Ne)},()=>{var Ne,Ue;Ge&&(null===(Ne=ve.unsubscribe)||void 0===Ne||Ne.call(ve)),null===(Ue=ve.finalize)||void 0===Ue||Ue.call(ve)}))}):ae.y}},4408:(nt,De,k)=>{k.d(De,{o:()=>ue});var g=k(727);class U extends g.w0{constructor(pe,le){super()}schedule(pe,le=0){return this}}const N={setInterval(ye,pe,...le){const{delegate:ve}=N;return(null==ve?void 0:ve.setInterval)?ve.setInterval(ye,pe,...le):setInterval(ye,pe,...le)},clearInterval(ye){const{delegate:pe}=N;return((null==pe?void 0:pe.clearInterval)||clearInterval)(ye)},delegate:void 0};var ae=k(8737);class ue extends U{constructor(pe,le){super(pe,le),this.scheduler=pe,this.work=le,this.pending=!1}schedule(pe,le=0){if(this.closed)return this;this.state=pe;const ve=this.id,W=this.scheduler;return null!=ve&&(this.id=this.recycleAsyncId(W,ve,le)),this.pending=!0,this.delay=le,this.id=this.id||this.requestAsyncId(W,this.id,le),this}requestAsyncId(pe,le,ve=0){return N.setInterval(pe.flush.bind(pe,this),ve)}recycleAsyncId(pe,le,ve=0){if(null!=ve&&this.delay===ve&&!1===this.pending)return le;N.clearInterval(le)}execute(pe,le){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const ve=this._execute(pe,le);if(ve)return ve;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(pe,le){let W,ve=!1;try{this.work(pe)}catch(j){ve=!0,W=j||new Error("Scheduled action threw falsy error")}if(ve)return this.unsubscribe(),W}unsubscribe(){if(!this.closed){const{id:pe,scheduler:le}=this,{actions:ve}=le;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ae.P)(ve,this),null!=pe&&(this.id=this.recycleAsyncId(le,pe,null)),this.delay=null,super.unsubscribe()}}}},7565:(nt,De,k)=>{k.d(De,{v:()=>N});var g=k(6063);class U{constructor(ue,ye=U.now){this.schedulerActionCtor=ue,this.now=ye}schedule(ue,ye=0,pe){return new this.schedulerActionCtor(this,ue).schedule(pe,ye)}}U.now=g.l.now;class N extends U{constructor(ue,ye=U.now){super(ue,ye),this.actions=[],this._active=!1,this._scheduled=void 0}flush(ue){const{actions:ye}=this;if(this._active)return void ye.push(ue);let pe;this._active=!0;do{if(pe=ue.execute(ue.state,ue.delay))break}while(ue=ye.shift());if(this._active=!1,pe){for(;ue=ye.shift();)ue.unsubscribe();throw pe}}}},4986:(nt,De,k)=>{k.d(De,{z:()=>N});var g=k(4408);const N=new(k(7565).v)(g.o)},6063:(nt,De,k)=>{k.d(De,{l:()=>g});const g={now:()=>(g.delegate||Date).now(),delegate:void 0}},3410:(nt,De,k)=>{k.d(De,{z:()=>g});const g={setTimeout(U,N,...ae){const{delegate:ue}=g;return(null==ue?void 0:ue.setTimeout)?ue.setTimeout(U,N,...ae):setTimeout(U,N,...ae)},clearTimeout(U){const{delegate:N}=g;return((null==N?void 0:N.clearTimeout)||clearTimeout)(U)},delegate:void 0}},2202:(nt,De,k)=>{k.d(De,{h:()=>U});const U=function g(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(nt,De,k)=>{k.d(De,{L:()=>g});const g="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(nt,De,k)=>{k.d(De,{_6:()=>ye,jO:()=>ae,yG:()=>ue});var g=k(576);function N(pe){return pe[pe.length-1]}function ae(pe){return(0,g.m)(N(pe))?pe.pop():void 0}function ue(pe){return function U(pe){return pe&&(0,g.m)(pe.schedule)}(N(pe))?pe.pop():void 0}function ye(pe,le){return"number"==typeof N(pe)?pe.pop():le}},8737:(nt,De,k)=>{function g(U,N){if(U){const ae=U.indexOf(N);0<=ae&&U.splice(ae,1)}}k.d(De,{P:()=>g})},3888:(nt,De,k)=>{function g(U){const ae=U(ue=>{Error.call(ue),ue.stack=(new Error).stack});return ae.prototype=Object.create(Error.prototype),ae.prototype.constructor=ae,ae}k.d(De,{d:()=>g})},2806:(nt,De,k)=>{k.d(De,{O:()=>ae,x:()=>N});var g=k(2416);let U=null;function N(ue){if(g.v.useDeprecatedSynchronousErrorHandling){const ye=!U;if(ye&&(U={errorThrown:!1,error:null}),ue(),ye){const{errorThrown:pe,error:le}=U;if(U=null,pe)throw le}}else ue()}function ae(ue){g.v.useDeprecatedSynchronousErrorHandling&&U&&(U.errorThrown=!0,U.error=ue)}},9672:(nt,De,k)=>{function g(U,N,ae,ue=0,ye=!1){const pe=N.schedule(function(){ae(),ye?U.add(this.schedule(null,ue)):this.unsubscribe()},ue);if(U.add(pe),!ye)return pe}k.d(De,{f:()=>g})},4671:(nt,De,k)=>{function g(U){return U}k.d(De,{y:()=>g})},1144:(nt,De,k)=>{k.d(De,{z:()=>g});const g=U=>U&&"number"==typeof U.length&&"function"!=typeof U},2206:(nt,De,k)=>{k.d(De,{D:()=>U});var g=k(576);function U(N){return Symbol.asyncIterator&&(0,g.m)(null==N?void 0:N[Symbol.asyncIterator])}},576:(nt,De,k)=>{function g(U){return"function"==typeof U}k.d(De,{m:()=>g})},3670:(nt,De,k)=>{k.d(De,{c:()=>N});var g=k(8822),U=k(576);function N(ae){return(0,U.m)(ae[g.L])}},6495:(nt,De,k)=>{k.d(De,{T:()=>N});var g=k(2202),U=k(576);function N(ae){return(0,U.m)(null==ae?void 0:ae[g.h])}},8239:(nt,De,k)=>{k.d(De,{t:()=>U});var g=k(576);function U(N){return(0,g.m)(null==N?void 0:N.then)}},3260:(nt,De,k)=>{k.d(De,{L:()=>ae,Q:()=>N});var g=k(655),U=k(576);function N(ue){return(0,g.FC)(this,arguments,function*(){const pe=ue.getReader();try{for(;;){const{value:le,done:ve}=yield(0,g.qq)(pe.read());if(ve)return yield(0,g.qq)(void 0);yield yield(0,g.qq)(le)}}finally{pe.releaseLock()}})}function ae(ue){return(0,U.m)(null==ue?void 0:ue.getReader)}},4482:(nt,De,k)=>{k.d(De,{A:()=>U,e:()=>N});var g=k(576);function U(ae){return(0,g.m)(null==ae?void 0:ae.lift)}function N(ae){return ue=>{if(U(ue))return ue.lift(function(ye){try{return ae(ye,this)}catch(pe){this.error(pe)}});throw new TypeError("Unable to lift unknown Observable type")}}},7849:(nt,De,k)=>{k.d(De,{h:()=>N});var g=k(2416),U=k(3410);function N(ae){U.z.setTimeout(()=>{const{onUnhandledError:ue}=g.v;if(!ue)throw ae;ue(ae)})}},4532:(nt,De,k)=>{function g(U){return new TypeError(`You provided ${null!==U&&"object"==typeof U?"an invalid object":`'${U}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}k.d(De,{z:()=>g})},655:(nt,De,k)=>{function ae(K,re){var oe={};for(var we in K)Object.prototype.hasOwnProperty.call(K,we)&&re.indexOf(we)<0&&(oe[we]=K[we]);if(null!=K&&"function"==typeof Object.getOwnPropertySymbols){var de=0;for(we=Object.getOwnPropertySymbols(K);de<we.length;de++)re.indexOf(we[de])<0&&Object.prototype.propertyIsEnumerable.call(K,we[de])&&(oe[we[de]]=K[we[de]])}return oe}function le(K,re,oe,we){return new(oe||(oe=Promise))(function(Ve,dt){function Kt(dn){try{Ye(we.next(dn))}catch(kn){dt(kn)}}function Ft(dn){try{Ye(we.throw(dn))}catch(kn){dt(kn)}}function Ye(dn){dn.done?Ve(dn.value):function de(Ve){return Ve instanceof oe?Ve:new oe(function(dt){dt(Ve)})}(dn.value).then(Kt,Ft)}Ye((we=we.apply(K,re||[])).next())})}function _e(K){return this instanceof _e?(this.v=K,this):new _e(K)}function Se(K,re,oe){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var de,we=oe.apply(K,re||[]),Ve=[];return de={},dt("next"),dt("throw"),dt("return"),de[Symbol.asyncIterator]=function(){return this},de;function dt(hn){we[hn]&&(de[hn]=function(en){return new Promise(function(Bt,Yt){Ve.push([hn,en,Bt,Yt])>1||Kt(hn,en)})})}function Kt(hn,en){try{!function Ft(hn){hn.value instanceof _e?Promise.resolve(hn.value.v).then(Ye,dn):kn(Ve[0][2],hn)}(we[hn](en))}catch(Bt){kn(Ve[0][3],Bt)}}function Ye(hn){Kt("next",hn)}function dn(hn){Kt("throw",hn)}function kn(hn,en){hn(en),Ve.shift(),Ve.length&&Kt(Ve[0][0],Ve[0][1])}}function We(K){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var oe,re=K[Symbol.asyncIterator];return re?re.call(K):(K=function se(K){var re="function"==typeof Symbol&&Symbol.iterator,oe=re&&K[re],we=0;if(oe)return oe.call(K);if(K&&"number"==typeof K.length)return{next:function(){return K&&we>=K.length&&(K=void 0),{value:K&&K[we++],done:!K}}};throw new TypeError(re?"Object is not iterable.":"Symbol.iterator is not defined.")}(K),oe={},we("next"),we("throw"),we("return"),oe[Symbol.asyncIterator]=function(){return this},oe);function we(Ve){oe[Ve]=K[Ve]&&function(dt){return new Promise(function(Kt,Ft){!function de(Ve,dt,Kt,Ft){Promise.resolve(Ft).then(function(Ye){Ve({value:Ye,done:Kt})},dt)}(Kt,Ft,(dt=K[Ve](dt)).done,dt.value)})}}}k.d(De,{FC:()=>Se,KL:()=>We,_T:()=>ae,mG:()=>le,qq:()=>_e})},5e3:(nt,De,k)=>{k.d(De,{$8M:()=>ks,$Z:()=>yw,AFp:()=>Pv,AaK:()=>le,CHM:()=>Sa,CRH:()=>kI,CZH:()=>up,CqO:()=>Qa,EJc:()=>VD,EpF:()=>kd,F4k:()=>Qe,FYo:()=>sv,FiY:()=>ms,G48:()=>qv,GfV:()=>gI,JOm:()=>ea,LFG:()=>xe,LSH:()=>ad,Lbi:()=>sl,MAs:()=>wf,NdJ:()=>Od,OlP:()=>Rn,Oqu:()=>Mf,PXZ:()=>WD,Q6J:()=>Er,QGY:()=>$g,Qsj:()=>pI,R0b:()=>Ws,RDi:()=>pl,Rgc:()=>Yf,SBq:()=>yc,Sil:()=>Ov,Suo:()=>PI,TTD:()=>va,TgZ:()=>Hn,VLi:()=>Vv,W1O:()=>Tv,X6Q:()=>GD,XFs:()=>ft,Xpm:()=>ht,Y36:()=>sa,YKP:()=>Wf,YNc:()=>Iy,Yjl:()=>Ke,Yz7:()=>en,ZZ4:()=>pp,_UZ:()=>Cf,_Vd:()=>Qu,_c5:()=>Eb,_uU:()=>Rw,aQg:()=>al,c2e:()=>ah,cJS:()=>Yt,cg1:()=>fc,dDg:()=>rb,deG:()=>Wp,dqk:()=>$t,eFA:()=>ub,g9A:()=>Cc,h0i:()=>ca,hGG:()=>tS,hij:()=>Vd,iGM:()=>Ur,ifc:()=>jt,ip1:()=>ZI,kL8:()=>qw,lG2:()=>Ae,oAB:()=>ce,oxw:()=>rc,q4F:()=>av,qLn:()=>sg,qZA:()=>oa,s9C:()=>sc,sBO:()=>qD,sIi:()=>Vu,s_b:()=>Jf,soG:()=>ol,tBr:()=>ri,tb:()=>Im,tp0:()=>Ti,uIk:()=>vf,vHH:()=>Ue,vpe:()=>Qi,wAp:()=>yt,xp6:()=>EE,z2F:()=>Sm,zSh:()=>Za,zs3:()=>bo});var g=k(7579),U=k(727),N=k(8306),ae=k(6451),ue=k(3099);function ye(s){for(let o in s)if(s[o]===ye)return o;throw Error("Could not find renamed property on target object.")}function le(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(le).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const o=s.toString();if(null==o)return""+o;const a=o.indexOf("\n");return-1===a?o:o.substring(0,a)}function ve(s,o){return null==s||""===s?null===o?"":o:null==o||""===o?s:s+" "+o}const W=ye({__forward_ref__:ye});function j(s){return s.__forward_ref__=j,s.toString=function(){return le(this())},s}function se(s){return function Ge(s){return"function"==typeof s&&s.hasOwnProperty(W)&&s.__forward_ref__===j}(s)?s():s}class Ue extends Error{constructor(o,a){super(function He(s,o){return`NG0${Math.abs(s)}${o?": "+o:""}`}(o,a)),this.code=o}}function _e(s){return"string"==typeof s?s:null==s?"":String(s)}function Se(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():_e(s)}function ke(s,o){const a=o?` in ${o}`:"";throw new Ue(-201,`No provider for ${Se(s)} found${a}`)}function Ft(s,o){null==s&&function Ye(s,o,a,l){throw new Error(`ASSERTION ERROR: ${s}`+(null==l?"":` [Expected=> ${a} ${l} ${o} <=Actual]`))}(o,s,null,"!=")}function en(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function Yt(s){return{providers:s.providers||[],imports:s.imports||[]}}function In(s){return yi(s,ai)||yi(s,qn)}function yi(s,o){return s.hasOwnProperty(o)?s[o]:null}function Fi(s){return s&&(s.hasOwnProperty(vi)||s.hasOwnProperty(Li))?s[vi]:null}const ai=ye({\u0275prov:ye}),vi=ye({\u0275inj:ye}),qn=ye({ngInjectableDef:ye}),Li=ye({ngInjectorDef:ye});var ft=(()=>((ft=ft||{})[ft.Default=0]="Default",ft[ft.Host=1]="Host",ft[ft.Self=2]="Self",ft[ft.SkipSelf=4]="SkipSelf",ft[ft.Optional=8]="Optional",ft))();let Vr;function tn(s){const o=Vr;return Vr=s,o}function xr(s,o,a){const l=In(s);return l&&"root"==l.providedIn?void 0===l.value?l.value=l.factory():l.value:a&ft.Optional?null:void 0!==o?o:void ke(le(s),"Injector")}function Br(s){return{toString:s}.toString()}var bn=(()=>((bn=bn||{})[bn.OnPush=0]="OnPush",bn[bn.Default=1]="Default",bn))(),jt=(()=>{return(s=jt||(jt={}))[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",jt;var s})();const ct="undefined"!=typeof globalThis&&globalThis,it="undefined"!=typeof window&&window,ui="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,$t=ct||"undefined"!=typeof global&&global||it||ui,fn={},V=[],z=ye({\u0275cmp:ye}),q=ye({\u0275dir:ye}),Ie=ye({\u0275pipe:ye}),$=ye({\u0275mod:ye}),ee=ye({\u0275fac:ye}),Fe=ye({__NG_ELEMENT_ID__:ye});let Xe=0;function ht(s){return Br(()=>{const a={},l={type:s.type,providersResolver:null,decls:s.decls,vars:s.vars,factory:null,template:s.template||null,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:a,inputs:null,outputs:null,exportAs:s.exportAs||null,onPush:s.changeDetection===bn.OnPush,directiveDefs:null,pipeDefs:null,selectors:s.selectors||V,viewQuery:s.viewQuery||null,features:s.features||null,data:s.data||{},encapsulation:s.encapsulation||jt.Emulated,id:"c",styles:s.styles||V,_:null,setInput:null,schemas:s.schemas||null,tView:null},d=s.directives,f=s.features,y=s.pipes;return l.id+=Xe++,l.inputs=G(s.inputs,a),l.outputs=G(s.outputs),f&&f.forEach(E=>E(l)),l.directiveDefs=d?()=>("function"==typeof d?d():d).map(an):null,l.pipeDefs=y?()=>("function"==typeof y?y():y).map(vt):null,l})}function an(s){return lt(s)||function Dt(s){return s[q]||null}(s)}function vt(s){return function Gt(s){return s[Ie]||null}(s)}const er={};function ce(s){return Br(()=>{const o={type:s.type,bootstrap:s.bootstrap||V,declarations:s.declarations||V,imports:s.imports||V,exports:s.exports||V,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null};return null!=s.id&&(er[s.id]=s.type),o})}function G(s,o){if(null==s)return fn;const a={};for(const l in s)if(s.hasOwnProperty(l)){let d=s[l],f=d;Array.isArray(d)&&(f=d[1],d=d[0]),a[d]=l,o&&(o[d]=f)}return a}const Ae=ht;function Ke(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,onDestroy:s.type.prototype.ngOnDestroy||null}}function lt(s){return s[z]||null}function Lt(s,o){const a=s[$]||null;if(!a&&!0===o)throw new Error(`Type ${le(s)} does not have '\u0275mod' property.`);return a}function Ei(s){return Array.isArray(s)&&"object"==typeof s[1]}function ci(s){return Array.isArray(s)&&!0===s[1]}function Pc(s){return 0!=(8&s.flags)}function cu(s){return 2==(2&s.flags)}function Ds(s){return 1==(1&s.flags)}function di(s){return null!==s.template}function wh(s){return 0!=(512&s[2])}function hi(s,o){return s.hasOwnProperty(ee)?s[ee]:null}class Fo{constructor(o,a,l){this.previousValue=o,this.currentValue=a,this.firstChange=l}isFirstChange(){return this.firstChange}}function va(){return Ea}function Ea(s){return s.type.prototype.ngOnChanges&&(s.setInput=Bp),bh}function bh(){const s=Vc(this),o=null==s?void 0:s.current;if(o){const a=s.previous;if(a===fn)s.previous=o;else for(let l in o)a[l]=o[l];s.current=null,this.ngOnChanges(o)}}function Bp(s,o,a,l){const d=Vc(s)||function os(s,o){return s[Ks]=o}(s,{previous:fn,current:null}),f=d.current||(d.current={}),y=d.previous,E=this.declaredInputs[a],b=y[E];f[E]=new Fo(b&&b.currentValue,o,y===fn),s[l]=o}va.ngInherit=!0;const Ks="__ngSimpleChanges__";function Vc(s){return s[Ks]||null}let pu;function pl(s){pu=s}function yn(s){return!!s.listen}const wa={createRenderer:(s,o)=>function as(){return void 0!==pu?pu:"undefined"!=typeof document?document:void 0}()};function gn(s){for(;Array.isArray(s);)s=s[0];return s}function fr(s,o){return gn(o[s.index])}function Ln(s,o){return s.data[o]}function pr(s,o){const a=o[s];return Ei(a)?a:a[0]}function Lo(s){return 4==(4&s[2])}function Bi(s){return 128==(128&s[2])}function ei(s,o){return null==o?null:s[o]}function xs(s){s[18]=0}function Rs(s,o){s[5]+=o;let a=s,l=s[3];for(;null!==l&&(1===o&&1===a[5]||-1===o&&0===a[5]);)l[5]+=o,a=l,l=l[3]}const pt={lFrame:Xs(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function _l(){return pt.bindingsEnabled}function Me(){return pt.lFrame.lView}function Ht(){return pt.lFrame.tView}function Sa(s){return pt.lFrame.contextLView=s,s[8]}function Un(){let s=Ms();for(;null!==s&&64===s.type;)s=s.parent;return s}function Ms(){return pt.lFrame.currentTNode}function $r(s,o){const a=pt.lFrame;a.currentTNode=s,a.isParent=o}function yl(){return pt.lFrame.isParent}function xa(){return pt.isInCheckNoChangesMode}function Uo(s){pt.isInCheckNoChangesMode=s}function ji(){return pt.lFrame.bindingIndex++}function Ma(s,o){const a=pt.lFrame;a.bindingIndex=a.bindingRootIndex=s,Qs(o)}function Qs(s){pt.lFrame.currentDirectiveIndex=s}function Na(){return pt.lFrame.currentQueryIndex}function Il(s){pt.lFrame.currentQueryIndex=s}function jp(s){const o=s[1];return 2===o.type?o.declTNode:1===o.type?s[6]:null}function _u(s,o,a){if(a&ft.SkipSelf){let d=o,f=s;for(;!(d=d.parent,null!==d||a&ft.Host||(d=jp(f),null===d||(f=f[15],10&d.type))););if(null===d)return!1;o=d,s=f}const l=pt.lFrame=bl();return l.currentTNode=o,l.lView=s,!0}function Js(s){const o=bl(),a=s[1];pt.lFrame=o,o.currentTNode=a.firstChild,o.lView=s,o.tView=a,o.contextLView=s,o.bindingIndex=a.bindingStartIndex,o.inI18n=!1}function bl(){const s=pt.lFrame,o=null===s?null:s.child;return null===o?Xs(s):o}function Xs(s){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=o),o}function Zc(){const s=pt.lFrame;return pt.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const Th=Zc;function Vo(){const s=Zc();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function gr(){return pt.lFrame.selectedIndex}function cs(s){pt.lFrame.selectedIndex=s}function Vn(){const s=pt.lFrame;return Ln(s.tView,s.selectedIndex)}function Pa(s,o){for(let a=o.directiveStart,l=o.directiveEnd;a<l;a++){const f=s.data[a].type.prototype,{ngAfterContentInit:y,ngAfterContentChecked:E,ngAfterViewInit:b,ngAfterViewChecked:A,ngOnDestroy:R}=f;y&&(s.contentHooks||(s.contentHooks=[])).push(-a,y),E&&((s.contentHooks||(s.contentHooks=[])).push(a,E),(s.contentCheckHooks||(s.contentCheckHooks=[])).push(a,E)),b&&(s.viewHooks||(s.viewHooks=[])).push(-a,b),A&&((s.viewHooks||(s.viewHooks=[])).push(a,A),(s.viewCheckHooks||(s.viewCheckHooks=[])).push(a,A)),null!=R&&(s.destroyHooks||(s.destroyHooks=[])).push(a,R)}}function ds(s,o,a){mr(s,o,3,a)}function ka(s,o,a,l){(3&s[2])===a&&mr(s,o,a,l)}function yu(s,o){let a=s[2];(3&a)===o&&(a&=2047,a+=1,s[2]=a)}function mr(s,o,a,l){const f=null!=l?l:-1,y=o.length-1;let E=0;for(let b=void 0!==l?65535&s[18]:0;b<y;b++)if("number"==typeof o[b+1]){if(E=o[b],null!=l&&E>=l)break}else o[b]<0&&(s[18]+=65536),(E<f||-1==f)&&(Ah(s,a,o,b),s[18]=(4294901760&s[18])+b+2),b++}function Ah(s,o,a,l){const d=a[l]<0,f=a[l+1],E=s[d?-a[l]:a[l]];if(d){if(s[2]>>11<s[18]>>16&&(3&s[2])===o){s[2]+=2048;try{f.call(E)}finally{}}}else try{f.call(E)}finally{}}class Bo{constructor(o,a,l){this.factory=o,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=l}}function st(s,o,a){const l=yn(s);let d=0;for(;d<a.length;){const f=a[d];if("number"==typeof f){if(0!==f)break;d++;const y=a[d++],E=a[d++],b=a[d++];l?s.setAttribute(o,E,b,y):o.setAttributeNS(y,E,b)}else{const y=f,E=a[++d];Pr(y)?l&&s.setProperty(o,y,E):l?s.setAttribute(o,y,E):o.setAttribute(y,E),d++}}return d}function Ns(s){return 3===s||4===s||6===s}function Pr(s){return 64===s.charCodeAt(0)}function bi(s,o){if(null!==o&&0!==o.length)if(null===s||0===s.length)s=o.slice();else{let a=-1;for(let l=0;l<o.length;l++){const d=o[l];"number"==typeof d?a=d:0===a||Tl(s,a,d,null,-1===a||2===a?o[++l]:null)}}return s}function Tl(s,o,a,l,d){let f=0,y=s.length;if(-1===o)y=-1;else for(;f<s.length;){const E=s[f++];if("number"==typeof E){if(E===o){y=-1;break}if(E>o){y=f-1;break}}}for(;f<s.length;){const E=s[f];if("number"==typeof E)break;if(E===a){if(null===l)return void(null!==d&&(s[f+1]=d));if(l===s[f+1])return void(s[f+2]=d)}f++,null!==l&&f++,null!==d&&f++}-1!==y&&(s.splice(y,0,o),f=y+1),s.splice(f++,0,a),null!==l&&s.splice(f++,0,l),null!==d&&s.splice(f++,0,d)}function jo(s){return-1!==s}function $o(s){return 32767&s}function Ho(s,o){let a=function Bn(s){return s>>16}(s),l=o;for(;a>0;)l=l[15],a--;return l}let no=!0;function hs(s){const o=no;return no=s,o}let ed=0;function xn(s,o){const a=fs(s,o);if(-1!==a)return a;const l=o[1];l.firstCreatePass&&(s.injectorIndex=o.length,vu(l.data,s),vu(o,null),vu(l.blueprint,null));const d=ro(s,o),f=s.injectorIndex;if(jo(d)){const y=$o(d),E=Ho(d,o),b=E[1].data;for(let A=0;A<8;A++)o[f+A]=E[y+A]|b[y+A]}return o[f+8]=d,f}function vu(s,o){s.push(0,0,0,0,0,0,0,0,o)}function fs(s,o){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===o[s.injectorIndex+8]?-1:s.injectorIndex}function ro(s,o){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let a=0,l=null,d=o;for(;null!==d;){const f=d[1],y=f.type;if(l=2===y?f.declTNode:1===y?d[6]:null,null===l)return-1;if(a++,d=d[15],-1!==l.injectorIndex)return l.injectorIndex|a<<16}return-1}function ti(s,o,a){!function Rh(s,o,a){let l;"string"==typeof a?l=a.charCodeAt(0)||0:a.hasOwnProperty(Fe)&&(l=a[Fe]),null==l&&(l=a[Fe]=ed++);const d=255&l;o.data[s+(d>>5)]|=1<<d}(s,o,a)}function io(s,o,a){if(a&ft.Optional)return s;ke(o,"NodeInjector")}function so(s,o,a,l){if(a&ft.Optional&&void 0===l&&(l=null),0==(a&(ft.Self|ft.Host))){const d=s[9],f=tn(void 0);try{return d?d.get(o,l,a&ft.Optional):xr(o,l,a&ft.Optional)}finally{tn(f)}}return io(l,o,a)}function zo(s,o,a,l=ft.Default,d){if(null!==s){const f=function oo(s){if("string"==typeof s)return s.charCodeAt(0)||0;const o=s.hasOwnProperty(Fe)?s[Fe]:void 0;return"number"==typeof o?o>=0?255&o:Go:o}(a);if("function"==typeof f){if(!_u(o,s,l))return l&ft.Host?io(d,a,l):so(o,a,l,d);try{const y=f(l);if(null!=y||l&ft.Optional)return y;ke(a)}finally{Th()}}else if("number"==typeof f){let y=null,E=fs(s,o),b=-1,A=l&ft.Host?o[16][6]:null;for((-1===E||l&ft.SkipSelf)&&(b=-1===E?ro(s,o):o[E+8],-1!==b&&Cr(l,!1)?(y=o[1],E=$o(b),o=Ho(b,o)):E=-1);-1!==E;){const R=o[1];if(Dl(f,E,R.data)){const F=Fa(E,o,a,y,l,A);if(F!==Ps)return F}b=o[E+8],-1!==b&&Cr(l,o[1].data[E+8]===A)&&Dl(f,E,o)?(y=R,E=$o(b),o=Ho(b,o)):E=-1}}}return so(o,a,l,d)}const Ps={};function Go(){return new ao(Un(),Me())}function Fa(s,o,a,l,d,f){const y=o[1],E=y.data[s+8],R=La(E,y,a,null==l?cu(E)&&no:l!=y&&0!=(3&E.type),d&ft.Host&&f===E);return null!==R?Ua(o,y,R,E):Ps}function La(s,o,a,l,d){const f=s.providerIndexes,y=o.data,E=1048575&f,b=s.directiveStart,R=f>>20,H=d?E+R:s.directiveEnd;for(let te=l?E:E+R;te<H;te++){const Te=y[te];if(te<b&&a===Te||te>=b&&Te.type===a)return te}if(d){const te=y[b];if(te&&di(te)&&te.type===a)return b}return null}function Ua(s,o,a,l){let d=s[a];const f=o.data;if(function Yc(s){return s instanceof Bo}(d)){const y=d;y.resolving&&function ze(s,o){const a=o?`. Dependency path: ${o.join(" > ")} > ${s}`:"";throw new Ue(-200,`Circular dependency in DI detected for ${s}${a}`)}(Se(f[a]));const E=hs(y.canSeeViewProviders);y.resolving=!0;const b=y.injectImpl?tn(y.injectImpl):null;_u(s,l,ft.Default);try{d=s[a]=y.factory(void 0,f,s,l),o.firstCreatePass&&a>=l.directiveStart&&function $p(s,o,a){const{ngOnChanges:l,ngOnInit:d,ngDoCheck:f}=o.type.prototype;if(l){const y=Ea(o);(a.preOrderHooks||(a.preOrderHooks=[])).push(s,y),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(s,y)}d&&(a.preOrderHooks||(a.preOrderHooks=[])).push(0-s,d),f&&((a.preOrderHooks||(a.preOrderHooks=[])).push(s,f),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(s,f))}(a,f[a],o)}finally{null!==b&&tn(b),hs(E),y.resolving=!1,Th()}}return d}function Dl(s,o,a){return!!(a[o+(s>>5)]&1<<s)}function Cr(s,o){return!(s&ft.Self||s&ft.Host&&o)}class ao{constructor(o,a){this._tNode=o,this._lView=a}get(o,a,l){return zo(this._tNode,this._lView,o,l,a)}}function ks(s){return function Wo(s,o){if("class"===o)return s.classes;if("style"===o)return s.styles;const a=s.attrs;if(a){const l=a.length;let d=0;for(;d<l;){const f=a[d];if(Ns(f))break;if(0===f)d+=2;else if("number"==typeof f)for(d++;d<l&&"string"==typeof a[d];)d++;else{if(f===o)return a[d+1];d+=2}}}return null}(Un(),s)}const Os="__parameters__";function jn(s,o,a){return Br(()=>{const l=function ps(s){return function(...a){if(s){const l=s(...a);for(const d in l)this[d]=l[d]}}}(o);function d(...f){if(this instanceof d)return l.apply(this,f),this;const y=new d(...f);return E.annotation=y,E;function E(b,A,R){const F=b.hasOwnProperty(Os)?b[Os]:Object.defineProperty(b,Os,{value:[]})[Os];for(;F.length<=R;)F.push(null);return(F[R]=F[R]||[]).push(y),b}}return a&&(d.prototype=Object.create(a.prototype)),d.prototype.ngMetadataName=s,d.annotationCls=d,d})}class Rn{constructor(o,a){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=en({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Wp=new Rn("AnalyzeForEntryComponents");function Or(s,o){void 0===o&&(o=s);for(let a=0;a<s.length;a++){let l=s[a];Array.isArray(l)?(o===s&&(o=s.slice(0,a)),Or(l,o)):o!==s&&o.push(l)}return o}function ni(s,o){s.forEach(a=>Array.isArray(a)?ni(a,o):o(a))}function Ko(s,o,a){o>=s.length?s.push(a):s.splice(o,0,a)}function Yo(s,o){return o>=s.length-1?s.pop():s.splice(o,1)[0]}const Qo={},po="__NG_DI_FLAG__",go="ngTempTokenPath",xl=/\n/gm,T="__source",M=ye({provide:String,useValue:ye});let L;function J(s){const o=L;return L=s,o}function X(s,o=ft.Default){if(void 0===L)throw new Ue(203,"");return null===L?xr(s,void 0,o):L.get(s,o&ft.Optional?null:void 0,o)}function xe(s,o=ft.Default){return(function En(){return Vr}()||X)(se(s),o)}const mt=xe;function Et(s){const o=[];for(let a=0;a<s.length;a++){const l=se(s[a]);if(Array.isArray(l)){if(0===l.length)throw new Ue(900,"");let d,f=ft.Default;for(let y=0;y<l.length;y++){const E=l[y],b=bt(E);"number"==typeof b?-1===b?d=E.token:f|=b:d=E}o.push(xe(d,f))}else o.push(xe(l))}return o}function kt(s,o){return s[po]=o,s.prototype[po]=o,s}function bt(s){return s[po]}const ri=kt(jn("Inject",s=>({token:s})),-1),ms=kt(jn("Optional"),8),Ti=kt(jn("SkipSelf"),4);class rd{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}const sd=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,v=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;var ln=(()=>((ln=ln||{})[ln.NONE=0]="NONE",ln[ln.HTML=1]="HTML",ln[ln.STYLE=2]="STYLE",ln[ln.SCRIPT=3]="SCRIPT",ln[ln.URL=4]="URL",ln[ln.RESOURCE_URL=5]="RESOURCE_URL",ln))();function ad(s){const o=function Nu(){const s=Me();return s&&s[12]}();return o?o.sanitize(ln.URL,s)||"":function Jo(s,o){const a=function Wa(s){return s instanceof rd&&s.getTypeName()||null}(s);if(null!=a&&a!==o){if("ResourceURL"===a&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${a} (see https://g.co/ng/security#xss)`)}return a===o}(s,"URL")?function Ls(s){return s instanceof rd?s.changingThisBreaksApplicationSecurity:s}(s):function p(s){return(s=String(s)).match(sd)||s.match(v)?s:"unsafe:"+s}(_e(s))}const Q0="__ngContext__";function pi(s,o){s[Q0]=o}function y_(s){const o=function Gh(s){return s[Q0]||null}(s);return o?Array.isArray(o)?o:o.lView:null}function Vl(s){return s.ngOriginalError}function FC(s,...o){s.error(...o)}class sg{constructor(){this._console=console}handleError(o){const a=this._findOriginalError(o),l=function OC(s){return s&&s.ngErrorLogger||FC}(o);l(this._console,"ERROR",o),a&&l(this._console,"ORIGINAL ERROR",a)}_findOriginalError(o){let a=o&&Vl(o);for(;a&&Vl(a);)a=Vl(a);return a||null}}const zC=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind($t))();function Eo(s){return s instanceof Function?s():s}var ea=(()=>((ea=ea||{})[ea.Important=1]="Important",ea[ea.DashCase=2]="DashCase",ea))();function og(s,o){return undefined(s,o)}function Zh(s){const o=s[3];return ci(o)?o[3]:o}function Kh(s){return aE(s[13])}function ug(s){return aE(s[4])}function aE(s){for(;null!==s&&!ci(s);)s=s[4];return s}function ud(s,o,a,l,d){if(null!=l){let f,y=!1;ci(l)?f=l:Ei(l)&&(y=!0,l=l[0]);const E=gn(l);0===s&&null!==a?null==d?A_(o,a,E):ys(o,a,E,d||null,!0):1===s&&null!==a?ys(o,a,E,d||null,!0):2===s?function N_(s,o,a){const l=Qh(s,o);l&&function XC(s,o,a,l){yn(s)?s.removeChild(o,a,l):o.removeChild(a)}(s,l,o,a)}(o,E,y):3===s&&o.destroyNode(E),null!=f&&function nn(s,o,a,l,d){const f=a[7];f!==gn(a)&&ud(o,s,l,f,d);for(let E=10;E<a.length;E++){const b=a[E];dg(b[1],b,s,o,l,f)}}(o,s,f,a,d)}}function b_(s,o,a){if(yn(s))return s.createElement(o,a);{const l=null!==a?function fu(s){const o=s.toLowerCase();return"svg"===o?"http://www.w3.org/2000/svg":"math"===o?"http://www.w3.org/1998/MathML/":null}(a):null;return null===l?s.createElement(o):s.createElementNS(l,o)}}function lE(s,o){const a=s[9],l=a.indexOf(o),d=o[3];1024&o[2]&&(o[2]&=-1025,Rs(d,-1)),a.splice(l,1)}function T_(s,o){if(s.length<=10)return;const a=10+o,l=s[a];if(l){const d=l[17];null!==d&&d!==s&&lE(d,l),o>0&&(s[a-1][4]=l[4]);const f=Yo(s,10+o);!function Di(s,o){dg(s,o,o[11],2,null,null),o[0]=null,o[6]=null}(l[1],l);const y=f[19];null!==y&&y.detachView(f[1]),l[3]=null,l[4]=null,l[2]&=-129}return l}function D_(s,o){if(!(256&o[2])){const a=o[11];yn(a)&&a.destroyNode&&dg(s,o,a,3,null,null),function C_(s){let o=s[13];if(!o)return S_(s[1],s);for(;o;){let a=null;if(Ei(o))a=o[13];else{const l=o[10];l&&(a=l)}if(!a){for(;o&&!o[4]&&o!==s;)Ei(o)&&S_(o[1],o),o=o[3];null===o&&(o=s),Ei(o)&&S_(o[1],o),a=o&&o[4]}o=a}}(o)}}function S_(s,o){if(!(256&o[2])){o[2]&=-129,o[2]|=256,function dE(s,o){let a;if(null!=s&&null!=(a=s.destroyHooks))for(let l=0;l<a.length;l+=2){const d=o[a[l]];if(!(d instanceof Bo)){const f=a[l+1];if(Array.isArray(f))for(let y=0;y<f.length;y+=2){const E=d[f[y]],b=f[y+1];try{b.call(E)}finally{}}else try{f.call(d)}finally{}}}}(s,o),function cE(s,o){const a=s.cleanup,l=o[7];let d=-1;if(null!==a)for(let f=0;f<a.length-1;f+=2)if("string"==typeof a[f]){const y=a[f+1],E="function"==typeof y?y(o):gn(o[y]),b=l[d=a[f+2]],A=a[f+3];"boolean"==typeof A?E.removeEventListener(a[f],b,A):A>=0?l[d=A]():l[d=-A].unsubscribe(),f+=2}else{const y=l[d=a[f+1]];a[f].call(y)}if(null!==l){for(let f=d+1;f<l.length;f++)l[f]();o[7]=null}}(s,o),1===o[1].type&&yn(o[11])&&o[11].destroy();const a=o[17];if(null!==a&&ci(o[3])){a!==o[3]&&lE(a,o);const l=o[19];null!==l&&l.detachView(s)}}}function lg(s,o,a){return function JC(s,o,a){let l=o;for(;null!==l&&40&l.type;)l=(o=l).parent;if(null===l)return a[0];if(2&l.flags){const d=s.data[l.directiveStart].encapsulation;if(d===jt.None||d===jt.Emulated)return null}return fr(l,a)}(s,o.parent,a)}function ys(s,o,a,l,d){yn(s)?s.insertBefore(o,a,l,d):o.insertBefore(a,l,d)}function A_(s,o,a){yn(s)?s.appendChild(o,a):o.appendChild(a)}function hE(s,o,a,l,d){null!==l?ys(s,o,a,l,d):A_(s,o,a)}function Qh(s,o){return yn(s)?s.parentNode(o):o.parentNode}let x_=function pE(s,o,a){return 40&s.type?fr(s,a):null};function cg(s,o,a,l){const d=lg(s,l,o),f=o[11],E=function fE(s,o,a){return x_(s,o,a)}(l.parent||o[6],l,o);if(null!=d)if(Array.isArray(a))for(let b=0;b<a.length;b++)hE(f,d,a[b],E,!1);else hE(f,d,a,E,!1)}function cd(s,o){if(null!==o){const a=o.type;if(3&a)return fr(o,s);if(4&a)return M_(-1,s[o.index]);if(8&a){const l=o.child;if(null!==l)return cd(s,l);{const d=s[o.index];return ci(d)?M_(-1,d):gn(d)}}if(32&a)return og(o,s)()||gn(s[o.index]);{const l=mE(s,o);return null!==l?Array.isArray(l)?l[0]:cd(Zh(s[16]),l):cd(s,o.next)}}return null}function mE(s,o){return null!==o?s[16][6].projection[o.projection]:null}function M_(s,o){const a=10+s+1;if(a<o.length){const l=o[a],d=l[1].firstChild;if(null!==d)return cd(l,d)}return o[7]}function P_(s,o,a,l,d,f,y){for(;null!=a;){const E=l[a.index],b=a.type;if(y&&0===o&&(E&&pi(gn(E),l),a.flags|=4),64!=(64&a.flags))if(8&b)P_(s,o,a.child,l,d,f,!1),ud(o,s,d,E,f);else if(32&b){const A=og(a,l);let R;for(;R=A();)ud(o,s,d,R,f);ud(o,s,d,E,f)}else 16&b?_E(s,o,l,a,d,f):ud(o,s,d,E,f);a=y?a.projectionNext:a.next}}function dg(s,o,a,l,d,f){P_(a,l,s.firstChild,o,d,f,!1)}function _E(s,o,a,l,d,f){const y=a[16],b=y[6].projection[l.projection];if(Array.isArray(b))for(let A=0;A<b.length;A++)ud(o,s,d,b[A],f);else P_(s,o,b,y[3],d,f,!0)}function yE(s,o,a){yn(s)?s.setAttribute(o,"style",a):o.style.cssText=a}function O_(s,o,a){yn(s)?""===a?s.removeAttribute(o,"class"):s.setAttribute(o,"class",a):o.className=a}function Vs(s,o,a){let l=s.length;for(;;){const d=s.indexOf(o,a);if(-1===d)return d;if(0===d||s.charCodeAt(d-1)<=32){const f=o.length;if(d+f===l||s.charCodeAt(d+f)<=32)return d}a=d+1}}const vE="ng-template";function Si(s,o,a){let l=0;for(;l<s.length;){let d=s[l++];if(a&&"class"===d){if(d=s[l],-1!==Vs(d.toLowerCase(),o,0))return!0}else if(1===d){for(;l<s.length&&"string"==typeof(d=s[l++]);)if(d.toLowerCase()===o)return!0;return!1}}return!1}function dd(s){return 4===s.type&&s.value!==vE}function ta(s,o,a){return o===(4!==s.type||a?s.value:vE)}function Q(s,o,a){let l=4;const d=s.attrs||[],f=function xt(s){for(let o=0;o<s.length;o++)if(Ns(s[o]))return o;return s.length}(d);let y=!1;for(let E=0;E<o.length;E++){const b=o[E];if("number"!=typeof b){if(!y)if(4&l){if(l=2|1&l,""!==b&&!ta(s,b,a)||""===b&&1===o.length){if(wo(l))return!1;y=!0}}else{const A=8&l?b:o[++E];if(8&l&&null!==s.attrs){if(!Si(s.attrs,A,a)){if(wo(l))return!1;y=!0}continue}const F=Ga(8&l?"class":b,d,dd(s),a);if(-1===F){if(wo(l))return!1;y=!0;continue}if(""!==A){let H;H=F>f?"":d[F+1].toLowerCase();const te=8&l?H:null;if(te&&-1!==Vs(te,A,0)||2&l&&A!==H){if(wo(l))return!1;y=!0}}}}else{if(!y&&!wo(l)&&!wo(b))return!1;if(y&&wo(b))continue;y=!1,l=b|1&l}}return wo(l)||y}function wo(s){return 0==(1&s)}function Ga(s,o,a,l){if(null===o)return-1;let d=0;if(l||!a){let f=!1;for(;d<o.length;){const y=o[d];if(y===s)return d;if(3===y||6===y)f=!0;else{if(1===y||2===y){let E=o[++d];for(;"string"==typeof E;)E=o[++d];continue}if(4===y)break;if(0===y){d+=4;continue}}d+=f?1:2}return-1}return function hg(s,o){let a=s.indexOf(4);if(a>-1)for(a++;a<s.length;){const l=s[a];if("number"==typeof l)return-1;if(l===o)return a;a++}return-1}(o,s)}function ot(s,o,a=!1){for(let l=0;l<o.length;l++)if(Q(s,o[l],a))return!0;return!1}function hd(s,o){return s?":not("+o.trim()+")":o}function tT(s){let o=s[0],a=1,l=2,d="",f=!1;for(;a<s.length;){let y=s[a];if("string"==typeof y)if(2&l){const E=s[++a];d+="["+y+(E.length>0?'="'+E+'"':"")+"]"}else 8&l?d+="."+y:4&l&&(d+=" "+y);else""!==d&&!wo(y)&&(o+=hd(f,d),d=""),l=y,f=f||!wo(l);a++}return""!==d&&(o+=hd(f,d)),o}const Mt={};function EE(s){zr(Ht(),Me(),gr()+s,xa())}function zr(s,o,a,l){if(!l)if(3==(3&o[2])){const f=s.preOrderCheckHooks;null!==f&&ds(o,f,a)}else{const f=s.preOrderHooks;null!==f&&ka(o,f,0,a)}cs(a)}function OE(s,o){const a=s.contentQueries;if(null!==a)for(let l=0;l<a.length;l+=2){const d=a[l],f=a[l+1];if(-1!==f){const y=s.data[f];Il(d),y.contentQueries(2,o[f],f)}}}function jl(s,o,a,l,d,f,y,E,b,A){const R=o.blueprint.slice();return R[0]=d,R[2]=140|l,xs(R),R[3]=R[15]=s,R[8]=a,R[10]=y||s&&s[10],R[11]=E||s&&s[11],R[12]=b||s&&s[12]||null,R[9]=A||s&&s[9]||null,R[6]=f,R[16]=2==o.type?s[16]:R,R}function $l(s,o,a,l,d){let f=s.data[o];if(null===f)f=function K_(s,o,a,l,d){const f=Ms(),y=yl(),b=s.data[o]=function Q_(s,o,a,l,d,f){return{type:a,index:l,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:d,attrs:f,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,y?f:f&&f.parent,a,o,l,d);return null===s.firstChild&&(s.firstChild=b),null!==f&&(y?null==f.child&&null!==b.parent&&(f.child=b):null===f.next&&(f.next=b)),b}(s,o,a,l,d),function Ra(){return pt.lFrame.inI18n}()&&(f.flags|=64);else if(64&f.type){f.type=a,f.value=l,f.attrs=d;const y=function Aa(){const s=pt.lFrame,o=s.currentTNode;return s.isParent?o:o.parent}();f.injectorIndex=null===y?-1:y.injectorIndex}return $r(f,!0),f}function Pu(s,o,a,l){if(0===a)return-1;const d=o.length;for(let f=0;f<a;f++)o.push(l),s.blueprint.push(l),s.data.push(null);return d}function Hl(s,o,a){Js(o);try{const l=s.viewQuery;null!==l&&Dg(1,l,a);const d=s.template;null!==d&&Kr(s,o,d,1,a),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&OE(s,o),s.staticViewQueries&&Dg(2,s.viewQuery,a);const f=s.components;null!==f&&function LE(s,o){for(let a=0;a<o.length;a++)sy(s,o[a])}(o,f)}catch(l){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),l}finally{o[2]&=-5,Vo()}}function ku(s,o,a,l){const d=o[2];if(256==(256&d))return;Js(o);const f=xa();try{xs(o),function El(s){return pt.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==a&&Kr(s,o,a,2,l);const y=3==(3&d);if(!f)if(y){const A=s.preOrderCheckHooks;null!==A&&ds(o,A,null)}else{const A=s.preOrderHooks;null!==A&&ka(o,A,0,null),yu(o,0)}if(function uf(s){for(let o=Kh(s);null!==o;o=ug(o)){if(!o[2])continue;const a=o[9];for(let l=0;l<a.length;l++){const d=a[l],f=d[3];0==(1024&d[2])&&Rs(f,1),d[2]|=1024}}}(o),function KE(s){for(let o=Kh(s);null!==o;o=ug(o))for(let a=10;a<o.length;a++){const l=o[a],d=l[1];Bi(l)&&ku(d,l,d.template,l[8])}}(o),null!==s.contentQueries&&OE(s,o),!f)if(y){const A=s.contentCheckHooks;null!==A&&ds(o,A)}else{const A=s.contentHooks;null!==A&&ka(o,A,1),yu(o,1)}!function kE(s,o){const a=s.hostBindingOpCodes;if(null!==a)try{for(let l=0;l<a.length;l++){const d=a[l];if(d<0)cs(~d);else{const f=d,y=a[++l],E=a[++l];Ma(y,f),E(2,o[f])}}}finally{cs(-1)}}(s,o);const E=s.components;null!==E&&function FE(s,o){for(let a=0;a<o.length;a++)iy(s,o[a])}(o,E);const b=s.viewQuery;if(null!==b&&Dg(2,b,l),!f)if(y){const A=s.viewCheckHooks;null!==A&&ds(o,A)}else{const A=s.viewHooks;null!==A&&ka(o,A,2),yu(o,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),f||(o[2]&=-73),1024&o[2]&&(o[2]&=-1025,Rs(o[3],-1))}finally{Vo()}}function Zr(s,o,a,l){const d=o[10],f=!xa(),y=Lo(o);try{f&&!y&&d.begin&&d.begin(),y&&Hl(s,o,l),ku(s,o,a,l)}finally{f&&!y&&d.end&&d.end()}}function Kr(s,o,a,l,d){const f=gr(),y=2&l;try{cs(-1),y&&o.length>20&&zr(s,o,20,xa()),a(l,d)}finally{cs(f)}}function of(s,o,a){!_l()||(function _d(s,o,a,l){const d=a.directiveStart,f=a.directiveEnd;s.firstCreatePass||xn(a,o),pi(l,o);const y=a.initialInputs;for(let E=d;E<f;E++){const b=s.data[E],A=di(b);A&&Ri(o,a,b);const R=Ua(o,s,E,a);pi(R,o),null!==y&&Ig(0,E-d,R,b,0,y),A&&(pr(a.index,o)[8]=R)}}(s,o,a,fr(a,o)),128==(128&a.flags)&&function dT(s,o,a){const l=a.directiveStart,d=a.directiveEnd,y=a.index,E=function qc(){return pt.lFrame.currentDirectiveIndex}();try{cs(y);for(let b=l;b<d;b++){const A=s.data[b],R=o[b];Qs(b),(null!==A.hostBindings||0!==A.hostVars||null!==A.hostAttrs)&&zE(A,R)}}finally{cs(-1),Qs(E)}}(s,o,a))}function Y_(s,o,a=fr){const l=o.localNames;if(null!==l){let d=o.index+1;for(let f=0;f<l.length;f+=2){const y=l[f+1],E=-1===y?a(o,s):s[y];s[d++]=E}}}function UE(s){const o=s.tView;return null===o||o.incompleteFirstPass?s.tView=af(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts):o}function af(s,o,a,l,d,f,y,E,b,A){const R=20+l,F=R+d,H=function aT(s,o){const a=[];for(let l=0;l<o;l++)a.push(l<s?null:Mt);return a}(R,F),te="function"==typeof A?A():A;return H[1]={type:s,blueprint:H,template:a,queries:null,viewQuery:E,declTNode:o,data:H.slice().fill(null,R),bindingStartIndex:R,expandoStartIndex:F,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof f?f():f,pipeRegistry:"function"==typeof y?y():y,firstChild:null,schemas:b,consts:te,incompleteFirstPass:!1}}function jE(s,o,a,l){const d=oy(o);null===a?d.push(l):(d.push(a),s.firstCreatePass&&hf(s).push(l,d.length-1))}function J_(s,o,a){for(let l in s)if(s.hasOwnProperty(l)){const d=s[l];(a=null===a?{}:a).hasOwnProperty(l)?a[l].push(o,d):a[l]=[o,d]}return a}function xi(s,o,a,l,d,f,y,E){const b=fr(o,a);let R,A=o.inputs;!E&&null!=A&&(R=A[l])?(Sg(s,a,R,l,d),cu(o)&&function X_(s,o){const a=pr(o,s);16&a[2]||(a[2]|=64)}(a,o.index)):3&o.type&&(l=function vg(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(l),d=null!=y?y(d,o.value||"",l):d,yn(f)?f.setProperty(b,l,d):Pr(l)||(b.setProperty?b.setProperty(l,d):b[l]=d))}function md(s,o,a,l){let d=!1;if(_l()){const f=function Wl(s,o,a){const l=s.directiveRegistry;let d=null;if(l)for(let f=0;f<l.length;f++){const y=l[f];ot(a,y.selectors,!1)&&(d||(d=[]),ti(xn(a,o),s,y.type),di(y)?(ty(s,a),d.unshift(y)):d.push(y))}return d}(s,o,a),y=null===l?null:{"":-1};if(null!==f){d=!0,yd(a,s.data.length,f.length);for(let R=0;R<f.length;R++){const F=f[R];F.providersResolver&&F.providersResolver(F)}let E=!1,b=!1,A=Pu(s,o,f.length,null);for(let R=0;R<f.length;R++){const F=f[R];a.mergedAttrs=bi(a.mergedAttrs,F.hostAttrs),ny(s,a,o,A,F),GE(A,F,y),null!==F.contentQueries&&(a.flags|=8),(null!==F.hostBindings||null!==F.hostAttrs||0!==F.hostVars)&&(a.flags|=128);const H=F.type.prototype;!E&&(H.ngOnChanges||H.ngOnInit||H.ngDoCheck)&&((s.preOrderHooks||(s.preOrderHooks=[])).push(a.index),E=!0),!b&&(H.ngOnChanges||H.ngDoCheck)&&((s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(a.index),b=!0),A++}!function uT(s,o){const l=o.directiveEnd,d=s.data,f=o.attrs,y=[];let E=null,b=null;for(let A=o.directiveStart;A<l;A++){const R=d[A],F=R.inputs,H=null===f||dd(o)?null:qE(F,f);y.push(H),E=J_(F,A,E),b=J_(R.outputs,A,b)}null!==E&&(E.hasOwnProperty("class")&&(o.flags|=16),E.hasOwnProperty("style")&&(o.flags|=32)),o.initialInputs=y,o.inputs=E,o.outputs=b}(s,a)}y&&function wg(s,o,a){if(o){const l=s.localNames=[];for(let d=0;d<o.length;d+=2){const f=a[o[d+1]];if(null==f)throw new Ue(-301,!1);l.push(o[d],f)}}}(a,l,y)}return a.mergedAttrs=bi(a.mergedAttrs,a.attrs),d}function WE(s,o,a,l,d,f){const y=f.hostBindings;if(y){let E=s.hostBindingOpCodes;null===E&&(E=s.hostBindingOpCodes=[]);const b=~o.index;(function cT(s){let o=s.length;for(;o>0;){const a=s[--o];if("number"==typeof a&&a<0)return a}return 0})(E)!=b&&E.push(b),E.push(l,d,y)}}function zE(s,o){null!==s.hostBindings&&s.hostBindings(1,o)}function ty(s,o){o.flags|=2,(s.components||(s.components=[])).push(o.index)}function GE(s,o,a){if(a){if(o.exportAs)for(let l=0;l<o.exportAs.length;l++)a[o.exportAs[l]]=s;di(o)&&(a[""]=s)}}function yd(s,o,a){s.flags|=1,s.directiveStart=o,s.directiveEnd=o+a,s.providerIndexes=o}function ny(s,o,a,l,d){s.data[l]=d;const f=d.factory||(d.factory=hi(d.type)),y=new Bo(f,di(d),null);s.blueprint[l]=y,a[l]=y,WE(s,o,0,l,Pu(s,a,d.hostVars,Mt),d)}function Ri(s,o,a){const l=fr(o,s),d=UE(a),f=s[10],y=Ou(s,jl(s,d,null,a.onPush?64:16,l,o,f,f.createRenderer(l,a),null,null));s[o.index]=y}function Io(s,o,a,l,d,f){const y=fr(s,o);!function zl(s,o,a,l,d,f,y){if(null==f)yn(s)?s.removeAttribute(o,d,a):o.removeAttribute(d);else{const E=null==y?_e(f):y(f,l||"",d);yn(s)?s.setAttribute(o,d,E,a):a?o.setAttributeNS(a,d,E):o.setAttribute(d,E)}}(o[11],y,f,s.value,a,l,d)}function Ig(s,o,a,l,d,f){const y=f[o];if(null!==y){const E=l.setInput;for(let b=0;b<y.length;){const A=y[b++],R=y[b++],F=y[b++];null!==E?l.setInput(a,F,A,R):a[R]=F}}}function qE(s,o){let a=null,l=0;for(;l<o.length;){const d=o[l];if(0!==d)if(5!==d){if("number"==typeof d)break;s.hasOwnProperty(d)&&(null===a&&(a=[]),a.push(d,s[d],o[l+1])),l+=2}else l+=2;else l+=4}return a}function ry(s,o,a,l){return new Array(s,!0,!1,o,null,0,l,a,null,null)}function iy(s,o){const a=pr(o,s);if(Bi(a)){const l=a[1];80&a[2]?ku(l,a,l.template,a[8]):a[5]>0&&lf(a)}}function lf(s){for(let l=Kh(s);null!==l;l=ug(l))for(let d=10;d<l.length;d++){const f=l[d];if(1024&f[2]){const y=f[1];ku(y,f,y.template,f[8])}else f[5]>0&&lf(f)}const a=s[1].components;if(null!==a)for(let l=0;l<a.length;l++){const d=pr(a[l],s);Bi(d)&&d[5]>0&&lf(d)}}function sy(s,o){const a=pr(o,s),l=a[1];(function bg(s,o){for(let a=o.length;a<s.blueprint.length;a++)o.push(s.blueprint[a])})(l,a),Hl(l,a,a[8])}function Ou(s,o){return s[13]?s[14][4]=o:s[13]=o,s[14]=o,o}function Cg(s){for(;s;){s[2]|=64;const o=Zh(s);if(wh(s)&&!o)return s;s=o}return null}function vd(s,o,a){const l=o[10];l.begin&&l.begin();try{ku(s,o,s.template,a)}catch(d){throw Fu(o,d),d}finally{l.end&&l.end()}}function Tg(s){!function cf(s){for(let o=0;o<s.components.length;o++){const a=s.components[o],l=y_(a),d=l[1];Zr(d,l,d.template,a)}}(s[8])}function Dg(s,o,a){Il(0),o(s,a)}const df=(()=>Promise.resolve(null))();function oy(s){return s[7]||(s[7]=[])}function hf(s){return s.cleanup||(s.cleanup=[])}function Fu(s,o){const a=s[9],l=a?a.get(sg,null):null;l&&l.handleError(o)}function Sg(s,o,a,l,d){for(let f=0;f<a.length;){const y=a[f++],E=a[f++],b=o[y],A=s.data[y];null!==A.setInput?A.setInput(b,d,l,E):b[E]=d}}function qa(s,o,a){const l=function Ys(s,o){return gn(o[s])}(o,s);!function I_(s,o,a){yn(s)?s.setValue(o,a):o.textContent=a}(s[11],l,a)}function wd(s,o,a){let l=a?s.styles:null,d=a?s.classes:null,f=0;if(null!==o)for(let y=0;y<o.length;y++){const E=o[y];"number"==typeof E?f=E:1==f?d=ve(d,E):2==f&&(l=ve(l,E+": "+o[++y]+";"))}a?s.styles=l:s.stylesWithoutHost=l,a?s.classes=d:s.classesWithoutHost=d}const Ag=new Rn("INJECTOR",-1);class JE{get(o,a=Qo){if(a===Qo){const l=new Error(`NullInjectorError: No provider for ${le(o)}!`);throw l.name="NullInjectorError",l}return a}}const Za=new Rn("Set Injector scope."),vs={},xg={};let Cd;function ff(){return void 0===Cd&&(Cd=new JE),Cd}function uy(s,o=null,a=null,l){const d=$n(s,o,a,l);return d._resolveInjectorDefTypes(),d}function $n(s,o=null,a=null,l){return new Rg(s,a,o||ff(),l)}class Rg{constructor(o,a,l,d=null){this.parent=l,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const f=[];a&&ni(a,E=>this.processProvider(E,o,a)),ni([o],E=>this.processInjectorType(E,[],f)),this.records.set(Ag,Dd(void 0,this));const y=this.records.get(Za);this.scope=null!=y?y.value:null,this.source=d||("object"==typeof o?null:le(o))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(o=>o.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(o,a=Qo,l=ft.Default){this.assertNotDestroyed();const d=J(this),f=tn(void 0);try{if(!(l&ft.SkipSelf)){let E=this.records.get(o);if(void 0===E){const b=function XE(s){return"function"==typeof s||"object"==typeof s&&s instanceof Rn}(o)&&In(o);E=b&&this.injectableDefInScope(b)?Dd(ly(o),vs):null,this.records.set(o,E)}if(null!=E)return this.hydrate(o,E)}return(l&ft.Self?ff():this.parent).get(o,a=l&ft.Optional&&a===Qo?null:a)}catch(y){if("NullInjectorError"===y.name){if((y[go]=y[go]||[]).unshift(le(o)),d)throw y;return function Wr(s,o,a,l){const d=s[go];throw o[T]&&d.unshift(o[T]),s.message=function Nn(s,o,a,l=null){s=s&&"\n"===s.charAt(0)&&"\u0275"==s.charAt(1)?s.substr(2):s;let d=le(o);if(Array.isArray(o))d=o.map(le).join(" -> ");else if("object"==typeof o){let f=[];for(let y in o)if(o.hasOwnProperty(y)){let E=o[y];f.push(y+":"+("string"==typeof E?JSON.stringify(E):le(E)))}d=`{${f.join(", ")}}`}return`${a}${l?"("+l+")":""}[${d}]: ${s.replace(xl,"\n  ")}`}("\n"+s.message,d,a,l),s.ngTokenPath=d,s[go]=null,s}(y,o,"R3InjectorError",this.source)}throw y}finally{tn(f),J(d)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(o=>this.get(o))}toString(){const o=[];return this.records.forEach((l,d)=>o.push(le(d))),`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Ue(205,!1)}processInjectorType(o,a,l){if(!(o=se(o)))return!1;let d=Fi(o);const f=null==d&&o.ngModule||void 0,y=void 0===f?o:f,E=-1!==l.indexOf(y);if(void 0!==f&&(d=Fi(f)),null==d)return!1;if(null!=d.imports&&!E){let R;l.push(y);try{ni(d.imports,F=>{this.processInjectorType(F,a,l)&&(void 0===R&&(R=[]),R.push(F))})}finally{}if(void 0!==R)for(let F=0;F<R.length;F++){const{ngModule:H,providers:te}=R[F];ni(te,Te=>this.processProvider(Te,H,te||V))}}this.injectorDefTypes.add(y);const b=hi(y)||(()=>new y);this.records.set(y,Dd(b,vs));const A=d.providers;if(null!=A&&!E){const R=o;ni(A,F=>this.processProvider(F,R,A))}return void 0!==f&&void 0!==o.providers}processProvider(o,a,l){let d=Sd(o=se(o))?o:se(o&&o.provide);const f=function pf(s,o,a){return cy(s)?Dd(void 0,s.useValue):Dd(function Td(s,o,a){let l;if(Sd(s)){const d=se(s);return hi(d)||ly(d)}if(cy(s))l=()=>se(s.useValue);else if(function gT(s){return!(!s||!s.useFactory)}(s))l=()=>s.useFactory(...Et(s.deps||[]));else if(function pT(s){return!(!s||!s.useExisting)}(s))l=()=>xe(se(s.useExisting));else{const d=se(s&&(s.useClass||s.provide));if(!function gf(s){return!!s.deps}(s))return hi(d)||ly(d);l=()=>new d(...Et(s.deps))}return l}(s),vs)}(o);if(Sd(o)||!0!==o.multi)this.records.get(d);else{let y=this.records.get(d);y||(y=Dd(void 0,vs,!0),y.factory=()=>Et(y.multi),this.records.set(d,y)),d=o,y.multi.push(o)}this.records.set(d,f)}hydrate(o,a){return a.value===vs&&(a.value=xg,a.value=a.factory()),"object"==typeof a.value&&a.value&&function Lu(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(a.value)&&this.onDestroy.add(a.value),a.value}injectableDefInScope(o){if(!o.providedIn)return!1;const a=se(o.providedIn);return"string"==typeof a?"any"===a||a===this.scope:this.injectorDefTypes.has(a)}}function ly(s){const o=In(s),a=null!==o?o.factory:hi(s);if(null!==a)return a;if(s instanceof Rn)throw new Ue(204,!1);if(s instanceof Function)return function fT(s){const o=s.length;if(o>0)throw function co(s,o){const a=[];for(let l=0;l<s;l++)a.push(o);return a}(o,"?"),new Ue(204,!1);const a=function Ar(s){const o=s&&(s[ai]||s[qn]);if(o){const a=function Dn(s){if(s.hasOwnProperty("name"))return s.name;const o=(""+s).match(/^function\s*([^\s(]+)/);return null===o?"":o[1]}(s);return console.warn(`DEPRECATED: DI is instantiating a token "${a}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${a}" class.`),o}return null}(s);return null!==a?()=>a.factory(s):()=>new s}(s);throw new Ue(204,!1)}function Dd(s,o,a=!1){return{factory:s,value:o,multi:a?[]:void 0}}function cy(s){return null!==s&&"object"==typeof s&&M in s}function Sd(s){return"function"==typeof s}let bo=(()=>{class s{static create(a,l){var d;if(Array.isArray(a))return uy({name:""},l,a,"");{const f=null!==(d=a.name)&&void 0!==d?d:"";return uy({name:f},a.parent,a.providers,f)}}}return s.THROW_IF_NOT_FOUND=Qo,s.NULL=new JE,s.\u0275prov=en({token:s,providedIn:"any",factory:()=>xe(Ag)}),s.__NG_ELEMENT_ID__=-1,s})();function wT(s,o){Pa(y_(s)[1],Un())}let Uu=null;function ql(){if(!Uu){const s=$t.Symbol;if(s&&s.iterator)Uu=s.iterator;else{const o=Object.getOwnPropertyNames(Map.prototype);for(let a=0;a<o.length;++a){const l=o[a];"entries"!==l&&"size"!==l&&Map.prototype[l]===Map.prototype.entries&&(Uu=l)}}}return Uu}function Vu(s){return!!xd(s)&&(Array.isArray(s)||!(s instanceof Map)&&ql()in s)}function xd(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function Dr(s,o,a){return!Object.is(s[o],a)&&(s[o]=a,!0)}function vf(s,o,a,l){const d=Me();return Dr(d,ji(),o)&&(Ht(),Io(Vn(),d,s,o,a,l)),vf}function Ya(s,o,a,l){return Dr(s,ji(),a)?o+_e(a)+l:Mt}function Iy(s,o,a,l,d,f,y,E){const b=Me(),A=Ht(),R=s+20,F=A.firstCreatePass?function bT(s,o,a,l,d,f,y,E,b){const A=o.consts,R=$l(o,s,4,y||null,ei(A,E));md(o,a,R,ei(A,b)),Pa(o,R);const F=R.tViews=af(2,R,l,d,f,o.directiveRegistry,o.pipeRegistry,null,o.schemas,A);return null!==o.queries&&(o.queries.template(o,R),F.queries=o.queries.embeddedTView(R)),R}(R,A,b,o,a,l,d,f,y):A.data[R];$r(F,!1);const H=b[11].createComment("");cg(A,b,H,F),pi(H,b),Ou(b,b[R]=ry(H,b,H,F)),Ds(F)&&of(A,b,F),null!=y&&Y_(b,F,E)}function wf(s){return function us(s,o){return s[o]}(function zc(){return pt.lFrame.contextLView}(),20+s)}function sa(s,o=ft.Default){const a=Me();return null===a?xe(s,o):zo(Un(),a,se(s),o)}function yw(){throw new Error("invalid")}function Er(s,o,a){const l=Me();return Dr(l,ji(),o)&&xi(Ht(),Vn(),l,s,o,l[11],a,!1),Er}function Ty(s,o,a,l,d){const y=d?"class":"style";Sg(s,a,o.inputs[y],y,l)}function Hn(s,o,a,l){const d=Me(),f=Ht(),y=20+s,E=d[11],b=d[y]=b_(E,o,function Kc(){return pt.lFrame.currentNamespace}()),A=f.firstCreatePass?function Hu(s,o,a,l,d,f,y){const E=o.consts,A=$l(o,s,2,d,ei(E,f));return md(o,a,A,ei(E,y)),null!==A.attrs&&wd(A,A.attrs,!1),null!==A.mergedAttrs&&wd(A,A.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,A),A}(y,f,d,0,o,a,l):f.data[y];$r(A,!0);const R=A.mergedAttrs;null!==R&&st(E,b,R);const F=A.classes;null!==F&&O_(E,b,F);const H=A.styles;return null!==H&&yE(E,b,H),64!=(64&A.flags)&&cg(f,d,b,A),0===function Ca(){return pt.lFrame.elementDepthCount}()&&pi(b,d),function Hc(){pt.lFrame.elementDepthCount++}(),Ds(A)&&(of(f,d,A),function sf(s,o,a){if(Pc(o)){const d=o.directiveEnd;for(let f=o.directiveStart;f<d;f++){const y=s.data[f];y.contentQueries&&y.contentQueries(1,a[f],f)}}}(f,A,d)),null!==l&&Y_(d,A),Hn}function oa(){let s=Un();yl()?function vl(){pt.lFrame.isParent=!1}():(s=s.parent,$r(s,!1));const o=s;!function Ta(){pt.lFrame.elementDepthCount--}();const a=Ht();return a.firstCreatePass&&(Pa(a,s),Pc(s)&&a.queries.elementEnd(s)),null!=o.classesWithoutHost&&function xh(s){return 0!=(16&s.flags)}(o)&&Ty(a,o,Me(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function Hp(s){return 0!=(32&s.flags)}(o)&&Ty(a,o,Me(),o.stylesWithoutHost,!1),oa}function Cf(s,o,a,l){return Hn(s,o,a,l),oa(),Cf}function kd(){return Me()}function $g(s){return!!s&&"function"==typeof s.then}function Qe(s){return!!s&&"function"==typeof s.subscribe}const Qa=Qe;function Od(s,o,a,l){const d=Me(),f=Ht(),y=Un();return function Fd(s,o,a,l,d,f,y,E){const b=Ds(l),R=s.firstCreatePass&&hf(s),F=o[8],H=oy(o);let te=!0;if(3&l.type||E){const Je=fr(l,o),ut=E?E(Je):Je,Ee=H.length,_t=E?Qt=>E(gn(Qt[l.index])):l.index;if(yn(a)){let Qt=null;if(!E&&b&&(Qt=function aa(s,o,a,l){const d=s.cleanup;if(null!=d)for(let f=0;f<d.length-1;f+=2){const y=d[f];if(y===a&&d[f+1]===l){const E=o[7],b=d[f+2];return E.length>b?E[b]:null}"string"==typeof y&&(f+=2)}return null}(s,o,d,l.index)),null!==Qt)(Qt.__ngLastListenerFn__||Qt).__ngNextListenerFn__=f,Qt.__ngLastListenerFn__=f,te=!1;else{f=Hg(l,o,F,f,!1);const It=a.listen(ut,d,f);H.push(f,It),R&&R.push(d,_t,Ee,Ee+1)}}else f=Hg(l,o,F,f,!0),ut.addEventListener(d,f,y),H.push(f),R&&R.push(d,_t,Ee,y)}else f=Hg(l,o,F,f,!1);const Te=l.outputs;let Be;if(te&&null!==Te&&(Be=Te[d])){const Je=Be.length;if(Je)for(let ut=0;ut<Je;ut+=2){const Ji=o[Be[ut]][Be[ut+1]].subscribe(f),Dc=H.length;H.push(f,Ji),R&&R.push(d,l.index,Dc,-(Dc+1))}}}(f,d,d[11],y,s,o,!!a,l),Od}function Ja(s,o,a,l){try{return!1!==a(l)}catch(d){return Fu(s,d),!1}}function Hg(s,o,a,l,d){return function f(y){if(y===Function)return l;const E=2&s.flags?pr(s.index,o):o;0==(32&o[2])&&Cg(E);let b=Ja(o,0,l,y),A=f.__ngNextListenerFn__;for(;A;)b=Ja(o,0,A,y)&&b,A=A.__ngNextListenerFn__;return d&&!1===b&&(y.preventDefault(),y.returnValue=!1),b}}function rc(s=1){return function $i(s){return(pt.lFrame.contextLView=function Dh(s,o){for(;s>0;)o=o[15],s--;return o}(s,pt.lFrame.contextLView))[8]}(s)}function sc(s,o,a){return Wg(s,"",o,"",a),sc}function Wg(s,o,a,l,d){const f=Me(),y=Ya(f,o,a,l);return y!==Mt&&xi(Ht(),Vn(),f,s,y,f[11],d,!1),Wg}function Rw(s,o=""){const a=Me(),l=Ht(),d=s+20,f=l.firstCreatePass?$l(l,d,1,o,null):l.data[d],y=a[d]=function w_(s,o){return yn(s)?s.createText(o):s.createTextNode(o)}(a[11],o);cg(l,a,y,f),$r(f,!1)}function Mf(s){return Vd("",s,""),Mf}function Vd(s,o,a){const l=Me(),d=Ya(l,s,o,a);return d!==Mt&&qa(l,gr(),d),Vd}const So=void 0;var zw=["en",[["a","p"],["AM","PM"],So],[["AM","PM"],So,So],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],So,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],So,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",So,"{1} 'at' {0}",So],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function dc(s){const a=Math.floor(Math.abs(s)),l=s.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===l?1:5}];let hc={};function fc(s){const o=function Zw(s){return s.toLowerCase().replace(/_/g,"-")}(s);let a=Ir(o);if(a)return a;const l=o.split("-")[0];if(a=Ir(l),a)return a;if("en"===l)return zw;throw new Error(`Missing locale data for the locale "${s}".`)}function qw(s){return fc(s)[yt.PluralCase]}function Ir(s){return s in hc||(hc[s]=$t.ng&&$t.ng.common&&$t.ng.common.locales&&$t.ng.common.locales[s]),hc[s]}var yt=(()=>((yt=yt||{})[yt.LocaleId=0]="LocaleId",yt[yt.DayPeriodsFormat=1]="DayPeriodsFormat",yt[yt.DayPeriodsStandalone=2]="DayPeriodsStandalone",yt[yt.DaysFormat=3]="DaysFormat",yt[yt.DaysStandalone=4]="DaysStandalone",yt[yt.MonthsFormat=5]="MonthsFormat",yt[yt.MonthsStandalone=6]="MonthsStandalone",yt[yt.Eras=7]="Eras",yt[yt.FirstDayOfWeek=8]="FirstDayOfWeek",yt[yt.WeekendRange=9]="WeekendRange",yt[yt.DateFormat=10]="DateFormat",yt[yt.TimeFormat=11]="TimeFormat",yt[yt.DateTimeFormat=12]="DateTimeFormat",yt[yt.NumberSymbols=13]="NumberSymbols",yt[yt.NumberFormats=14]="NumberFormats",yt[yt.CurrencyCode=15]="CurrencyCode",yt[yt.CurrencySymbol=16]="CurrencySymbol",yt[yt.CurrencyName=17]="CurrencyName",yt[yt.Currencies=18]="Currencies",yt[yt.Directionality=19]="Directionality",yt[yt.PluralCase=20]="PluralCase",yt[yt.ExtraData=21]="ExtraData",yt))();const Pi="en-US";let mn=Pi;class iv{}class th{resolveComponentFactory(o){throw function rm(s){const o=Error(`No component factory found for ${le(s)}. Did you add it to @NgModule.entryComponents?`);return o.ngComponent=s,o}(o)}}let Qu=(()=>{class s{}return s.NULL=new th,s})();function hI(){return Ju(Un(),Me())}function Ju(s,o){return new yc(fr(s,o))}let yc=(()=>{class s{constructor(a){this.nativeElement=a}}return s.__NG_ELEMENT_ID__=hI,s})();function fI(s){return s instanceof yc?s.nativeElement:s}class sv{}let pI=(()=>{class s{}return s.__NG_ELEMENT_ID__=()=>function jf(){const s=Me(),a=pr(Un().index,s);return function ov(s){return s[11]}(Ei(a)?a:s)}(),s})(),vc=(()=>{class s{}return s.\u0275prov=en({token:s,providedIn:"root",factory:()=>null}),s})();class gI{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const av=new gI("13.3.6"),uv={};function im(s,o,a,l,d=!1){for(;null!==a;){const f=o[a.index];if(null!==f&&l.push(gn(f)),ci(f))for(let E=10;E<f.length;E++){const b=f[E],A=b[1].firstChild;null!==A&&im(b[1],b,A,l)}const y=a.type;if(8&y)im(s,o,a.child,l);else if(32&y){const E=og(a,o);let b;for(;b=E();)l.push(b)}else if(16&y){const E=mE(o,a);if(Array.isArray(E))l.push(...E);else{const b=Zh(o[16]);im(b[1],b,E,l,!0)}}a=d?a.projectionNext:a.next}return l}class $f{constructor(o,a){this._lView=o,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const o=this._lView,a=o[1];return im(a,o,a.firstChild,[])}get context(){return this._lView[8]}set context(o){this._lView[8]=o}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[3];if(ci(o)){const a=o[8],l=a?a.indexOf(this):-1;l>-1&&(T_(o,l),Yo(a,l))}this._attachedToViewContainer=!1}D_(this._lView[1],this._lView)}onDestroy(o){jE(this._lView[1],this._lView,null,o)}markForCheck(){Cg(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){vd(this._lView[1],this._lView,this.context)}checkNoChanges(){!function YE(s,o,a){Uo(!0);try{vd(s,o,a)}finally{Uo(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Ue(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function uE(s,o){dg(s,o,o[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new Ue(902,"");this._appRef=o}}class Hf extends $f{constructor(o){super(o),this._view=o}detectChanges(){Tg(this._view)}checkNoChanges(){!function QE(s){Uo(!0);try{Tg(s)}finally{Uo(!1)}}(this._view)}get context(){return null}}class Xu extends Qu{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const a=lt(o);return new lv(a,this.ngModule)}}function el(s){const o=[];for(let a in s)s.hasOwnProperty(a)&&o.push({propName:s[a],templateName:a});return o}class lv extends iv{constructor(o,a){super(),this.componentDef=o,this.ngModule=a,this.componentType=o.type,this.selector=function U_(s){return s.map(tT).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!a}get inputs(){return el(this.componentDef.inputs)}get outputs(){return el(this.componentDef.outputs)}create(o,a,l,d){const f=(d=d||this.ngModule)?function mD(s,o){return{get:(a,l,d)=>{const f=s.get(a,uv,d);return f!==uv||l===uv?f:o.get(a,l,d)}}}(o,d.injector):o,y=f.get(sv,wa),E=f.get(vc,null),b=y.createRenderer(null,this.componentDef),A=this.componentDef.selectors[0][0]||"div",R=l?function yg(s,o,a){if(yn(s))return s.selectRootElement(o,a===jt.ShadowDom);let l="string"==typeof o?s.querySelector(o):o;return l.textContent="",l}(b,l,this.componentDef.encapsulation):b_(y.createRenderer(null,this.componentDef),A,function mI(s){const o=s.toLowerCase();return"svg"===o?"svg":"math"===o?"math":null}(A)),F=this.componentDef.onPush?576:528,H=function iw(s,o){return{components:[],scheduler:s||zC,clean:df,playerHandler:o||null,flags:0}}(),te=af(0,null,null,1,0,null,null,null,null,null),Te=jl(null,te,H,F,null,null,y,b,E,f);let Be,Je;Js(Te);try{const ut=function vr(s,o,a,l,d,f){const y=a[1];a[20]=s;const b=$l(y,20,2,"#host",null),A=b.mergedAttrs=o.hostAttrs;null!==A&&(wd(b,A,!0),null!==s&&(st(d,s,A),null!==b.classes&&O_(d,s,b.classes),null!==b.styles&&yE(d,s,b.styles)));const R=l.createRenderer(s,o),F=jl(a,UE(o),null,o.onPush?64:16,a[20],b,l,R,f||null,null);return y.firstCreatePass&&(ti(xn(b,a),y,o.type),ty(y,b),yd(b,a.length,1)),Ou(a,F),a[20]=F}(R,this.componentDef,Te,y,b);if(R)if(l)st(b,R,["ng-version",av.full]);else{const{attrs:Ee,classes:_t}=function nT(s){const o=[],a=[];let l=1,d=2;for(;l<s.length;){let f=s[l];if("string"==typeof f)2===d?""!==f&&o.push(f,s[++l]):8===d&&a.push(f);else{if(!wo(d))break;d=f}l++}return{attrs:o,classes:a}}(this.componentDef.selectors[0]);Ee&&st(b,R,Ee),_t&&_t.length>0&&O_(b,R,_t.join(" "))}if(Je=Ln(te,20),void 0!==a){const Ee=Je.projection=[];for(let _t=0;_t<this.ngContentSelectors.length;_t++){const Qt=a[_t];Ee.push(null!=Qt?Array.from(Qt):null)}}Be=function gy(s,o,a,l,d){const f=a[1],y=function HE(s,o,a){const l=Un();s.firstCreatePass&&(a.providersResolver&&a.providersResolver(a),ny(s,l,o,Pu(s,o,1,null),a));const d=Ua(o,s,l.directiveStart,l);pi(d,o);const f=fr(l,o);return f&&pi(f,o),d}(f,a,o);if(l.components.push(y),s[8]=y,d&&d.forEach(b=>b(y,o)),o.contentQueries){const b=Un();o.contentQueries(1,y,b.directiveStart)}const E=Un();return!f.firstCreatePass||null===o.hostBindings&&null===o.hostAttrs||(cs(E.index),WE(a[1],E,0,E.directiveStart,E.directiveEnd,o),zE(o,y)),y}(ut,this.componentDef,Te,H,[wT]),Hl(te,Te,null)}finally{Vo()}return new _D(this.componentType,Be,Ju(Je,Te),Te,Je)}}class _D extends class gD{}{constructor(o,a,l,d,f){super(),this.location=l,this._rootLView=d,this._tNode=f,this.instance=a,this.hostView=this.changeDetectorRef=new Hf(d),this.componentType=o}get injector(){return new ao(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}class ca{}class Wf{}const eu=new Map;class tu extends ca{constructor(o,a){super(),this._parent=a,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new Xu(this);const l=Lt(o);this._bootstrapComponents=Eo(l.bootstrap),this._r3Injector=$n(o,a,[{provide:ca,useValue:this},{provide:Qu,useValue:this.componentFactoryResolver}],le(o)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(o)}get(o,a=bo.THROW_IF_NOT_FOUND,l=ft.Default){return o===bo||o===ca||o===Ag?this:this._r3Injector.get(o,a,l)}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class tl extends Wf{constructor(o){super(),this.moduleType=o,null!==Lt(o)&&function yI(s){const o=new Set;!function a(l){const d=Lt(l,!0),f=d.id;null!==f&&(function Oi(s,o,a){if(o&&o!==a)throw new Error(`Duplicate module registered for ${s} - ${le(o)} vs ${le(o.name)}`)}(f,eu.get(f),l),eu.set(f,l));const y=Eo(d.imports);for(const E of y)o.has(E)||(o.add(E),a(E))}(s)}(o)}create(o){return new tu(this.moduleType,o)}}function Zf(s){return o=>{setTimeout(s,void 0,o)}}const Qi=class gv extends g.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,a,l){var d,f,y;let E=o,b=a||(()=>null),A=l;if(o&&"object"==typeof o){const F=o;E=null===(d=F.next)||void 0===d?void 0:d.bind(F),b=null===(f=F.error)||void 0===f?void 0:f.bind(F),A=null===(y=F.complete)||void 0===y?void 0:y.bind(F)}this.__isAsync&&(b=Zf(b),E&&(E=Zf(E)),A&&(A=Zf(A)));const R=super.subscribe({next:E,error:b,complete:A});return o instanceof U.w0&&o.add(R),R}};function om(){return this._results[ql()]()}class Kf{constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=ql(),l=Kf.prototype;l[a]||(l[a]=om)}get changes(){return this._changes||(this._changes=new Qi)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,a){return this._results.reduce(o,a)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,a){const l=this;l.dirty=!1;const d=Or(o);(this._changesDetected=!function Ph(s,o,a){if(s.length!==o.length)return!1;for(let l=0;l<s.length;l++){let d=s[l],f=o[l];if(a&&(d=a(d),f=a(f)),f!==d)return!1}return!0}(l._results,d,a))&&(l._results=d,l.length=d.length,l.last=d[this.length-1],l.first=d[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let Yf=(()=>{class s{}return s.__NG_ELEMENT_ID__=CD,s})();const mv=Yf,AI=class extends mv{constructor(o,a,l){super(),this._declarationLView=o,this._declarationTContainer=a,this.elementRef=l}createEmbeddedView(o){const a=this._declarationTContainer.tViews,l=jl(this._declarationLView,a,o,16,null,a.declTNode,null,null,null,null);l[17]=this._declarationLView[this._declarationTContainer.index];const f=this._declarationLView[19];return null!==f&&(l[19]=f.createEmbeddedView(a)),Hl(a,l,o),new $f(l)}};function CD(){return Qf(Un(),Me())}function Qf(s,o){return 4&s.type?new AI(o,s,Ju(s,o)):null}let Jf=(()=>{class s{}return s.__NG_ELEMENT_ID__=_v,s})();function _v(){return RI(Un(),Me())}const TD=Jf,yv=class extends TD{constructor(o,a,l){super(),this._lContainer=o,this._hostTNode=a,this._hostLView=l}get element(){return Ju(this._hostTNode,this._hostLView)}get injector(){return new ao(this._hostTNode,this._hostLView)}get parentInjector(){const o=ro(this._hostTNode,this._hostLView);if(jo(o)){const a=Ho(o,this._hostLView),l=$o(o);return new ao(a[1].data[l+8],a)}return new ao(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const a=xI(this._lContainer);return null!==a&&a[o]||null}get length(){return this._lContainer.length-10}createEmbeddedView(o,a,l){const d=o.createEmbeddedView(a||{});return this.insert(d,l),d}createComponent(o,a,l,d,f){const y=o&&!function ja(s){return"function"==typeof s}(o);let E;if(y)E=a;else{const F=a||{};E=F.index,l=F.injector,d=F.projectableNodes,f=F.ngModuleRef}const b=y?o:new lv(lt(o)),A=l||this.parentInjector;if(!f&&null==b.ngModule){const H=(y?A:this.parentInjector).get(ca,null);H&&(f=H)}const R=b.create(A,d,void 0,f);return this.insert(R.hostView,E),R}insert(o,a){const l=o._lView,d=l[1];if(function ml(s){return ci(s[3])}(l)){const R=this.indexOf(o);if(-1!==R)this.detach(R);else{const F=l[3],H=new yv(F,F[6],F[3]);H.detach(H.indexOf(o))}}const f=this._adjustIndex(a),y=this._lContainer;!function Yh(s,o,a,l){const d=10+l,f=a.length;l>0&&(a[d-1][4]=o),l<f-10?(o[4]=a[d],Ko(a,10+l,o)):(a.push(o),o[4]=null),o[3]=a;const y=o[17];null!==y&&a!==y&&function ld(s,o){const a=s[9];o[16]!==o[3][3][16]&&(s[2]=!0),null===a?s[9]=[o]:a.push(o)}(y,o);const E=o[19];null!==E&&E.insertView(s),o[2]|=128}(d,l,y,f);const E=M_(f,y),b=l[11],A=Qh(b,y[7]);return null!==A&&function QC(s,o,a,l,d,f){l[0]=d,l[6]=o,dg(s,l,a,1,d,f)}(d,y[6],b,l,A,E),o.attachToViewContainerRef(),Ko(am(y),f,o),o}move(o,a){return this.insert(o,a)}indexOf(o){const a=xI(this._lContainer);return null!==a?a.indexOf(o):-1}remove(o){const a=this._adjustIndex(o,-1),l=T_(this._lContainer,a);l&&(Yo(am(this._lContainer),a),D_(l[1],l))}detach(o){const a=this._adjustIndex(o,-1),l=T_(this._lContainer,a);return l&&null!=Yo(am(this._lContainer),a)?new $f(l):null}_adjustIndex(o,a=0){return null==o?this.length+a:o}};function xI(s){return s[8]}function am(s){return s[8]||(s[8]=[])}function RI(s,o){let a;const l=o[s.index];if(ci(l))a=l;else{let d;if(8&s.type)d=gn(l);else{const f=o[11];d=f.createComment("");const y=fr(s,o);ys(f,Qh(f,y),d,function eT(s,o){return yn(s)?s.nextSibling(o):o.nextSibling}(f,y),!1)}o[s.index]=a=ry(l,o,d,s),Ou(o,a)}return new yv(a,s,o)}class oh{constructor(o){this.queryList=o,this.matches=null}clone(){return new oh(this.queryList)}setDirty(){this.queryList.setDirty()}}class um{constructor(o=[]){this.queries=o}createEmbeddedView(o){const a=o.queries;if(null!==a){const l=null!==o.contentQueries?o.contentQueries[0]:a.length,d=[];for(let f=0;f<l;f++){const y=a.getByIndex(f);d.push(this.queries[y.indexInDeclarationView].clone())}return new um(d)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let a=0;a<this.queries.length;a++)null!==Cv(o,a).matches&&this.queries[a].setDirty()}}class vv{constructor(o,a,l=null){this.predicate=o,this.flags=a,this.read=l}}class lm{constructor(o=[]){this.queries=o}elementStart(o,a){for(let l=0;l<this.queries.length;l++)this.queries[l].elementStart(o,a)}elementEnd(o){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(o)}embeddedTView(o){let a=null;for(let l=0;l<this.length;l++){const d=null!==a?a.length:0,f=this.getByIndex(l).embeddedTView(o,d);f&&(f.indexInDeclarationView=l,null!==a?a.push(f):a=[f])}return null!==a?new lm(a):null}template(o,a){for(let l=0;l<this.queries.length;l++)this.queries[l].template(o,a)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class Ev{constructor(o,a=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(o,a){this.isApplyingToNode(a)&&this.matchTNode(o,a)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,a){this.elementStart(o,a)}embeddedTView(o,a){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,a),new Ev(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let l=o.parent;for(;null!==l&&8&l.type&&l.index!==a;)l=l.parent;return a===(null!==l?l.index:-1)}return this._appliesToNextNode}matchTNode(o,a){const l=this.metadata.predicate;if(Array.isArray(l))for(let d=0;d<l.length;d++){const f=l[d];this.matchTNodeWithReadOption(o,a,wv(a,f)),this.matchTNodeWithReadOption(o,a,La(a,o,f,!1,!1))}else l===Yf?4&a.type&&this.matchTNodeWithReadOption(o,a,-1):this.matchTNodeWithReadOption(o,a,La(a,o,l,!1,!1))}matchTNodeWithReadOption(o,a,l){if(null!==l){const d=this.metadata.read;if(null!==d)if(d===yc||d===Jf||d===Yf&&4&a.type)this.addMatch(a.index,-2);else{const f=La(a,o,d,!1,!1);null!==f&&this.addMatch(a.index,f)}else this.addMatch(a.index,l)}}addMatch(o,a){null===this.matches?this.matches=[o,a]:this.matches.push(o,a)}}function wv(s,o){const a=s.localNames;if(null!==a)for(let l=0;l<a.length;l+=2)if(a[l]===o)return a[l+1];return null}function Iv(s,o,a,l){return-1===a?function DD(s,o){return 11&s.type?Ju(s,o):4&s.type?Qf(s,o):null}(o,s):-2===a?function SD(s,o,a){return a===yc?Ju(o,s):a===Yf?Qf(o,s):a===Jf?RI(o,s):void 0}(s,o,l):Ua(s,s[1],a,o)}function NI(s,o,a,l){const d=o[19].queries[l];if(null===d.matches){const f=s.data,y=a.matches,E=[];for(let b=0;b<y.length;b+=2){const A=y[b];E.push(A<0?null:Iv(o,f[A],y[b+1],a.metadata.read))}d.matches=E}return d.matches}function Xf(s,o,a,l){const d=s.queries.getByIndex(a),f=d.matches;if(null!==f){const y=NI(s,o,d,a);for(let E=0;E<f.length;E+=2){const b=f[E];if(b>0)l.push(y[E/2]);else{const A=f[E+1],R=o[-b];for(let F=10;F<R.length;F++){const H=R[F];H[17]===H[3]&&Xf(H[1],H,A,l)}if(null!==R[9]){const F=R[9];for(let H=0;H<F.length;H++){const te=F[H];Xf(te[1],te,A,l)}}}}}return l}function Ur(s){const o=Me(),a=Ht(),l=Na();Il(l+1);const d=Cv(a,l);if(s.dirty&&Lo(o)===(2==(2&d.metadata.flags))){if(null===d.matches)s.reset([]);else{const f=d.crossesNgTemplate?Xf(a,o,l,[]):NI(a,o,d,l);s.reset(f,fI),s.notifyOnChanges()}return!0}return!1}function PI(s,o,a,l){const d=Ht();if(d.firstCreatePass){const f=Un();(function FI(s,o,a){null===s.queries&&(s.queries=new lm),s.queries.track(new Ev(o,a))})(d,new vv(o,a,l),f.index),function bv(s,o){const a=s.contentQueries||(s.contentQueries=[]);o!==(a.length?a[a.length-1]:-1)&&a.push(s.queries.length-1,o)}(d,s),2==(2&a)&&(d.staticContentQueries=!0)}!function OI(s,o,a){const l=new Kf(4==(4&a));jE(s,o,l,l.destroy),null===o[19]&&(o[19]=new um),o[19].queries.push(new oh(l))}(d,Me(),a)}function kI(){return function xD(s,o){return s[19].queries[o].queryList}(Me(),Na())}function Cv(s,o){return s.queries.getByIndex(o)}function Tv(s,o){return Qf(s,o)}function Em(...s){}const ZI=new Rn("Application Initializer");let up=(()=>{class s{constructor(a){this.appInits=a,this.resolve=Em,this.reject=Em,this.initialized=!1,this.done=!1,this.donePromise=new Promise((l,d)=>{this.resolve=l,this.reject=d})}runInitializers(){if(this.initialized)return;const a=[],l=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let d=0;d<this.appInits.length;d++){const f=this.appInits[d]();if($g(f))a.push(f);else if(Qa(f)){const y=new Promise((E,b)=>{f.subscribe({complete:E,error:b})});a.push(y)}}Promise.all(a).then(()=>{l()}).catch(d=>{this.reject(d)}),0===a.length&&l(),this.initialized=!0}}return s.\u0275fac=function(a){return new(a||s)(xe(ZI,8))},s.\u0275prov=en({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const Pv=new Rn("AppId",{providedIn:"root",factory:function wm(){return`${lp()}${lp()}${lp()}`}});function lp(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Cc=new Rn("Platform Initializer"),sl=new Rn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),Im=new Rn("appBootstrapListener");let ah=(()=>{class s{log(a){console.log(a)}warn(a){console.warn(a)}}return s.\u0275fac=function(a){return new(a||s)},s.\u0275prov=en({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();const ol=new Rn("LocaleId",{providedIn:"root",factory:()=>mt(ol,ft.Optional|ft.SkipSelf)||function YI(){return"undefined"!=typeof $localize&&$localize.locale||Pi}()}),VD=new Rn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class kv{constructor(o,a){this.ngModuleFactory=o,this.componentFactories=a}}let Ov=(()=>{class s{compileModuleSync(a){return new tl(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const l=this.compileModuleSync(a),f=Eo(Lt(a).declarations).reduce((y,E)=>{const b=lt(E);return b&&y.push(new lv(b)),y},[]);return new kv(l,f)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return s.\u0275fac=function(a){return new(a||s)},s.\u0275prov=en({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const Fv=(()=>Promise.resolve(0))();function dp(s){"undefined"==typeof Zone?Fv.then(()=>{s&&s.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",s)}class Ws{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:l=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Qi(!1),this.onMicrotaskEmpty=new Qi(!1),this.onStable=new Qi(!1),this.onError=new Qi(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const d=this;d._nesting=0,d._outer=d._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!l&&a,d.shouldCoalesceRunChangeDetection=l,d.lastRequestAnimationFrameId=-1,d.nativeRequestAnimationFrame=function jD(){let s=$t.requestAnimationFrame,o=$t.cancelAnimationFrame;if("undefined"!=typeof Zone&&s&&o){const a=s[Zone.__symbol__("OriginalDelegate")];a&&(s=a);const l=o[Zone.__symbol__("OriginalDelegate")];l&&(o=l)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function eb(s){const o=()=>{!function XI(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call($t,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,Cm(s),s.isCheckStableRunning=!0,bm(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),Cm(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,l,d,f,y,E)=>{try{return tb(s),a.invokeTask(d,f,y,E)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===f.type||s.shouldCoalesceRunChangeDetection)&&o(),nb(s)}},onInvoke:(a,l,d,f,y,E,b)=>{try{return tb(s),a.invoke(d,f,y,E,b)}finally{s.shouldCoalesceRunChangeDetection&&o(),nb(s)}},onHasTask:(a,l,d,f)=>{a.hasTask(d,f),l===d&&("microTask"==f.change?(s._hasPendingMicrotasks=f.microTask,Cm(s),bm(s)):"macroTask"==f.change&&(s.hasPendingMacrotasks=f.macroTask))},onHandleError:(a,l,d,f)=>(a.handleError(d,f),s.runOutsideAngular(()=>s.onError.emit(f)),!1)})}(d)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Ws.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Ws.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(o,a,l){return this._inner.run(o,a,l)}runTask(o,a,l,d){const f=this._inner,y=f.scheduleEventTask("NgZoneEvent: "+d,o,$D,Em,Em);try{return f.runTask(y,a,l)}finally{f.cancelTask(y)}}runGuarded(o,a,l){return this._inner.runGuarded(o,a,l)}runOutsideAngular(o){return this._outer.run(o)}}const $D={};function bm(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function Cm(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function tb(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function nb(s){s._nesting--,bm(s)}class HD{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Qi,this.onMicrotaskEmpty=new Qi,this.onStable=new Qi,this.onError=new Qi}run(o,a,l){return o.apply(a,l)}runGuarded(o,a,l){return o.apply(a,l)}runOutsideAngular(o){return o()}runTask(o,a,l,d){return o.apply(a,l)}}let rb=(()=>{class s{constructor(a){this._ngZone=a,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Ws.assertNotInAngularZone(),dp(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())dp(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(l=>!l.updateCb||!l.updateCb(a)||(clearTimeout(l.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,l,d){let f=-1;l&&l>0&&(f=setTimeout(()=>{this._callbacks=this._callbacks.filter(y=>y.timeoutId!==f),a(this._didWork,this.getPendingTasks())},l)),this._callbacks.push({doneCb:a,timeoutId:f,updateCb:d})}whenStable(a,l,d){if(d&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,l,d),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(a,l,d){return[]}}return s.\u0275fac=function(a){return new(a||s)(xe(Ws))},s.\u0275prov=en({token:s,factory:s.\u0275fac}),s})(),Lv=(()=>{class s{constructor(){this._applications=new Map,Bv.addToWindow(this)}registerApplication(a,l){this._applications.set(a,l)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,l=!0){return Bv.findTestabilityInTree(this,a,l)}}return s.\u0275fac=function(a){return new(a||s)},s.\u0275prov=en({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();class Uv{addToWindow(o){}findTestabilityInTree(o,a,l){return null}}function Vv(s){Bv=s}let Bv=new Uv,iu=null;const ib=new Rn("AllowMultipleToken"),Tm=new Rn("PlatformOnDestroy");class WD{constructor(o,a){this.name=o,this.token=a}}function ub(s,o,a=[]){const l=`Platform: ${o}`,d=new Rn(l);return(f=[])=>{let y=Hv();if(!y||y.injector.get(ib,!1)){const E=[...a,...f,{provide:d,useValue:!0}];s?s(E):function jv(s){if(iu&&!iu.get(ib,!1))throw new Ue(400,"");iu=s;const o=s.get(Dm),a=s.get(Cc,null);a&&a.forEach(l=>l())}(function zD(s=[],o){return bo.create({name:o,providers:[{provide:Za,useValue:"platform"},{provide:Tm,useValue:()=>iu=null},...s]})}(E,l))}return function $v(s){const o=Hv();if(!o)throw new Ue(401,"");return o}()}}function Hv(){var s;return null!==(s=null==iu?void 0:iu.get(Dm))&&void 0!==s?s:null}let Dm=(()=>{class s{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,l){const E=function Wv(s,o){let a;return a="noop"===s?new HD:("zone.js"===s?void 0:s)||new Ws({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==o?void 0:o.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==o?void 0:o.ngZoneRunCoalescing)}),a}(l?l.ngZone:void 0,{ngZoneEventCoalescing:l&&l.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:l&&l.ngZoneRunCoalescing||!1}),b=[{provide:Ws,useValue:E}];return E.run(()=>{const A=bo.create({providers:b,parent:this.injector,name:a.moduleType.name}),R=a.create(A),F=R.injector.get(sg,null);if(!F)throw new Ue(402,"");return E.runOutsideAngular(()=>{const H=E.onError.subscribe({next:te=>{F.handleError(te)}});R.onDestroy(()=>{hp(this._modules,R),H.unsubscribe()})}),function zv(s,o,a){try{const l=a();return $g(l)?l.catch(d=>{throw o.runOutsideAngular(()=>s.handleError(d)),d}):l}catch(l){throw o.runOutsideAngular(()=>s.handleError(l)),l}}(F,E,()=>{const H=R.injector.get(up);return H.runInitializers(),H.donePromise.then(()=>(function WT(s){Ft(s,"Expected localeId to be defined"),"string"==typeof s&&(mn=s.toLowerCase().replace(/_/g,"-"))}(R.injector.get(ol,Pi)||Pi),this._moduleDoBootstrap(R),R))})})}bootstrapModule(a,l=[]){const d=Tc({},l);return function sb(s,o,a){const l=new tl(a);return Promise.resolve(l)}(0,0,a).then(f=>this.bootstrapModuleFactory(f,d))}_moduleDoBootstrap(a){const l=a.injector.get(Sm);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(d=>l.bootstrap(d));else{if(!a.instance.ngDoBootstrap)throw new Ue(403,"");a.instance.ngDoBootstrap(l)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Ue(404,"");this._modules.slice().forEach(l=>l.destroy()),this._destroyListeners.forEach(l=>l());const a=this._injector.get(Tm,null);null==a||a(),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(a){return new(a||s)(xe(bo))},s.\u0275prov=en({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();function Tc(s,o){return Array.isArray(o)?o.reduce(Tc,s):Object.assign(Object.assign({},s),o)}let Sm=(()=>{class s{constructor(a,l,d,f){this._zone=a,this._injector=l,this._exceptionHandler=d,this._initStatus=f,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const y=new N.y(b=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{b.next(this._stable),b.complete()})}),E=new N.y(b=>{let A;this._zone.runOutsideAngular(()=>{A=this._zone.onStable.subscribe(()=>{Ws.assertNotInAngularZone(),dp(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,b.next(!0))})})});const R=this._zone.onUnstable.subscribe(()=>{Ws.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{b.next(!1)}))});return()=>{A.unsubscribe(),R.unsubscribe()}});this.isStable=(0,ae.T)(y,E.pipe((0,ue.B)()))}bootstrap(a,l){if(!this._initStatus.done)throw new Ue(405,"");let d;d=a instanceof iv?a:this._injector.get(Qu).resolveComponentFactory(a),this.componentTypes.push(d.componentType);const f=function ab(s){return s.isBoundToModule}(d)?void 0:this._injector.get(ca),E=d.create(bo.NULL,[],l||d.selector,f),b=E.location.nativeElement,A=E.injector.get(rb,null),R=A&&E.injector.get(Lv);return A&&R&&R.registerApplication(b,A),E.onDestroy(()=>{this.detachView(E.hostView),hp(this.components,E),R&&R.unregisterApplication(b)}),this._loadComponent(E),E}tick(){if(this._runningTick)throw new Ue(101,"");try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(a))}finally{this._runningTick=!1}}attachView(a){const l=a;this._views.push(l),l.attachToAppRef(this)}detachView(a){const l=a;hp(this._views,l),l.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a),this._injector.get(Im,[]).concat(this._bootstrapListeners).forEach(d=>d(a))}ngOnDestroy(){this._views.slice().forEach(a=>a.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return s.\u0275fac=function(a){return new(a||s)(xe(Ws),xe(bo),xe(sg),xe(up))},s.\u0275prov=en({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function hp(s,o){const a=s.indexOf(o);a>-1&&s.splice(a,1)}let da=!0,Am=!1;function GD(){return Am=!0,da}function qv(){if(Am)throw new Error("Cannot enable prod mode after platform setup.");da=!1}let qD=(()=>{class s{}return s.__NG_ELEMENT_ID__=Zv,s})();function Zv(s){return function ZD(s,o,a){if(cu(s)&&!a){const l=pr(s.index,o);return new $f(l,l)}return 47&s.type?new $f(o[16],o):null}(Un(),Me(),16==(16&s))}class _b{constructor(){}supports(o){return Vu(o)}create(o){return new yb(o)}}const JD=(s,o)=>o;class yb{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||JD}forEachItem(o){let a;for(a=this._itHead;null!==a;a=a._next)o(a)}forEachOperation(o){let a=this._itHead,l=this._removalsHead,d=0,f=null;for(;a||l;){const y=!l||a&&a.currentIndex<km(l,d,f)?a:l,E=km(y,d,f),b=y.currentIndex;if(y===l)d--,l=l._nextRemoved;else if(a=a._next,null==y.previousIndex)d++;else{f||(f=[]);const A=E-d,R=b-d;if(A!=R){for(let H=0;H<A;H++){const te=H<f.length?f[H]:f[H]=0,Te=te+H;R<=Te&&Te<A&&(f[H]=te+1)}f[y.previousIndex]=R-A}}E!==b&&o(y,E,b)}}forEachPreviousItem(o){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachMovedItem(o){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}forEachIdentityChange(o){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)o(a)}diff(o){if(null==o&&(o=[]),!Vu(o))throw new Ue(900,"");return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let d,f,y,a=this._itHead,l=!1;if(Array.isArray(o)){this.length=o.length;for(let E=0;E<this.length;E++)f=o[E],y=this._trackByFn(E,f),null!==a&&Object.is(a.trackById,y)?(l&&(a=this._verifyReinsertion(a,f,y,E)),Object.is(a.item,f)||this._addIdentityChange(a,f)):(a=this._mismatch(a,f,y,E),l=!0),a=a._next}else d=0,function vy(s,o){if(Array.isArray(s))for(let a=0;a<s.length;a++)o(s[a]);else{const a=s[ql()]();let l;for(;!(l=a.next()).done;)o(l.value)}}(o,E=>{y=this._trackByFn(d,E),null!==a&&Object.is(a.trackById,y)?(l&&(a=this._verifyReinsertion(a,E,y,d)),Object.is(a.item,E)||this._addIdentityChange(a,E)):(a=this._mismatch(a,E,y,d),l=!0),a=a._next,d++}),this.length=d;return this._truncate(a),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,a,l,d){let f;return null===o?f=this._itTail:(f=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._reinsertAfter(o,f,d)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(l,d))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._moveAfter(o,f,d)):o=this._addAfter(new Xv(a,l),f,d),o}_verifyReinsertion(o,a,l,d){let f=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null);return null!==f?o=this._reinsertAfter(f,o._prev,d):o.currentIndex!=d&&(o.currentIndex=d,this._addToMoves(o,d)),o}_truncate(o){for(;null!==o;){const a=o._next;this._addToRemovals(this._unlink(o)),o=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,a,l){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const d=o._prevRemoved,f=o._nextRemoved;return null===d?this._removalsHead=f:d._nextRemoved=f,null===f?this._removalsTail=d:f._prevRemoved=d,this._insertAfter(o,a,l),this._addToMoves(o,l),o}_moveAfter(o,a,l){return this._unlink(o),this._insertAfter(o,a,l),this._addToMoves(o,l),o}_addAfter(o,a,l){return this._insertAfter(o,a,l),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,a,l){const d=null===a?this._itHead:a._next;return o._next=d,o._prev=a,null===d?this._itTail=o:d._prev=o,null===a?this._itHead=o:a._next=o,null===this._linkedRecords&&(this._linkedRecords=new Pm),this._linkedRecords.put(o),o.currentIndex=l,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const a=o._prev,l=o._next;return null===a?this._itHead=l:a._next=l,null===l?this._itTail=a:l._prev=a,o}_addToMoves(o,a){return o.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Pm),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,a){return o.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class Xv{constructor(o,a){this.item=o,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class vb{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,a){let l;for(l=this._head;null!==l;l=l._nextDup)if((null===a||a<=l.currentIndex)&&Object.is(l.trackById,o))return l;return null}remove(o){const a=o._prevDup,l=o._nextDup;return null===a?this._head=l:a._nextDup=l,null===l?this._tail=a:l._prevDup=a,null===this._head}}class Pm{constructor(){this.map=new Map}put(o){const a=o.trackById;let l=this.map.get(a);l||(l=new vb,this.map.set(a,l)),l.add(o)}get(o,a){const d=this.map.get(o);return d?d.get(o,a):null}remove(o){const a=o.trackById;return this.map.get(a).remove(o)&&this.map.delete(a),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function km(s,o,a){const l=s.previousIndex;if(null===l)return l;let d=0;return a&&l<a.length&&(d=a[l]),l+o+d}class Om{constructor(){}supports(o){return o instanceof Map||xd(o)}create(){return new Fm}}class Fm{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let a;for(a=this._mapHead;null!==a;a=a._next)o(a)}forEachPreviousItem(o){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)o(a)}forEachChangedItem(o){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}diff(o){if(o){if(!(o instanceof Map||xd(o)))throw new Ue(900,"")}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(o,(l,d)=>{if(a&&a.key===d)this._maybeAddToChanges(a,l),this._appendAfter=a,a=a._next;else{const f=this._getOrCreateRecordForKey(d,l);a=this._insertBeforeOrAppend(a,f)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let l=a;null!==l;l=l._nextRemoved)l===this._mapHead&&(this._mapHead=null),this._records.delete(l.key),l._nextRemoved=l._next,l.previousValue=l.currentValue,l.currentValue=null,l._prev=null,l._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,a){if(o){const l=o._prev;return a._next=o,a._prev=l,o._prev=a,l&&(l._next=a),o===this._mapHead&&(this._mapHead=a),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(o,a){if(this._records.has(o)){const d=this._records.get(o);this._maybeAddToChanges(d,a);const f=d._prev,y=d._next;return f&&(f._next=y),y&&(y._prev=f),d._next=null,d._prev=null,d}const l=new e0(o);return this._records.set(o,l),l.currentValue=a,this._addToAdditions(l),l}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,a){Object.is(a,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=a,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,a){o instanceof Map?o.forEach(a):Object.keys(o).forEach(l=>a(o[l],l))}}class e0{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function t0(){return new pp([new _b])}let pp=(()=>{class s{constructor(a){this.factories=a}static create(a,l){if(null!=l){const d=l.factories.slice();a=a.concat(d)}return new s(a)}static extend(a){return{provide:s,useFactory:l=>s.create(a,l||t0()),deps:[[s,new Ti,new ms]]}}find(a){const l=this.factories.find(d=>d.supports(a));if(null!=l)return l;throw new Ue(901,"")}}return s.\u0275prov=en({token:s,providedIn:"root",factory:t0}),s})();function Lm(){return new al([new Om])}let al=(()=>{class s{constructor(a){this.factories=a}static create(a,l){if(l){const d=l.factories.slice();a=a.concat(d)}return new s(a)}static extend(a){return{provide:s,useFactory:l=>s.create(a,l||Lm()),deps:[[s,new Ti,new ms]]}}find(a){const l=this.factories.find(f=>f.supports(a));if(l)return l;throw new Ue(901,"")}}return s.\u0275prov=en({token:s,providedIn:"root",factory:Lm}),s})();const Eb=ub(null,"core",[]);let tS=(()=>{class s{constructor(a){}}return s.\u0275fac=function(a){return new(a||s)(xe(Sm))},s.\u0275mod=ce({type:s}),s.\u0275inj=Yt({}),s})()},3942:(nt,De,k)=>{k.d(De,{Z:()=>Ue});var g=k(2090),U=k(4859),N=k(9681),ae=k(1877);class ue{constructor(_e,Se){this._delegate=_e,this.firebase=Se,(0,N._addComponent)(_e,new U.wA("app-compat",()=>this,"PUBLIC")),this.container=_e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(_e){this._delegate.automaticDataCollectionEnabled=_e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(_e=>{this._delegate.checkDestroyed(),_e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,N.deleteApp)(this._delegate)))}_getService(_e,Se=N._DEFAULT_ENTRY_NAME){var ze;this._delegate.checkDestroyed();const We=this._delegate.container.getProvider(_e);return!We.isInitialized()&&"EXPLICIT"===(null===(ze=We.getComponent())||void 0===ze?void 0:ze.instantiationMode)&&We.initialize(),We.getImmediate({identifier:Se})}_removeServiceInstance(_e,Se=N._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(_e).clearInstance(Se)}_addComponent(_e){(0,N._addComponent)(this._delegate,_e)}_addOrOverwriteComponent(_e){(0,N._addOrOverwriteComponent)(this._delegate,_e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const pe=new g.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),W=function ve(){const He=function le(He){const _e={},Se={__esModule:!0,initializeApp:function Pe(ne,fe={}){const Ce=N.initializeApp(ne,fe);if((0,g.r3)(_e,Ce.name))return _e[Ce.name];const K=new He(Ce,Se);return _e[Ce.name]=K,K},app:We,registerVersion:N.registerVersion,setLogLevel:N.setLogLevel,onLog:N.onLog,apps:null,SDK_VERSION:N.SDK_VERSION,INTERNAL:{registerComponent:function be(ne){const fe=ne.name,Ce=fe.replace("-compat","");if(N._registerComponent(ne)&&"PUBLIC"===ne.type){const K=(re=We())=>{if("function"!=typeof re[Ce])throw pe.create("invalid-app-argument",{appName:fe});return re[Ce]()};void 0!==ne.serviceProps&&(0,g.ZB)(K,ne.serviceProps),Se[Ce]=K,He.prototype[Ce]=function(...re){return this._getService.bind(this,fe).apply(this,ne.multipleInstances?re:[])}}return"PUBLIC"===ne.type?Se[Ce]:null},removeApp:function ze(ne){delete _e[ne]},useAsService:function qe(ne,fe){return"serverAuth"===fe?null:fe},modularAPIs:N}};function We(ne){if(!(0,g.r3)(_e,ne=ne||N._DEFAULT_ENTRY_NAME))throw pe.create("no-app",{appName:ne});return _e[ne]}return Se.default=Se,Object.defineProperty(Se,"apps",{get:function ke(){return Object.keys(_e).map(ne=>_e[ne])}}),We.App=He,Se}(ue);return He.INTERNAL=Object.assign(Object.assign({},He.INTERNAL),{createFirebaseNamespace:ve,extendNamespace:function _e(Se){(0,g.ZB)(He,Se)},createSubscribe:g.ne,ErrorFactory:g.LL,deepExtend:g.ZB}),He}(),j=new ae.Yd("@firebase/app-compat");if((0,g.jU)()&&void 0!==self.firebase){j.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const He=self.firebase.SDK_VERSION;He&&He.indexOf("LITE")>=0&&j.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Ue=W;!function Ne(He){(0,N.registerVersion)("@firebase/app-compat","0.1.25",He)}()},9681:(nt,De,k)=>{k.r(De),k.d(De,{FirebaseError:()=>ae.ZR,SDK_VERSION:()=>ai,_DEFAULT_ENTRY_NAME:()=>Ft,_addComponent:()=>hn,_addOrOverwriteComponent:()=>en,_apps:()=>dn,_clearComponents:()=>yi,_components:()=>kn,_getProvider:()=>Yt,_registerComponent:()=>Bt,_removeServiceInstance:()=>In,deleteApp:()=>ft,getApp:()=>qn,getApps:()=>Li,initializeApp:()=>vi,onLog:()=>tn,registerVersion:()=>En,setLogLevel:()=>xr});var g=k(5861),U=k(4859),N=k(1877),ae=k(2090),ue=k(8766);class ye{constructor(ee){this.container=ee}getPlatformInfoString(){return this.container.getProviders().map(Fe=>{if(function pe($){const ee=$.getComponent();return"VERSION"===(null==ee?void 0:ee.type)}(Fe)){const Xe=Fe.getImmediate();return`${Xe.library}/${Xe.version}`}return null}).filter(Fe=>Fe).join(" ")}}const le="@firebase/app",W=new N.Yd("@firebase/app"),Ft="[DEFAULT]",Ye={[le]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},dn=new Map,kn=new Map;function hn($,ee){try{$.container.addComponent(ee)}catch(Fe){W.debug(`Component ${ee.name} failed to register with FirebaseApp ${$.name}`,Fe)}}function en($,ee){$.container.addOrOverwriteComponent(ee)}function Bt($){const ee=$.name;if(kn.has(ee))return W.debug(`There were multiple attempts to register component ${ee}.`),!1;kn.set(ee,$);for(const Fe of dn.values())hn(Fe,$);return!0}function Yt($,ee){const Fe=$.container.getProvider("heartbeat").getImmediate({optional:!0});return Fe&&Fe.triggerHeartbeat(),$.container.getProvider(ee)}function In($,ee,Fe=Ft){Yt($,ee).clearInstance(Fe)}function yi(){kn.clear()}const Dn=new ae.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class Fi{constructor(ee,Fe,Xe){this._isDeleted=!1,this._options=Object.assign({},ee),this._config=Object.assign({},Fe),this._name=Fe.name,this._automaticDataCollectionEnabled=Fe.automaticDataCollectionEnabled,this._container=Xe,this.container.addComponent(new U.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ee){this.checkDestroyed(),this._automaticDataCollectionEnabled=ee}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(ee){this._isDeleted=ee}checkDestroyed(){if(this.isDeleted)throw Dn.create("app-deleted",{appName:this._name})}}const ai="9.8.1";function vi($,ee={}){"object"!=typeof ee&&(ee={name:ee});const Fe=Object.assign({name:Ft,automaticDataCollectionEnabled:!1},ee),Xe=Fe.name;if("string"!=typeof Xe||!Xe)throw Dn.create("bad-app-name",{appName:String(Xe)});const ht=dn.get(Xe);if(ht){if((0,ae.vZ)($,ht.options)&&(0,ae.vZ)(Fe,ht.config))return ht;throw Dn.create("duplicate-app",{appName:Xe})}const St=new U.H0(Xe);for(const vt of kn.values())St.addComponent(vt);const an=new Fi($,Fe,St);return dn.set(Xe,an),an}function qn($=Ft){const ee=dn.get($);if(!ee)throw Dn.create("no-app",{appName:$});return ee}function Li(){return Array.from(dn.values())}function ft($){return Vr.apply(this,arguments)}function Vr(){return(Vr=(0,g.Z)(function*($){const ee=$.name;dn.has(ee)&&(dn.delete(ee),yield Promise.all($.container.getProviders().map(Fe=>Fe.delete())),$.isDeleted=!0)})).apply(this,arguments)}function En($,ee,Fe){var Xe;let ht=null!==(Xe=Ye[$])&&void 0!==Xe?Xe:$;Fe&&(ht+=`-${Fe}`);const St=ht.match(/\s|\//),an=ee.match(/\s|\//);if(St||an){const vt=[`Unable to register library "${ht}" with version "${ee}":`];return St&&vt.push(`library name "${ht}" contains illegal characters (whitespace or "/")`),St&&an&&vt.push("and"),an&&vt.push(`version name "${ee}" contains illegal characters (whitespace or "/")`),void W.warn(vt.join(" "))}Bt(new U.wA(`${ht}-version`,()=>({library:ht,version:ee}),"VERSION"))}function tn($,ee){if(null!==$&&"function"!=typeof $)throw Dn.create("invalid-log-argument");(0,N.Am)($,ee)}function xr($){(0,N.Ub)($)}const bn="firebase-heartbeat-store";let cr=null;function ts(){return cr||(cr=(0,ue.X3)("firebase-heartbeat-database",1,{upgrade:($,ee)=>{0===ee&&$.createObjectStore(bn)}}).catch($=>{throw Dn.create("storage-open",{originalErrorMessage:$.message})})),cr}function ct(){return(ct=(0,g.Z)(function*($){try{return(yield ts()).transaction(bn).objectStore(bn).get(li($))}catch(ee){throw Dn.create("storage-get",{originalErrorMessage:ee.message})}})).apply(this,arguments)}function it($,ee){return ui.apply(this,arguments)}function ui(){return(ui=(0,g.Z)(function*($,ee){try{const Xe=(yield ts()).transaction(bn,"readwrite");return yield Xe.objectStore(bn).put(ee,li($)),Xe.done}catch(Fe){throw Dn.create("storage-set",{originalErrorMessage:Fe.message})}})).apply(this,arguments)}function li($){return`${$.name}!${$.options.appId}`}class On{constructor(ee){this.container=ee,this._heartbeatsCache=null;const Fe=this.container.getProvider("app").getImmediate();this._storage=new z(Fe),this._heartbeatsCachePromise=this._storage.read().then(Xe=>(this._heartbeatsCache=Xe,Xe))}triggerHeartbeat(){var ee=this;return(0,g.Z)(function*(){const Xe=ee.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),ht=fn();if(null===ee._heartbeatsCache&&(ee._heartbeatsCache=yield ee._heartbeatsCachePromise),ee._heartbeatsCache.lastSentHeartbeatDate!==ht&&!ee._heartbeatsCache.heartbeats.some(St=>St.date===ht))return ee._heartbeatsCache.heartbeats.push({date:ht,agent:Xe}),ee._heartbeatsCache.heartbeats=ee._heartbeatsCache.heartbeats.filter(St=>{const an=new Date(St.date).valueOf();return Date.now()-an<=2592e6}),ee._storage.overwrite(ee._heartbeatsCache)})()}getHeartbeatsHeader(){var ee=this;return(0,g.Z)(function*(){if(null===ee._heartbeatsCache&&(yield ee._heartbeatsCachePromise),null===ee._heartbeatsCache||0===ee._heartbeatsCache.heartbeats.length)return"";const Fe=fn(),{heartbeatsToSend:Xe,unsentEntries:ht}=function V($,ee=1024){const Fe=[];let Xe=$.slice();for(const ht of $){const St=Fe.find(an=>an.agent===ht.agent);if(St){if(St.dates.push(ht.date),q(Fe)>ee){St.dates.pop();break}}else if(Fe.push({agent:ht.agent,dates:[ht.date]}),q(Fe)>ee){Fe.pop();break}Xe=Xe.slice(1)}return{heartbeatsToSend:Fe,unsentEntries:Xe}}(ee._heartbeatsCache.heartbeats),St=(0,ae.L)(JSON.stringify({version:2,heartbeats:Xe}));return ee._heartbeatsCache.lastSentHeartbeatDate=Fe,ht.length>0?(ee._heartbeatsCache.heartbeats=ht,yield ee._storage.overwrite(ee._heartbeatsCache)):(ee._heartbeatsCache.heartbeats=[],ee._storage.overwrite(ee._heartbeatsCache)),St})()}}function fn(){return(new Date).toISOString().substring(0,10)}class z{constructor(ee){this.app=ee,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,g.Z)(function*(){return!!(0,ae.hl)()&&(0,ae.eu)().then(()=>!0).catch(()=>!1)})()}read(){var ee=this;return(0,g.Z)(function*(){return(yield ee._canUseIndexedDBPromise)&&(yield function jt($){return ct.apply(this,arguments)}(ee.app))||{heartbeats:[]}})()}overwrite(ee){var Fe=this;return(0,g.Z)(function*(){var Xe;if(yield Fe._canUseIndexedDBPromise){const St=yield Fe.read();return it(Fe.app,{lastSentHeartbeatDate:null!==(Xe=ee.lastSentHeartbeatDate)&&void 0!==Xe?Xe:St.lastSentHeartbeatDate,heartbeats:ee.heartbeats})}})()}add(ee){var Fe=this;return(0,g.Z)(function*(){var Xe;if(yield Fe._canUseIndexedDBPromise){const St=yield Fe.read();return it(Fe.app,{lastSentHeartbeatDate:null!==(Xe=ee.lastSentHeartbeatDate)&&void 0!==Xe?Xe:St.lastSentHeartbeatDate,heartbeats:[...St.heartbeats,...ee.heartbeats]})}})()}}function q($){return(0,ae.L)(JSON.stringify({version:2,heartbeats:$})).length}!function Ie($){Bt(new U.wA("platform-logger",ee=>new ye(ee),"PRIVATE")),Bt(new U.wA("heartbeat",ee=>new On(ee),"PRIVATE")),En(le,"0.7.24",$),En(le,"0.7.24","esm2017"),En("fire-js","")}("")},4859:(nt,De,k)=>{k.d(De,{H0:()=>le,wA:()=>N});var g=k(5861),U=k(2090);class N{constructor(W,j,se){this.name=W,this.instanceFactory=j,this.type=se,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(W){return this.instantiationMode=W,this}setMultipleInstances(W){return this.multipleInstances=W,this}setServiceProps(W){return this.serviceProps=W,this}setInstanceCreatedCallback(W){return this.onInstanceCreated=W,this}}const ae="[DEFAULT]";class ue{constructor(W,j){this.name=W,this.container=j,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(W){const j=this.normalizeInstanceIdentifier(W);if(!this.instancesDeferred.has(j)){const se=new U.BH;if(this.instancesDeferred.set(j,se),this.isInitialized(j)||this.shouldAutoInitialize())try{const Ge=this.getOrInitializeService({instanceIdentifier:j});Ge&&se.resolve(Ge)}catch(Ge){}}return this.instancesDeferred.get(j).promise}getImmediate(W){var j;const se=this.normalizeInstanceIdentifier(null==W?void 0:W.identifier),Ge=null!==(j=null==W?void 0:W.optional)&&void 0!==j&&j;if(!this.isInitialized(se)&&!this.shouldAutoInitialize()){if(Ge)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:se})}catch(Ne){if(Ge)return null;throw Ne}}getComponent(){return this.component}setComponent(W){if(W.name!==this.name)throw Error(`Mismatching Component ${W.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=W,this.shouldAutoInitialize()){if(function pe(ve){return"EAGER"===ve.instantiationMode}(W))try{this.getOrInitializeService({instanceIdentifier:ae})}catch(j){}for(const[j,se]of this.instancesDeferred.entries()){const Ge=this.normalizeInstanceIdentifier(j);try{const Ne=this.getOrInitializeService({instanceIdentifier:Ge});se.resolve(Ne)}catch(Ne){}}}}clearInstance(W=ae){this.instancesDeferred.delete(W),this.instancesOptions.delete(W),this.instances.delete(W)}delete(){var W=this;return(0,g.Z)(function*(){const j=Array.from(W.instances.values());yield Promise.all([...j.filter(se=>"INTERNAL"in se).map(se=>se.INTERNAL.delete()),...j.filter(se=>"_delete"in se).map(se=>se._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(W=ae){return this.instances.has(W)}getOptions(W=ae){return this.instancesOptions.get(W)||{}}initialize(W={}){const{options:j={}}=W,se=this.normalizeInstanceIdentifier(W.instanceIdentifier);if(this.isInitialized(se))throw Error(`${this.name}(${se}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Ge=this.getOrInitializeService({instanceIdentifier:se,options:j});for(const[Ne,Ue]of this.instancesDeferred.entries())se===this.normalizeInstanceIdentifier(Ne)&&Ue.resolve(Ge);return Ge}onInit(W,j){var se;const Ge=this.normalizeInstanceIdentifier(j),Ne=null!==(se=this.onInitCallbacks.get(Ge))&&void 0!==se?se:new Set;Ne.add(W),this.onInitCallbacks.set(Ge,Ne);const Ue=this.instances.get(Ge);return Ue&&W(Ue,Ge),()=>{Ne.delete(W)}}invokeOnInitCallbacks(W,j){const se=this.onInitCallbacks.get(j);if(se)for(const Ge of se)try{Ge(W,j)}catch(Ne){}}getOrInitializeService({instanceIdentifier:W,options:j={}}){let se=this.instances.get(W);if(!se&&this.component&&(se=this.component.instanceFactory(this.container,{instanceIdentifier:(ve=W,ve===ae?void 0:ve),options:j}),this.instances.set(W,se),this.instancesOptions.set(W,j),this.invokeOnInitCallbacks(se,W),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,W,se)}catch(Ge){}var ve;return se||null}normalizeInstanceIdentifier(W=ae){return this.component?this.component.multipleInstances?W:ae:W}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class le{constructor(W){this.name=W,this.providers=new Map}addComponent(W){const j=this.getProvider(W.name);if(j.isComponentSet())throw new Error(`Component ${W.name} has already been registered with ${this.name}`);j.setComponent(W)}addOrOverwriteComponent(W){this.getProvider(W.name).isComponentSet()&&this.providers.delete(W.name),this.addComponent(W)}getProvider(W){if(this.providers.has(W))return this.providers.get(W);const j=new ue(W,this);return this.providers.set(W,j),j}getProviders(){return Array.from(this.providers.values())}}},1877:(nt,De,k)=>{k.d(De,{Am:()=>ve,Ub:()=>le,Yd:()=>pe,in:()=>U});const g=[];var U=(()=>{return(W=U||(U={}))[W.DEBUG=0]="DEBUG",W[W.VERBOSE=1]="VERBOSE",W[W.INFO=2]="INFO",W[W.WARN=3]="WARN",W[W.ERROR=4]="ERROR",W[W.SILENT=5]="SILENT",U;var W})();const N={debug:U.DEBUG,verbose:U.VERBOSE,info:U.INFO,warn:U.WARN,error:U.ERROR,silent:U.SILENT},ae=U.INFO,ue={[U.DEBUG]:"log",[U.VERBOSE]:"log",[U.INFO]:"info",[U.WARN]:"warn",[U.ERROR]:"error"},ye=(W,j,...se)=>{if(j<W.logLevel)return;const Ge=(new Date).toISOString(),Ne=ue[j];if(!Ne)throw new Error(`Attempted to log a message with an invalid logType (value: ${j})`);console[Ne](`[${Ge}]  ${W.name}:`,...se)};class pe{constructor(j){this.name=j,this._logLevel=ae,this._logHandler=ye,this._userLogHandler=null,g.push(this)}get logLevel(){return this._logLevel}set logLevel(j){if(!(j in U))throw new TypeError(`Invalid value "${j}" assigned to \`logLevel\``);this._logLevel=j}setLogLevel(j){this._logLevel="string"==typeof j?N[j]:j}get logHandler(){return this._logHandler}set logHandler(j){if("function"!=typeof j)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=j}get userLogHandler(){return this._userLogHandler}set userLogHandler(j){this._userLogHandler=j}debug(...j){this._userLogHandler&&this._userLogHandler(this,U.DEBUG,...j),this._logHandler(this,U.DEBUG,...j)}log(...j){this._userLogHandler&&this._userLogHandler(this,U.VERBOSE,...j),this._logHandler(this,U.VERBOSE,...j)}info(...j){this._userLogHandler&&this._userLogHandler(this,U.INFO,...j),this._logHandler(this,U.INFO,...j)}warn(...j){this._userLogHandler&&this._userLogHandler(this,U.WARN,...j),this._logHandler(this,U.WARN,...j)}error(...j){this._userLogHandler&&this._userLogHandler(this,U.ERROR,...j),this._logHandler(this,U.ERROR,...j)}}function le(W){g.forEach(j=>{j.setLogLevel(W)})}function ve(W,j){for(const se of g){let Ge=null;j&&j.level&&(Ge=N[j.level]),se.userLogHandler=null===W?null:(Ne,Ue,...He)=>{const _e=He.map(Se=>{if(null==Se)return null;if("string"==typeof Se)return Se;if("number"==typeof Se||"boolean"==typeof Se)return Se.toString();if(Se instanceof Error)return Se.message;try{return JSON.stringify(Se)}catch(ze){return null}}).filter(Se=>Se).join(" ");Ue>=(null!=Ge?Ge:Ne.logLevel)&&W({level:U[Ue].toLowerCase(),message:_e,args:He,type:Ne.name})}}}},8766:(nt,De,k)=>{k.d(De,{Lj:()=>Pe,X3:()=>We});var g=k(5861);let N,ae;const pe=new WeakMap,le=new WeakMap,ve=new WeakMap,W=new WeakMap,j=new WeakMap;let Ne={get(fe,Ce,K){if(fe instanceof IDBTransaction){if("done"===Ce)return le.get(fe);if("objectStoreNames"===Ce)return fe.objectStoreNames||ve.get(fe);if("store"===Ce)return K.objectStoreNames[1]?void 0:K.objectStore(K.objectStoreNames[0])}return Se(fe[Ce])},set:(fe,Ce,K)=>(fe[Ce]=K,!0),has:(fe,Ce)=>fe instanceof IDBTransaction&&("done"===Ce||"store"===Ce)||Ce in fe};function _e(fe){return"function"==typeof fe?function He(fe){return fe!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function ye(){return ae||(ae=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(fe)?function(...Ce){return fe.apply(ze(this),Ce),Se(pe.get(this))}:function(...Ce){return Se(fe.apply(ze(this),Ce))}:function(Ce,...K){const re=fe.call(ze(this),Ce,...K);return ve.set(re,Ce.sort?Ce.sort():[Ce]),Se(re)}}(fe):(fe instanceof IDBTransaction&&function Ge(fe){if(le.has(fe))return;const Ce=new Promise((K,re)=>{const oe=()=>{fe.removeEventListener("complete",we),fe.removeEventListener("error",de),fe.removeEventListener("abort",de)},we=()=>{K(),oe()},de=()=>{re(fe.error||new DOMException("AbortError","AbortError")),oe()};fe.addEventListener("complete",we),fe.addEventListener("error",de),fe.addEventListener("abort",de)});le.set(fe,Ce)}(fe),((fe,Ce)=>Ce.some(K=>fe instanceof K))(fe,function ue(){return N||(N=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(fe,Ne):fe)}function Se(fe){if(fe instanceof IDBRequest)return function se(fe){const Ce=new Promise((K,re)=>{const oe=()=>{fe.removeEventListener("success",we),fe.removeEventListener("error",de)},we=()=>{K(Se(fe.result)),oe()},de=()=>{re(fe.error),oe()};fe.addEventListener("success",we),fe.addEventListener("error",de)});return Ce.then(K=>{K instanceof IDBCursor&&pe.set(K,fe)}).catch(()=>{}),j.set(Ce,fe),Ce}(fe);if(W.has(fe))return W.get(fe);const Ce=_e(fe);return Ce!==fe&&(W.set(fe,Ce),j.set(Ce,fe)),Ce}const ze=fe=>j.get(fe);function We(fe,Ce,{blocked:K,upgrade:re,blocking:oe,terminated:we}={}){const de=indexedDB.open(fe,Ce),Ve=Se(de);return re&&de.addEventListener("upgradeneeded",dt=>{re(Se(de.result),dt.oldVersion,dt.newVersion,Se(de.transaction))}),K&&de.addEventListener("blocked",()=>K()),Ve.then(dt=>{we&&dt.addEventListener("close",()=>we()),oe&&dt.addEventListener("versionchange",()=>oe())}).catch(()=>{}),Ve}function Pe(fe,{blocked:Ce}={}){const K=indexedDB.deleteDatabase(fe);return Ce&&K.addEventListener("blocked",()=>Ce()),Se(K).then(()=>{})}const ke=["get","getKey","getAll","getAllKeys","count"],be=["put","add","delete","clear"],qe=new Map;function ne(fe,Ce){if(!(fe instanceof IDBDatabase)||Ce in fe||"string"!=typeof Ce)return;if(qe.get(Ce))return qe.get(Ce);const K=Ce.replace(/FromIndex$/,""),re=Ce!==K,oe=be.includes(K);if(!(K in(re?IDBIndex:IDBObjectStore).prototype)||!oe&&!ke.includes(K))return;const we=function(){var de=(0,g.Z)(function*(Ve,...dt){const Kt=this.transaction(Ve,oe?"readwrite":"readonly");let Ft=Kt.store;return re&&(Ft=Ft.index(dt.shift())),(yield Promise.all([Ft[K](...dt),oe&&Kt.done]))[0]});return function(dt){return de.apply(this,arguments)}}();return qe.set(Ce,we),we}!function Ue(fe){Ne=fe(Ne)}(fe=>oP(sP({},fe),{get:(Ce,K,re)=>ne(Ce,K)||fe.get(Ce,K,re),has:(Ce,K)=>!!ne(Ce,K)||fe.has(Ce,K)}))},5861:(nt,De,k)=>{function g(N,ae,ue,ye,pe,le,ve){try{var W=N[le](ve),j=W.value}catch(se){return void ue(se)}W.done?ae(j):Promise.resolve(j).then(ye,pe)}function U(N){return function(){var ae=this,ue=arguments;return new Promise(function(ye,pe){var le=N.apply(ae,ue);function ve(j){g(le,ye,pe,ve,W,"next",j)}function W(j){g(le,ye,pe,ve,W,"throw",j)}ve(void 0)})}}k.d(De,{Z:()=>U})}},nt=>{nt(nt.s=5385)}]);